var Du=Object.defineProperty;var Bu=(y,p,i)=>p in y?Du(y,p,{enumerable:!0,configurable:!0,writable:!0,value:i}):y[p]=i;var Qt=(y,p,i)=>(Bu(y,typeof p!="symbol"?p+"":p,i),i);(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const f of e.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&m(f)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function m(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}})();function oe(){}function ko(y){return y()}function Na(){return Object.create(null)}function Ai(y){y.forEach(ko)}function Nu(y){return typeof y=="function"}function Ti(y,p){return y!=y?p==p:y!==p||y&&typeof y=="object"||typeof y=="function"}function wu(y){return Object.keys(y).length===0}function Gu(y,...p){if(y==null)return oe;const i=y.subscribe(...p);return i.unsubscribe?()=>i.unsubscribe():i}function Zs(y,p,i){y.$$.on_destroy.push(Gu(p,i))}function Uu(y,p,i){return y.set(i),p}function ct(y,p){y.appendChild(p)}function he(y,p,i){y.insertBefore(p,i||null)}function se(y){y.parentNode.removeChild(y)}function yt(y){return document.createElement(y)}function Be(y){return document.createTextNode(y)}function ue(){return Be(" ")}function qo(){return Be("")}function In(y,p,i,m){return y.addEventListener(p,i,m),()=>y.removeEventListener(p,i,m)}function At(y,p,i){i==null?y.removeAttribute(p):y.getAttribute(p)!==i&&y.setAttribute(p,i)}function Vu(y){return Array.from(y.childNodes)}function Lr(y,p){p=""+p,y.wholeText!==p&&(y.data=p)}function wa(y,p){y.value=p==null?"":p}function Yu(y,p,{bubbles:i=!1,cancelable:m=!1}={}){const t=document.createEvent("CustomEvent");return t.initCustomEvent(y,i,m,p),t}let Wi;function wi(y){Wi=y}function Or(){if(!Wi)throw new Error("Function called outside component initialization");return Wi}function zu(y){Or().$$.on_mount.push(y)}function Xu(y){Or().$$.on_destroy.push(y)}function Wu(){const y=Or();return(p,i,{cancelable:m=!1}={})=>{const t=y.$$.callbacks[p];if(t){const e=Yu(p,i,{cancelable:m});return t.slice().forEach(f=>{f.call(y,e)}),!e.defaultPrevented}return!0}}const Fi=[],Ga=[],Dn=[],Ua=[],Hu=Promise.resolve();let Js=!1;function bu(){Js||(Js=!0,Hu.then(_o))}function js(y){Dn.push(y)}const Is=new Set;let Cn=0;function _o(){const y=Wi;do{for(;Cn<Fi.length;){const p=Fi[Cn];Cn++,wi(p),Qu(p.$$)}for(wi(null),Fi.length=0,Cn=0;Ga.length;)Ga.pop()();for(let p=0;p<Dn.length;p+=1){const i=Dn[p];Is.has(i)||(Is.add(i),i())}Dn.length=0}while(Fi.length);for(;Ua.length;)Ua.pop()();Js=!1,Is.clear(),wi(y)}function Qu(y){if(y.fragment!==null){y.update(),Ai(y.before_update);const p=y.dirty;y.dirty=[-1],y.fragment&&y.fragment.p(y.ctx,p),y.after_update.forEach(js)}}const Bn=new Set;let Xe;function Fr(){Xe={r:0,c:[],p:Xe}}function Ir(){Xe.r||Ai(Xe.c),Xe=Xe.p}function ae(y,p){y&&y.i&&(Bn.delete(y),y.i(p))}function ce(y,p,i,m){if(y&&y.o){if(Bn.has(y))return;Bn.add(y),Xe.c.push(()=>{Bn.delete(y),m&&(i&&y.d(1),m())}),y.o(p)}else m&&m()}function is(y){y&&y.c()}function rn(y,p,i,m){const{fragment:t,on_mount:e,on_destroy:f,after_update:a}=y.$$;t&&t.m(p,i),m||js(()=>{const o=e.map(ko).filter(Nu);f?f.push(...o):Ai(o),y.$$.on_mount=[]}),a.forEach(js)}function an(y,p){const i=y.$$;i.fragment!==null&&(Ai(i.on_destroy),i.fragment&&i.fragment.d(p),i.on_destroy=i.fragment=null,i.ctx=[])}function Ku(y,p){y.$$.dirty[0]===-1&&(Fi.push(y),bu(),y.$$.dirty.fill(0)),y.$$.dirty[p/31|0]|=1<<p%31}function on(y,p,i,m,t,e,f,a=[-1]){const o=Wi;wi(y);const s=y.$$={fragment:null,ctx:null,props:e,update:oe,not_equal:t,bound:Na(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p.context||(o?o.$$.context:[])),callbacks:Na(),dirty:a,skip_bound:!1,root:p.target||o.$$.root};f&&f(s.root);let n=!1;if(s.ctx=i?i(y,p.props||{},(r,u,...h)=>{const l=h.length?h[0]:u;return s.ctx&&t(s.ctx[r],s.ctx[r]=l)&&(!s.skip_bound&&s.bound[r]&&s.bound[r](l),n&&Ku(y,r)),u}):[],s.update(),n=!0,Ai(s.before_update),s.fragment=m?m(s.ctx):!1,p.target){if(p.hydrate){const r=Vu(p.target);s.fragment&&s.fragment.l(r),r.forEach(se)}else s.fragment&&s.fragment.c();p.intro&&ae(y.$$.fragment),rn(y,p.target,p.anchor,p.customElement),_o()}wi(o)}class hn{$destroy(){an(this,1),this.$destroy=oe}$on(p,i){const m=this.$$.callbacks[p]||(this.$$.callbacks[p]=[]);return m.push(i),()=>{const t=m.indexOf(i);t!==-1&&m.splice(t,1)}}$set(p){this.$$set&&!wu(p)&&(this.$$.skip_bound=!0,this.$$set(p),this.$$.skip_bound=!1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=function(y){const p=[];let i=0;for(let m=0;m<y.length;m++){let t=y.charCodeAt(m);t<128?p[i++]=t:t<2048?(p[i++]=t>>6|192,p[i++]=t&63|128):(t&64512)===55296&&m+1<y.length&&(y.charCodeAt(m+1)&64512)===56320?(t=65536+((t&1023)<<10)+(y.charCodeAt(++m)&1023),p[i++]=t>>18|240,p[i++]=t>>12&63|128,p[i++]=t>>6&63|128,p[i++]=t&63|128):(p[i++]=t>>12|224,p[i++]=t>>6&63|128,p[i++]=t&63|128)}return p},$u=function(y){const p=[];let i=0,m=0;for(;i<y.length;){const t=y[i++];if(t<128)p[m++]=String.fromCharCode(t);else if(t>191&&t<224){const e=y[i++];p[m++]=String.fromCharCode((t&31)<<6|e&63)}else if(t>239&&t<365){const e=y[i++],f=y[i++],a=y[i++],o=((t&7)<<18|(e&63)<<12|(f&63)<<6|a&63)-65536;p[m++]=String.fromCharCode(55296+(o>>10)),p[m++]=String.fromCharCode(56320+(o&1023))}else{const e=y[i++],f=y[i++];p[m++]=String.fromCharCode((t&15)<<12|(e&63)<<6|f&63)}}return p.join("")},Zu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(y,p){if(!Array.isArray(y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=p?this.byteToCharMapWebSafe_:this.byteToCharMap_,m=[];for(let t=0;t<y.length;t+=3){const e=y[t],f=t+1<y.length,a=f?y[t+1]:0,o=t+2<y.length,s=o?y[t+2]:0,n=e>>2,r=(e&3)<<4|a>>4;let u=(a&15)<<2|s>>6,h=s&63;o||(h=64,f||(u=64)),m.push(i[n],i[r],i[u],i[h])}return m.join("")},encodeString(y,p){return this.HAS_NATIVE_SUPPORT&&!p?btoa(y):this.encodeByteArray(th(y),p)},decodeString(y,p){return this.HAS_NATIVE_SUPPORT&&!p?atob(y):$u(this.decodeStringToByteArray(y,p))},decodeStringToByteArray(y,p){this.init_();const i=p?this.charToByteMapWebSafe_:this.charToByteMap_,m=[];for(let t=0;t<y.length;){const e=i[y.charAt(t++)],a=t<y.length?i[y.charAt(t)]:0;++t;const s=t<y.length?i[y.charAt(t)]:64;++t;const r=t<y.length?i[y.charAt(t)]:64;if(++t,e==null||a==null||s==null||r==null)throw Error();const u=e<<2|a>>4;if(m.push(u),s!==64){const h=a<<4&240|s>>2;if(m.push(h),r!==64){const l=s<<6&192|r;m.push(l)}}}return m},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let y=0;y<this.ENCODED_VALS.length;y++)this.byteToCharMap_[y]=this.ENCODED_VALS.charAt(y),this.charToByteMap_[this.byteToCharMap_[y]]=y,this.byteToCharMapWebSafe_[y]=this.ENCODED_VALS_WEBSAFE.charAt(y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[y]]=y,y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(y)]=y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(y)]=y)}}},Ju=function(y){const p=th(y);return Zu.encodeByteArray(p,!0)},eh=function(y){return Ju(y).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((p,i)=>{this.resolve=p,this.reject=i})}wrapCallback(p){return(i,m)=>{i?this.reject(i):this.resolve(m),typeof p=="function"&&(this.promise.catch(()=>{}),p.length===1?p(i):p(i,m))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ku(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ns())}function qu(){const y=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof y=="object"&&y.id!==void 0}function _u(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tf(){return ns().indexOf("Electron/")>=0}function ef(){const y=ns();return y.indexOf("MSIE ")>=0||y.indexOf("Trident/")>=0}function nf(){return ns().indexOf("MSAppHost/")>=0}function sf(){return typeof indexedDB=="object"}function rf(){return new Promise((y,p)=>{try{let i=!0;const m="validate-browser-context-for-indexeddb-analytics-module",t=self.indexedDB.open(m);t.onsuccess=()=>{t.result.close(),i||self.indexedDB.deleteDatabase(m),y(!0)},t.onupgradeneeded=()=>{i=!1},t.onerror=()=>{var e;p(((e=t.error)===null||e===void 0?void 0:e.message)||"")}}catch(i){p(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="FirebaseError";class Ei extends Error{constructor(p,i,m){super(i),this.code=p,this.customData=m,this.name=af,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ih.prototype.create)}}class ih{constructor(p,i,m){this.service=p,this.serviceName=i,this.errors=m}create(p,...i){const m=i[0]||{},t=`${this.service}/${p}`,e=this.errors[p],f=e?of(e,m):"Error",a=`${this.serviceName}: ${f} (${t}).`;return new Ei(t,a,m)}}function of(y,p){return y.replace(hf,(i,m)=>{const t=p[m];return t!=null?String(t):`<${m}?>`})}const hf=/\{\$([^}]+)}/g;function ks(y,p){if(y===p)return!0;const i=Object.keys(y),m=Object.keys(p);for(const t of i){if(!m.includes(t))return!1;const e=y[t],f=p[t];if(Va(e)&&Va(f)){if(!ks(e,f))return!1}else if(e!==f)return!1}for(const t of m)if(!i.includes(t))return!1;return!0}function Va(y){return y!==null&&typeof y=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(y){return y&&y._delegate?y._delegate:y}class Hi{constructor(p,i,m){this.name=p,this.instanceFactory=i,this.type=m,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(p){return this.instantiationMode=p,this}setMultipleInstances(p){return this.multipleInstances=p,this}setServiceProps(p){return this.serviceProps=p,this}setInstanceCreatedCallback(p){return this.onInstanceCreated=p,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(p,i){this.name=p,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(p){const i=this.normalizeInstanceIdentifier(p);if(!this.instancesDeferred.has(i)){const m=new ju;if(this.instancesDeferred.set(i,m),this.isInitialized(i)||this.shouldAutoInitialize())try{const t=this.getOrInitializeService({instanceIdentifier:i});t&&m.resolve(t)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(p){var i;const m=this.normalizeInstanceIdentifier(p==null?void 0:p.identifier),t=(i=p==null?void 0:p.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(m)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:m})}catch(e){if(t)return null;throw e}else{if(t)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(p){if(p.name!==this.name)throw Error(`Mismatching Component ${p.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=p,!!this.shouldAutoInitialize()){if(ff(p))try{this.getOrInitializeService({instanceIdentifier:ze})}catch{}for(const[i,m]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(i);try{const e=this.getOrInitializeService({instanceIdentifier:t});m.resolve(e)}catch{}}}}clearInstance(p=ze){this.instancesDeferred.delete(p),this.instancesOptions.delete(p),this.instances.delete(p)}async delete(){const p=Array.from(this.instances.values());await Promise.all([...p.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...p.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(p=ze){return this.instances.has(p)}getOptions(p=ze){return this.instancesOptions.get(p)||{}}initialize(p={}){const{options:i={}}=p,m=this.normalizeInstanceIdentifier(p.instanceIdentifier);if(this.isInitialized(m))throw Error(`${this.name}(${m}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const t=this.getOrInitializeService({instanceIdentifier:m,options:i});for(const[e,f]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);m===a&&f.resolve(t)}return t}onInit(p,i){var m;const t=this.normalizeInstanceIdentifier(i),e=(m=this.onInitCallbacks.get(t))!==null&&m!==void 0?m:new Set;e.add(p),this.onInitCallbacks.set(t,e);const f=this.instances.get(t);return f&&p(f,t),()=>{e.delete(p)}}invokeOnInitCallbacks(p,i){const m=this.onInitCallbacks.get(i);if(!!m)for(const t of m)try{t(p,i)}catch{}}getOrInitializeService({instanceIdentifier:p,options:i={}}){let m=this.instances.get(p);if(!m&&this.component&&(m=this.component.instanceFactory(this.container,{instanceIdentifier:uf(p),options:i}),this.instances.set(p,m),this.instancesOptions.set(p,i),this.invokeOnInitCallbacks(m,p),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,p,m)}catch{}return m||null}normalizeInstanceIdentifier(p=ze){return this.component?this.component.multipleInstances?p:ze:p}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uf(y){return y===ze?void 0:y}function ff(y){return y.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(p){this.name=p,this.providers=new Map}addComponent(p){const i=this.getProvider(p.name);if(i.isComponentSet())throw new Error(`Component ${p.name} has already been registered with ${this.name}`);i.setComponent(p)}addOrOverwriteComponent(p){this.getProvider(p.name).isComponentSet()&&this.providers.delete(p.name),this.addComponent(p)}getProvider(p){if(this.providers.has(p))return this.providers.get(p);const i=new lf(p,this);return this.providers.set(p,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(y){y[y.DEBUG=0]="DEBUG",y[y.VERBOSE=1]="VERBOSE",y[y.INFO=2]="INFO",y[y.WARN=3]="WARN",y[y.ERROR=4]="ERROR",y[y.SILENT=5]="SILENT"})(Tt||(Tt={}));const cf={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},vf=Tt.INFO,pf={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},mf=(y,p,...i)=>{if(p<y.logLevel)return;const m=new Date().toISOString(),t=pf[p];if(t)console[t](`[${m}]  ${y.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${p})`)};class nh{constructor(p){this.name=p,this._logLevel=vf,this._logHandler=mf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(p){if(!(p in Tt))throw new TypeError(`Invalid value "${p}" assigned to \`logLevel\``);this._logLevel=p}setLogLevel(p){this._logLevel=typeof p=="string"?cf[p]:p}get logHandler(){return this._logHandler}set logHandler(p){if(typeof p!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=p}get userLogHandler(){return this._userLogHandler}set userLogHandler(p){this._userLogHandler=p}debug(...p){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...p),this._logHandler(this,Tt.DEBUG,...p)}log(...p){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...p),this._logHandler(this,Tt.VERBOSE,...p)}info(...p){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...p),this._logHandler(this,Tt.INFO,...p)}warn(...p){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...p),this._logHandler(this,Tt.WARN,...p)}error(...p){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...p),this._logHandler(this,Tt.ERROR,...p)}}const gf=(y,p)=>p.some(i=>y instanceof i);let Ya,za;function xf(){return Ya||(Ya=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yf(){return za||(za=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sh=new WeakMap,qs=new WeakMap,rh=new WeakMap,Ds=new WeakMap,Dr=new WeakMap;function Af(y){const p=new Promise((i,m)=>{const t=()=>{y.removeEventListener("success",e),y.removeEventListener("error",f)},e=()=>{i(Fe(y.result)),t()},f=()=>{m(y.error),t()};y.addEventListener("success",e),y.addEventListener("error",f)});return p.then(i=>{i instanceof IDBCursor&&sh.set(i,y)}).catch(()=>{}),Dr.set(p,y),p}function Tf(y){if(qs.has(y))return;const p=new Promise((i,m)=>{const t=()=>{y.removeEventListener("complete",e),y.removeEventListener("error",f),y.removeEventListener("abort",f)},e=()=>{i(),t()},f=()=>{m(y.error||new DOMException("AbortError","AbortError")),t()};y.addEventListener("complete",e),y.addEventListener("error",f),y.addEventListener("abort",f)});qs.set(y,p)}let _s={get(y,p,i){if(y instanceof IDBTransaction){if(p==="done")return qs.get(y);if(p==="objectStoreNames")return y.objectStoreNames||rh.get(y);if(p==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Fe(y[p])},set(y,p,i){return y[p]=i,!0},has(y,p){return y instanceof IDBTransaction&&(p==="done"||p==="store")?!0:p in y}};function Ef(y){_s=y(_s)}function Sf(y){return y===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(p,...i){const m=y.call(Bs(this),p,...i);return rh.set(m,p.sort?p.sort():[p]),Fe(m)}:yf().includes(y)?function(...p){return y.apply(Bs(this),p),Fe(sh.get(this))}:function(...p){return Fe(y.apply(Bs(this),p))}}function Cf(y){return typeof y=="function"?Sf(y):(y instanceof IDBTransaction&&Tf(y),gf(y,xf())?new Proxy(y,_s):y)}function Fe(y){if(y instanceof IDBRequest)return Af(y);if(Ds.has(y))return Ds.get(y);const p=Cf(y);return p!==y&&(Ds.set(y,p),Dr.set(p,y)),p}const Bs=y=>Dr.get(y);function Pf(y,p,{blocked:i,upgrade:m,blocking:t,terminated:e}={}){const f=indexedDB.open(y,p),a=Fe(f);return m&&f.addEventListener("upgradeneeded",o=>{m(Fe(f.result),o.oldVersion,o.newVersion,Fe(f.transaction))}),i&&f.addEventListener("blocked",()=>i()),a.then(o=>{e&&o.addEventListener("close",()=>e()),t&&o.addEventListener("versionchange",()=>t())}).catch(()=>{}),a}const Mf=["get","getKey","getAll","getAllKeys","count"],Rf=["put","add","delete","clear"],Ns=new Map;function Xa(y,p){if(!(y instanceof IDBDatabase&&!(p in y)&&typeof p=="string"))return;if(Ns.get(p))return Ns.get(p);const i=p.replace(/FromIndex$/,""),m=p!==i,t=Rf.includes(i);if(!(i in(m?IDBIndex:IDBObjectStore).prototype)||!(t||Mf.includes(i)))return;const e=async function(f,...a){const o=this.transaction(f,t?"readwrite":"readonly");let s=o.store;return m&&(s=s.index(a.shift())),(await Promise.all([s[i](...a),t&&o.done]))[0]};return Ns.set(p,e),e}Ef(y=>({...y,get:(p,i,m)=>Xa(p,i)||y.get(p,i,m),has:(p,i)=>!!Xa(p,i)||y.has(p,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(p){this.container=p}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Of(i)){const m=i.getImmediate();return`${m.library}/${m.version}`}else return null}).filter(i=>i).join(" ")}}function Of(y){const p=y.getComponent();return(p==null?void 0:p.type)==="VERSION"}const tr="@firebase/app",Wa="0.7.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze=new nh("@firebase/app"),Ff="@firebase/app-compat",If="@firebase/analytics-compat",Df="@firebase/analytics",Bf="@firebase/app-check-compat",Nf="@firebase/app-check",wf="@firebase/auth",Gf="@firebase/auth-compat",Uf="@firebase/database",Vf="@firebase/database-compat",Yf="@firebase/functions",zf="@firebase/functions-compat",Xf="@firebase/installations",Wf="@firebase/installations-compat",Hf="@firebase/messaging",bf="@firebase/messaging-compat",Qf="@firebase/performance",Kf="@firebase/performance-compat",$f="@firebase/remote-config",Zf="@firebase/remote-config-compat",Jf="@firebase/storage",jf="@firebase/storage-compat",kf="@firebase/firestore",qf="@firebase/firestore-compat",_f="firebase",td="9.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",ed={[tr]:"fire-core",[Ff]:"fire-core-compat",[Df]:"fire-analytics",[If]:"fire-analytics-compat",[Nf]:"fire-app-check",[Bf]:"fire-app-check-compat",[wf]:"fire-auth",[Gf]:"fire-auth-compat",[Uf]:"fire-rtdb",[Vf]:"fire-rtdb-compat",[Yf]:"fire-fn",[zf]:"fire-fn-compat",[Xf]:"fire-iid",[Wf]:"fire-iid-compat",[Hf]:"fire-fcm",[bf]:"fire-fcm-compat",[Qf]:"fire-perf",[Kf]:"fire-perf-compat",[$f]:"fire-rc",[Zf]:"fire-rc-compat",[Jf]:"fire-gcs",[jf]:"fire-gcs-compat",[kf]:"fire-fst",[qf]:"fire-fst-compat","fire-js":"fire-js",[_f]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Map,er=new Map;function id(y,p){try{y.container.addComponent(p)}catch(i){Ze.debug(`Component ${p.name} failed to register with FirebaseApp ${y.name}`,i)}}function Vn(y){const p=y.name;if(er.has(p))return Ze.debug(`There were multiple attempts to register component ${p}.`),!1;er.set(p,y);for(const i of bi.values())id(i,y);return!0}function nd(y,p){const i=y.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),y.container.getProvider(p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Je=new ih("app","Firebase",sd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(p,i,m){this._isDeleted=!1,this._options=Object.assign({},p),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=m,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(p){this.checkDestroyed(),this._automaticDataCollectionEnabled=p}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(p){this._isDeleted=p}checkDestroyed(){if(this.isDeleted)throw Je.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=td;function od(y,p={}){typeof p!="object"&&(p={name:p});const i=Object.assign({name:ah,automaticDataCollectionEnabled:!1},p),m=i.name;if(typeof m!="string"||!m)throw Je.create("bad-app-name",{appName:String(m)});const t=bi.get(m);if(t){if(ks(y,t.options)&&ks(i,t.config))return t;throw Je.create("duplicate-app",{appName:m})}const e=new df(m);for(const a of er.values())e.addComponent(a);const f=new rd(y,i,e);return bi.set(m,f),f}function hd(y=ah){const p=bi.get(y);if(!p)throw Je.create("no-app",{appName:y});return p}function ld(){return Array.from(bi.values())}function li(y,p,i){var m;let t=(m=ed[y])!==null&&m!==void 0?m:y;i&&(t+=`-${i}`);const e=t.match(/\s|\//),f=p.match(/\s|\//);if(e||f){const a=[`Unable to register library "${t}" with version "${p}":`];e&&a.push(`library name "${t}" contains illegal characters (whitespace or "/")`),e&&f&&a.push("and"),f&&a.push(`version name "${p}" contains illegal characters (whitespace or "/")`),Ze.warn(a.join(" "));return}Vn(new Hi(`${t}-version`,()=>({library:t,version:p}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="firebase-heartbeat-database",fd=1,Qi="firebase-heartbeat-store";let ws=null;function oh(){return ws||(ws=Pf(ud,fd,{upgrade:(y,p)=>{switch(p){case 0:y.createObjectStore(Qi)}}}).catch(y=>{throw Je.create("idb-open",{originalErrorMessage:y.message})})),ws}async function dd(y){var p;try{return(await oh()).transaction(Qi).objectStore(Qi).get(hh(y))}catch(i){if(i instanceof Ei)Ze.warn(i.message);else{const m=Je.create("idb-get",{originalErrorMessage:(p=i)===null||p===void 0?void 0:p.message});Ze.warn(m.message)}}}async function Ha(y,p){var i;try{const t=(await oh()).transaction(Qi,"readwrite");return await t.objectStore(Qi).put(p,hh(y)),t.done}catch(m){if(m instanceof Ei)Ze.warn(m.message);else{const t=Je.create("idb-set",{originalErrorMessage:(i=m)===null||i===void 0?void 0:i.message});Ze.warn(t.message)}}}function hh(y){return`${y.name}!${y.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=1024,vd=30*24*60*60*1e3;class pd{constructor(p){this.container=p,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new gd(i),this._heartbeatsCachePromise=this._storage.read().then(m=>(this._heartbeatsCache=m,m))}async triggerHeartbeat(){const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=ba();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(t=>t.date===m)))return this._heartbeatsCache.heartbeats.push({date:m,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=vd}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const p=ba(),{heartbeatsToSend:i,unsentEntries:m}=md(this._heartbeatsCache.heartbeats),t=eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=p,m.length>0?(this._heartbeatsCache.heartbeats=m,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),t}}function ba(){return new Date().toISOString().substring(0,10)}function md(y,p=cd){const i=[];let m=y.slice();for(const t of y){const e=i.find(f=>f.agent===t.agent);if(e){if(e.dates.push(t.date),Qa(i)>p){e.dates.pop();break}}else if(i.push({agent:t.agent,dates:[t.date]}),Qa(i)>p){i.pop();break}m=m.slice(1)}return{heartbeatsToSend:i,unsentEntries:m}}class gd{constructor(p){this.app=p,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sf()?rf().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await dd(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(p){var i;if(await this._canUseIndexedDBPromise){const t=await this.read();return Ha(this.app,{lastSentHeartbeatDate:(i=p.lastSentHeartbeatDate)!==null&&i!==void 0?i:t.lastSentHeartbeatDate,heartbeats:p.heartbeats})}else return}async add(p){var i;if(await this._canUseIndexedDBPromise){const t=await this.read();return Ha(this.app,{lastSentHeartbeatDate:(i=p.lastSentHeartbeatDate)!==null&&i!==void 0?i:t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...p.heartbeats]})}else return}}function Qa(y){return eh(JSON.stringify({version:2,heartbeats:y})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(y){Vn(new Hi("platform-logger",p=>new Lf(p),"PRIVATE")),Vn(new Hi("heartbeat",p=>new pd(p),"PRIVATE")),li(tr,Wa,y),li(tr,Wa,"esm2017"),li("fire-js","")}xd("");var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},et,Br=Br||{},lt=yd||self;function Yn(){}function ir(y){var p=typeof y;return p=p!="object"?p:y?Array.isArray(y)?"array":p:"null",p=="array"||p=="object"&&typeof y.length=="number"}function ln(y){var p=typeof y;return p=="object"&&y!=null||p=="function"}function Ad(y){return Object.prototype.hasOwnProperty.call(y,Gs)&&y[Gs]||(y[Gs]=++Td)}var Gs="closure_uid_"+(1e9*Math.random()>>>0),Td=0;function Ed(y,p,i){return y.call.apply(y.bind,arguments)}function Sd(y,p,i){if(!y)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,m),y.apply(p,t)}}return function(){return y.apply(p,arguments)}}function Xt(y,p,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Xt=Ed:Xt=Sd,Xt.apply(null,arguments)}function Pn(y,p){var i=Array.prototype.slice.call(arguments,1);return function(){var m=i.slice();return m.push.apply(m,arguments),y.apply(this,m)}}function bt(y,p){function i(){}i.prototype=p.prototype,y.Z=p.prototype,y.prototype=new i,y.prototype.constructor=y,y.Vb=function(m,t,e){for(var f=Array(arguments.length-2),a=2;a<arguments.length;a++)f[a-2]=arguments[a];return p.prototype[t].apply(m,f)}}function Ue(){this.s=this.s,this.o=this.o}var Cd=0;Ue.prototype.s=!1;Ue.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Cd!=0)&&Ad(this)};Ue.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lh=Array.prototype.indexOf?function(y,p){return Array.prototype.indexOf.call(y,p,void 0)}:function(y,p){if(typeof y=="string")return typeof p!="string"||p.length!=1?-1:y.indexOf(p,0);for(let i=0;i<y.length;i++)if(i in y&&y[i]===p)return i;return-1},uh=Array.prototype.forEach?function(y,p,i){Array.prototype.forEach.call(y,p,i)}:function(y,p,i){const m=y.length,t=typeof y=="string"?y.split(""):y;for(let e=0;e<m;e++)e in t&&p.call(i,t[e],e,y)};function Pd(y){t:{var p=mc;const i=y.length,m=typeof y=="string"?y.split(""):y;for(let t=0;t<i;t++)if(t in m&&p.call(void 0,m[t],t,y)){p=t;break t}p=-1}return 0>p?null:typeof y=="string"?y.charAt(p):y[p]}function Ka(y){return Array.prototype.concat.apply([],arguments)}function Nr(y){const p=y.length;if(0<p){const i=Array(p);for(let m=0;m<p;m++)i[m]=y[m];return i}return[]}function zn(y){return/^[\s\xa0]*$/.test(y)}var $a=String.prototype.trim?function(y){return y.trim()}:function(y){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(y)[1]};function Zt(y,p){return y.indexOf(p)!=-1}function Us(y,p){return y<p?-1:y>p?1:0}var Jt;t:{var Za=lt.navigator;if(Za){var Ja=Za.userAgent;if(Ja){Jt=Ja;break t}}Jt=""}function wr(y,p,i){for(const m in y)p.call(i,y[m],m,y)}function fh(y){const p={};for(const i in y)p[i]=y[i];return p}var ja="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dh(y,p){let i,m;for(let t=1;t<arguments.length;t++){m=arguments[t];for(i in m)y[i]=m[i];for(let e=0;e<ja.length;e++)i=ja[e],Object.prototype.hasOwnProperty.call(m,i)&&(y[i]=m[i])}}function Gr(y){return Gr[" "](y),y}Gr[" "]=Yn;function Md(y){var p=Od;return Object.prototype.hasOwnProperty.call(p,9)?p[9]:p[9]=y(9)}var Rd=Zt(Jt,"Opera"),ci=Zt(Jt,"Trident")||Zt(Jt,"MSIE"),ch=Zt(Jt,"Edge"),nr=ch||ci,vh=Zt(Jt,"Gecko")&&!(Zt(Jt.toLowerCase(),"webkit")&&!Zt(Jt,"Edge"))&&!(Zt(Jt,"Trident")||Zt(Jt,"MSIE"))&&!Zt(Jt,"Edge"),Ld=Zt(Jt.toLowerCase(),"webkit")&&!Zt(Jt,"Edge");function ph(){var y=lt.document;return y?y.documentMode:void 0}var Xn;t:{var Vs="",Ys=function(){var y=Jt;if(vh)return/rv:([^\);]+)(\)|;)/.exec(y);if(ch)return/Edge\/([\d\.]+)/.exec(y);if(ci)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(y);if(Ld)return/WebKit\/(\S+)/.exec(y);if(Rd)return/(?:Version)[ \/]?(\S+)/.exec(y)}();if(Ys&&(Vs=Ys?Ys[1]:""),ci){var zs=ph();if(zs!=null&&zs>parseFloat(Vs)){Xn=String(zs);break t}}Xn=Vs}var Od={};function Fd(){return Md(function(){let y=0;const p=$a(String(Xn)).split("."),i=$a("9").split("."),m=Math.max(p.length,i.length);for(let f=0;y==0&&f<m;f++){var t=p[f]||"",e=i[f]||"";do{if(t=/(\d*)(\D*)(.*)/.exec(t)||["","","",""],e=/(\d*)(\D*)(.*)/.exec(e)||["","","",""],t[0].length==0&&e[0].length==0)break;y=Us(t[1].length==0?0:parseInt(t[1],10),e[1].length==0?0:parseInt(e[1],10))||Us(t[2].length==0,e[2].length==0)||Us(t[2],e[2]),t=t[3],e=e[3]}while(y==0)}return 0<=y})}var sr;if(lt.document&&ci){var ka=ph();sr=ka||parseInt(Xn,10)||void 0}else sr=void 0;var Id=sr,Dd=function(){if(!lt.addEventListener||!Object.defineProperty)return!1;var y=!1,p=Object.defineProperty({},"passive",{get:function(){y=!0}});try{lt.addEventListener("test",Yn,p),lt.removeEventListener("test",Yn,p)}catch{}return y}();function $t(y,p){this.type=y,this.g=this.target=p,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};function Ki(y,p){if($t.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var i=this.type=y.type,m=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=p,p=y.relatedTarget){if(vh){t:{try{Gr(p.nodeName);var t=!0;break t}catch{}t=!1}t||(p=null)}}else i=="mouseover"?p=y.fromElement:i=="mouseout"&&(p=y.toElement);this.relatedTarget=p,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Bd[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Ki.Z.h.call(this)}}bt(Ki,$t);var Bd={2:"touch",3:"pen",4:"mouse"};Ki.prototype.h=function(){Ki.Z.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var un="closure_listenable_"+(1e6*Math.random()|0),Nd=0;function wd(y,p,i,m,t){this.listener=y,this.proxy=null,this.src=p,this.type=i,this.capture=!!m,this.ia=t,this.key=++Nd,this.ca=this.fa=!1}function ss(y){y.ca=!0,y.listener=null,y.proxy=null,y.src=null,y.ia=null}function rs(y){this.src=y,this.g={},this.h=0}rs.prototype.add=function(y,p,i,m,t){var e=y.toString();y=this.g[e],y||(y=this.g[e]=[],this.h++);var f=ar(y,p,m,t);return-1<f?(p=y[f],i||(p.fa=!1)):(p=new wd(p,this.src,e,!!m,t),p.fa=i,y.push(p)),p};function rr(y,p){var i=p.type;if(i in y.g){var m=y.g[i],t=lh(m,p),e;(e=0<=t)&&Array.prototype.splice.call(m,t,1),e&&(ss(p),y.g[i].length==0&&(delete y.g[i],y.h--))}}function ar(y,p,i,m){for(var t=0;t<y.length;++t){var e=y[t];if(!e.ca&&e.listener==p&&e.capture==!!i&&e.ia==m)return t}return-1}var Ur="closure_lm_"+(1e6*Math.random()|0),Xs={};function mh(y,p,i,m,t){if(m&&m.once)return xh(y,p,i,m,t);if(Array.isArray(p)){for(var e=0;e<p.length;e++)mh(y,p[e],i,m,t);return null}return i=zr(i),y&&y[un]?y.N(p,i,ln(m)?!!m.capture:!!m,t):gh(y,p,i,!1,m,t)}function gh(y,p,i,m,t,e){if(!p)throw Error("Invalid event type");var f=ln(t)?!!t.capture:!!t,a=Yr(y);if(a||(y[Ur]=a=new rs(y)),i=a.add(p,i,m,f,e),i.proxy)return i;if(m=Gd(),i.proxy=m,m.src=y,m.listener=i,y.addEventListener)Dd||(t=f),t===void 0&&(t=!1),y.addEventListener(p.toString(),m,t);else if(y.attachEvent)y.attachEvent(Ah(p.toString()),m);else if(y.addListener&&y.removeListener)y.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return i}function Gd(){function y(i){return p.call(y.src,y.listener,i)}var p=Ud;return y}function xh(y,p,i,m,t){if(Array.isArray(p)){for(var e=0;e<p.length;e++)xh(y,p[e],i,m,t);return null}return i=zr(i),y&&y[un]?y.O(p,i,ln(m)?!!m.capture:!!m,t):gh(y,p,i,!0,m,t)}function yh(y,p,i,m,t){if(Array.isArray(p))for(var e=0;e<p.length;e++)yh(y,p[e],i,m,t);else m=ln(m)?!!m.capture:!!m,i=zr(i),y&&y[un]?(y=y.i,p=String(p).toString(),p in y.g&&(e=y.g[p],i=ar(e,i,m,t),-1<i&&(ss(e[i]),Array.prototype.splice.call(e,i,1),e.length==0&&(delete y.g[p],y.h--)))):y&&(y=Yr(y))&&(p=y.g[p.toString()],y=-1,p&&(y=ar(p,i,m,t)),(i=-1<y?p[y]:null)&&Vr(i))}function Vr(y){if(typeof y!="number"&&y&&!y.ca){var p=y.src;if(p&&p[un])rr(p.i,y);else{var i=y.type,m=y.proxy;p.removeEventListener?p.removeEventListener(i,m,y.capture):p.detachEvent?p.detachEvent(Ah(i),m):p.addListener&&p.removeListener&&p.removeListener(m),(i=Yr(p))?(rr(i,y),i.h==0&&(i.src=null,p[Ur]=null)):ss(y)}}}function Ah(y){return y in Xs?Xs[y]:Xs[y]="on"+y}function Ud(y,p){if(y.ca)y=!0;else{p=new Ki(p,this);var i=y.listener,m=y.ia||y.src;y.fa&&Vr(y),y=i.call(m,p)}return y}function Yr(y){return y=y[Ur],y instanceof rs?y:null}var Ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function zr(y){return typeof y=="function"?y:(y[Ws]||(y[Ws]=function(p){return y.handleEvent(p)}),y[Ws])}function Vt(){Ue.call(this),this.i=new rs(this),this.P=this,this.I=null}bt(Vt,Ue);Vt.prototype[un]=!0;Vt.prototype.removeEventListener=function(y,p,i,m){yh(this,y,p,i,m)};function Wt(y,p){var i,m=y.I;if(m)for(i=[];m;m=m.I)i.push(m);if(y=y.P,m=p.type||p,typeof p=="string")p=new $t(p,y);else if(p instanceof $t)p.target=p.target||y;else{var t=p;p=new $t(m,y),dh(p,t)}if(t=!0,i)for(var e=i.length-1;0<=e;e--){var f=p.g=i[e];t=Mn(f,m,!0,p)&&t}if(f=p.g=y,t=Mn(f,m,!0,p)&&t,t=Mn(f,m,!1,p)&&t,i)for(e=0;e<i.length;e++)f=p.g=i[e],t=Mn(f,m,!1,p)&&t}Vt.prototype.M=function(){if(Vt.Z.M.call(this),this.i){var y=this.i,p;for(p in y.g){for(var i=y.g[p],m=0;m<i.length;m++)ss(i[m]);delete y.g[p],y.h--}}this.I=null};Vt.prototype.N=function(y,p,i,m){return this.i.add(String(y),p,!1,i,m)};Vt.prototype.O=function(y,p,i,m){return this.i.add(String(y),p,!0,i,m)};function Mn(y,p,i,m){if(p=y.i.g[String(p)],!p)return!0;p=p.concat();for(var t=!0,e=0;e<p.length;++e){var f=p[e];if(f&&!f.ca&&f.capture==i){var a=f.listener,o=f.ia||f.src;f.fa&&rr(y.i,f),t=a.call(o,m)!==!1&&t}}return t&&!m.defaultPrevented}var Xr=lt.JSON.stringify;function Vd(){var y=Eh;let p=null;return y.g&&(p=y.g,y.g=y.g.next,y.g||(y.h=null),p.next=null),p}class Yd{constructor(){this.h=this.g=null}add(p,i){const m=Th.get();m.set(p,i),this.h?this.h.next=m:this.g=m,this.h=m}}var Th=new class{constructor(y,p){this.i=y,this.j=p,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new zd,y=>y.reset());class zd{constructor(){this.next=this.g=this.h=null}set(p,i){this.h=p,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function Xd(y){lt.setTimeout(()=>{throw y},0)}function Wr(y,p){or||Wd(),hr||(or(),hr=!0),Eh.add(y,p)}var or;function Wd(){var y=lt.Promise.resolve(void 0);or=function(){y.then(Hd)}}var hr=!1,Eh=new Yd;function Hd(){for(var y;y=Vd();){try{y.h.call(y.g)}catch(i){Xd(i)}var p=Th;p.j(y),100>p.h&&(p.h++,y.next=p.g,p.g=y)}hr=!1}function as(y,p){Vt.call(this),this.h=y||1,this.g=p||lt,this.j=Xt(this.kb,this),this.l=Date.now()}bt(as,Vt);et=as.prototype;et.da=!1;et.S=null;et.kb=function(){if(this.da){var y=Date.now()-this.l;0<y&&y<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-y):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wt(this,"tick"),this.da&&(Hr(this),this.start()))}};et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Hr(y){y.da=!1,y.S&&(y.g.clearTimeout(y.S),y.S=null)}et.M=function(){as.Z.M.call(this),Hr(this),delete this.g};function br(y,p,i){if(typeof y=="function")i&&(y=Xt(y,i));else if(y&&typeof y.handleEvent=="function")y=Xt(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:lt.setTimeout(y,p||0)}function Sh(y){y.g=br(()=>{y.g=null,y.i&&(y.i=!1,Sh(y))},y.j);const p=y.h;y.h=null,y.m.apply(null,p)}class bd extends Ue{constructor(p,i){super(),this.m=p,this.j=i,this.h=null,this.i=!1,this.g=null}l(p){this.h=arguments,this.g?this.i=!0:Sh(this)}M(){super.M(),this.g&&(lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(y){Ue.call(this),this.h=y,this.g={}}bt($i,Ue);var qa=[];function Ch(y,p,i,m){Array.isArray(i)||(i&&(qa[0]=i.toString()),i=qa);for(var t=0;t<i.length;t++){var e=mh(p,i[t],m||y.handleEvent,!1,y.h||y);if(!e)break;y.g[e.key]=e}}function Ph(y){wr(y.g,function(p,i){this.g.hasOwnProperty(i)&&Vr(p)},y),y.g={}}$i.prototype.M=function(){$i.Z.M.call(this),Ph(this)};$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function os(){this.g=!0}os.prototype.Aa=function(){this.g=!1};function Qd(y,p,i,m,t,e){y.info(function(){if(y.g)if(e)for(var f="",a=e.split("&"),o=0;o<a.length;o++){var s=a[o].split("=");if(1<s.length){var n=s[0];s=s[1];var r=n.split("_");f=2<=r.length&&r[1]=="type"?f+(n+"="+s+"&"):f+(n+"=redacted&")}}else f=null;else f=e;return"XMLHTTP REQ ("+m+") [attempt "+t+"]: "+p+`
`+i+`
`+f})}function Kd(y,p,i,m,t,e,f){y.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+t+"]: "+p+`
`+i+`
`+e+" "+f})}function ai(y,p,i,m){y.info(function(){return"XMLHTTP TEXT ("+p+"): "+Zd(y,i)+(m?" "+m:"")})}function $d(y,p){y.info(function(){return"TIMEOUT: "+p})}os.prototype.info=function(){};function Zd(y,p){if(!y.g)return p;if(!p)return null;try{var i=JSON.parse(p);if(i){for(y=0;y<i.length;y++)if(Array.isArray(i[y])){var m=i[y];if(!(2>m.length)){var t=m[1];if(Array.isArray(t)&&!(1>t.length)){var e=t[0];if(e!="noop"&&e!="stop"&&e!="close")for(var f=1;f<t.length;f++)t[f]=""}}}}return Xr(i)}catch{return p}}var ei={},_a=null;function hs(){return _a=_a||new Vt}ei.Ma="serverreachability";function Mh(y){$t.call(this,ei.Ma,y)}bt(Mh,$t);function Zi(y){const p=hs();Wt(p,new Mh(p))}ei.STAT_EVENT="statevent";function Rh(y,p){$t.call(this,ei.STAT_EVENT,y),this.stat=p}bt(Rh,$t);function jt(y){const p=hs();Wt(p,new Rh(p,y))}ei.Na="timingevent";function Lh(y,p){$t.call(this,ei.Na,y),this.size=p}bt(Lh,$t);function fn(y,p){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return lt.setTimeout(function(){y()},p)}var ls={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Oh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qr(){}Qr.prototype.h=null;function to(y){return y.h||(y.h=y.i())}function Fh(){}var dn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kr(){$t.call(this,"d")}bt(Kr,$t);function $r(){$t.call(this,"c")}bt($r,$t);var lr;function us(){}bt(us,Qr);us.prototype.g=function(){return new XMLHttpRequest};us.prototype.i=function(){return{}};lr=new us;function cn(y,p,i,m){this.l=y,this.j=p,this.m=i,this.X=m||1,this.V=new $i(this),this.P=Jd,y=nr?125:void 0,this.W=new as(y),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ih}function Ih(){this.i=null,this.g="",this.h=!1}var Jd=45e3,ur={},Wn={};et=cn.prototype;et.setTimeout=function(y){this.P=y};function fr(y,p,i){y.K=1,y.v=ds(Me(p)),y.s=i,y.U=!0,Dh(y,null)}function Dh(y,p){y.F=Date.now(),vn(y),y.A=Me(y.v);var i=y.A,m=y.X;Array.isArray(m)||(m=[String(m)]),Yh(i.h,"t",m),y.C=0,i=y.l.H,y.h=new Ih,y.g=rl(y.l,i?p:null,!y.s),0<y.O&&(y.L=new bd(Xt(y.Ia,y,y.g),y.O)),Ch(y.V,y.g,"readystatechange",y.gb),p=y.H?fh(y.H):{},y.s?(y.u||(y.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.s,p)):(y.u="GET",y.g.ea(y.A,y.u,null,p)),Zi(),Qd(y.j,y.u,y.A,y.m,y.X,y.s)}et.gb=function(y){y=y.target;const p=this.L;p&&Ee(y)==3?p.l():this.Ia(y)};et.Ia=function(y){try{if(y==this.g)t:{const n=Ee(this.g);var p=this.g.Da();const r=this.g.ba();if(!(3>n)&&(n!=3||nr||this.g&&(this.h.h||this.g.ga()||so(this.g)))){this.I||n!=4||p==7||(p==8||0>=r?Zi(3):Zi(2)),fs(this);var i=this.g.ba();this.N=i;e:if(Bh(this)){var m=so(this.g);y="";var t=m.length,e=Ee(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){We(this),Gi(this);var f="";break e}this.h.i=new lt.TextDecoder}for(p=0;p<t;p++)this.h.h=!0,y+=this.h.i.decode(m[p],{stream:e&&p==t-1});m.splice(0,t),this.h.g+=y,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=i==200,Kd(this.j,this.u,this.A,this.m,this.X,n,i),this.i){if(this.$&&!this.J){e:{if(this.g){var a,o=this.g;if((a=o.g?o.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(a)){var s=a;break e}}s=null}if(i=s)ai(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dr(this,i);else{this.i=!1,this.o=3,jt(12),We(this),Gi(this);break t}}this.U?(Nh(this,n,f),nr&&this.i&&n==3&&(Ch(this.V,this.W,"tick",this.fb),this.W.start())):(ai(this.j,this.m,f,null),dr(this,f)),n==4&&We(this),this.i&&!this.I&&(n==4?el(this.l,this):(this.i=!1,vn(this)))}else i==400&&0<f.indexOf("Unknown SID")?(this.o=3,jt(12)):(this.o=0,jt(13)),We(this),Gi(this)}}}catch{}finally{}};function Bh(y){return y.g?y.u=="GET"&&y.K!=2&&y.l.Ba:!1}function Nh(y,p,i){let m=!0,t;for(;!y.I&&y.C<i.length;)if(t=jd(y,i),t==Wn){p==4&&(y.o=4,jt(14),m=!1),ai(y.j,y.m,null,"[Incomplete Response]");break}else if(t==ur){y.o=4,jt(15),ai(y.j,y.m,i,"[Invalid Chunk]"),m=!1;break}else ai(y.j,y.m,t,null),dr(y,t);Bh(y)&&t!=Wn&&t!=ur&&(y.h.g="",y.C=0),p!=4||i.length!=0||y.h.h||(y.o=1,jt(16),m=!1),y.i=y.i&&m,m?0<i.length&&!y.aa&&(y.aa=!0,p=y.l,p.g==y&&p.$&&!p.L&&(p.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),ia(p),p.L=!0,jt(11))):(ai(y.j,y.m,i,"[Invalid Chunked Response]"),We(y),Gi(y))}et.fb=function(){if(this.g){var y=Ee(this.g),p=this.g.ga();this.C<p.length&&(fs(this),Nh(this,y,p),this.i&&y!=4&&vn(this))}};function jd(y,p){var i=y.C,m=p.indexOf(`
`,i);return m==-1?Wn:(i=Number(p.substring(i,m)),isNaN(i)?ur:(m+=1,m+i>p.length?Wn:(p=p.substr(m,i),y.C=m+i,p)))}et.cancel=function(){this.I=!0,We(this)};function vn(y){y.Y=Date.now()+y.P,wh(y,y.P)}function wh(y,p){if(y.B!=null)throw Error("WatchDog timer not null");y.B=fn(Xt(y.eb,y),p)}function fs(y){y.B&&(lt.clearTimeout(y.B),y.B=null)}et.eb=function(){this.B=null;const y=Date.now();0<=y-this.Y?($d(this.j,this.A),this.K!=2&&(Zi(),jt(17)),We(this),this.o=2,Gi(this)):wh(this,this.Y-y)};function Gi(y){y.l.G==0||y.I||el(y.l,y)}function We(y){fs(y);var p=y.L;p&&typeof p.na=="function"&&p.na(),y.L=null,Hr(y.W),Ph(y.V),y.g&&(p=y.g,y.g=null,p.abort(),p.na())}function dr(y,p){try{var i=y.l;if(i.G!=0&&(i.g==y||cr(i.i,y))){if(i.I=y.N,!y.J&&cr(i.i,y)&&i.G==3){try{var m=i.Ca.g.parse(p)}catch{m=null}if(Array.isArray(m)&&m.length==3){var t=m;if(t[0]==0){t:if(!i.u){if(i.g)if(i.g.F+3e3<y.F)Kn(i),ps(i);else break t;ea(i),jt(18)}}else i.ta=t[1],0<i.ta-i.U&&37500>t[2]&&i.N&&i.A==0&&!i.v&&(i.v=fn(Xt(i.ab,i),6e3));if(1>=Wh(i.i)&&i.ka){try{i.ka()}catch{}i.ka=void 0}}else He(i,11)}else if((y.J||i.g==y)&&Kn(i),!zn(p))for(t=i.Ca.g.parse(p),p=0;p<t.length;p++){let s=t[p];if(i.U=s[0],s=s[1],i.G==2)if(s[0]=="c"){i.J=s[1],i.la=s[2];const n=s[3];n!=null&&(i.ma=n,i.h.info("VER="+i.ma));const r=s[4];r!=null&&(i.za=r,i.h.info("SVER="+i.za));const u=s[5];u!=null&&typeof u=="number"&&0<u&&(m=1.5*u,i.K=m,i.h.info("backChannelRequestTimeoutMs_="+m)),m=i;const h=y.g;if(h){const l=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var e=m.i;!e.g&&(Zt(l,"spdy")||Zt(l,"quic")||Zt(l,"h2"))&&(e.j=e.l,e.g=new Set,e.h&&(jr(e,e.h),e.h=null))}if(m.D){const d=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(m.sa=d,Pt(m.F,m.D,d))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-y.F,i.h.info("Handshake RTT: "+i.O+"ms")),m=i;var f=y;if(m.oa=sl(m,m.H?m.la:null,m.W),f.J){Hh(m.i,f);var a=f,o=m.K;o&&a.setTimeout(o),a.B&&(fs(a),vn(a)),m.g=f}else _h(m);0<i.l.length&&ms(i)}else s[0]!="stop"&&s[0]!="close"||He(i,7);else i.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?He(i,7):ta(i):s[0]!="noop"&&i.j&&i.j.wa(s),i.A=0)}}Zi(4)}catch{}}function kd(y){if(y.R&&typeof y.R=="function")return y.R();if(typeof y=="string")return y.split("");if(ir(y)){for(var p=[],i=y.length,m=0;m<i;m++)p.push(y[m]);return p}p=[],i=0;for(m in y)p[i++]=y[m];return p}function Zr(y,p){if(y.forEach&&typeof y.forEach=="function")y.forEach(p,void 0);else if(ir(y)||typeof y=="string")uh(y,p,void 0);else{if(y.T&&typeof y.T=="function")var i=y.T();else if(y.R&&typeof y.R=="function")i=void 0;else if(ir(y)||typeof y=="string"){i=[];for(var m=y.length,t=0;t<m;t++)i.push(t)}else for(t in i=[],m=0,y)i[m++]=t;m=kd(y),t=m.length;for(var e=0;e<t;e++)p.call(void 0,m[e],i&&i[e],y)}}function Si(y,p){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var m=0;m<i;m+=2)this.set(arguments[m],arguments[m+1])}else if(y)if(y instanceof Si)for(i=y.T(),m=0;m<i.length;m++)this.set(i[m],y.get(i[m]));else for(m in y)this.set(m,y[m])}et=Si.prototype;et.R=function(){Jr(this);for(var y=[],p=0;p<this.g.length;p++)y.push(this.h[this.g[p]]);return y};et.T=function(){return Jr(this),this.g.concat()};function Jr(y){if(y.i!=y.g.length){for(var p=0,i=0;p<y.g.length;){var m=y.g[p];je(y.h,m)&&(y.g[i++]=m),p++}y.g.length=i}if(y.i!=y.g.length){var t={};for(i=p=0;p<y.g.length;)m=y.g[p],je(t,m)||(y.g[i++]=m,t[m]=1),p++;y.g.length=i}}et.get=function(y,p){return je(this.h,y)?this.h[y]:p};et.set=function(y,p){je(this.h,y)||(this.i++,this.g.push(y)),this.h[y]=p};et.forEach=function(y,p){for(var i=this.T(),m=0;m<i.length;m++){var t=i[m],e=this.get(t);y.call(p,e,t,this)}};function je(y,p){return Object.prototype.hasOwnProperty.call(y,p)}var Gh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qd(y,p){if(y){y=y.split("&");for(var i=0;i<y.length;i++){var m=y[i].indexOf("="),t=null;if(0<=m){var e=y[i].substring(0,m);t=y[i].substring(m+1)}else e=y[i];p(e,t?decodeURIComponent(t.replace(/\+/g," ")):"")}}}function ke(y,p){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,y instanceof ke){this.g=p!==void 0?p:y.g,Hn(this,y.j),this.s=y.s,bn(this,y.i),Qn(this,y.m),this.l=y.l,p=y.h;var i=new Ji;i.i=p.i,p.g&&(i.g=new Si(p.g),i.h=p.h),eo(this,i),this.o=y.o}else y&&(i=String(y).match(Gh))?(this.g=!!p,Hn(this,i[1]||"",!0),this.s=Ui(i[2]||""),bn(this,i[3]||"",!0),Qn(this,i[4]),this.l=Ui(i[5]||"",!0),eo(this,i[6]||"",!0),this.o=Ui(i[7]||"")):(this.g=!!p,this.h=new Ji(null,this.g))}ke.prototype.toString=function(){var y=[],p=this.j;p&&y.push(Ii(p,io,!0),":");var i=this.i;return(i||p=="file")&&(y.push("//"),(p=this.s)&&y.push(Ii(p,io,!0),"@"),y.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.m,i!=null&&y.push(":",String(i))),(i=this.l)&&(this.i&&i.charAt(0)!="/"&&y.push("/"),y.push(Ii(i,i.charAt(0)=="/"?nc:ic,!0))),(i=this.h.toString())&&y.push("?",i),(i=this.o)&&y.push("#",Ii(i,rc)),y.join("")};function Me(y){return new ke(y)}function Hn(y,p,i){y.j=i?Ui(p,!0):p,y.j&&(y.j=y.j.replace(/:$/,""))}function bn(y,p,i){y.i=i?Ui(p,!0):p}function Qn(y,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);y.m=p}else y.m=null}function eo(y,p,i){p instanceof Ji?(y.h=p,ac(y.h,y.g)):(i||(p=Ii(p,sc)),y.h=new Ji(p,y.g))}function Pt(y,p,i){y.h.set(p,i)}function ds(y){return Pt(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function _d(y){return y instanceof ke?Me(y):new ke(y,void 0)}function tc(y,p,i,m){var t=new ke(null,void 0);return y&&Hn(t,y),p&&bn(t,p),i&&Qn(t,i),m&&(t.l=m),t}function Ui(y,p){return y?p?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ii(y,p,i){return typeof y=="string"?(y=encodeURI(y).replace(p,ec),i&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function ec(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var io=/[#\/\?@]/g,ic=/[#\?:]/g,nc=/[#\?]/g,sc=/[#\?@]/g,rc=/#/g;function Ji(y,p){this.h=this.g=null,this.i=y||null,this.j=!!p}function Ve(y){y.g||(y.g=new Si,y.h=0,y.i&&qd(y.i,function(p,i){y.add(decodeURIComponent(p.replace(/\+/g," ")),i)}))}et=Ji.prototype;et.add=function(y,p){Ve(this),this.i=null,y=Ci(this,y);var i=this.g.get(y);return i||this.g.set(y,i=[]),i.push(p),this.h+=1,this};function Uh(y,p){Ve(y),p=Ci(y,p),je(y.g.h,p)&&(y.i=null,y.h-=y.g.get(p).length,y=y.g,je(y.h,p)&&(delete y.h[p],y.i--,y.g.length>2*y.i&&Jr(y)))}function Vh(y,p){return Ve(y),p=Ci(y,p),je(y.g.h,p)}et.forEach=function(y,p){Ve(this),this.g.forEach(function(i,m){uh(i,function(t){y.call(p,t,m,this)},this)},this)};et.T=function(){Ve(this);for(var y=this.g.R(),p=this.g.T(),i=[],m=0;m<p.length;m++)for(var t=y[m],e=0;e<t.length;e++)i.push(p[m]);return i};et.R=function(y){Ve(this);var p=[];if(typeof y=="string")Vh(this,y)&&(p=Ka(p,this.g.get(Ci(this,y))));else{y=this.g.R();for(var i=0;i<y.length;i++)p=Ka(p,y[i])}return p};et.set=function(y,p){return Ve(this),this.i=null,y=Ci(this,y),Vh(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[p]),this.h+=1,this};et.get=function(y,p){return y?(y=this.R(y),0<y.length?String(y[0]):p):p};function Yh(y,p,i){Uh(y,p),0<i.length&&(y.i=null,y.g.set(Ci(y,p),Nr(i)),y.h+=i.length)}et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var y=[],p=this.g.T(),i=0;i<p.length;i++){var m=p[i],t=encodeURIComponent(String(m));m=this.R(m);for(var e=0;e<m.length;e++){var f=t;m[e]!==""&&(f+="="+encodeURIComponent(String(m[e]))),y.push(f)}}return this.i=y.join("&")};function Ci(y,p){return p=String(p),y.j&&(p=p.toLowerCase()),p}function ac(y,p){p&&!y.j&&(Ve(y),y.i=null,y.g.forEach(function(i,m){var t=m.toLowerCase();m!=t&&(Uh(this,m),Yh(this,t,i))},y)),y.j=p}var oc=class{constructor(y,p){this.h=y,this.g=p}};function zh(y){this.l=y||hc,lt.PerformanceNavigationTiming?(y=lt.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(lt.g&&lt.g.Ea&&lt.g.Ea()&&lt.g.Ea().Zb),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hc=10;function Xh(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Wh(y){return y.h?1:y.g?y.g.size:0}function cr(y,p){return y.h?y.h==p:y.g?y.g.has(p):!1}function jr(y,p){y.g?y.g.add(p):y.h=p}function Hh(y,p){y.h&&y.h==p?y.h=null:y.g&&y.g.has(p)&&y.g.delete(p)}zh.prototype.cancel=function(){if(this.i=bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function bh(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let p=y.i;for(const i of y.g.values())p=p.concat(i.D);return p}return Nr(y.i)}function kr(){}kr.prototype.stringify=function(y){return lt.JSON.stringify(y,void 0)};kr.prototype.parse=function(y){return lt.JSON.parse(y,void 0)};function lc(){this.g=new kr}function uc(y,p,i){const m=i||"";try{Zr(y,function(t,e){let f=t;ln(t)&&(f=Xr(t)),p.push(m+e+"="+encodeURIComponent(f))})}catch(t){throw p.push(m+"type="+encodeURIComponent("_badmap")),t}}function fc(y,p){const i=new os;if(lt.Image){const m=new Image;m.onload=Pn(Rn,i,m,"TestLoadImage: loaded",!0,p),m.onerror=Pn(Rn,i,m,"TestLoadImage: error",!1,p),m.onabort=Pn(Rn,i,m,"TestLoadImage: abort",!1,p),m.ontimeout=Pn(Rn,i,m,"TestLoadImage: timeout",!1,p),lt.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=y}else p(!1)}function Rn(y,p,i,m,t){try{p.onload=null,p.onerror=null,p.onabort=null,p.ontimeout=null,t(m)}catch{}}function pn(y){this.l=y.$b||null,this.j=y.ib||!1}bt(pn,Qr);pn.prototype.g=function(){return new cs(this.l,this.j)};pn.prototype.i=function(y){return function(){return y}}({});function cs(y,p){Vt.call(this),this.D=y,this.u=p,this.m=void 0,this.readyState=qr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(cs,Vt);var qr=0;et=cs.prototype;et.open=function(y,p){if(this.readyState!=qr)throw this.abort(),Error("Error reopening a connection");this.C=y,this.B=p,this.readyState=1,ji(this)};et.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.v,method:this.C,credentials:this.m,cache:void 0};y&&(p.body=y),(this.D||lt).fetch(new Request(this.B,p)).then(this.Va.bind(this),this.ha.bind(this))};et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mn(this)),this.readyState=qr};et.Va=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof lt.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qh(this)}else y.text().then(this.Ua.bind(this),this.ha.bind(this))};function Qh(y){y.j.read().then(y.Sa.bind(y)).catch(y.ha.bind(y))}et.Sa=function(y){if(this.g){if(this.u&&y.value)this.response.push(y.value);else if(!this.u){var p=y.value?y.value:new Uint8Array(0);(p=this.A.decode(p,{stream:!y.done}))&&(this.response=this.responseText+=p)}y.done?mn(this):ji(this),this.readyState==3&&Qh(this)}};et.Ua=function(y){this.g&&(this.response=this.responseText=y,mn(this))};et.Ta=function(y){this.g&&(this.response=y,mn(this))};et.ha=function(){this.g&&mn(this)};function mn(y){y.readyState=4,y.l=null,y.j=null,y.A=null,ji(y)}et.setRequestHeader=function(y,p){this.v.append(y,p)};et.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""};et.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],p=this.h.entries();for(var i=p.next();!i.done;)i=i.value,y.push(i[0]+": "+i[1]),i=p.next();return y.join(`\r
`)};function ji(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});var dc=lt.JSON.parse;function Bt(y){Vt.call(this),this.headers=new Si,this.u=y||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Kh,this.K=this.L=!1}bt(Bt,Vt);var Kh="",cc=/^https?$/i,vc=["POST","PUT"];et=Bt.prototype;et.ea=function(y,p,i,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+y);p=p?p.toUpperCase():"GET",this.H=y,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lr.g(),this.C=this.u?to(this.u):to(lr),this.g.onreadystatechange=Xt(this.Fa,this);try{this.F=!0,this.g.open(p,String(y),!0),this.F=!1}catch(e){no(this,e);return}y=i||"";const t=new Si(this.headers);m&&Zr(m,function(e,f){t.set(f,e)}),m=Pd(t.T()),i=lt.FormData&&y instanceof lt.FormData,!(0<=lh(vc,p))||m||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),t.forEach(function(e,f){this.g.setRequestHeader(f,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jh(this),0<this.B&&((this.K=pc(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.pa,this)):this.A=br(this.pa,this.B,this)),this.v=!0,this.g.send(y),this.v=!1}catch(e){no(this,e)}};function pc(y){return ci&&Fd()&&typeof y.timeout=="number"&&y.ontimeout!==void 0}function mc(y){return y.toLowerCase()=="content-type"}et.pa=function(){typeof Br<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wt(this,"timeout"),this.abort(8))};function no(y,p){y.h=!1,y.g&&(y.l=!0,y.g.abort(),y.l=!1),y.j=p,y.m=5,$h(y),vs(y)}function $h(y){y.D||(y.D=!0,Wt(y,"complete"),Wt(y,"error"))}et.abort=function(y){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=y||7,Wt(this,"complete"),Wt(this,"abort"),vs(this))};et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vs(this,!0)),Bt.Z.M.call(this)};et.Fa=function(){this.s||(this.F||this.v||this.l?Zh(this):this.cb())};et.cb=function(){Zh(this)};function Zh(y){if(y.h&&typeof Br<"u"&&(!y.C[1]||Ee(y)!=4||y.ba()!=2)){if(y.v&&Ee(y)==4)br(y.Fa,0,y);else if(Wt(y,"readystatechange"),Ee(y)==4){y.h=!1;try{const a=y.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var i;if(!(i=p)){var m;if(m=a===0){var t=String(y.H).match(Gh)[1]||null;if(!t&&lt.self&&lt.self.location){var e=lt.self.location.protocol;t=e.substr(0,e.length-1)}m=!cc.test(t?t.toLowerCase():"")}i=m}if(i)Wt(y,"complete"),Wt(y,"success");else{y.m=6;try{var f=2<Ee(y)?y.g.statusText:""}catch{f=""}y.j=f+" ["+y.ba()+"]",$h(y)}}finally{vs(y)}}}}function vs(y,p){if(y.g){Jh(y);const i=y.g,m=y.C[0]?Yn:null;y.g=null,y.C=null,p||Wt(y,"ready");try{i.onreadystatechange=m}catch{}}}function Jh(y){y.g&&y.K&&(y.g.ontimeout=null),y.A&&(lt.clearTimeout(y.A),y.A=null)}function Ee(y){return y.g?y.g.readyState:0}et.ba=function(){try{return 2<Ee(this)?this.g.status:-1}catch{return-1}};et.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};et.Qa=function(y){if(this.g){var p=this.g.responseText;return y&&p.indexOf(y)==0&&(p=p.substring(y.length)),dc(p)}};function so(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.J){case Kh:case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}et.Da=function(){return this.m};et.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function gc(y){let p="";return wr(y,function(i,m){p+=m,p+=":",p+=i,p+=`\r
`}),p}function _r(y,p,i){t:{for(m in i){var m=!1;break t}m=!0}m||(i=gc(i),typeof y=="string"?i!=null&&encodeURIComponent(String(i)):Pt(y,p,i))}function Oi(y,p,i){return i&&i.internalChannelParams&&i.internalChannelParams[y]||p}function jh(y){this.za=0,this.l=[],this.h=new os,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Oi("failFast",!1,y),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Oi("baseRetryDelayMs",5e3,y),this.$a=Oi("retryDelaySeedMs",1e4,y),this.Ya=Oi("forwardChannelMaxRetries",2,y),this.ra=Oi("forwardChannelRequestTimeoutMs",2e4,y),this.qa=y&&y.xmlHttpFactory||void 0,this.Ba=y&&y.Yb||!1,this.K=void 0,this.H=y&&y.supportsCrossDomainXhr||!1,this.J="",this.i=new zh(y&&y.concurrentRequestLimit),this.Ca=new lc,this.ja=y&&y.fastHandshake||!1,this.Ra=y&&y.Wb||!1,y&&y.Aa&&this.h.Aa(),y&&y.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&y&&y.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!y||y.Xb!==!1}et=jh.prototype;et.ma=8;et.G=1;function ta(y){if(kh(y),y.G==3){var p=y.V++,i=Me(y.F);Pt(i,"SID",y.J),Pt(i,"RID",p),Pt(i,"TYPE","terminate"),gn(y,i),p=new cn(y,y.h,p,void 0),p.K=2,p.v=ds(Me(i)),i=!1,lt.navigator&&lt.navigator.sendBeacon&&(i=lt.navigator.sendBeacon(p.v.toString(),"")),!i&&lt.Image&&(new Image().src=p.v,i=!0),i||(p.g=rl(p.l,null),p.g.ea(p.v)),p.F=Date.now(),vn(p)}nl(y)}et.hb=function(y){try{this.h.info("Origin Trials invoked: "+y)}catch{}};function ps(y){y.g&&(ia(y),y.g.cancel(),y.g=null)}function kh(y){ps(y),y.u&&(lt.clearTimeout(y.u),y.u=null),Kn(y),y.i.cancel(),y.m&&(typeof y.m=="number"&&lt.clearTimeout(y.m),y.m=null)}function Hs(y,p){y.l.push(new oc(y.Za++,p)),y.G==3&&ms(y)}function ms(y){Xh(y.i)||y.m||(y.m=!0,Wr(y.Ha,y),y.C=0)}function xc(y,p){return Wh(y.i)>=y.i.j-(y.m?1:0)?!1:y.m?(y.l=p.D.concat(y.l),!0):y.G==1||y.G==2||y.C>=(y.Xa?0:y.Ya)?!1:(y.m=fn(Xt(y.Ha,y,p),il(y,y.C)),y.C++,!0)}et.Ha=function(y){if(this.m)if(this.m=null,this.G==1){if(!y){this.V=Math.floor(1e5*Math.random()),y=this.V++;const t=new cn(this,this.h,y,void 0);let e=this.s;if(this.P&&(e?(e=fh(e),dh(e,this.P)):e=this.P),this.o===null&&(t.H=e),this.ja)t:{for(var p=0,i=0;i<this.l.length;i++){e:{var m=this.l[i];if("__data__"in m.g&&(m=m.g.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(p+=m,4096<p){p=i;break t}if(p===4096||i===this.l.length-1){p=i+1;break t}}p=1e3}else p=1e3;p=qh(this,t,p),i=Me(this.F),Pt(i,"RID",y),Pt(i,"CVER",22),this.D&&Pt(i,"X-HTTP-Session-Id",this.D),gn(this,i),this.o&&e&&_r(i,this.o,e),jr(this.i,t),this.Ra&&Pt(i,"TYPE","init"),this.ja?(Pt(i,"$req",p),Pt(i,"SID","null"),t.$=!0,fr(t,i,null)):fr(t,i,p),this.G=2}}else this.G==3&&(y?ro(this,y):this.l.length==0||Xh(this.i)||ro(this))};function ro(y,p){var i;p?i=p.m:i=y.V++;const m=Me(y.F);Pt(m,"SID",y.J),Pt(m,"RID",i),Pt(m,"AID",y.U),gn(y,m),y.o&&y.s&&_r(m,y.o,y.s),i=new cn(y,y.h,i,y.C+1),y.o===null&&(i.H=y.s),p&&(y.l=p.D.concat(y.l)),p=qh(y,i,1e3),i.setTimeout(Math.round(.5*y.ra)+Math.round(.5*y.ra*Math.random())),jr(y.i,i),fr(i,m,p)}function gn(y,p){y.j&&Zr({},function(i,m){Pt(p,m,i)})}function qh(y,p,i){i=Math.min(y.l.length,i);var m=y.j?Xt(y.j.Oa,y.j,y):null;t:{var t=y.l;let e=-1;for(;;){const f=["count="+i];e==-1?0<i?(e=t[0].h,f.push("ofs="+e)):e=0:f.push("ofs="+e);let a=!0;for(let o=0;o<i;o++){let s=t[o].h;const n=t[o].g;if(s-=e,0>s)e=Math.max(0,t[o].h-100),a=!1;else try{uc(n,f,"req"+s+"_")}catch{m&&m(n)}}if(a){m=f.join("&");break t}}}return y=y.l.splice(0,i),p.D=y,m}function _h(y){y.g||y.u||(y.Y=1,Wr(y.Ga,y),y.A=0)}function ea(y){return y.g||y.u||3<=y.A?!1:(y.Y++,y.u=fn(Xt(y.Ga,y),il(y,y.A)),y.A++,!0)}et.Ga=function(){if(this.u=null,tl(this),this.$&&!(this.L||this.g==null||0>=this.O)){var y=2*this.O;this.h.info("BP detection timer enabled: "+y),this.B=fn(Xt(this.bb,this),y)}};et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jt(10),ps(this),tl(this))};function ia(y){y.B!=null&&(lt.clearTimeout(y.B),y.B=null)}function tl(y){y.g=new cn(y,y.h,"rpc",y.Y),y.o===null&&(y.g.H=y.s),y.g.O=0;var p=Me(y.oa);Pt(p,"RID","rpc"),Pt(p,"SID",y.J),Pt(p,"CI",y.N?"0":"1"),Pt(p,"AID",y.U),gn(y,p),Pt(p,"TYPE","xmlhttp"),y.o&&y.s&&_r(p,y.o,y.s),y.K&&y.g.setTimeout(y.K);var i=y.g;y=y.la,i.K=1,i.v=ds(Me(p)),i.s=null,i.U=!0,Dh(i,y)}et.ab=function(){this.v!=null&&(this.v=null,ps(this),ea(this),jt(19))};function Kn(y){y.v!=null&&(lt.clearTimeout(y.v),y.v=null)}function el(y,p){var i=null;if(y.g==p){Kn(y),ia(y),y.g=null;var m=2}else if(cr(y.i,p))i=p.D,Hh(y.i,p),m=1;else return;if(y.I=p.N,y.G!=0){if(p.i)if(m==1){i=p.s?p.s.length:0,p=Date.now()-p.F;var t=y.C;m=hs(),Wt(m,new Lh(m,i)),ms(y)}else _h(y);else if(t=p.o,t==3||t==0&&0<y.I||!(m==1&&xc(y,p)||m==2&&ea(y)))switch(i&&0<i.length&&(p=y.i,p.i=p.i.concat(i)),t){case 1:He(y,5);break;case 4:He(y,10);break;case 3:He(y,6);break;default:He(y,2)}}}function il(y,p){let i=y.Pa+Math.floor(Math.random()*y.$a);return y.j||(i*=2),i*p}function He(y,p){if(y.h.info("Error code "+p),p==2){var i=null;y.j&&(i=null);var m=Xt(y.jb,y);i||(i=new ke("//www.google.com/images/cleardot.gif"),lt.location&&lt.location.protocol=="http"||Hn(i,"https"),ds(i)),fc(i.toString(),m)}else jt(2);y.G=0,y.j&&y.j.va(p),nl(y),kh(y)}et.jb=function(y){y?(this.h.info("Successfully pinged google.com"),jt(2)):(this.h.info("Failed to ping google.com"),jt(1))};function nl(y){y.G=0,y.I=-1,y.j&&((bh(y.i).length!=0||y.l.length!=0)&&(y.i.i.length=0,Nr(y.l),y.l.length=0),y.j.ua())}function sl(y,p,i){let m=_d(i);if(m.i!="")p&&bn(m,p+"."+m.i),Qn(m,m.m);else{const t=lt.location;m=tc(t.protocol,p?p+"."+t.hostname:t.hostname,+t.port,i)}return y.aa&&wr(y.aa,function(t,e){Pt(m,e,t)}),p=y.D,i=y.sa,p&&i&&Pt(m,p,i),Pt(m,"VER",y.ma),gn(y,m),m}function rl(y,p,i){if(p&&!y.H)throw Error("Can't create secondary domain capable XhrIo object.");return p=i&&y.Ba&&!y.qa?new Bt(new pn({ib:!0})):new Bt(y.qa),p.L=y.H,p}function al(){}et=al.prototype;et.xa=function(){};et.wa=function(){};et.va=function(){};et.ua=function(){};et.Oa=function(){};function $n(){if(ci&&!(10<=Number(Id)))throw Error("Environmental error: no available transport.")}$n.prototype.g=function(y,p){return new le(y,p)};function le(y,p){Vt.call(this),this.g=new jh(p),this.l=y,this.h=p&&p.messageUrlParams||null,y=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.s=y,y=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(y?y["X-WebChannel-Content-Type"]=p.messageContentType:y={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.ya&&(y?y["X-WebChannel-Client-Profile"]=p.ya:y={"X-WebChannel-Client-Profile":p.ya}),this.g.P=y,(y=p&&p.httpHeadersOverwriteParam)&&!zn(y)&&(this.g.o=y),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!zn(p)&&(this.g.D=p,y=this.h,y!==null&&p in y&&(y=this.h,p in y&&delete y[p])),this.j=new Pi(this)}bt(le,Vt);le.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var y=this.g,p=this.l,i=this.h||void 0;y.Wa&&(y.h.info("Origin Trials enabled."),Wr(Xt(y.hb,y,p))),jt(0),y.W=p,y.aa=i||{},y.N=y.X,y.F=sl(y,null,y.W),ms(y)};le.prototype.close=function(){ta(this.g)};le.prototype.u=function(y){if(typeof y=="string"){var p={};p.__data__=y,Hs(this.g,p)}else this.v?(p={},p.__data__=Xr(y),Hs(this.g,p)):Hs(this.g,y)};le.prototype.M=function(){this.g.j=null,delete this.j,ta(this.g),delete this.g,le.Z.M.call(this)};function ol(y){Kr.call(this);var p=y.__sm__;if(p){t:{for(const i in p){y=i;break t}y=void 0}(this.i=y)&&(y=this.i,p=p!==null&&y in p?p[y]:void 0),this.data=p}else this.data=y}bt(ol,Kr);function hl(){$r.call(this),this.status=1}bt(hl,$r);function Pi(y){this.g=y}bt(Pi,al);Pi.prototype.xa=function(){Wt(this.g,"a")};Pi.prototype.wa=function(y){Wt(this.g,new ol(y))};Pi.prototype.va=function(y){Wt(this.g,new hl)};Pi.prototype.ua=function(){Wt(this.g,"b")};$n.prototype.createWebChannel=$n.prototype.g;le.prototype.send=le.prototype.u;le.prototype.open=le.prototype.m;le.prototype.close=le.prototype.close;ls.NO_ERROR=0;ls.TIMEOUT=8;ls.HTTP_ERROR=6;Oh.COMPLETE="complete";Fh.EventType=dn;dn.OPEN="a";dn.CLOSE="b";dn.ERROR="c";dn.MESSAGE="d";Vt.prototype.listen=Vt.prototype.N;Bt.prototype.listenOnce=Bt.prototype.O;Bt.prototype.getLastError=Bt.prototype.La;Bt.prototype.getLastErrorCode=Bt.prototype.Da;Bt.prototype.getStatus=Bt.prototype.ba;Bt.prototype.getResponseJson=Bt.prototype.Qa;Bt.prototype.getResponseText=Bt.prototype.ga;Bt.prototype.send=Bt.prototype.ea;var yc=function(){return new $n},Ac=function(){return hs()},bs=ls,Tc=Oh,Ec=ei,ao={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Sc=pn,Ln=Fh,Cc=Bt;const oo="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(p){this.uid=p}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(p){return p.uid===this.uid}}ee.UNAUTHENTICATED=new ee(null),ee.GOOGLE_CREDENTIALS=new ee("google-credentials-uid"),ee.FIRST_PARTY=new ee("first-party-uid"),ee.MOCK_USER=new ee("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="9.9.4";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe=new nh("@firebase/firestore");function ho(){return qe.logLevel}function st(y,...p){if(qe.logLevel<=Tt.DEBUG){const i=p.map(na);qe.debug(`Firestore (${Mi}): ${y}`,...i)}}function Re(y,...p){if(qe.logLevel<=Tt.ERROR){const i=p.map(na);qe.error(`Firestore (${Mi}): ${y}`,...i)}}function lo(y,...p){if(qe.logLevel<=Tt.WARN){const i=p.map(na);qe.warn(`Firestore (${Mi}): ${y}`,...i)}}function na(y){if(typeof y=="string")return y;try{return p=y,JSON.stringify(p)}catch{return y}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(y="Unexpected state"){const p=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: `+y;throw Re(p),new Error(p)}function St(y,p){y||ft()}function dt(y,p){return y}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends Ei{constructor(p,i){super(p,i),this.code=p,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(){this.promise=new Promise((p,i)=>{this.resolve=p,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(p,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${p}`)}}class Mc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(p,i){p.enqueueRetryable(()=>i(ee.UNAUTHENTICATED))}shutdown(){}}class Rc{constructor(p){this.t=p,this.currentUser=ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(p,i){let m=this.i;const t=o=>this.i!==m?(m=this.i,i(o)):Promise.resolve();let e=new Ie;this.o=()=>{this.i++,this.currentUser=this.u(),e.resolve(),e=new Ie,p.enqueueRetryable(()=>t(this.currentUser))};const f=()=>{const o=e;p.enqueueRetryable(async()=>{await o.promise,await t(this.currentUser)})},a=o=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),e.resolve(),e=new Ie)}},0),f()}getToken(){const p=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(m=>this.i!==p?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):m?(St(typeof m.accessToken=="string"),new Pc(m.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const p=this.auth&&this.auth.getUid();return St(p===null||typeof p=="string"),new ee(p)}}class Lc{constructor(p,i,m,t){this.h=p,this.l=i,this.m=m,this.g=t,this.type="FirstParty",this.user=ee.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(St(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const p=this.I();return p&&this.p.set("Authorization",p),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Oc{constructor(p,i,m,t){this.h=p,this.l=i,this.m=m,this.g=t}getToken(){return Promise.resolve(new Lc(this.h,this.l,this.m,this.g))}start(p,i){p.enqueueRetryable(()=>i(ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fc{constructor(p){this.value=p,this.type="AppCheck",this.headers=new Map,p&&p.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ic{constructor(p){this.T=p,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(p,i){const m=e=>{e.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const f=e.token!==this.A;return this.A=e.token,st("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(e.token):Promise.resolve()};this.o=e=>{p.enqueueRetryable(()=>m(e))};const t=e=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit(e=>t(e)),setTimeout(()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?t(e):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const p=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(p).then(i=>i?(St(typeof i.token=="string"),this.A=i.token,new Fc(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(y){const p=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(y);if(p&&typeof p.getRandomValues=="function")p.getRandomValues(i);else for(let m=0;m<y;m++)i[m]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static R(){const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/p.length)*p.length;let m="";for(;m.length<20;){const t=Dc(40);for(let e=0;e<t.length;++e)m.length<20&&t[e]<i&&(m+=p.charAt(t[e]%p.length))}return m}}function Et(y,p){return y<p?-1:y>p?1:0}function vi(y,p,i){return y.length===p.length&&y.every((m,t)=>i(m,p[t]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(p,i){if(this.seconds=p,this.nanoseconds=i,i<0)throw new ot(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ot(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(p<-62135596800)throw new ot(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+p);if(p>=253402300800)throw new ot(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+p)}static now(){return Nt.fromMillis(Date.now())}static fromDate(p){return Nt.fromMillis(p.getTime())}static fromMillis(p){const i=Math.floor(p/1e3),m=Math.floor(1e6*(p-1e3*i));return new Nt(i,m)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(p){return this.seconds===p.seconds?Et(this.nanoseconds,p.nanoseconds):Et(this.seconds,p.seconds)}isEqual(p){return p.seconds===this.seconds&&p.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const p=this.seconds- -62135596800;return String(p).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(p){this.timestamp=p}static fromTimestamp(p){return new pt(p)}static min(){return new pt(new Nt(0,0))}static max(){return new pt(new Nt(253402300799,999999999))}compareTo(p){return this.timestamp._compareTo(p.timestamp)}isEqual(p){return this.timestamp.isEqual(p.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(p,i,m){i===void 0?i=0:i>p.length&&ft(),m===void 0?m=p.length-i:m>p.length-i&&ft(),this.segments=p,this.offset=i,this.len=m}get length(){return this.len}isEqual(p){return ki.comparator(this,p)===0}child(p){const i=this.segments.slice(this.offset,this.limit());return p instanceof ki?p.forEach(m=>{i.push(m)}):i.push(p),this.construct(i)}limit(){return this.offset+this.length}popFirst(p){return p=p===void 0?1:p,this.construct(this.segments,this.offset+p,this.length-p)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(p){return this.segments[this.offset+p]}isEmpty(){return this.length===0}isPrefixOf(p){if(p.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==p.get(i))return!1;return!0}isImmediateParentOf(p){if(this.length+1!==p.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==p.get(i))return!1;return!0}forEach(p){for(let i=this.offset,m=this.limit();i<m;i++)p(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(p,i){const m=Math.min(p.length,i.length);for(let t=0;t<m;t++){const e=p.get(t),f=i.get(t);if(e<f)return-1;if(e>f)return 1}return p.length<i.length?-1:p.length>i.length?1:0}}class Mt extends ki{construct(p,i,m){return new Mt(p,i,m)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...p){const i=[];for(const m of p){if(m.indexOf("//")>=0)throw new ot(q.INVALID_ARGUMENT,`Invalid segment (${m}). Paths must not contain // in them.`);i.push(...m.split("/").filter(t=>t.length>0))}return new Mt(i)}static emptyPath(){return new Mt([])}}const Bc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends ki{construct(p,i,m){return new Kt(p,i,m)}static isValidIdentifier(p){return Bc.test(p)}canonicalString(){return this.toArray().map(p=>(p=p.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(p)||(p="`"+p+"`"),p)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(p){const i=[];let m="",t=0;const e=()=>{if(m.length===0)throw new ot(q.INVALID_ARGUMENT,`Invalid field path (${p}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(m),m=""};let f=!1;for(;t<p.length;){const a=p[t];if(a==="\\"){if(t+1===p.length)throw new ot(q.INVALID_ARGUMENT,"Path has trailing escape character: "+p);const o=p[t+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new ot(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+p);m+=o,t+=2}else a==="`"?(f=!f,t++):a!=="."||f?(m+=a,t++):(e(),t++)}if(e(),f)throw new ot(q.INVALID_ARGUMENT,"Unterminated ` in path: "+p);return new Kt(i)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(p){this.path=p}static fromPath(p){return new at(Mt.fromString(p))}static fromName(p){return new at(Mt.fromString(p).popFirst(5))}static empty(){return new at(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(p){return this.path.length>=2&&this.path.get(this.path.length-2)===p}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(p){return p!==null&&Mt.comparator(this.path,p.path)===0}toString(){return this.path.toString()}static comparator(p,i){return Mt.comparator(p.path,i.path)}static isDocumentKey(p){return p.length%2==0}static fromSegments(p){return new at(new Mt(p.slice()))}}function Nc(y,p){const i=y.toTimestamp().seconds,m=y.toTimestamp().nanoseconds+1,t=pt.fromTimestamp(m===1e9?new Nt(i+1,0):new Nt(i,m));return new Ne(t,at.empty(),p)}function wc(y){return new Ne(y.readTime,y.key,-1)}class Ne{constructor(p,i,m){this.readTime=p,this.documentKey=i,this.largestBatchId=m}static min(){return new Ne(pt.min(),at.empty(),-1)}static max(){return new Ne(pt.max(),at.empty(),-1)}}function Gc(y,p){let i=y.readTime.compareTo(p.readTime);return i!==0?i:(i=at.comparator(y.documentKey,p.documentKey),i!==0?i:Et(y.largestBatchId,p.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(p){this.onCommittedListeners.push(p)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(p=>p())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xn(y){if(y.code!==q.FAILED_PRECONDITION||y.message!==Uc)throw y;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _{constructor(p){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,p(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(p){return this.next(void 0,p)}next(p,i){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(p,this.result):new _((m,t)=>{this.nextCallback=e=>{this.wrapSuccess(p,e).next(m,t)},this.catchCallback=e=>{this.wrapFailure(i,e).next(m,t)}})}toPromise(){return new Promise((p,i)=>{this.next(p,i)})}wrapUserFunction(p){try{const i=p();return i instanceof _?i:_.resolve(i)}catch(i){return _.reject(i)}}wrapSuccess(p,i){return p?this.wrapUserFunction(()=>p(i)):_.resolve(i)}wrapFailure(p,i){return p?this.wrapUserFunction(()=>p(i)):_.reject(i)}static resolve(p){return new _((i,m)=>{i(p)})}static reject(p){return new _((i,m)=>{m(p)})}static waitFor(p){return new _((i,m)=>{let t=0,e=0,f=!1;p.forEach(a=>{++t,a.next(()=>{++e,f&&e===t&&i()},o=>m(o))}),f=!0,e===t&&i()})}static or(p){let i=_.resolve(!1);for(const m of p)i=i.next(t=>t?_.resolve(t):m());return i}static forEach(p,i){const m=[];return p.forEach((t,e)=>{m.push(i.call(this,t,e))}),this.waitFor(m)}static mapArray(p,i){return new _((m,t)=>{const e=p.length,f=new Array(e);let a=0;for(let o=0;o<e;o++){const s=o;i(p[s]).next(n=>{f[s]=n,++a,a===e&&m(f)},n=>t(n))}})}static doWhile(p,i){return new _((m,t)=>{const e=()=>{p()===!0?i().next(()=>{e()},t):m()};e()})}}function yn(y){return y.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(p,i){this.previousValue=p,i&&(i.sequenceNumberHandler=m=>this.ut(m),this.ct=m=>i.writeSequenceNumber(m))}ut(p){return this.previousValue=Math.max(p,this.previousValue),this.previousValue}next(){const p=++this.previousValue;return this.ct&&this.ct(p),p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(y){let p=0;for(const i in y)Object.prototype.hasOwnProperty.call(y,i)&&p++;return p}function ii(y,p){for(const i in y)Object.prototype.hasOwnProperty.call(y,i)&&p(i,y[i])}function ul(y){for(const p in y)if(Object.prototype.hasOwnProperty.call(y,p))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sa.at=-1;class Gt{constructor(p,i){this.comparator=p,this.root=i||Yt.EMPTY}insert(p,i){return new Gt(this.comparator,this.root.insert(p,i,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(p){return new Gt(this.comparator,this.root.remove(p,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(p){let i=this.root;for(;!i.isEmpty();){const m=this.comparator(p,i.key);if(m===0)return i.value;m<0?i=i.left:m>0&&(i=i.right)}return null}indexOf(p){let i=0,m=this.root;for(;!m.isEmpty();){const t=this.comparator(p,m.key);if(t===0)return i+m.left.size;t<0?m=m.left:(i+=m.left.size+1,m=m.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(p){return this.root.inorderTraversal(p)}forEach(p){this.inorderTraversal((i,m)=>(p(i,m),!1))}toString(){const p=[];return this.inorderTraversal((i,m)=>(p.push(`${i}:${m}`),!1)),`{${p.join(", ")}}`}reverseTraversal(p){return this.root.reverseTraversal(p)}getIterator(){return new On(this.root,null,this.comparator,!1)}getIteratorFrom(p){return new On(this.root,p,this.comparator,!1)}getReverseIterator(){return new On(this.root,null,this.comparator,!0)}getReverseIteratorFrom(p){return new On(this.root,p,this.comparator,!0)}}class On{constructor(p,i,m,t){this.isReverse=t,this.nodeStack=[];let e=1;for(;!p.isEmpty();)if(e=i?m(p.key,i):1,i&&t&&(e*=-1),e<0)p=this.isReverse?p.left:p.right;else{if(e===0){this.nodeStack.push(p);break}this.nodeStack.push(p),p=this.isReverse?p.right:p.left}}getNext(){let p=this.nodeStack.pop();const i={key:p.key,value:p.value};if(this.isReverse)for(p=p.left;!p.isEmpty();)this.nodeStack.push(p),p=p.right;else for(p=p.right;!p.isEmpty();)this.nodeStack.push(p),p=p.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const p=this.nodeStack[this.nodeStack.length-1];return{key:p.key,value:p.value}}}class Yt{constructor(p,i,m,t,e){this.key=p,this.value=i,this.color=m!=null?m:Yt.RED,this.left=t!=null?t:Yt.EMPTY,this.right=e!=null?e:Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(p,i,m,t,e){return new Yt(p!=null?p:this.key,i!=null?i:this.value,m!=null?m:this.color,t!=null?t:this.left,e!=null?e:this.right)}isEmpty(){return!1}inorderTraversal(p){return this.left.inorderTraversal(p)||p(this.key,this.value)||this.right.inorderTraversal(p)}reverseTraversal(p){return this.right.reverseTraversal(p)||p(this.key,this.value)||this.left.reverseTraversal(p)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(p,i,m){let t=this;const e=m(p,t.key);return t=e<0?t.copy(null,null,null,t.left.insert(p,i,m),null):e===0?t.copy(null,i,null,null,null):t.copy(null,null,null,null,t.right.insert(p,i,m)),t.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let p=this;return p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.removeMin(),null),p.fixUp()}remove(p,i){let m,t=this;if(i(p,t.key)<0)t.left.isEmpty()||t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.remove(p,i),null);else{if(t.left.isRed()&&(t=t.rotateRight()),t.right.isEmpty()||t.right.isRed()||t.right.left.isRed()||(t=t.moveRedRight()),i(p,t.key)===0){if(t.right.isEmpty())return Yt.EMPTY;m=t.right.min(),t=t.copy(m.key,m.value,null,null,t.right.removeMin())}t=t.copy(null,null,null,null,t.right.remove(p,i))}return t.fixUp()}isRed(){return this.color}fixUp(){let p=this;return p.right.isRed()&&!p.left.isRed()&&(p=p.rotateLeft()),p.left.isRed()&&p.left.left.isRed()&&(p=p.rotateRight()),p.left.isRed()&&p.right.isRed()&&(p=p.colorFlip()),p}moveRedLeft(){let p=this.colorFlip();return p.right.left.isRed()&&(p=p.copy(null,null,null,null,p.right.rotateRight()),p=p.rotateLeft(),p=p.colorFlip()),p}moveRedRight(){let p=this.colorFlip();return p.left.left.isRed()&&(p=p.rotateRight(),p=p.colorFlip()),p}rotateLeft(){const p=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,p,null)}rotateRight(){const p=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,p)}colorFlip(){const p=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,p,i)}checkMaxDepth(){const p=this.check();return Math.pow(2,p)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const p=this.left.check();if(p!==this.right.check())throw ft();return p+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(y,p,i,m,t){return this}insert(y,p,i){return new Yt(y,p)}remove(y,p){return this}isEmpty(){return!0}inorderTraversal(y){return!1}reverseTraversal(y){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(p){this.comparator=p,this.data=new Gt(this.comparator)}has(p){return this.data.get(p)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(p){return this.data.indexOf(p)}forEach(p){this.data.inorderTraversal((i,m)=>(p(i),!1))}forEachInRange(p,i){const m=this.data.getIteratorFrom(p[0]);for(;m.hasNext();){const t=m.getNext();if(this.comparator(t.key,p[1])>=0)return;i(t.key)}}forEachWhile(p,i){let m;for(m=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();m.hasNext();)if(!p(m.getNext().key))return}firstAfterOrEqual(p){const i=this.data.getIteratorFrom(p);return i.hasNext()?i.getNext().key:null}getIterator(){return new fo(this.data.getIterator())}getIteratorFrom(p){return new fo(this.data.getIteratorFrom(p))}add(p){return this.copy(this.data.remove(p).insert(p,!0))}delete(p){return this.has(p)?this.copy(this.data.remove(p)):this}isEmpty(){return this.data.isEmpty()}unionWith(p){let i=this;return i.size<p.size&&(i=p,p=this),p.forEach(m=>{i=i.add(m)}),i}isEqual(p){if(!(p instanceof wt)||this.size!==p.size)return!1;const i=this.data.getIterator(),m=p.data.getIterator();for(;i.hasNext();){const t=i.getNext().key,e=m.getNext().key;if(this.comparator(t,e)!==0)return!1}return!0}toArray(){const p=[];return this.forEach(i=>{p.push(i)}),p}toString(){const p=[];return this.forEach(i=>p.push(i)),"SortedSet("+p.toString()+")"}copy(p){const i=new wt(this.comparator);return i.data=p,i}}class fo{constructor(p){this.iter=p}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(p){this.fields=p,p.sort(Kt.comparator)}static empty(){return new fe([])}unionWith(p){let i=new wt(Kt.comparator);for(const m of this.fields)i=i.add(m);for(const m of p)i=i.add(m);return new fe(i.toArray())}covers(p){for(const i of this.fields)if(i.isPrefixOf(p))return!0;return!1}isEqual(p){return vi(this.fields,p.fields,(i,m)=>i.isEqual(m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(p){this.binaryString=p}static fromBase64String(p){const i=atob(p);return new Ht(i)}static fromUint8Array(p){const i=function(m){let t="";for(let e=0;e<m.length;++e)t+=String.fromCharCode(m[e]);return t}(p);return new Ht(i)}[Symbol.iterator](){let p=0;return{next:()=>p<this.binaryString.length?{value:this.binaryString.charCodeAt(p++),done:!1}:{value:void 0,done:!0}}}toBase64(){return p=this.binaryString,btoa(p);var p}toUint8Array(){return function(p){const i=new Uint8Array(p.length);for(let m=0;m<p.length;m++)i[m]=p.charCodeAt(m);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(p){return Et(this.binaryString,p.binaryString)}isEqual(p){return this.binaryString===p.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const Yc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function we(y){if(St(!!y),typeof y=="string"){let p=0;const i=Yc.exec(y);if(St(!!i),i[1]){let t=i[1];t=(t+"000000000").substr(0,9),p=Number(t)}const m=new Date(y);return{seconds:Math.floor(m.getTime()/1e3),nanos:p}}return{seconds:Dt(y.seconds),nanos:Dt(y.nanos)}}function Dt(y){return typeof y=="number"?y:typeof y=="string"?Number(y):0}function pi(y){return typeof y=="string"?Ht.fromBase64String(y):Ht.fromUint8Array(y)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(y){var p,i;return((i=(((p=y==null?void 0:y.mapValue)===null||p===void 0?void 0:p.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function dl(y){const p=y.mapValue.fields.__previous_value__;return fl(p)?dl(p):p}function qi(y){const p=we(y.mapValue.fields.__local_write_time__.timestampValue);return new Nt(p.seconds,p.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(p,i,m,t,e,f,a,o){this.databaseId=p,this.appId=i,this.persistenceKey=m,this.host=t,this.ssl=e,this.forceLongPolling=f,this.autoDetectLongPolling=a,this.useFetchStreams=o}}class _i{constructor(p,i){this.projectId=p,this.database=i||"(default)"}static empty(){return new _i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(p){return p instanceof _i&&p.projectId===this.projectId&&p.database===this.database}}function gs(y){return y==null}function Zn(y){return y===0&&1/y==-1/0}function Xc(y){return typeof y=="number"&&Number.isInteger(y)&&!Zn(y)&&y<=Number.MAX_SAFE_INTEGER&&y>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _e(y){return"nullValue"in y?0:"booleanValue"in y?1:"integerValue"in y||"doubleValue"in y?2:"timestampValue"in y?3:"stringValue"in y?5:"bytesValue"in y?6:"referenceValue"in y?7:"geoPointValue"in y?8:"arrayValue"in y?9:"mapValue"in y?fl(y)?4:Wc(y)?9007199254740991:10:ft()}function pe(y,p){if(y===p)return!0;const i=_e(y);if(i!==_e(p))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return y.booleanValue===p.booleanValue;case 4:return qi(y).isEqual(qi(p));case 3:return function(m,t){if(typeof m.timestampValue=="string"&&typeof t.timestampValue=="string"&&m.timestampValue.length===t.timestampValue.length)return m.timestampValue===t.timestampValue;const e=we(m.timestampValue),f=we(t.timestampValue);return e.seconds===f.seconds&&e.nanos===f.nanos}(y,p);case 5:return y.stringValue===p.stringValue;case 6:return function(m,t){return pi(m.bytesValue).isEqual(pi(t.bytesValue))}(y,p);case 7:return y.referenceValue===p.referenceValue;case 8:return function(m,t){return Dt(m.geoPointValue.latitude)===Dt(t.geoPointValue.latitude)&&Dt(m.geoPointValue.longitude)===Dt(t.geoPointValue.longitude)}(y,p);case 2:return function(m,t){if("integerValue"in m&&"integerValue"in t)return Dt(m.integerValue)===Dt(t.integerValue);if("doubleValue"in m&&"doubleValue"in t){const e=Dt(m.doubleValue),f=Dt(t.doubleValue);return e===f?Zn(e)===Zn(f):isNaN(e)&&isNaN(f)}return!1}(y,p);case 9:return vi(y.arrayValue.values||[],p.arrayValue.values||[],pe);case 10:return function(m,t){const e=m.mapValue.fields||{},f=t.mapValue.fields||{};if(uo(e)!==uo(f))return!1;for(const a in e)if(e.hasOwnProperty(a)&&(f[a]===void 0||!pe(e[a],f[a])))return!1;return!0}(y,p);default:return ft()}}function tn(y,p){return(y.values||[]).find(i=>pe(i,p))!==void 0}function mi(y,p){if(y===p)return 0;const i=_e(y),m=_e(p);if(i!==m)return Et(i,m);switch(i){case 0:case 9007199254740991:return 0;case 1:return Et(y.booleanValue,p.booleanValue);case 2:return function(t,e){const f=Dt(t.integerValue||t.doubleValue),a=Dt(e.integerValue||e.doubleValue);return f<a?-1:f>a?1:f===a?0:isNaN(f)?isNaN(a)?0:-1:1}(y,p);case 3:return co(y.timestampValue,p.timestampValue);case 4:return co(qi(y),qi(p));case 5:return Et(y.stringValue,p.stringValue);case 6:return function(t,e){const f=pi(t),a=pi(e);return f.compareTo(a)}(y.bytesValue,p.bytesValue);case 7:return function(t,e){const f=t.split("/"),a=e.split("/");for(let o=0;o<f.length&&o<a.length;o++){const s=Et(f[o],a[o]);if(s!==0)return s}return Et(f.length,a.length)}(y.referenceValue,p.referenceValue);case 8:return function(t,e){const f=Et(Dt(t.latitude),Dt(e.latitude));return f!==0?f:Et(Dt(t.longitude),Dt(e.longitude))}(y.geoPointValue,p.geoPointValue);case 9:return function(t,e){const f=t.values||[],a=e.values||[];for(let o=0;o<f.length&&o<a.length;++o){const s=mi(f[o],a[o]);if(s)return s}return Et(f.length,a.length)}(y.arrayValue,p.arrayValue);case 10:return function(t,e){if(t===Fn.mapValue&&e===Fn.mapValue)return 0;if(t===Fn.mapValue)return 1;if(e===Fn.mapValue)return-1;const f=t.fields||{},a=Object.keys(f),o=e.fields||{},s=Object.keys(o);a.sort(),s.sort();for(let n=0;n<a.length&&n<s.length;++n){const r=Et(a[n],s[n]);if(r!==0)return r;const u=mi(f[a[n]],o[s[n]]);if(u!==0)return u}return Et(a.length,s.length)}(y.mapValue,p.mapValue);default:throw ft()}}function co(y,p){if(typeof y=="string"&&typeof p=="string"&&y.length===p.length)return Et(y,p);const i=we(y),m=we(p),t=Et(i.seconds,m.seconds);return t!==0?t:Et(i.nanos,m.nanos)}function ui(y){return vr(y)}function vr(y){return"nullValue"in y?"null":"booleanValue"in y?""+y.booleanValue:"integerValue"in y?""+y.integerValue:"doubleValue"in y?""+y.doubleValue:"timestampValue"in y?function(m){const t=we(m);return`time(${t.seconds},${t.nanos})`}(y.timestampValue):"stringValue"in y?y.stringValue:"bytesValue"in y?pi(y.bytesValue).toBase64():"referenceValue"in y?(i=y.referenceValue,at.fromName(i).toString()):"geoPointValue"in y?`geo(${(p=y.geoPointValue).latitude},${p.longitude})`:"arrayValue"in y?function(m){let t="[",e=!0;for(const f of m.values||[])e?e=!1:t+=",",t+=vr(f);return t+"]"}(y.arrayValue):"mapValue"in y?function(m){const t=Object.keys(m.fields||{}).sort();let e="{",f=!0;for(const a of t)f?f=!1:e+=",",e+=`${a}:${vr(m.fields[a])}`;return e+"}"}(y.mapValue):ft();var p,i}function pr(y){return!!y&&"integerValue"in y}function ra(y){return!!y&&"arrayValue"in y}function vo(y){return!!y&&"nullValue"in y}function po(y){return!!y&&"doubleValue"in y&&isNaN(Number(y.doubleValue))}function Nn(y){return!!y&&"mapValue"in y}function Vi(y){if(y.geoPointValue)return{geoPointValue:Object.assign({},y.geoPointValue)};if(y.timestampValue&&typeof y.timestampValue=="object")return{timestampValue:Object.assign({},y.timestampValue)};if(y.mapValue){const p={mapValue:{fields:{}}};return ii(y.mapValue.fields,(i,m)=>p.mapValue.fields[i]=Vi(m)),p}if(y.arrayValue){const p={arrayValue:{values:[]}};for(let i=0;i<(y.arrayValue.values||[]).length;++i)p.arrayValue.values[i]=Vi(y.arrayValue.values[i]);return p}return Object.assign({},y)}function Wc(y){return(((y.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(p){this.value=p}static empty(){return new ie({mapValue:{}})}field(p){if(p.isEmpty())return this.value;{let i=this.value;for(let m=0;m<p.length-1;++m)if(i=(i.mapValue.fields||{})[p.get(m)],!Nn(i))return null;return i=(i.mapValue.fields||{})[p.lastSegment()],i||null}}set(p,i){this.getFieldsMap(p.popLast())[p.lastSegment()]=Vi(i)}setAll(p){let i=Kt.emptyPath(),m={},t=[];p.forEach((f,a)=>{if(!i.isImmediateParentOf(a)){const o=this.getFieldsMap(i);this.applyChanges(o,m,t),m={},t=[],i=a.popLast()}f?m[a.lastSegment()]=Vi(f):t.push(a.lastSegment())});const e=this.getFieldsMap(i);this.applyChanges(e,m,t)}delete(p){const i=this.field(p.popLast());Nn(i)&&i.mapValue.fields&&delete i.mapValue.fields[p.lastSegment()]}isEqual(p){return pe(this.value,p.value)}getFieldsMap(p){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let m=0;m<p.length;++m){let t=i.mapValue.fields[p.get(m)];Nn(t)&&t.mapValue.fields||(t={mapValue:{fields:{}}},i.mapValue.fields[p.get(m)]=t),i=t}return i.mapValue.fields}applyChanges(p,i,m){ii(i,(t,e)=>p[t]=e);for(const t of m)delete p[t]}clone(){return new ie(Vi(this.value))}}function cl(y){const p=[];return ii(y.fields,(i,m)=>{const t=new Kt([i]);if(Nn(m)){const e=cl(m.mapValue).fields;if(e.length===0)p.push(t);else for(const f of e)p.push(t.child(f))}else p.push(t)}),new fe(p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(p,i,m,t,e,f){this.key=p,this.documentType=i,this.version=m,this.readTime=t,this.data=e,this.documentState=f}static newInvalidDocument(p){return new zt(p,0,pt.min(),pt.min(),ie.empty(),0)}static newFoundDocument(p,i,m){return new zt(p,1,i,pt.min(),m,0)}static newNoDocument(p,i){return new zt(p,2,i,pt.min(),ie.empty(),0)}static newUnknownDocument(p,i){return new zt(p,3,i,pt.min(),ie.empty(),2)}convertToFoundDocument(p,i){return this.version=p,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(p){return this.version=p,this.documentType=2,this.data=ie.empty(),this.documentState=0,this}convertToUnknownDocument(p){return this.version=p,this.documentType=3,this.data=ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(p){return this.readTime=p,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(p){return p instanceof zt&&this.key.isEqual(p.key)&&this.version.isEqual(p.version)&&this.documentType===p.documentType&&this.documentState===p.documentState&&this.data.isEqual(p.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(p,i=null,m=[],t=[],e=null,f=null,a=null){this.path=p,this.collectionGroup=i,this.orderBy=m,this.filters=t,this.limit=e,this.startAt=f,this.endAt=a,this.ht=null}}function mo(y,p=null,i=[],m=[],t=null,e=null,f=null){return new Hc(y,p,i,m,t,e,f)}function aa(y){const p=dt(y);if(p.ht===null){let i=p.path.canonicalString();p.collectionGroup!==null&&(i+="|cg:"+p.collectionGroup),i+="|f:",i+=p.filters.map(m=>{return(t=m).field.canonicalString()+t.op.toString()+ui(t.value);var t}).join(","),i+="|ob:",i+=p.orderBy.map(m=>function(t){return t.field.canonicalString()+t.dir}(m)).join(","),gs(p.limit)||(i+="|l:",i+=p.limit),p.startAt&&(i+="|lb:",i+=p.startAt.inclusive?"b:":"a:",i+=p.startAt.position.map(m=>ui(m)).join(",")),p.endAt&&(i+="|ub:",i+=p.endAt.inclusive?"a:":"b:",i+=p.endAt.position.map(m=>ui(m)).join(",")),p.ht=i}return p.ht}function bc(y){let p=y.path.canonicalString();return y.collectionGroup!==null&&(p+=" collectionGroup="+y.collectionGroup),y.filters.length>0&&(p+=`, filters: [${y.filters.map(i=>{return`${(m=i).field.canonicalString()} ${m.op} ${ui(m.value)}`;var m}).join(", ")}]`),gs(y.limit)||(p+=", limit: "+y.limit),y.orderBy.length>0&&(p+=`, orderBy: [${y.orderBy.map(i=>function(m){return`${m.field.canonicalString()} (${m.dir})`}(i)).join(", ")}]`),y.startAt&&(p+=", startAt: ",p+=y.startAt.inclusive?"b:":"a:",p+=y.startAt.position.map(i=>ui(i)).join(",")),y.endAt&&(p+=", endAt: ",p+=y.endAt.inclusive?"a:":"b:",p+=y.endAt.position.map(i=>ui(i)).join(",")),`Target(${p})`}function oa(y,p){if(y.limit!==p.limit||y.orderBy.length!==p.orderBy.length)return!1;for(let t=0;t<y.orderBy.length;t++)if(!qc(y.orderBy[t],p.orderBy[t]))return!1;if(y.filters.length!==p.filters.length)return!1;for(let t=0;t<y.filters.length;t++)if(i=y.filters[t],m=p.filters[t],i.op!==m.op||!i.field.isEqual(m.field)||!pe(i.value,m.value))return!1;var i,m;return y.collectionGroup===p.collectionGroup&&!!y.path.isEqual(p.path)&&!!xo(y.startAt,p.startAt)&&xo(y.endAt,p.endAt)}function mr(y){return at.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0}class ne extends class{}{constructor(p,i,m){super(),this.field=p,this.op=i,this.value=m}static create(p,i,m){return p.isKeyField()?i==="in"||i==="not-in"?this.lt(p,i,m):new Qc(p,i,m):i==="array-contains"?new Zc(p,m):i==="in"?new Jc(p,m):i==="not-in"?new jc(p,m):i==="array-contains-any"?new kc(p,m):new ne(p,i,m)}static lt(p,i,m){return i==="in"?new Kc(p,m):new $c(p,m)}matches(p){const i=p.data.field(this.field);return this.op==="!="?i!==null&&this.ft(mi(i,this.value)):i!==null&&_e(this.value)===_e(i)&&this.ft(mi(i,this.value))}ft(p){switch(this.op){case"<":return p<0;case"<=":return p<=0;case"==":return p===0;case"!=":return p!==0;case">":return p>0;case">=":return p>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Qc extends ne{constructor(p,i,m){super(p,i,m),this.key=at.fromName(m.referenceValue)}matches(p){const i=at.comparator(p.key,this.key);return this.ft(i)}}class Kc extends ne{constructor(p,i){super(p,"in",i),this.keys=vl("in",i)}matches(p){return this.keys.some(i=>i.isEqual(p.key))}}class $c extends ne{constructor(p,i){super(p,"not-in",i),this.keys=vl("not-in",i)}matches(p){return!this.keys.some(i=>i.isEqual(p.key))}}function vl(y,p){var i;return(((i=p.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(m=>at.fromName(m.referenceValue))}class Zc extends ne{constructor(p,i){super(p,"array-contains",i)}matches(p){const i=p.data.field(this.field);return ra(i)&&tn(i.arrayValue,this.value)}}class Jc extends ne{constructor(p,i){super(p,"in",i)}matches(p){const i=p.data.field(this.field);return i!==null&&tn(this.value.arrayValue,i)}}class jc extends ne{constructor(p,i){super(p,"not-in",i)}matches(p){if(tn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=p.data.field(this.field);return i!==null&&!tn(this.value.arrayValue,i)}}class kc extends ne{constructor(p,i){super(p,"array-contains-any",i)}matches(p){const i=p.data.field(this.field);return!(!ra(i)||!i.arrayValue.values)&&i.arrayValue.values.some(m=>tn(this.value.arrayValue,m))}}class Jn{constructor(p,i){this.position=p,this.inclusive=i}}class Yi{constructor(p,i="asc"){this.field=p,this.dir=i}}function qc(y,p){return y.dir===p.dir&&y.field.isEqual(p.field)}function go(y,p,i){let m=0;for(let t=0;t<y.position.length;t++){const e=p[t],f=y.position[t];if(e.field.isKeyField()?m=at.comparator(at.fromName(f.referenceValue),i.key):m=mi(f,i.data.field(e.field)),e.dir==="desc"&&(m*=-1),m!==0)break}return m}function xo(y,p){if(y===null)return p===null;if(p===null||y.inclusive!==p.inclusive||y.position.length!==p.position.length)return!1;for(let i=0;i<y.position.length;i++)if(!pe(y.position[i],p.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(p,i=null,m=[],t=[],e=null,f="F",a=null,o=null){this.path=p,this.collectionGroup=i,this.explicitOrderBy=m,this.filters=t,this.limit=e,this.limitType=f,this.startAt=a,this.endAt=o,this._t=null,this.wt=null,this.startAt,this.endAt}}function _c(y,p,i,m,t,e,f,a){return new xs(y,p,i,m,t,e,f,a)}function ys(y){return new xs(y)}function yo(y){return y.filters.length===0&&y.limit===null&&y.startAt==null&&y.endAt==null&&(y.explicitOrderBy.length===0||y.explicitOrderBy.length===1&&y.explicitOrderBy[0].field.isKeyField())}function tv(y){return y.explicitOrderBy.length>0?y.explicitOrderBy[0].field:null}function ev(y){for(const p of y.filters)if(p.dt())return p.field;return null}function iv(y){return y.collectionGroup!==null}function en(y){const p=dt(y);if(p._t===null){p._t=[];const i=ev(p),m=tv(p);if(i!==null&&m===null)i.isKeyField()||p._t.push(new Yi(i)),p._t.push(new Yi(Kt.keyField(),"asc"));else{let t=!1;for(const e of p.explicitOrderBy)p._t.push(e),e.field.isKeyField()&&(t=!0);if(!t){const e=p.explicitOrderBy.length>0?p.explicitOrderBy[p.explicitOrderBy.length-1].dir:"asc";p._t.push(new Yi(Kt.keyField(),e))}}}return p._t}function Le(y){const p=dt(y);if(!p.wt)if(p.limitType==="F")p.wt=mo(p.path,p.collectionGroup,en(p),p.filters,p.limit,p.startAt,p.endAt);else{const i=[];for(const e of en(p)){const f=e.dir==="desc"?"asc":"desc";i.push(new Yi(e.field,f))}const m=p.endAt?new Jn(p.endAt.position,p.endAt.inclusive):null,t=p.startAt?new Jn(p.startAt.position,p.startAt.inclusive):null;p.wt=mo(p.path,p.collectionGroup,i,p.filters,p.limit,m,t)}return p.wt}function gr(y,p,i){return new xs(y.path,y.collectionGroup,y.explicitOrderBy.slice(),y.filters.slice(),p,i,y.startAt,y.endAt)}function As(y,p){return oa(Le(y),Le(p))&&y.limitType===p.limitType}function pl(y){return`${aa(Le(y))}|lt:${y.limitType}`}function xr(y){return`Query(target=${bc(Le(y))}; limitType=${y.limitType})`}function ha(y,p){return p.isFoundDocument()&&function(i,m){const t=m.key.path;return i.collectionGroup!==null?m.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(t):at.isDocumentKey(i.path)?i.path.isEqual(t):i.path.isImmediateParentOf(t)}(y,p)&&function(i,m){for(const t of i.explicitOrderBy)if(!t.field.isKeyField()&&m.data.field(t.field)===null)return!1;return!0}(y,p)&&function(i,m){for(const t of i.filters)if(!t.matches(m))return!1;return!0}(y,p)&&function(i,m){return!(i.startAt&&!function(t,e,f){const a=go(t,e,f);return t.inclusive?a<=0:a<0}(i.startAt,en(i),m)||i.endAt&&!function(t,e,f){const a=go(t,e,f);return t.inclusive?a>=0:a>0}(i.endAt,en(i),m))}(y,p)}function nv(y){return y.collectionGroup||(y.path.length%2==1?y.path.lastSegment():y.path.get(y.path.length-2))}function ml(y){return(p,i)=>{let m=!1;for(const t of en(y)){const e=sv(t,p,i);if(e!==0)return e;m=m||t.field.isKeyField()}return 0}}function sv(y,p,i){const m=y.field.isKeyField()?at.comparator(p.key,i.key):function(t,e,f){const a=e.data.field(t),o=f.data.field(t);return a!==null&&o!==null?mi(a,o):ft()}(y.field,p,i);switch(y.dir){case"asc":return m;case"desc":return-1*m;default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(y,p){if(y.gt){if(isNaN(p))return{doubleValue:"NaN"};if(p===1/0)return{doubleValue:"Infinity"};if(p===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zn(p)?"-0":p}}function xl(y){return{integerValue:""+y}}function rv(y,p){return Xc(p)?xl(p):gl(y,p)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this._=void 0}}function av(y,p,i){return y instanceof jn?function(m,t){const e={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:m.seconds,nanos:m.nanoseconds}}}};return t&&(e.fields.__previous_value__=t),{mapValue:e}}(i,p):y instanceof nn?Al(y,p):y instanceof sn?Tl(y,p):function(m,t){const e=yl(m,t),f=Ao(e)+Ao(m.yt);return pr(e)&&pr(m.yt)?xl(f):gl(m.It,f)}(y,p)}function ov(y,p,i){return y instanceof nn?Al(y,p):y instanceof sn?Tl(y,p):i}function yl(y,p){return y instanceof kn?pr(i=p)||function(m){return!!m&&"doubleValue"in m}(i)?p:{integerValue:0}:null;var i}class jn extends Ts{}class nn extends Ts{constructor(p){super(),this.elements=p}}function Al(y,p){const i=El(p);for(const m of y.elements)i.some(t=>pe(t,m))||i.push(m);return{arrayValue:{values:i}}}class sn extends Ts{constructor(p){super(),this.elements=p}}function Tl(y,p){let i=El(p);for(const m of y.elements)i=i.filter(t=>!pe(t,m));return{arrayValue:{values:i}}}class kn extends Ts{constructor(p,i){super(),this.It=p,this.yt=i}}function Ao(y){return Dt(y.integerValue||y.doubleValue)}function El(y){return ra(y)&&y.arrayValue.values?y.arrayValue.values.slice():[]}function hv(y,p){return y.field.isEqual(p.field)&&function(i,m){return i instanceof nn&&m instanceof nn||i instanceof sn&&m instanceof sn?vi(i.elements,m.elements,pe):i instanceof kn&&m instanceof kn?pe(i.yt,m.yt):i instanceof jn&&m instanceof jn}(y.transform,p.transform)}class lv{constructor(p,i){this.version=p,this.transformResults=i}}class de{constructor(p,i){this.updateTime=p,this.exists=i}static none(){return new de}static exists(p){return new de(void 0,p)}static updateTime(p){return new de(p)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(p){return this.exists===p.exists&&(this.updateTime?!!p.updateTime&&this.updateTime.isEqual(p.updateTime):!p.updateTime)}}function wn(y,p){return y.updateTime!==void 0?p.isFoundDocument()&&p.version.isEqual(y.updateTime):y.exists===void 0||y.exists===p.isFoundDocument()}class Es{}function Sl(y,p){if(!y.hasLocalMutations||p&&p.fields.length===0)return null;if(p===null)return y.isNoDocument()?new Pl(y.key,de.none()):new An(y.key,y.data,de.none());{const i=y.data,m=ie.empty();let t=new wt(Kt.comparator);for(let e of p.fields)if(!t.has(e)){let f=i.field(e);f===null&&e.length>1&&(e=e.popLast(),f=i.field(e)),f===null?m.delete(e):m.set(e,f),t=t.add(e)}return new Ye(y.key,m,new fe(t.toArray()),de.none())}}function uv(y,p,i){y instanceof An?function(m,t,e){const f=m.value.clone(),a=Eo(m.fieldTransforms,t,e.transformResults);f.setAll(a),t.convertToFoundDocument(e.version,f).setHasCommittedMutations()}(y,p,i):y instanceof Ye?function(m,t,e){if(!wn(m.precondition,t))return void t.convertToUnknownDocument(e.version);const f=Eo(m.fieldTransforms,t,e.transformResults),a=t.data;a.setAll(Cl(m)),a.setAll(f),t.convertToFoundDocument(e.version,a).setHasCommittedMutations()}(y,p,i):function(m,t,e){t.convertToNoDocument(e.version).setHasCommittedMutations()}(0,p,i)}function zi(y,p,i,m){return y instanceof An?function(t,e,f,a){if(!wn(t.precondition,e))return f;const o=t.value.clone(),s=So(t.fieldTransforms,a,e);return o.setAll(s),e.convertToFoundDocument(e.version,o).setHasLocalMutations(),null}(y,p,i,m):y instanceof Ye?function(t,e,f,a){if(!wn(t.precondition,e))return f;const o=So(t.fieldTransforms,a,e),s=e.data;return s.setAll(Cl(t)),s.setAll(o),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),f===null?null:f.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(n=>n.field))}(y,p,i,m):function(t,e,f){return wn(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):f}(y,p,i)}function fv(y,p){let i=null;for(const m of y.fieldTransforms){const t=p.data.field(m.field),e=yl(m.transform,t||null);e!=null&&(i===null&&(i=ie.empty()),i.set(m.field,e))}return i||null}function To(y,p){return y.type===p.type&&!!y.key.isEqual(p.key)&&!!y.precondition.isEqual(p.precondition)&&!!function(i,m){return i===void 0&&m===void 0||!(!i||!m)&&vi(i,m,(t,e)=>hv(t,e))}(y.fieldTransforms,p.fieldTransforms)&&(y.type===0?y.value.isEqual(p.value):y.type!==1||y.data.isEqual(p.data)&&y.fieldMask.isEqual(p.fieldMask))}class An extends Es{constructor(p,i,m,t=[]){super(),this.key=p,this.value=i,this.precondition=m,this.fieldTransforms=t,this.type=0}getFieldMask(){return null}}class Ye extends Es{constructor(p,i,m,t,e=[]){super(),this.key=p,this.data=i,this.fieldMask=m,this.precondition=t,this.fieldTransforms=e,this.type=1}getFieldMask(){return this.fieldMask}}function Cl(y){const p=new Map;return y.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const m=y.data.field(i);p.set(i,m)}}),p}function Eo(y,p,i){const m=new Map;St(y.length===i.length);for(let t=0;t<i.length;t++){const e=y[t],f=e.transform,a=p.data.field(e.field);m.set(e.field,ov(f,a,i[t]))}return m}function So(y,p,i){const m=new Map;for(const t of y){const e=t.transform,f=i.data.field(t.field);m.set(t.field,av(e,f,p))}return m}class Pl extends Es{constructor(p,i){super(),this.key=p,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dv extends Es{constructor(p,i){super(),this.key=p,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(p){this.count=p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,gt;function vv(y){switch(y){default:return ft();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function Ml(y){if(y===void 0)return Re("GRPC error has no .code"),q.UNKNOWN;switch(y){case Ft.OK:return q.OK;case Ft.CANCELLED:return q.CANCELLED;case Ft.UNKNOWN:return q.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return q.INTERNAL;case Ft.UNAVAILABLE:return q.UNAVAILABLE;case Ft.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ft.NOT_FOUND:return q.NOT_FOUND;case Ft.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ft.ABORTED:return q.ABORTED;case Ft.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ft.DATA_LOSS:return q.DATA_LOSS;default:return ft()}}(gt=Ft||(Ft={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(p,i){this.mapKeyFn=p,this.equalsFn=i,this.inner={},this.innerSize=0}get(p){const i=this.mapKeyFn(p),m=this.inner[i];if(m!==void 0){for(const[t,e]of m)if(this.equalsFn(t,p))return e}}has(p){return this.get(p)!==void 0}set(p,i){const m=this.mapKeyFn(p),t=this.inner[m];if(t===void 0)return this.inner[m]=[[p,i]],void this.innerSize++;for(let e=0;e<t.length;e++)if(this.equalsFn(t[e][0],p))return void(t[e]=[p,i]);t.push([p,i]),this.innerSize++}delete(p){const i=this.mapKeyFn(p),m=this.inner[i];if(m===void 0)return!1;for(let t=0;t<m.length;t++)if(this.equalsFn(m[t][0],p))return m.length===1?delete this.inner[i]:m.splice(t,1),this.innerSize--,!0;return!1}forEach(p){ii(this.inner,(i,m)=>{for(const[t,e]of m)p(t,e)})}isEmpty(){return ul(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Gt(at.comparator);function Oe(){return pv}const Rl=new Gt(at.comparator);function Di(...y){let p=Rl;for(const i of y)p=p.insert(i.key,i);return p}function Ll(y){let p=Rl;return y.forEach((i,m)=>p=p.insert(i,m.overlayedDocument)),p}function be(){return Xi()}function Ol(){return Xi()}function Xi(){return new Ri(y=>y.toString(),(y,p)=>y.isEqual(p))}const mv=new Gt(at.comparator),gv=new wt(at.comparator);function mt(...y){let p=gv;for(const i of y)p=p.add(i);return p}const xv=new wt(Et);function Fl(){return xv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(p,i,m,t,e){this.snapshotVersion=p,this.targetChanges=i,this.targetMismatches=m,this.documentUpdates=t,this.resolvedLimboDocuments=e}static createSynthesizedRemoteEventForCurrentChange(p,i){const m=new Map;return m.set(p,Tn.createSynthesizedTargetChangeForCurrentChange(p,i)),new Ss(pt.min(),m,Fl(),Oe(),mt())}}class Tn{constructor(p,i,m,t,e){this.resumeToken=p,this.current=i,this.addedDocuments=m,this.modifiedDocuments=t,this.removedDocuments=e}static createSynthesizedTargetChangeForCurrentChange(p,i){return new Tn(Ht.EMPTY_BYTE_STRING,i,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(p,i,m,t){this.Tt=p,this.removedTargetIds=i,this.key=m,this.Et=t}}class Il{constructor(p,i){this.targetId=p,this.At=i}}class Dl{constructor(p,i,m=Ht.EMPTY_BYTE_STRING,t=null){this.state=p,this.targetIds=i,this.resumeToken=m,this.cause=t}}class Co{constructor(){this.Rt=0,this.bt=Mo(),this.Pt=Ht.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(p){p.approximateByteSize()>0&&(this.Vt=!0,this.Pt=p)}xt(){let p=mt(),i=mt(),m=mt();return this.bt.forEach((t,e)=>{switch(e){case 0:p=p.add(t);break;case 2:i=i.add(t);break;case 1:m=m.add(t);break;default:ft()}}),new Tn(this.Pt,this.vt,p,i,m)}Nt(){this.Vt=!1,this.bt=Mo()}kt(p,i){this.Vt=!0,this.bt=this.bt.insert(p,i)}Mt(p){this.Vt=!0,this.bt=this.bt.remove(p)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class yv{constructor(p){this.Bt=p,this.Lt=new Map,this.Ut=Oe(),this.qt=Po(),this.Kt=new wt(Et)}Gt(p){for(const i of p.Tt)p.Et&&p.Et.isFoundDocument()?this.Qt(i,p.Et):this.jt(i,p.key,p.Et);for(const i of p.removedTargetIds)this.jt(i,p.key,p.Et)}Wt(p){this.forEachTarget(p,i=>{const m=this.zt(i);switch(p.state){case 0:this.Ht(i)&&m.Ct(p.resumeToken);break;case 1:m.Ft(),m.St||m.Nt(),m.Ct(p.resumeToken);break;case 2:m.Ft(),m.St||this.removeTarget(i);break;case 3:this.Ht(i)&&(m.$t(),m.Ct(p.resumeToken));break;case 4:this.Ht(i)&&(this.Jt(i),m.Ct(p.resumeToken));break;default:ft()}})}forEachTarget(p,i){p.targetIds.length>0?p.targetIds.forEach(i):this.Lt.forEach((m,t)=>{this.Ht(t)&&i(t)})}Yt(p){const i=p.targetId,m=p.At.count,t=this.Xt(i);if(t){const e=t.target;if(mr(e))if(m===0){const f=new at(e.path);this.jt(i,f,zt.newNoDocument(f,pt.min()))}else St(m===1);else this.Zt(i)!==m&&(this.Jt(i),this.Kt=this.Kt.add(i))}}te(p){const i=new Map;this.Lt.forEach((e,f)=>{const a=this.Xt(f);if(a){if(e.current&&mr(a.target)){const o=new at(a.target.path);this.Ut.get(o)!==null||this.ee(f,o)||this.jt(f,o,zt.newNoDocument(o,p))}e.Dt&&(i.set(f,e.xt()),e.Nt())}});let m=mt();this.qt.forEach((e,f)=>{let a=!0;f.forEachWhile(o=>{const s=this.Xt(o);return!s||s.purpose===2||(a=!1,!1)}),a&&(m=m.add(e))}),this.Ut.forEach((e,f)=>f.setReadTime(p));const t=new Ss(p,i,this.Kt,this.Ut,m);return this.Ut=Oe(),this.qt=Po(),this.Kt=new wt(Et),t}Qt(p,i){if(!this.Ht(p))return;const m=this.ee(p,i.key)?2:0;this.zt(p).kt(i.key,m),this.Ut=this.Ut.insert(i.key,i),this.qt=this.qt.insert(i.key,this.ne(i.key).add(p))}jt(p,i,m){if(!this.Ht(p))return;const t=this.zt(p);this.ee(p,i)?t.kt(i,1):t.Mt(i),this.qt=this.qt.insert(i,this.ne(i).delete(p)),m&&(this.Ut=this.Ut.insert(i,m))}removeTarget(p){this.Lt.delete(p)}Zt(p){const i=this.zt(p).xt();return this.Bt.getRemoteKeysForTarget(p).size+i.addedDocuments.size-i.removedDocuments.size}Ot(p){this.zt(p).Ot()}zt(p){let i=this.Lt.get(p);return i||(i=new Co,this.Lt.set(p,i)),i}ne(p){let i=this.qt.get(p);return i||(i=new wt(Et),this.qt=this.qt.insert(p,i)),i}Ht(p){const i=this.Xt(p)!==null;return i||st("WatchChangeAggregator","Detected inactive target",p),i}Xt(p){const i=this.Lt.get(p);return i&&i.St?null:this.Bt.se(p)}Jt(p){this.Lt.set(p,new Co),this.Bt.getRemoteKeysForTarget(p).forEach(i=>{this.jt(p,i,null)})}ee(p,i){return this.Bt.getRemoteKeysForTarget(p).has(i)}}function Po(){return new Gt(at.comparator)}function Mo(){return new Gt(at.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Tv=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class Ev{constructor(p,i){this.databaseId=p,this.gt=i}}function qn(y,p){return y.gt?`${new Date(1e3*p.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+p.nanoseconds).slice(-9)}Z`:{seconds:""+p.seconds,nanos:p.nanoseconds}}function Bl(y,p){return y.gt?p.toBase64():p.toUint8Array()}function Sv(y,p){return qn(y,p.toTimestamp())}function Se(y){return St(!!y),pt.fromTimestamp(function(p){const i=we(p);return new Nt(i.seconds,i.nanos)}(y))}function la(y,p){return function(i){return new Mt(["projects",i.projectId,"databases",i.database])}(y).child("documents").child(p).canonicalString()}function Nl(y){const p=Mt.fromString(y);return St(Ul(p)),p}function yr(y,p){return la(y.databaseId,p.path)}function Qs(y,p){const i=Nl(p);if(i.get(1)!==y.databaseId.projectId)throw new ot(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+y.databaseId.projectId);if(i.get(3)!==y.databaseId.database)throw new ot(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+y.databaseId.database);return new at(wl(i))}function Ar(y,p){return la(y.databaseId,p)}function Cv(y){const p=Nl(y);return p.length===4?Mt.emptyPath():wl(p)}function Tr(y){return new Mt(["projects",y.databaseId.projectId,"databases",y.databaseId.database]).canonicalString()}function wl(y){return St(y.length>4&&y.get(4)==="documents"),y.popFirst(5)}function Ro(y,p,i){return{name:yr(y,p),fields:i.value.mapValue.fields}}function Pv(y,p){let i;if("targetChange"in p){p.targetChange;const m=function(o){return o==="NO_CHANGE"?0:o==="ADD"?1:o==="REMOVE"?2:o==="CURRENT"?3:o==="RESET"?4:ft()}(p.targetChange.targetChangeType||"NO_CHANGE"),t=p.targetChange.targetIds||[],e=function(o,s){return o.gt?(St(s===void 0||typeof s=="string"),Ht.fromBase64String(s||"")):(St(s===void 0||s instanceof Uint8Array),Ht.fromUint8Array(s||new Uint8Array))}(y,p.targetChange.resumeToken),f=p.targetChange.cause,a=f&&function(o){const s=o.code===void 0?q.UNKNOWN:Ml(o.code);return new ot(s,o.message||"")}(f);i=new Dl(m,t,e,a||null)}else if("documentChange"in p){p.documentChange;const m=p.documentChange;m.document,m.document.name,m.document.updateTime;const t=Qs(y,m.document.name),e=Se(m.document.updateTime),f=new ie({mapValue:{fields:m.document.fields}}),a=zt.newFoundDocument(t,e,f),o=m.targetIds||[],s=m.removedTargetIds||[];i=new Gn(o,s,a.key,a)}else if("documentDelete"in p){p.documentDelete;const m=p.documentDelete;m.document;const t=Qs(y,m.document),e=m.readTime?Se(m.readTime):pt.min(),f=zt.newNoDocument(t,e),a=m.removedTargetIds||[];i=new Gn([],a,f.key,f)}else if("documentRemove"in p){p.documentRemove;const m=p.documentRemove;m.document;const t=Qs(y,m.document),e=m.removedTargetIds||[];i=new Gn([],e,t,null)}else{if(!("filter"in p))return ft();{p.filter;const m=p.filter;m.targetId;const t=m.count||0,e=new cv(t),f=m.targetId;i=new Il(f,e)}}return i}function Mv(y,p){let i;if(p instanceof An)i={update:Ro(y,p.key,p.value)};else if(p instanceof Pl)i={delete:yr(y,p.key)};else if(p instanceof Ye)i={update:Ro(y,p.key,p.data),updateMask:Gv(p.fieldMask)};else{if(!(p instanceof dv))return ft();i={verify:yr(y,p.key)}}return p.fieldTransforms.length>0&&(i.updateTransforms=p.fieldTransforms.map(m=>function(t,e){const f=e.transform;if(f instanceof jn)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof nn)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof sn)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof kn)return{fieldPath:e.field.canonicalString(),increment:f.yt};throw ft()}(0,m))),p.precondition.isNone||(i.currentDocument=function(m,t){return t.updateTime!==void 0?{updateTime:Sv(m,t.updateTime)}:t.exists!==void 0?{exists:t.exists}:ft()}(y,p.precondition)),i}function Rv(y,p){return y&&y.length>0?(St(p!==void 0),y.map(i=>function(m,t){let e=m.updateTime?Se(m.updateTime):Se(t);return e.isEqual(pt.min())&&(e=Se(t)),new lv(e,m.transformResults||[])}(i,p))):[]}function Lv(y,p){return{documents:[Ar(y,p.path)]}}function Ov(y,p){const i={structuredQuery:{}},m=p.path;p.collectionGroup!==null?(i.parent=Ar(y,m),i.structuredQuery.from=[{collectionId:p.collectionGroup,allDescendants:!0}]):(i.parent=Ar(y,m.popLast()),i.structuredQuery.from=[{collectionId:m.lastSegment()}]);const t=function(o){if(o.length===0)return;const s=o.map(n=>function(r){if(r.op==="=="){if(po(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NAN"}};if(vo(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(po(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NOT_NAN"}};if(vo(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(r.field),op:Bv(r.op),value:r.value}}}(n));return s.length===1?s[0]:{compositeFilter:{op:"AND",filters:s}}}(p.filters);t&&(i.structuredQuery.where=t);const e=function(o){if(o.length!==0)return o.map(s=>function(n){return{field:si(n.field),direction:Dv(n.dir)}}(s))}(p.orderBy);e&&(i.structuredQuery.orderBy=e);const f=function(o,s){return o.gt||gs(s)?s:{value:s}}(y,p.limit);var a;return f!==null&&(i.structuredQuery.limit=f),p.startAt&&(i.structuredQuery.startAt={before:(a=p.startAt).inclusive,values:a.position}),p.endAt&&(i.structuredQuery.endAt=function(o){return{before:!o.inclusive,values:o.position}}(p.endAt)),i}function Fv(y){let p=Cv(y.parent);const i=y.structuredQuery,m=i.from?i.from.length:0;let t=null;if(m>0){St(m===1);const n=i.from[0];n.allDescendants?t=n.collectionId:p=p.child(n.collectionId)}let e=[];i.where&&(e=Gl(i.where));let f=[];i.orderBy&&(f=i.orderBy.map(n=>function(r){return new Yi(oi(r.field),function(u){switch(u){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(r.direction))}(n)));let a=null;i.limit&&(a=function(n){let r;return r=typeof n=="object"?n.value:n,gs(r)?null:r}(i.limit));let o=null;i.startAt&&(o=function(n){const r=!!n.before,u=n.values||[];return new Jn(u,r)}(i.startAt));let s=null;return i.endAt&&(s=function(n){const r=!n.before,u=n.values||[];return new Jn(u,r)}(i.endAt)),_c(p,t,f,e,a,"F",o,s)}function Iv(y,p){const i=function(m,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,p.purpose);return i==null?null:{"goog-listen-tags":i}}function Gl(y){return y?y.unaryFilter!==void 0?[wv(y)]:y.fieldFilter!==void 0?[Nv(y)]:y.compositeFilter!==void 0?y.compositeFilter.filters.map(p=>Gl(p)).reduce((p,i)=>p.concat(i)):ft():[]}function Dv(y){return Av[y]}function Bv(y){return Tv[y]}function si(y){return{fieldPath:y.canonicalString()}}function oi(y){return Kt.fromServerFormat(y.fieldPath)}function Nv(y){return ne.create(oi(y.fieldFilter.field),function(p){switch(p){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(y.fieldFilter.op),y.fieldFilter.value)}function wv(y){switch(y.unaryFilter.op){case"IS_NAN":const p=oi(y.unaryFilter.field);return ne.create(p,"==",{doubleValue:NaN});case"IS_NULL":const i=oi(y.unaryFilter.field);return ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=oi(y.unaryFilter.field);return ne.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const t=oi(y.unaryFilter.field);return ne.create(t,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function Gv(y){const p=[];return y.fields.forEach(i=>p.push(i.canonicalString())),{fieldPaths:p}}function Ul(y){return y.length>=4&&y.get(0)==="projects"&&y.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(p,i,m,t){this.batchId=p,this.localWriteTime=i,this.baseMutations=m,this.mutations=t}applyToRemoteDocument(p,i){const m=i.mutationResults;for(let t=0;t<this.mutations.length;t++){const e=this.mutations[t];e.key.isEqual(p.key)&&uv(e,p,m[t])}}applyToLocalView(p,i){for(const m of this.baseMutations)m.key.isEqual(p.key)&&(i=zi(m,p,i,this.localWriteTime));for(const m of this.mutations)m.key.isEqual(p.key)&&(i=zi(m,p,i,this.localWriteTime));return i}applyToLocalDocumentSet(p,i){const m=Ol();return this.mutations.forEach(t=>{const e=p.get(t.key),f=e.overlayedDocument;let a=this.applyToLocalView(f,e.mutatedFields);a=i.has(t.key)?null:a;const o=Sl(f,a);o!==null&&m.set(t.key,o),f.isValidDocument()||f.convertToNoDocument(pt.min())}),m}keys(){return this.mutations.reduce((p,i)=>p.add(i.key),mt())}isEqual(p){return this.batchId===p.batchId&&vi(this.mutations,p.mutations,(i,m)=>To(i,m))&&vi(this.baseMutations,p.baseMutations,(i,m)=>To(i,m))}}class ua{constructor(p,i,m,t){this.batch=p,this.commitVersion=i,this.mutationResults=m,this.docVersions=t}static from(p,i,m){St(p.mutations.length===m.length);let t=mv;const e=p.mutations;for(let f=0;f<e.length;f++)t=t.insert(e[f].key,m[f].version);return new ua(p,i,m,t)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(p,i){this.largestBatchId=p,this.mutation=i}getKey(){return this.mutation.key}isEqual(p){return p!==null&&this.mutation===p.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(p,i,m,t,e=pt.min(),f=pt.min(),a=Ht.EMPTY_BYTE_STRING){this.target=p,this.targetId=i,this.purpose=m,this.sequenceNumber=t,this.snapshotVersion=e,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=a}withSequenceNumber(p){return new $e(this.target,this.targetId,this.purpose,p,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(p,i){return new $e(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,p)}withLastLimboFreeSnapshotVersion(p){return new $e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,p,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(p){this.re=p}}function zv(y){const p=Fv({parent:y.parent,structuredQuery:y.structuredQuery});return y.limitType==="LAST"?gr(p,p.limit,"L"):p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.Ye=new Wv}addToCollectionParentIndex(p,i){return this.Ye.add(i),_.resolve()}getCollectionParents(p,i){return _.resolve(this.Ye.getEntries(i))}addFieldIndex(p,i){return _.resolve()}deleteFieldIndex(p,i){return _.resolve()}getDocumentsMatchingTarget(p,i){return _.resolve(null)}getIndexType(p,i){return _.resolve(0)}getFieldIndexes(p,i){return _.resolve([])}getNextCollectionGroupToUpdate(p){return _.resolve(null)}getMinOffset(p,i){return _.resolve(Ne.min())}getMinOffsetFromCollectionGroup(p,i){return _.resolve(Ne.min())}updateCollectionGroup(p,i,m){return _.resolve()}updateIndexEntries(p,i){return _.resolve()}}class Wv{constructor(){this.index={}}add(p){const i=p.lastSegment(),m=p.popLast(),t=this.index[i]||new wt(Mt.comparator),e=!t.has(m);return this.index[i]=t.add(m),e}has(p){const i=p.lastSegment(),m=p.popLast(),t=this.index[i];return t&&t.has(m)}getEntries(p){return(this.index[p]||new wt(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(p){this.bn=p}next(){return this.bn+=2,this.bn}static Pn(){return new gi(0)}static vn(){return new gi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.changes=new Ri(p=>p.toString(),(p,i)=>p.isEqual(i)),this.changesApplied=!1}addEntry(p){this.assertNotApplied(),this.changes.set(p.key,p)}removeEntry(p,i){this.assertNotApplied(),this.changes.set(p,zt.newInvalidDocument(p).setReadTime(i))}getEntry(p,i){this.assertNotApplied();const m=this.changes.get(i);return m!==void 0?_.resolve(m):this.getFromCache(p,i)}getEntries(p,i){return this.getAllFromCache(p,i)}apply(p){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(p)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(p,i){this.overlayedDocument=p,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(p,i,m,t){this.remoteDocumentCache=p,this.mutationQueue=i,this.documentOverlayCache=m,this.indexManager=t}getDocument(p,i){let m=null;return this.documentOverlayCache.getOverlay(p,i).next(t=>(m=t,this.getBaseDocument(p,i,m))).next(t=>(m!==null&&zi(m.mutation,t,fe.empty(),Nt.now()),t))}getDocuments(p,i){return this.remoteDocumentCache.getEntries(p,i).next(m=>this.getLocalViewOfDocuments(p,m,mt()).next(()=>m))}getLocalViewOfDocuments(p,i,m=mt()){const t=be();return this.populateOverlays(p,t,i).next(()=>this.computeViews(p,i,t,m).next(e=>{let f=Di();return e.forEach((a,o)=>{f=f.insert(a,o.overlayedDocument)}),f}))}getOverlayedDocuments(p,i){const m=be();return this.populateOverlays(p,m,i).next(()=>this.computeViews(p,i,m,mt()))}populateOverlays(p,i,m){const t=[];return m.forEach(e=>{i.has(e)||t.push(e)}),this.documentOverlayCache.getOverlays(p,t).next(e=>{e.forEach((f,a)=>{i.set(f,a)})})}computeViews(p,i,m,t){let e=Oe();const f=Xi(),a=Xi();return i.forEach((o,s)=>{const n=m.get(s.key);t.has(s.key)&&(n===void 0||n.mutation instanceof Ye)?e=e.insert(s.key,s):n!==void 0&&(f.set(s.key,n.mutation.getFieldMask()),zi(n.mutation,s,n.mutation.getFieldMask(),Nt.now()))}),this.recalculateAndSaveOverlays(p,e).next(o=>(o.forEach((s,n)=>f.set(s,n)),i.forEach((s,n)=>{var r;return a.set(s,new bv(n,(r=f.get(s))!==null&&r!==void 0?r:null))}),a))}recalculateAndSaveOverlays(p,i){const m=Xi();let t=new Gt((f,a)=>f-a),e=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(p,i).next(f=>{for(const a of f)a.keys().forEach(o=>{const s=i.get(o);if(s===null)return;let n=m.get(o)||fe.empty();n=a.applyToLocalView(s,n),m.set(o,n);const r=(t.get(a.batchId)||mt()).add(o);t=t.insert(a.batchId,r)})}).next(()=>{const f=[],a=t.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),s=o.key,n=o.value,r=Ol();n.forEach(u=>{if(!e.has(u)){const h=Sl(i.get(u),m.get(u));h!==null&&r.set(u,h),e=e.add(u)}}),f.push(this.documentOverlayCache.saveOverlays(p,s,r))}return _.waitFor(f)}).next(()=>m)}recalculateAndSaveOverlaysForDocumentKeys(p,i){return this.remoteDocumentCache.getEntries(p,i).next(m=>this.recalculateAndSaveOverlays(p,m))}getDocumentsMatchingQuery(p,i,m){return function(t){return at.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(p,i.path):iv(i)?this.getDocumentsMatchingCollectionGroupQuery(p,i,m):this.getDocumentsMatchingCollectionQuery(p,i,m)}getNextDocuments(p,i,m,t){return this.remoteDocumentCache.getAllFromCollectionGroup(p,i,m,t).next(e=>{const f=t-e.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(p,i,m.largestBatchId,t-e.size):_.resolve(be());let a=-1,o=e;return f.next(s=>_.forEach(s,(n,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),e.get(n)?_.resolve():this.getBaseDocument(p,n,r).next(u=>{o=o.insert(n,u)}))).next(()=>this.populateOverlays(p,s,e)).next(()=>this.computeViews(p,o,s,mt())).next(n=>({batchId:a,changes:Ll(n)})))})}getDocumentsMatchingDocumentQuery(p,i){return this.getDocument(p,new at(i)).next(m=>{let t=Di();return m.isFoundDocument()&&(t=t.insert(m.key,m)),t})}getDocumentsMatchingCollectionGroupQuery(p,i,m){const t=i.collectionGroup;let e=Di();return this.indexManager.getCollectionParents(p,t).next(f=>_.forEach(f,a=>{const o=function(s,n){return new xs(n,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(i,a.child(t));return this.getDocumentsMatchingCollectionQuery(p,o,m).next(s=>{s.forEach((n,r)=>{e=e.insert(n,r)})})}).next(()=>e))}getDocumentsMatchingCollectionQuery(p,i,m){let t;return this.remoteDocumentCache.getAllFromCollection(p,i.path,m).next(e=>(t=e,this.documentOverlayCache.getOverlaysForCollection(p,i.path,m.largestBatchId))).next(e=>{e.forEach((a,o)=>{const s=o.getKey();t.get(s)===null&&(t=t.insert(s,zt.newInvalidDocument(s)))});let f=Di();return t.forEach((a,o)=>{const s=e.get(a);s!==void 0&&zi(s.mutation,o,fe.empty(),Nt.now()),ha(i,o)&&(f=f.insert(a,o))}),f})}getBaseDocument(p,i,m){return m===null||m.mutation.type===1?this.remoteDocumentCache.getEntry(p,i):_.resolve(zt.newInvalidDocument(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(p){this.It=p,this.Zn=new Map,this.ts=new Map}getBundleMetadata(p,i){return _.resolve(this.Zn.get(i))}saveBundleMetadata(p,i){var m;return this.Zn.set(i.id,{id:(m=i).id,version:m.version,createTime:Se(m.createTime)}),_.resolve()}getNamedQuery(p,i){return _.resolve(this.ts.get(i))}saveNamedQuery(p,i){return this.ts.set(i.name,function(m){return{name:m.name,query:zv(m.bundledQuery),readTime:Se(m.readTime)}}(i)),_.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.overlays=new Gt(at.comparator),this.es=new Map}getOverlay(p,i){return _.resolve(this.overlays.get(i))}getOverlays(p,i){const m=be();return _.forEach(i,t=>this.getOverlay(p,t).next(e=>{e!==null&&m.set(t,e)})).next(()=>m)}saveOverlays(p,i,m){return m.forEach((t,e)=>{this.ue(p,i,e)}),_.resolve()}removeOverlaysForBatchId(p,i,m){const t=this.es.get(m);return t!==void 0&&(t.forEach(e=>this.overlays=this.overlays.remove(e)),this.es.delete(m)),_.resolve()}getOverlaysForCollection(p,i,m){const t=be(),e=i.length+1,f=new at(i.child("")),a=this.overlays.getIteratorFrom(f);for(;a.hasNext();){const o=a.getNext().value,s=o.getKey();if(!i.isPrefixOf(s.path))break;s.path.length===e&&o.largestBatchId>m&&t.set(o.getKey(),o)}return _.resolve(t)}getOverlaysForCollectionGroup(p,i,m,t){let e=new Gt((s,n)=>s-n);const f=this.overlays.getIterator();for(;f.hasNext();){const s=f.getNext().value;if(s.getKey().getCollectionGroup()===i&&s.largestBatchId>m){let n=e.get(s.largestBatchId);n===null&&(n=be(),e=e.insert(s.largestBatchId,n)),n.set(s.getKey(),s)}}const a=be(),o=e.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((s,n)=>a.set(s,n)),!(a.size()>=t)););return _.resolve(a)}ue(p,i,m){const t=this.overlays.get(m.key);if(t!==null){const f=this.es.get(t.largestBatchId).delete(m.key);this.es.set(t.largestBatchId,f)}this.overlays=this.overlays.insert(m.key,new Vv(i,m));let e=this.es.get(i);e===void 0&&(e=mt(),this.es.set(i,e)),this.es.set(i,e.add(m.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.ns=new wt(Ut.ss),this.rs=new wt(Ut.os)}isEmpty(){return this.ns.isEmpty()}addReference(p,i){const m=new Ut(p,i);this.ns=this.ns.add(m),this.rs=this.rs.add(m)}us(p,i){p.forEach(m=>this.addReference(m,i))}removeReference(p,i){this.cs(new Ut(p,i))}hs(p,i){p.forEach(m=>this.removeReference(m,i))}ls(p){const i=new at(new Mt([])),m=new Ut(i,p),t=new Ut(i,p+1),e=[];return this.rs.forEachInRange([m,t],f=>{this.cs(f),e.push(f.key)}),e}fs(){this.ns.forEach(p=>this.cs(p))}cs(p){this.ns=this.ns.delete(p),this.rs=this.rs.delete(p)}ds(p){const i=new at(new Mt([])),m=new Ut(i,p),t=new Ut(i,p+1);let e=mt();return this.rs.forEachInRange([m,t],f=>{e=e.add(f.key)}),e}containsKey(p){const i=new Ut(p,0),m=this.ns.firstAfterOrEqual(i);return m!==null&&p.isEqual(m.key)}}class Ut{constructor(p,i){this.key=p,this._s=i}static ss(p,i){return at.comparator(p.key,i.key)||Et(p._s,i._s)}static os(p,i){return Et(p._s,i._s)||at.comparator(p.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(p,i){this.indexManager=p,this.referenceDelegate=i,this.mutationQueue=[],this.ws=1,this.gs=new wt(Ut.ss)}checkEmpty(p){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(p,i,m,t){const e=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Uv(e,i,m,t);this.mutationQueue.push(f);for(const a of t)this.gs=this.gs.add(new Ut(a.key,e)),this.indexManager.addToCollectionParentIndex(p,a.key.path.popLast());return _.resolve(f)}lookupMutationBatch(p,i){return _.resolve(this.ys(i))}getNextMutationBatchAfterBatchId(p,i){const m=i+1,t=this.ps(m),e=t<0?0:t;return _.resolve(this.mutationQueue.length>e?this.mutationQueue[e]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(p){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(p,i){const m=new Ut(i,0),t=new Ut(i,Number.POSITIVE_INFINITY),e=[];return this.gs.forEachInRange([m,t],f=>{const a=this.ys(f._s);e.push(a)}),_.resolve(e)}getAllMutationBatchesAffectingDocumentKeys(p,i){let m=new wt(Et);return i.forEach(t=>{const e=new Ut(t,0),f=new Ut(t,Number.POSITIVE_INFINITY);this.gs.forEachInRange([e,f],a=>{m=m.add(a._s)})}),_.resolve(this.Is(m))}getAllMutationBatchesAffectingQuery(p,i){const m=i.path,t=m.length+1;let e=m;at.isDocumentKey(e)||(e=e.child(""));const f=new Ut(new at(e),0);let a=new wt(Et);return this.gs.forEachWhile(o=>{const s=o.key.path;return!!m.isPrefixOf(s)&&(s.length===t&&(a=a.add(o._s)),!0)},f),_.resolve(this.Is(a))}Is(p){const i=[];return p.forEach(m=>{const t=this.ys(m);t!==null&&i.push(t)}),i}removeMutationBatch(p,i){St(this.Ts(i.batchId,"removed")===0),this.mutationQueue.shift();let m=this.gs;return _.forEach(i.mutations,t=>{const e=new Ut(t.key,i.batchId);return m=m.delete(e),this.referenceDelegate.markPotentiallyOrphaned(p,t.key)}).next(()=>{this.gs=m})}An(p){}containsKey(p,i){const m=new Ut(i,0),t=this.gs.firstAfterOrEqual(m);return _.resolve(i.isEqual(t&&t.key))}performConsistencyCheck(p){return this.mutationQueue.length,_.resolve()}Ts(p,i){return this.ps(p)}ps(p){return this.mutationQueue.length===0?0:p-this.mutationQueue[0].batchId}ys(p){const i=this.ps(p);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(p){this.Es=p,this.docs=new Gt(at.comparator),this.size=0}setIndexManager(p){this.indexManager=p}addEntry(p,i){const m=i.key,t=this.docs.get(m),e=t?t.size:0,f=this.Es(i);return this.docs=this.docs.insert(m,{document:i.mutableCopy(),size:f}),this.size+=f-e,this.indexManager.addToCollectionParentIndex(p,m.path.popLast())}removeEntry(p){const i=this.docs.get(p);i&&(this.docs=this.docs.remove(p),this.size-=i.size)}getEntry(p,i){const m=this.docs.get(i);return _.resolve(m?m.document.mutableCopy():zt.newInvalidDocument(i))}getEntries(p,i){let m=Oe();return i.forEach(t=>{const e=this.docs.get(t);m=m.insert(t,e?e.document.mutableCopy():zt.newInvalidDocument(t))}),_.resolve(m)}getAllFromCollection(p,i,m){let t=Oe();const e=new at(i.child("")),f=this.docs.getIteratorFrom(e);for(;f.hasNext();){const{key:a,value:{document:o}}=f.getNext();if(!i.isPrefixOf(a.path))break;a.path.length>i.length+1||Gc(wc(o),m)<=0||(t=t.insert(o.key,o.mutableCopy()))}return _.resolve(t)}getAllFromCollectionGroup(p,i,m,t){ft()}As(p,i){return _.forEach(this.docs,m=>i(m))}newChangeBuffer(p){return new jv(this)}getSize(p){return _.resolve(this.size)}}class jv extends Hv{constructor(p){super(),this.Yn=p}applyChanges(p){const i=[];return this.changes.forEach((m,t)=>{t.isValidDocument()?i.push(this.Yn.addEntry(p,t)):this.Yn.removeEntry(m)}),_.waitFor(i)}getFromCache(p,i){return this.Yn.getEntry(p,i)}getAllFromCache(p,i){return this.Yn.getEntries(p,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(p){this.persistence=p,this.Rs=new Ri(i=>aa(i),oa),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new fa,this.targetCount=0,this.vs=gi.Pn()}forEachTarget(p,i){return this.Rs.forEach((m,t)=>i(t)),_.resolve()}getLastRemoteSnapshotVersion(p){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(p){return _.resolve(this.bs)}allocateTargetId(p){return this.highestTargetId=this.vs.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(p,i,m){return m&&(this.lastRemoteSnapshotVersion=m),i>this.bs&&(this.bs=i),_.resolve()}Dn(p){this.Rs.set(p.target,p);const i=p.targetId;i>this.highestTargetId&&(this.vs=new gi(i),this.highestTargetId=i),p.sequenceNumber>this.bs&&(this.bs=p.sequenceNumber)}addTargetData(p,i){return this.Dn(i),this.targetCount+=1,_.resolve()}updateTargetData(p,i){return this.Dn(i),_.resolve()}removeTargetData(p,i){return this.Rs.delete(i.target),this.Ps.ls(i.targetId),this.targetCount-=1,_.resolve()}removeTargets(p,i,m){let t=0;const e=[];return this.Rs.forEach((f,a)=>{a.sequenceNumber<=i&&m.get(a.targetId)===null&&(this.Rs.delete(f),e.push(this.removeMatchingKeysForTargetId(p,a.targetId)),t++)}),_.waitFor(e).next(()=>t)}getTargetCount(p){return _.resolve(this.targetCount)}getTargetData(p,i){const m=this.Rs.get(i)||null;return _.resolve(m)}addMatchingKeys(p,i,m){return this.Ps.us(i,m),_.resolve()}removeMatchingKeys(p,i,m){this.Ps.hs(i,m);const t=this.persistence.referenceDelegate,e=[];return t&&i.forEach(f=>{e.push(t.markPotentiallyOrphaned(p,f))}),_.waitFor(e)}removeMatchingKeysForTargetId(p,i){return this.Ps.ls(i),_.resolve()}getMatchingKeysForTargetId(p,i){const m=this.Ps.ds(i);return _.resolve(m)}containsKey(p,i){return _.resolve(this.Ps.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(p,i){this.Vs={},this.overlays={},this.Ss=new sa(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=p(this),this.Cs=new kv(this),this.indexManager=new Xv,this.remoteDocumentCache=function(m){return new Jv(m)}(m=>this.referenceDelegate.xs(m)),this.It=new Yv(i),this.Ns=new Kv(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(p){return this.indexManager}getDocumentOverlayCache(p){let i=this.overlays[p.toKey()];return i||(i=new $v,this.overlays[p.toKey()]=i),i}getMutationQueue(p,i){let m=this.Vs[p.toKey()];return m||(m=new Zv(i,this.referenceDelegate),this.Vs[p.toKey()]=m),m}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(p,i,m){st("MemoryPersistence","Starting transaction:",p);const t=new _v(this.Ss.next());return this.referenceDelegate.ks(),m(t).next(e=>this.referenceDelegate.Ms(t).next(()=>e)).toPromise().then(e=>(t.raiseOnCommittedEvent(),e))}Os(p,i){return _.or(Object.values(this.Vs).map(m=>()=>m.containsKey(p,i)))}}class _v extends Vc{constructor(p){super(),this.currentSequenceNumber=p}}class da{constructor(p){this.persistence=p,this.Fs=new fa,this.$s=null}static Bs(p){return new da(p)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(p,i,m){return this.Fs.addReference(m,i),this.Ls.delete(m.toString()),_.resolve()}removeReference(p,i,m){return this.Fs.removeReference(m,i),this.Ls.add(m.toString()),_.resolve()}markPotentiallyOrphaned(p,i){return this.Ls.add(i.toString()),_.resolve()}removeTarget(p,i){this.Fs.ls(i.targetId).forEach(t=>this.Ls.add(t.toString()));const m=this.persistence.getTargetCache();return m.getMatchingKeysForTargetId(p,i.targetId).next(t=>{t.forEach(e=>this.Ls.add(e.toString()))}).next(()=>m.removeTargetData(p,i))}ks(){this.$s=new Set}Ms(p){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Ls,m=>{const t=at.fromPath(m);return this.Us(p,t).next(e=>{e||i.removeEntry(t,pt.min())})}).next(()=>(this.$s=null,i.apply(p)))}updateLimboDocument(p,i){return this.Us(p,i).next(m=>{m?this.Ls.delete(i.toString()):this.Ls.add(i.toString())})}xs(p){return 0}Us(p,i){return _.or([()=>_.resolve(this.Fs.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(p,i),()=>this.persistence.Os(p,i)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(p,i,m,t){this.targetId=p,this.fromCache=i,this.Si=m,this.Di=t}static Ci(p,i){let m=mt(),t=mt();for(const e of i.docChanges)switch(e.type){case 0:m=m.add(e.doc.key);break;case 1:t=t.add(e.doc.key)}return new ca(p,i.fromCache,m,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.xi=!1}initialize(p,i){this.Ni=p,this.indexManager=i,this.xi=!0}getDocumentsMatchingQuery(p,i,m,t){return this.ki(p,i).next(e=>e||this.Mi(p,i,t,m)).next(e=>e||this.Oi(p,i))}ki(p,i){if(yo(i))return _.resolve(null);let m=Le(i);return this.indexManager.getIndexType(p,m).next(t=>t===0?null:(i.limit!==null&&t===1&&(i=gr(i,null,"F"),m=Le(i)),this.indexManager.getDocumentsMatchingTarget(p,m).next(e=>{const f=mt(...e);return this.Ni.getDocuments(p,f).next(a=>this.indexManager.getMinOffset(p,m).next(o=>{const s=this.Fi(i,a);return this.$i(i,s,f,o.readTime)?this.ki(p,gr(i,null,"F")):this.Bi(p,s,i,o)}))})))}Mi(p,i,m,t){return yo(i)||t.isEqual(pt.min())?this.Oi(p,i):this.Ni.getDocuments(p,m).next(e=>{const f=this.Fi(i,e);return this.$i(i,f,m,t)?this.Oi(p,i):(ho()<=Tt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",t.toString(),xr(i)),this.Bi(p,f,i,Nc(t,-1)))})}Fi(p,i){let m=new wt(ml(p));return i.forEach((t,e)=>{ha(p,e)&&(m=m.add(e))}),m}$i(p,i,m,t){if(p.limit===null)return!1;if(m.size!==i.size)return!0;const e=p.limitType==="F"?i.last():i.first();return!!e&&(e.hasPendingWrites||e.version.compareTo(t)>0)}Oi(p,i){return ho()<=Tt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",xr(i)),this.Ni.getDocumentsMatchingQuery(p,i,Ne.min())}Bi(p,i,m,t){return this.Ni.getDocumentsMatchingQuery(p,m,t).next(e=>(i.forEach(f=>{e=e.insert(f.key,f)}),e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(p,i,m,t){this.persistence=p,this.Li=i,this.It=t,this.Ui=new Gt(Et),this.qi=new Ri(e=>aa(e),oa),this.Ki=new Map,this.Gi=p.getRemoteDocumentCache(),this.Cs=p.getTargetCache(),this.Ns=p.getBundleCache(),this.Qi(m)}Qi(p){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(p),this.indexManager=this.persistence.getIndexManager(p),this.mutationQueue=this.persistence.getMutationQueue(p,this.indexManager),this.localDocuments=new Qv(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(p){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>p.collect(i,this.Ui))}}function ip(y,p,i,m){return new ep(y,p,i,m)}async function Vl(y,p){const i=dt(y);return await i.persistence.runTransaction("Handle user change","readonly",m=>{let t;return i.mutationQueue.getAllMutationBatches(m).next(e=>(t=e,i.Qi(p),i.mutationQueue.getAllMutationBatches(m))).next(e=>{const f=[],a=[];let o=mt();for(const s of t){f.push(s.batchId);for(const n of s.mutations)o=o.add(n.key)}for(const s of e){a.push(s.batchId);for(const n of s.mutations)o=o.add(n.key)}return i.localDocuments.getDocuments(m,o).next(s=>({ji:s,removedBatchIds:f,addedBatchIds:a}))})})}function np(y,p){const i=dt(y);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",m=>{const t=p.batch.keys(),e=i.Gi.newChangeBuffer({trackRemovals:!0});return function(f,a,o,s){const n=o.batch,r=n.keys();let u=_.resolve();return r.forEach(h=>{u=u.next(()=>s.getEntry(a,h)).next(l=>{const d=o.docVersions.get(h);St(d!==null),l.version.compareTo(d)<0&&(n.applyToRemoteDocument(l,o),l.isValidDocument()&&(l.setReadTime(o.commitVersion),s.addEntry(l)))})}),u.next(()=>f.mutationQueue.removeMutationBatch(a,n))}(i,m,p,e).next(()=>e.apply(m)).next(()=>i.mutationQueue.performConsistencyCheck(m)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(m,t,p.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,function(f){let a=mt();for(let o=0;o<f.mutationResults.length;++o)f.mutationResults[o].transformResults.length>0&&(a=a.add(f.batch.mutations[o].key));return a}(p))).next(()=>i.localDocuments.getDocuments(m,t))})}function Yl(y){const p=dt(y);return p.persistence.runTransaction("Get last remote snapshot version","readonly",i=>p.Cs.getLastRemoteSnapshotVersion(i))}function sp(y,p){const i=dt(y),m=p.snapshotVersion;let t=i.Ui;return i.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const f=i.Gi.newChangeBuffer({trackRemovals:!0});t=i.Ui;const a=[];p.targetChanges.forEach((n,r)=>{const u=t.get(r);if(!u)return;a.push(i.Cs.removeMatchingKeys(e,n.removedDocuments,r).next(()=>i.Cs.addMatchingKeys(e,n.addedDocuments,r)));let h=u.withSequenceNumber(e.currentSequenceNumber);p.targetMismatches.has(r)?h=h.withResumeToken(Ht.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):n.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(n.resumeToken,m)),t=t.insert(r,h),function(l,d,v){return l.resumeToken.approximateByteSize()===0||d.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(u,h,n)&&a.push(i.Cs.updateTargetData(e,h))});let o=Oe(),s=mt();if(p.documentUpdates.forEach(n=>{p.resolvedLimboDocuments.has(n)&&a.push(i.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(rp(e,f,p.documentUpdates).next(n=>{o=n.Wi,s=n.zi})),!m.isEqual(pt.min())){const n=i.Cs.getLastRemoteSnapshotVersion(e).next(r=>i.Cs.setTargetsMetadata(e,e.currentSequenceNumber,m));a.push(n)}return _.waitFor(a).next(()=>f.apply(e)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,o,s)).next(()=>o)}).then(e=>(i.Ui=t,e))}function rp(y,p,i){let m=mt(),t=mt();return i.forEach(e=>m=m.add(e)),p.getEntries(y,m).next(e=>{let f=Oe();return i.forEach((a,o)=>{const s=e.get(a);o.isFoundDocument()!==s.isFoundDocument()&&(t=t.add(a)),o.isNoDocument()&&o.version.isEqual(pt.min())?(p.removeEntry(a,o.readTime),f=f.insert(a,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||o.version.compareTo(s.version)===0&&s.hasPendingWrites?(p.addEntry(o),f=f.insert(a,o)):st("LocalStore","Ignoring outdated watch update for ",a,". Current version:",s.version," Watch version:",o.version)}),{Wi:f,zi:t}})}function ap(y,p){const i=dt(y);return i.persistence.runTransaction("Get next mutation batch","readonly",m=>(p===void 0&&(p=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(m,p)))}function op(y,p){const i=dt(y);return i.persistence.runTransaction("Allocate target","readwrite",m=>{let t;return i.Cs.getTargetData(m,p).next(e=>e?(t=e,_.resolve(t)):i.Cs.allocateTargetId(m).next(f=>(t=new $e(p,f,0,m.currentSequenceNumber),i.Cs.addTargetData(m,t).next(()=>t))))}).then(m=>{const t=i.Ui.get(m.targetId);return(t===null||m.snapshotVersion.compareTo(t.snapshotVersion)>0)&&(i.Ui=i.Ui.insert(m.targetId,m),i.qi.set(p,m.targetId)),m})}async function Er(y,p,i){const m=dt(y),t=m.Ui.get(p),e=i?"readwrite":"readwrite-primary";try{i||await m.persistence.runTransaction("Release target",e,f=>m.persistence.referenceDelegate.removeTarget(f,t))}catch(f){if(!yn(f))throw f;st("LocalStore",`Failed to update sequence numbers for target ${p}: ${f}`)}m.Ui=m.Ui.remove(p),m.qi.delete(t.target)}function Lo(y,p,i){const m=dt(y);let t=pt.min(),e=mt();return m.persistence.runTransaction("Execute query","readonly",f=>function(a,o,s){const n=dt(a),r=n.qi.get(s);return r!==void 0?_.resolve(n.Ui.get(r)):n.Cs.getTargetData(o,s)}(m,f,Le(p)).next(a=>{if(a)return t=a.lastLimboFreeSnapshotVersion,m.Cs.getMatchingKeysForTargetId(f,a.targetId).next(o=>{e=o})}).next(()=>m.Li.getDocumentsMatchingQuery(f,p,i?t:pt.min(),i?e:mt())).next(a=>(hp(m,nv(p),a),{documents:a,Hi:e})))}function hp(y,p,i){let m=pt.min();i.forEach((t,e)=>{e.readTime.compareTo(m)>0&&(m=e.readTime)}),y.Ki.set(p,m)}class Oo{constructor(){this.activeTargetIds=Fl()}er(p){this.activeTargetIds=this.activeTargetIds.add(p)}nr(p){this.activeTargetIds=this.activeTargetIds.delete(p)}tr(){const p={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(p)}}class lp{constructor(){this.Lr=new Oo,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(p){}updateMutationState(p,i,m){}addLocalQueryTarget(p){return this.Lr.er(p),this.Ur[p]||"not-current"}updateQueryState(p,i,m){this.Ur[p]=i}removeLocalQueryTarget(p){this.Lr.nr(p)}isLocalQueryTarget(p){return this.Lr.activeTargetIds.has(p)}clearQueryState(p){delete this.Ur[p]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(p){return this.Lr.activeTargetIds.has(p)}start(){return this.Lr=new Oo,Promise.resolve()}handleUserChange(p,i,m){}setOnlineState(p){}shutdown(){}writeSequenceNumber(p){}notifyBundleLoaded(p){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{qr(p){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(p){this.Wr.push(p)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const p of this.Wr)p(0)}jr(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const p of this.Wr)p(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(p){this.Hr=p.Hr,this.Jr=p.Jr}Yr(p){this.Xr=p}Zr(p){this.eo=p}onMessage(p){this.no=p}close(){this.Jr()}send(p){this.Hr(p)}so(){this.Xr()}io(p){this.eo(p)}ro(p){this.no(p)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends class{constructor(p){this.databaseInfo=p,this.databaseId=p.databaseId;const i=p.ssl?"https":"http";this.oo=i+"://"+p.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(p,i,m,t,e){const f=this.ao(p,i);st("RestConnection","Sending: ",f,m);const a={};return this.ho(a,t,e),this.lo(p,f,a,m).then(o=>(st("RestConnection","Received: ",o),o),o=>{throw lo("RestConnection",`${p} failed with error: `,o,"url: ",f,"request:",m),o})}fo(p,i,m,t,e,f){return this.co(p,i,m,t,e)}ho(p,i,m){p["X-Goog-Api-Client"]="gl-js/ fire/"+Mi,p["Content-Type"]="text/plain",this.databaseInfo.appId&&(p["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((t,e)=>p[e]=t),m&&m.headers.forEach((t,e)=>p[e]=t)}ao(p,i){const m=fp[p];return`${this.oo}/v1/${i}:${m}`}}{constructor(p){super(p),this.forceLongPolling=p.forceLongPolling,this.autoDetectLongPolling=p.autoDetectLongPolling,this.useFetchStreams=p.useFetchStreams}lo(p,i,m,t){return new Promise((e,f)=>{const a=new Cc;a.listenOnce(Tc.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case bs.NO_ERROR:const s=a.getResponseJson();st("Connection","XHR received:",JSON.stringify(s)),e(s);break;case bs.TIMEOUT:st("Connection",'RPC "'+p+'" timed out'),f(new ot(q.DEADLINE_EXCEEDED,"Request time out"));break;case bs.HTTP_ERROR:const n=a.getStatus();if(st("Connection",'RPC "'+p+'" failed with status:',n,"response text:",a.getResponseText()),n>0){const r=a.getResponseJson().error;if(r&&r.status&&r.message){const u=function(h){const l=h.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(l)>=0?l:q.UNKNOWN}(r.status);f(new ot(u,r.message))}else f(new ot(q.UNKNOWN,"Server responded with status "+a.getStatus()))}else f(new ot(q.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{st("Connection",'RPC "'+p+'" completed.')}});const o=JSON.stringify(t);a.send(i,"POST",o,m,15)})}_o(p,i,m){const t=[this.oo,"/","google.firestore.v1.Firestore","/",p,"/channel"],e=yc(),f=Ac(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Sc({})),this.ho(a.initMessageHeaders,i,m),ku()||_u()||tf()||ef()||nf()||qu()||(a.httpHeadersOverwriteParam="$httpHeaders");const o=t.join("");st("Connection","Creating WebChannel: "+o,a);const s=e.createWebChannel(o,a);let n=!1,r=!1;const u=new dp({Hr:l=>{r?st("Connection","Not sending because WebChannel is closed:",l):(n||(st("Connection","Opening WebChannel transport."),s.open(),n=!0),st("Connection","WebChannel sending:",l),s.send(l))},Jr:()=>s.close()}),h=(l,d,v)=>{l.listen(d,c=>{try{v(c)}catch(g){setTimeout(()=>{throw g},0)}})};return h(s,Ln.EventType.OPEN,()=>{r||st("Connection","WebChannel transport opened.")}),h(s,Ln.EventType.CLOSE,()=>{r||(r=!0,st("Connection","WebChannel transport closed"),u.io())}),h(s,Ln.EventType.ERROR,l=>{r||(r=!0,lo("Connection","WebChannel transport errored:",l),u.io(new ot(q.UNAVAILABLE,"The operation could not be completed")))}),h(s,Ln.EventType.MESSAGE,l=>{var d;if(!r){const v=l.data[0];St(!!v);const c=v,g=c.error||((d=c[0])===null||d===void 0?void 0:d.error);if(g){st("Connection","WebChannel received error:",g);const x=g.status;let A=function(E){const S=Ft[E];if(S!==void 0)return Ml(S)}(x),T=g.message;A===void 0&&(A=q.INTERNAL,T="Unknown error status: "+x+" with message "+g.message),r=!0,u.io(new ot(A,T)),s.close()}else st("Connection","WebChannel received:",v),u.ro(v)}}),h(f,Ec.STAT_EVENT,l=>{l.stat===ao.PROXY?st("Connection","Detected buffering proxy"):l.stat===ao.NOPROXY&&st("Connection","Detected no buffering proxy")}),setTimeout(()=>{u.so()},0),u}}function Ks(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(y){return new Ev(y,!0)}class zl{constructor(p,i,m=1e3,t=1.5,e=6e4){this.Hs=p,this.timerId=i,this.wo=m,this.mo=t,this.yo=e,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(p){this.cancel();const i=Math.floor(this.po+this.Ro()),m=Math.max(0,Date.now()-this.To),t=Math.max(0,i-m);t>0&&st("ExponentialBackoff",`Backing off for ${t} ms (base delay: ${this.po} ms, delay with jitter: ${i} ms, last attempt: ${m} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,t,()=>(this.To=Date.now(),p())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(p,i,m,t,e,f,a,o){this.Hs=p,this.Po=m,this.vo=t,this.Vo=e,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zl(p,i)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Mo()}async stop(){this.No()&&await this.close(0)}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(p){this.Lo(),this.stream.send(p)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(p,i){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,p!==4?this.xo.reset():i&&i.code===q.RESOURCE_EXHAUSTED?(Re(i.toString()),Re("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):i&&i.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=p,await this.listener.Zr(i)}qo(){}auth(){this.state=1;const p=this.Ko(this.So),i=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([m,t])=>{this.So===i&&this.Go(m,t)},m=>{p(()=>{const t=new ot(q.UNKNOWN,"Fetching auth token failed: "+m.message);return this.Qo(t)})})}Go(p,i){const m=this.Ko(this.So);this.stream=this.jo(p,i),this.stream.Yr(()=>{m(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(t=>{m(()=>this.Qo(t))}),this.stream.onMessage(t=>{m(()=>this.onMessage(t))})}Mo(){this.state=5,this.xo.Ao(async()=>{this.state=0,this.start()})}Qo(p){return st("PersistentStream",`close with error: ${p}`),this.stream=null,this.close(4,p)}Ko(p){return i=>{this.Hs.enqueueAndForget(()=>this.So===p?i():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vp extends Xl{constructor(p,i,m,t,e,f){super(p,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,m,t,f),this.It=e}jo(p,i){return this.Vo._o("Listen",p,i)}onMessage(p){this.xo.reset();const i=Pv(this.It,p),m=function(t){if(!("targetChange"in t))return pt.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?pt.min():e.readTime?Se(e.readTime):pt.min()}(p);return this.listener.Wo(i,m)}zo(p){const i={};i.database=Tr(this.It),i.addTarget=function(t,e){let f;const a=e.target;return f=mr(a)?{documents:Lv(t,a)}:{query:Ov(t,a)},f.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?f.resumeToken=Bl(t,e.resumeToken):e.snapshotVersion.compareTo(pt.min())>0&&(f.readTime=qn(t,e.snapshotVersion.toTimestamp())),f}(this.It,p);const m=Iv(this.It,p);m&&(i.labels=m),this.Bo(i)}Ho(p){const i={};i.database=Tr(this.It),i.removeTarget=p,this.Bo(i)}}class pp extends Xl{constructor(p,i,m,t,e,f){super(p,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,m,t,f),this.It=e,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(p,i){return this.Vo._o("Write",p,i)}onMessage(p){if(St(!!p.streamToken),this.lastStreamToken=p.streamToken,this.Jo){this.xo.reset();const i=Rv(p.writeResults,p.commitTime),m=Se(p.commitTime);return this.listener.Zo(m,i)}return St(!p.writeResults||p.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const p={};p.database=Tr(this.It),this.Bo(p)}Xo(p){const i={streamToken:this.lastStreamToken,writes:p.map(m=>Mv(this.It,m))};this.Bo(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends class{}{constructor(p,i,m,t){super(),this.authCredentials=p,this.appCheckCredentials=i,this.Vo=m,this.It=t,this.nu=!1}su(){if(this.nu)throw new ot(q.FAILED_PRECONDITION,"The client has already been terminated.")}co(p,i,m){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([t,e])=>this.Vo.co(p,i,m,t,e)).catch(t=>{throw t.name==="FirebaseError"?(t.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ot(q.UNKNOWN,t.toString())})}fo(p,i,m,t){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([e,f])=>this.Vo.fo(p,i,m,e,f,t)).catch(e=>{throw e.name==="FirebaseError"?(e.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ot(q.UNKNOWN,e.toString())})}terminate(){this.nu=!0}}class gp{constructor(p,i){this.asyncQueue=p,this.onlineStateHandler=i,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(p){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${p.toString()}`),this.cu("Offline")))}set(p){this.lu(),this.iu=0,p==="Online"&&(this.ou=!1),this.cu(p)}cu(p){p!==this.state&&(this.state=p,this.onlineStateHandler(p))}au(p){const i=`Could not reach Cloud Firestore backend. ${p}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Re(i),this.ou=!1):st("OnlineStateTracker",i)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(p,i,m,t,e){this.localStore=p,this.datastore=i,this.asyncQueue=m,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=e,this.mu.qr(f=>{m.enqueueAndForget(async()=>{ni(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(a){const o=dt(a);o._u.add(4),await En(o),o.gu.set("Unknown"),o._u.delete(4),await Ps(o)}(this))})}),this.gu=new gp(m,t)}}async function Ps(y){if(ni(y))for(const p of y.wu)await p(!0)}async function En(y){for(const p of y.wu)await p(!1)}function Wl(y,p){const i=dt(y);i.du.has(p.targetId)||(i.du.set(p.targetId,p),ma(i)?pa(i):Li(i).ko()&&va(i,p))}function Hl(y,p){const i=dt(y),m=Li(i);i.du.delete(p),m.ko()&&bl(i,p),i.du.size===0&&(m.ko()?m.Fo():ni(i)&&i.gu.set("Unknown"))}function va(y,p){y.yu.Ot(p.targetId),Li(y).zo(p)}function bl(y,p){y.yu.Ot(p),Li(y).Ho(p)}function pa(y){y.yu=new yv({getRemoteKeysForTarget:p=>y.remoteSyncer.getRemoteKeysForTarget(p),se:p=>y.du.get(p)||null}),Li(y).start(),y.gu.uu()}function ma(y){return ni(y)&&!Li(y).No()&&y.du.size>0}function ni(y){return dt(y)._u.size===0}function Ql(y){y.yu=void 0}async function yp(y){y.du.forEach((p,i)=>{va(y,p)})}async function Ap(y,p){Ql(y),ma(y)?(y.gu.hu(p),pa(y)):y.gu.set("Unknown")}async function Tp(y,p,i){if(y.gu.set("Online"),p instanceof Dl&&p.state===2&&p.cause)try{await async function(m,t){const e=t.cause;for(const f of t.targetIds)m.du.has(f)&&(await m.remoteSyncer.rejectListen(f,e),m.du.delete(f),m.yu.removeTarget(f))}(y,p)}catch(m){st("RemoteStore","Failed to remove targets %s: %s ",p.targetIds.join(","),m),await _n(y,m)}else if(p instanceof Gn?y.yu.Gt(p):p instanceof Il?y.yu.Yt(p):y.yu.Wt(p),!i.isEqual(pt.min()))try{const m=await Yl(y.localStore);i.compareTo(m)>=0&&await function(t,e){const f=t.yu.te(e);return f.targetChanges.forEach((a,o)=>{if(a.resumeToken.approximateByteSize()>0){const s=t.du.get(o);s&&t.du.set(o,s.withResumeToken(a.resumeToken,e))}}),f.targetMismatches.forEach(a=>{const o=t.du.get(a);if(!o)return;t.du.set(a,o.withResumeToken(Ht.EMPTY_BYTE_STRING,o.snapshotVersion)),bl(t,a);const s=new $e(o.target,a,1,o.sequenceNumber);va(t,s)}),t.remoteSyncer.applyRemoteEvent(f)}(y,i)}catch(m){st("RemoteStore","Failed to raise snapshot:",m),await _n(y,m)}}async function _n(y,p,i){if(!yn(p))throw p;y._u.add(1),await En(y),y.gu.set("Offline"),i||(i=()=>Yl(y.localStore)),y.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await i(),y._u.delete(1),await Ps(y)})}function Kl(y,p){return p().catch(i=>_n(y,i,p))}async function Ms(y){const p=dt(y),i=Ge(p);let m=p.fu.length>0?p.fu[p.fu.length-1].batchId:-1;for(;Ep(p);)try{const t=await ap(p.localStore,m);if(t===null){p.fu.length===0&&i.Fo();break}m=t.batchId,Sp(p,t)}catch(t){await _n(p,t)}$l(p)&&Zl(p)}function Ep(y){return ni(y)&&y.fu.length<10}function Sp(y,p){y.fu.push(p);const i=Ge(y);i.ko()&&i.Yo&&i.Xo(p.mutations)}function $l(y){return ni(y)&&!Ge(y).No()&&y.fu.length>0}function Zl(y){Ge(y).start()}async function Cp(y){Ge(y).eu()}async function Pp(y){const p=Ge(y);for(const i of y.fu)p.Xo(i.mutations)}async function Mp(y,p,i){const m=y.fu.shift(),t=ua.from(m,p,i);await Kl(y,()=>y.remoteSyncer.applySuccessfulWrite(t)),await Ms(y)}async function Rp(y,p){p&&Ge(y).Yo&&await async function(i,m){if(t=m.code,vv(t)&&t!==q.ABORTED){const e=i.fu.shift();Ge(i).Oo(),await Kl(i,()=>i.remoteSyncer.rejectFailedWrite(e.batchId,m)),await Ms(i)}var t}(y,p),$l(y)&&Zl(y)}async function Io(y,p){const i=dt(y);i.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const m=ni(i);i._u.add(3),await En(i),m&&i.gu.set("Unknown"),await i.remoteSyncer.handleCredentialChange(p),i._u.delete(3),await Ps(i)}async function Lp(y,p){const i=dt(y);p?(i._u.delete(2),await Ps(i)):p||(i._u.add(2),await En(i),i.gu.set("Unknown"))}function Li(y){return y.pu||(y.pu=function(p,i,m){const t=dt(p);return t.su(),new vp(i,t.Vo,t.authCredentials,t.appCheckCredentials,t.It,m)}(y.datastore,y.asyncQueue,{Yr:yp.bind(null,y),Zr:Ap.bind(null,y),Wo:Tp.bind(null,y)}),y.wu.push(async p=>{p?(y.pu.Oo(),ma(y)?pa(y):y.gu.set("Unknown")):(await y.pu.stop(),Ql(y))})),y.pu}function Ge(y){return y.Iu||(y.Iu=function(p,i,m){const t=dt(p);return t.su(),new pp(i,t.Vo,t.authCredentials,t.appCheckCredentials,t.It,m)}(y.datastore,y.asyncQueue,{Yr:Cp.bind(null,y),Zr:Rp.bind(null,y),tu:Pp.bind(null,y),Zo:Mp.bind(null,y)}),y.wu.push(async p=>{p?(y.Iu.Oo(),await Ms(y)):(await y.Iu.stop(),y.fu.length>0&&(st("RemoteStore",`Stopping write stream with ${y.fu.length} pending writes`),y.fu=[]))})),y.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(p,i,m,t,e){this.asyncQueue=p,this.timerId=i,this.targetTimeMs=m,this.op=t,this.removalCallback=e,this.deferred=new Ie,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(p,i,m,t,e){const f=Date.now()+m,a=new ga(p,i,f,t,e);return a.start(m),a}start(p){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),p)}skipDelay(){return this.handleDelayElapsed()}cancel(p){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(q.CANCELLED,"Operation cancelled"+(p?": "+p:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(p=>this.deferred.resolve(p))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xa(y,p){if(Re("AsyncQueue",`${p}: ${y}`),yn(y))return new ot(q.UNAVAILABLE,`${p}: ${y}`);throw y}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(p){this.comparator=p?(i,m)=>p(i,m)||at.comparator(i.key,m.key):(i,m)=>at.comparator(i.key,m.key),this.keyedMap=Di(),this.sortedSet=new Gt(this.comparator)}static emptySet(p){return new fi(p.comparator)}has(p){return this.keyedMap.get(p)!=null}get(p){return this.keyedMap.get(p)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(p){const i=this.keyedMap.get(p);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(p){this.sortedSet.inorderTraversal((i,m)=>(p(i),!1))}add(p){const i=this.delete(p.key);return i.copy(i.keyedMap.insert(p.key,p),i.sortedSet.insert(p,null))}delete(p){const i=this.get(p);return i?this.copy(this.keyedMap.remove(p),this.sortedSet.remove(i)):this}isEqual(p){if(!(p instanceof fi)||this.size!==p.size)return!1;const i=this.sortedSet.getIterator(),m=p.sortedSet.getIterator();for(;i.hasNext();){const t=i.getNext().key,e=m.getNext().key;if(!t.isEqual(e))return!1}return!0}toString(){const p=[];return this.forEach(i=>{p.push(i.toString())}),p.length===0?"DocumentSet ()":`DocumentSet (
  `+p.join(`  
`)+`
)`}copy(p,i){const m=new fi;return m.comparator=this.comparator,m.keyedMap=p,m.sortedSet=i,m}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.Tu=new Gt(at.comparator)}track(p){const i=p.doc.key,m=this.Tu.get(i);m?p.type!==0&&m.type===3?this.Tu=this.Tu.insert(i,p):p.type===3&&m.type!==1?this.Tu=this.Tu.insert(i,{type:m.type,doc:p.doc}):p.type===2&&m.type===2?this.Tu=this.Tu.insert(i,{type:2,doc:p.doc}):p.type===2&&m.type===0?this.Tu=this.Tu.insert(i,{type:0,doc:p.doc}):p.type===1&&m.type===0?this.Tu=this.Tu.remove(i):p.type===1&&m.type===2?this.Tu=this.Tu.insert(i,{type:1,doc:m.doc}):p.type===0&&m.type===1?this.Tu=this.Tu.insert(i,{type:2,doc:p.doc}):ft():this.Tu=this.Tu.insert(i,p)}Eu(){const p=[];return this.Tu.inorderTraversal((i,m)=>{p.push(m)}),p}}class xi{constructor(p,i,m,t,e,f,a,o){this.query=p,this.docs=i,this.oldDocs=m,this.docChanges=t,this.mutatedKeys=e,this.fromCache=f,this.syncStateChanged=a,this.excludesMetadataChanges=o}static fromInitialDocuments(p,i,m,t){const e=[];return i.forEach(f=>{e.push({type:0,doc:f})}),new xi(p,i,fi.emptySet(i),e,m,t,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(p){if(!(this.fromCache===p.fromCache&&this.syncStateChanged===p.syncStateChanged&&this.mutatedKeys.isEqual(p.mutatedKeys)&&As(this.query,p.query)&&this.docs.isEqual(p.docs)&&this.oldDocs.isEqual(p.oldDocs)))return!1;const i=this.docChanges,m=p.docChanges;if(i.length!==m.length)return!1;for(let t=0;t<i.length;t++)if(i[t].type!==m[t].type||!i[t].doc.isEqual(m[t].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.Au=void 0,this.listeners=[]}}class Fp{constructor(){this.queries=new Ri(p=>pl(p),As),this.onlineState="Unknown",this.Ru=new Set}}async function Jl(y,p){const i=dt(y),m=p.query;let t=!1,e=i.queries.get(m);if(e||(t=!0,e=new Op),t)try{e.Au=await i.onListen(m)}catch(f){const a=xa(f,`Initialization of query '${xr(p.query)}' failed`);return void p.onError(a)}i.queries.set(m,e),e.listeners.push(p),p.bu(i.onlineState),e.Au&&p.Pu(e.Au)&&ya(i)}async function jl(y,p){const i=dt(y),m=p.query;let t=!1;const e=i.queries.get(m);if(e){const f=e.listeners.indexOf(p);f>=0&&(e.listeners.splice(f,1),t=e.listeners.length===0)}if(t)return i.queries.delete(m),i.onUnlisten(m)}function Ip(y,p){const i=dt(y);let m=!1;for(const t of p){const e=t.query,f=i.queries.get(e);if(f){for(const a of f.listeners)a.Pu(t)&&(m=!0);f.Au=t}}m&&ya(i)}function Dp(y,p,i){const m=dt(y),t=m.queries.get(p);if(t)for(const e of t.listeners)e.onError(i);m.queries.delete(p)}function ya(y){y.Ru.forEach(p=>{p.next()})}class kl{constructor(p,i,m){this.query=p,this.vu=i,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=m||{}}Pu(p){if(!this.options.includeMetadataChanges){const m=[];for(const t of p.docChanges)t.type!==3&&m.push(t);p=new xi(p.query,p.docs,p.oldDocs,m,p.mutatedKeys,p.fromCache,p.syncStateChanged,!0)}let i=!1;return this.Vu?this.Du(p)&&(this.vu.next(p),i=!0):this.Cu(p,this.onlineState)&&(this.xu(p),i=!0),this.Su=p,i}onError(p){this.vu.error(p)}bu(p){this.onlineState=p;let i=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,p)&&(this.xu(this.Su),i=!0),i}Cu(p,i){if(!p.fromCache)return!0;const m=i!=="Offline";return(!this.options.Nu||!m)&&(!p.docs.isEmpty()||i==="Offline")}Du(p){if(p.docChanges.length>0)return!0;const i=this.Su&&this.Su.hasPendingWrites!==p.hasPendingWrites;return!(!p.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}xu(p){p=xi.fromInitialDocuments(p.query,p.docs,p.mutatedKeys,p.fromCache),this.Vu=!0,this.vu.next(p)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(p){this.key=p}}class _l{constructor(p){this.key=p}}class Bp{constructor(p,i){this.query=p,this.Lu=i,this.Uu=null,this.current=!1,this.qu=mt(),this.mutatedKeys=mt(),this.Ku=ml(p),this.Gu=new fi(this.Ku)}get Qu(){return this.Lu}ju(p,i){const m=i?i.Wu:new Do,t=i?i.Gu:this.Gu;let e=i?i.mutatedKeys:this.mutatedKeys,f=t,a=!1;const o=this.query.limitType==="F"&&t.size===this.query.limit?t.last():null,s=this.query.limitType==="L"&&t.size===this.query.limit?t.first():null;if(p.inorderTraversal((n,r)=>{const u=t.get(n),h=ha(this.query,r)?r:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(m.track({type:3,doc:h}),v=!0):this.zu(u,h)||(m.track({type:2,doc:h}),v=!0,(o&&this.Ku(h,o)>0||s&&this.Ku(h,s)<0)&&(a=!0)):!u&&h?(m.track({type:0,doc:h}),v=!0):u&&!h&&(m.track({type:1,doc:u}),v=!0,(o||s)&&(a=!0)),v&&(h?(f=f.add(h),e=d?e.add(n):e.delete(n)):(f=f.delete(n),e=e.delete(n)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const n=this.query.limitType==="F"?f.last():f.first();f=f.delete(n.key),e=e.delete(n.key),m.track({type:1,doc:n})}return{Gu:f,Wu:m,$i:a,mutatedKeys:e}}zu(p,i){return p.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(p,i,m){const t=this.Gu;this.Gu=p.Gu,this.mutatedKeys=p.mutatedKeys;const e=p.Wu.Eu();e.sort((s,n)=>function(r,u){const h=l=>{switch(l){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return h(r)-h(u)}(s.type,n.type)||this.Ku(s.doc,n.doc)),this.Hu(m);const f=i?this.Ju():[],a=this.qu.size===0&&this.current?1:0,o=a!==this.Uu;return this.Uu=a,e.length!==0||o?{snapshot:new xi(this.query,p.Gu,t,e,p.mutatedKeys,a===0,o,!1),Yu:f}:{Yu:f}}bu(p){return this.current&&p==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Do,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(p){return!this.Lu.has(p)&&!!this.Gu.has(p)&&!this.Gu.get(p).hasLocalMutations}Hu(p){p&&(p.addedDocuments.forEach(i=>this.Lu=this.Lu.add(i)),p.modifiedDocuments.forEach(i=>{}),p.removedDocuments.forEach(i=>this.Lu=this.Lu.delete(i)),this.current=p.current)}Ju(){if(!this.current)return[];const p=this.qu;this.qu=mt(),this.Gu.forEach(m=>{this.Xu(m.key)&&(this.qu=this.qu.add(m.key))});const i=[];return p.forEach(m=>{this.qu.has(m)||i.push(new _l(m))}),this.qu.forEach(m=>{p.has(m)||i.push(new ql(m))}),i}Zu(p){this.Lu=p.Hi,this.qu=mt();const i=this.ju(p.documents);return this.applyChanges(i,!0)}tc(){return xi.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.Uu===0)}}class Np{constructor(p,i,m){this.query=p,this.targetId=i,this.view=m}}class wp{constructor(p){this.key=p,this.ec=!1}}class Gp{constructor(p,i,m,t,e,f){this.localStore=p,this.remoteStore=i,this.eventManager=m,this.sharedClientState=t,this.currentUser=e,this.maxConcurrentLimboResolutions=f,this.nc={},this.sc=new Ri(a=>pl(a),As),this.ic=new Map,this.rc=new Set,this.oc=new Gt(at.comparator),this.uc=new Map,this.cc=new fa,this.ac={},this.hc=new Map,this.lc=gi.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function Up(y,p){const i=$p(y);let m,t;const e=i.sc.get(p);if(e)m=e.targetId,i.sharedClientState.addLocalQueryTarget(m),t=e.view.tc();else{const f=await op(i.localStore,Le(p));i.isPrimaryClient&&Wl(i.remoteStore,f);const a=i.sharedClientState.addLocalQueryTarget(f.targetId);m=f.targetId,t=await Vp(i,p,m,a==="current")}return t}async function Vp(y,p,i,m){y.dc=(n,r,u)=>async function(h,l,d,v){let c=l.view.ju(d);c.$i&&(c=await Lo(h.localStore,l.query,!1).then(({documents:A})=>l.view.ju(A,c)));const g=v&&v.targetChanges.get(l.targetId),x=l.view.applyChanges(c,h.isPrimaryClient,g);return No(h,l.targetId,x.Yu),x.snapshot}(y,n,r,u);const t=await Lo(y.localStore,p,!0),e=new Bp(p,t.Hi),f=e.ju(t.documents),a=Tn.createSynthesizedTargetChangeForCurrentChange(i,m&&y.onlineState!=="Offline"),o=e.applyChanges(f,y.isPrimaryClient,a);No(y,i,o.Yu);const s=new Np(p,i,e);return y.sc.set(p,s),y.ic.has(i)?y.ic.get(i).push(p):y.ic.set(i,[p]),o.snapshot}async function Yp(y,p){const i=dt(y),m=i.sc.get(p),t=i.ic.get(m.targetId);if(t.length>1)return i.ic.set(m.targetId,t.filter(e=>!As(e,p))),void i.sc.delete(p);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(m.targetId),i.sharedClientState.isActiveQueryTarget(m.targetId)||await Er(i.localStore,m.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(m.targetId),Hl(i.remoteStore,m.targetId),Sr(i,m.targetId)}).catch(xn)):(Sr(i,m.targetId),await Er(i.localStore,m.targetId,!0))}async function zp(y,p,i){const m=Zp(y);try{const t=await function(e,f){const a=dt(e),o=Nt.now(),s=f.reduce((u,h)=>u.add(h.key),mt());let n,r;return a.persistence.runTransaction("Locally write mutations","readwrite",u=>{let h=Oe(),l=mt();return a.Gi.getEntries(u,s).next(d=>{h=d,h.forEach((v,c)=>{c.isValidDocument()||(l=l.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(u,h)).next(d=>{n=d;const v=[];for(const c of f){const g=fv(c,n.get(c.key).overlayedDocument);g!=null&&v.push(new Ye(c.key,g,cl(g.value.mapValue),de.exists(!0)))}return a.mutationQueue.addMutationBatch(u,o,v,f)}).next(d=>{r=d;const v=d.applyToLocalDocumentSet(n,l);return a.documentOverlayCache.saveOverlays(u,d.batchId,v)})}).then(()=>({batchId:r.batchId,changes:Ll(n)}))}(m.localStore,p);m.sharedClientState.addPendingMutation(t.batchId),function(e,f,a){let o=e.ac[e.currentUser.toKey()];o||(o=new Gt(Et)),o=o.insert(f,a),e.ac[e.currentUser.toKey()]=o}(m,t.batchId,i),await Sn(m,t.changes),await Ms(m.remoteStore)}catch(t){const e=xa(t,"Failed to persist write");i.reject(e)}}async function tu(y,p){const i=dt(y);try{const m=await sp(i.localStore,p);p.targetChanges.forEach((t,e)=>{const f=i.uc.get(e);f&&(St(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?f.ec=!0:t.modifiedDocuments.size>0?St(f.ec):t.removedDocuments.size>0&&(St(f.ec),f.ec=!1))}),await Sn(i,m,p)}catch(m){await xn(m)}}function Bo(y,p,i){const m=dt(y);if(m.isPrimaryClient&&i===0||!m.isPrimaryClient&&i===1){const t=[];m.sc.forEach((e,f)=>{const a=f.view.bu(p);a.snapshot&&t.push(a.snapshot)}),function(e,f){const a=dt(e);a.onlineState=f;let o=!1;a.queries.forEach((s,n)=>{for(const r of n.listeners)r.bu(f)&&(o=!0)}),o&&ya(a)}(m.eventManager,p),t.length&&m.nc.Wo(t),m.onlineState=p,m.isPrimaryClient&&m.sharedClientState.setOnlineState(p)}}async function Xp(y,p,i){const m=dt(y);m.sharedClientState.updateQueryState(p,"rejected",i);const t=m.uc.get(p),e=t&&t.key;if(e){let f=new Gt(at.comparator);f=f.insert(e,zt.newNoDocument(e,pt.min()));const a=mt().add(e),o=new Ss(pt.min(),new Map,new wt(Et),f,a);await tu(m,o),m.oc=m.oc.remove(e),m.uc.delete(p),Aa(m)}else await Er(m.localStore,p,!1).then(()=>Sr(m,p,i)).catch(xn)}async function Wp(y,p){const i=dt(y),m=p.batch.batchId;try{const t=await np(i.localStore,p);iu(i,m,null),eu(i,m),i.sharedClientState.updateMutationState(m,"acknowledged"),await Sn(i,t)}catch(t){await xn(t)}}async function Hp(y,p,i){const m=dt(y);try{const t=await function(e,f){const a=dt(e);return a.persistence.runTransaction("Reject batch","readwrite-primary",o=>{let s;return a.mutationQueue.lookupMutationBatch(o,f).next(n=>(St(n!==null),s=n.keys(),a.mutationQueue.removeMutationBatch(o,n))).next(()=>a.mutationQueue.performConsistencyCheck(o)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(o,s,f)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,s)).next(()=>a.localDocuments.getDocuments(o,s))})}(m.localStore,p);iu(m,p,i),eu(m,p),m.sharedClientState.updateMutationState(p,"rejected",i),await Sn(m,t)}catch(t){await xn(t)}}function eu(y,p){(y.hc.get(p)||[]).forEach(i=>{i.resolve()}),y.hc.delete(p)}function iu(y,p,i){const m=dt(y);let t=m.ac[m.currentUser.toKey()];if(t){const e=t.get(p);e&&(i?e.reject(i):e.resolve(),t=t.remove(p)),m.ac[m.currentUser.toKey()]=t}}function Sr(y,p,i=null){y.sharedClientState.removeLocalQueryTarget(p);for(const m of y.ic.get(p))y.sc.delete(m),i&&y.nc._c(m,i);y.ic.delete(p),y.isPrimaryClient&&y.cc.ls(p).forEach(m=>{y.cc.containsKey(m)||nu(y,m)})}function nu(y,p){y.rc.delete(p.path.canonicalString());const i=y.oc.get(p);i!==null&&(Hl(y.remoteStore,i),y.oc=y.oc.remove(p),y.uc.delete(i),Aa(y))}function No(y,p,i){for(const m of i)m instanceof ql?(y.cc.addReference(m.key,p),bp(y,m)):m instanceof _l?(st("SyncEngine","Document no longer in limbo: "+m.key),y.cc.removeReference(m.key,p),y.cc.containsKey(m.key)||nu(y,m.key)):ft()}function bp(y,p){const i=p.key,m=i.path.canonicalString();y.oc.get(i)||y.rc.has(m)||(st("SyncEngine","New document in limbo: "+i),y.rc.add(m),Aa(y))}function Aa(y){for(;y.rc.size>0&&y.oc.size<y.maxConcurrentLimboResolutions;){const p=y.rc.values().next().value;y.rc.delete(p);const i=new at(Mt.fromString(p)),m=y.lc.next();y.uc.set(m,new wp(i)),y.oc=y.oc.insert(i,m),Wl(y.remoteStore,new $e(Le(ys(i.path)),m,2,sa.at))}}async function Sn(y,p,i){const m=dt(y),t=[],e=[],f=[];m.sc.isEmpty()||(m.sc.forEach((a,o)=>{f.push(m.dc(o,p,i).then(s=>{if(s){m.isPrimaryClient&&m.sharedClientState.updateQueryState(o.targetId,s.fromCache?"not-current":"current"),t.push(s);const n=ca.Ci(o.targetId,s);e.push(n)}}))}),await Promise.all(f),m.nc.Wo(t),await async function(a,o){const s=dt(a);try{await s.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>_.forEach(o,r=>_.forEach(r.Si,u=>s.persistence.referenceDelegate.addReference(n,r.targetId,u)).next(()=>_.forEach(r.Di,u=>s.persistence.referenceDelegate.removeReference(n,r.targetId,u)))))}catch(n){if(!yn(n))throw n;st("LocalStore","Failed to update sequence numbers: "+n)}for(const n of o){const r=n.targetId;if(!n.fromCache){const u=s.Ui.get(r),h=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(h);s.Ui=s.Ui.insert(r,l)}}}(m.localStore,e))}async function Qp(y,p){const i=dt(y);if(!i.currentUser.isEqual(p)){st("SyncEngine","User change. New user:",p.toKey());const m=await Vl(i.localStore,p);i.currentUser=p,function(t,e){t.hc.forEach(f=>{f.forEach(a=>{a.reject(new ot(q.CANCELLED,e))})}),t.hc.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(p,m.removedBatchIds,m.addedBatchIds),await Sn(i,m.ji)}}function Kp(y,p){const i=dt(y),m=i.uc.get(p);if(m&&m.ec)return mt().add(m.key);{let t=mt();const e=i.ic.get(p);if(!e)return t;for(const f of e){const a=i.sc.get(f);t=t.unionWith(a.view.Qu)}return t}}function $p(y){const p=dt(y);return p.remoteStore.remoteSyncer.applyRemoteEvent=tu.bind(null,p),p.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kp.bind(null,p),p.remoteStore.remoteSyncer.rejectListen=Xp.bind(null,p),p.nc.Wo=Ip.bind(null,p.eventManager),p.nc._c=Dp.bind(null,p.eventManager),p}function Zp(y){const p=dt(y);return p.remoteStore.remoteSyncer.applySuccessfulWrite=Wp.bind(null,p),p.remoteStore.remoteSyncer.rejectFailedWrite=Hp.bind(null,p),p}class Jp{constructor(){this.synchronizeTabs=!1}async initialize(p){this.It=Cs(p.databaseInfo.databaseId),this.sharedClientState=this.mc(p),this.persistence=this.gc(p),await this.persistence.start(),this.localStore=this.yc(p),this.gcScheduler=this.Ic(p,this.localStore),this.indexBackfillerScheduler=this.Tc(p,this.localStore)}Ic(p,i){return null}Tc(p,i){return null}yc(p){return ip(this.persistence,new tp,p.initialUser,this.It)}gc(p){return new qv(da.Bs,this.It)}mc(p){return new lp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jp{async initialize(p,i){this.localStore||(this.localStore=p.localStore,this.sharedClientState=p.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!p.synchronizeTabs),this.sharedClientState.onlineStateHandler=m=>Bo(this.syncEngine,m,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qp.bind(null,this.syncEngine),await Lp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(p){return new Fp}createDatastore(p){const i=Cs(p.databaseInfo.databaseId),m=(t=p.databaseInfo,new cp(t));var t;return function(e,f,a,o){return new mp(e,f,a,o)}(p.authCredentials,p.appCheckCredentials,m,i)}createRemoteStore(p){return i=this.localStore,m=this.datastore,t=p.asyncQueue,e=a=>Bo(this.syncEngine,a,0),f=Fo.C()?new Fo:new up,new xp(i,m,t,e,f);var i,m,t,e,f}createSyncEngine(p,i){return function(m,t,e,f,a,o,s){const n=new Gp(m,t,e,f,a,o);return s&&(n.fc=!0),n}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,p.initialUser,p.maxConcurrentLimboResolutions,i)}terminate(){return async function(p){const i=dt(p);st("RemoteStore","RemoteStore shutting down."),i._u.add(5),await En(i),i.mu.shutdown(),i.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(p){this.observer=p,this.muted=!1}next(p){this.observer.next&&this.Ac(this.observer.next,p)}error(p){this.observer.error?this.Ac(this.observer.error,p):Re("Uncaught Error in snapshot listener:",p)}Rc(){this.muted=!0}Ac(p,i){this.muted||setTimeout(()=>{this.muted||p(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(p,i,m,t){this.authCredentials=p,this.appCheckCredentials=i,this.asyncQueue=m,this.databaseInfo=t,this.user=ee.UNAUTHENTICATED,this.clientId=ll.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(m,async e=>{st("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(m,e=>(st("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(p){this.authCredentialListener=p}setAppCheckTokenChangeListener(p){this.appCheckCredentialListener=p}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ot(q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const p=new Ie;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),p.resolve()}catch(i){const m=xa(i,"Failed to shutdown persistence");p.reject(m)}}),p.promise}}async function qp(y,p){y.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const i=await y.getConfiguration();await p.initialize(i);let m=i.initialUser;y.setCredentialChangeListener(async t=>{m.isEqual(t)||(await Vl(p.localStore,t),m=t)}),p.persistence.setDatabaseDeletedListener(()=>y.terminate()),y.offlineComponents=p}async function _p(y,p){y.asyncQueue.verifyOperationInProgress();const i=await tm(y);st("FirestoreClient","Initializing OnlineComponentProvider");const m=await y.getConfiguration();await p.initialize(i,m),y.setCredentialChangeListener(t=>Io(p.remoteStore,t)),y.setAppCheckTokenChangeListener((t,e)=>Io(p.remoteStore,e)),y.onlineComponents=p}async function tm(y){return y.offlineComponents||(st("FirestoreClient","Using default OfflineComponentProvider"),await qp(y,new Jp)),y.offlineComponents}async function ru(y){return y.onlineComponents||(st("FirestoreClient","Using default OnlineComponentProvider"),await _p(y,new jp)),y.onlineComponents}function em(y){return ru(y).then(p=>p.syncEngine)}async function Cr(y){const p=await ru(y),i=p.eventManager;return i.onListen=Up.bind(null,p.syncEngine),i.onUnlisten=Yp.bind(null,p.syncEngine),i}function im(y,p,i={}){const m=new Ie;return y.asyncQueue.enqueueAndForget(async()=>function(t,e,f,a,o){const s=new su({next:r=>{e.enqueueAndForget(()=>jl(t,n));const u=r.docs.has(f);!u&&r.fromCache?o.reject(new ot(q.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&r.fromCache&&a&&a.source==="server"?o.reject(new ot(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(r)},error:r=>o.reject(r)}),n=new kl(ys(f.path),s,{includeMetadataChanges:!0,Nu:!0});return Jl(t,n)}(await Cr(y),y.asyncQueue,p,i,m)),m.promise}const wo=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(y,p,i){if(!i)throw new ot(q.INVALID_ARGUMENT,`Function ${y}() cannot be called with an empty ${p}.`)}function nm(y,p,i,m){if(p===!0&&m===!0)throw new ot(q.INVALID_ARGUMENT,`${y} and ${i} cannot be used together.`)}function Go(y){if(!at.isDocumentKey(y))throw new ot(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${y} has ${y.length}.`)}function Uo(y){if(at.isDocumentKey(y))throw new ot(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${y} has ${y.length}.`)}function Ta(y){if(y===void 0)return"undefined";if(y===null)return"null";if(typeof y=="string")return y.length>20&&(y=`${y.substring(0,20)}...`),JSON.stringify(y);if(typeof y=="number"||typeof y=="boolean")return""+y;if(typeof y=="object"){if(y instanceof Array)return"an array";{const p=function(i){return i.constructor?i.constructor.name:null}(y);return p?`a custom ${p} object`:"an object"}}return typeof y=="function"?"a function":ft()}function ve(y,p){if("_delegate"in y&&(y=y._delegate),!(y instanceof p)){if(p.name===y.constructor.name)throw new ot(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Ta(y);throw new ot(q.INVALID_ARGUMENT,`Expected type '${p.name}', but it was: ${i}`)}}return y}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(p){var i;if(p.host===void 0){if(p.ssl!==void 0)throw new ot(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=p.host,this.ssl=(i=p.ssl)===null||i===void 0||i;if(this.credentials=p.credentials,this.ignoreUndefinedProperties=!!p.ignoreUndefinedProperties,p.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(p.cacheSizeBytes!==-1&&p.cacheSizeBytes<1048576)throw new ot(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=p.cacheSizeBytes}this.experimentalForceLongPolling=!!p.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!p.experimentalAutoDetectLongPolling,this.useFetchStreams=!!p.useFetchStreams,nm("experimentalForceLongPolling",p.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",p.experimentalAutoDetectLongPolling)}isEqual(p){return this.host===p.host&&this.ssl===p.ssl&&this.credentials===p.credentials&&this.cacheSizeBytes===p.cacheSizeBytes&&this.experimentalForceLongPolling===p.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===p.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===p.ignoreUndefinedProperties&&this.useFetchStreams===p.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(p,i,m,t){this._authCredentials=p,this._appCheckCredentials=i,this._databaseId=m,this._app=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vo({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ot(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(p){if(this._settingsFrozen)throw new ot(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vo(p),p.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Mc;switch(i.type){case"gapi":const m=i.client;return new Oc(m,i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ot(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(p.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(p){const i=wo.get(p);i&&(st("ComponentProvider","Removing Datastore"),wo.delete(p),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(p,i,m){this.converter=i,this._key=m,this.type="document",this.firestore=p}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new De(this.firestore,this.converter,this._key.path.popLast())}withConverter(p){return new kt(this.firestore,p,this._key)}}class Rs{constructor(p,i,m){this.converter=i,this._query=m,this.type="query",this.firestore=p}withConverter(p){return new Rs(this.firestore,p,this._query)}}class De extends Rs{constructor(p,i,m){super(p,i,ys(m)),this._path=m,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const p=this._path.popLast();return p.isEmpty()?null:new kt(this.firestore,null,new at(p))}withConverter(p){return new De(this.firestore,p,this._path)}}function di(y,p,...i){if(y=Pe(y),au("collection","path",p),y instanceof Ea){const m=Mt.fromString(p,...i);return Uo(m),new De(y,null,m)}{if(!(y instanceof kt||y instanceof De))throw new ot(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const m=y._path.child(Mt.fromString(p,...i));return Uo(m),new De(y.firestore,null,m)}}function Sa(y,p,...i){if(y=Pe(y),arguments.length===1&&(p=ll.R()),au("doc","path",p),y instanceof Ea){const m=Mt.fromString(p,...i);return Go(m),new kt(y,null,new at(m))}{if(!(y instanceof kt||y instanceof De))throw new ot(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const m=y._path.child(Mt.fromString(p,...i));return Go(m),new kt(y.firestore,y instanceof De?y.converter:null,new at(m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new zl(this,"async_queue_retry"),this.jc=()=>{const i=Ks();i&&st("AsyncQueue","Visibility state changed to "+i.visibilityState),this.xo.bo()};const p=Ks();p&&typeof p.addEventListener=="function"&&p.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(p){this.enqueue(p)}enqueueAndForgetEvenWhileRestricted(p){this.Wc(),this.zc(p)}enterRestrictedMode(p){if(!this.Lc){this.Lc=!0,this.Gc=p||!1;const i=Ks();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.jc)}}enqueue(p){if(this.Wc(),this.Lc)return new Promise(()=>{});const i=new Ie;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(p().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(p){this.enqueueAndForget(()=>(this.Bc.push(p),this.Hc()))}async Hc(){if(this.Bc.length!==0){try{await this.Bc[0](),this.Bc.shift(),this.xo.reset()}catch(p){if(!yn(p))throw p;st("AsyncQueue","Operation failed with retryable error: "+p)}this.Bc.length>0&&this.xo.Ao(()=>this.Hc())}}zc(p){const i=this.$c.then(()=>(this.Kc=!0,p().catch(m=>{this.qc=m,this.Kc=!1;const t=function(e){let f=e.message||"";return e.stack&&(f=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),f}(m);throw Re("INTERNAL UNHANDLED ERROR: ",t),m}).then(m=>(this.Kc=!1,m))));return this.$c=i,i}enqueueAfterDelay(p,i,m){this.Wc(),this.Qc.indexOf(p)>-1&&(i=0);const t=ga.createAndSchedule(this,p,i,m,e=>this.Jc(e));return this.Uc.push(t),t}Wc(){this.qc&&ft()}verifyOperationInProgress(){}async Yc(){let p;do p=this.$c,await p;while(p!==this.$c)}Xc(p){for(const i of this.Uc)if(i.timerId===p)return!0;return!1}Zc(p){return this.Yc().then(()=>{this.Uc.sort((i,m)=>i.targetTimeMs-m.targetTimeMs);for(const i of this.Uc)if(i.skipDelay(),p!=="all"&&i.timerId===p)break;return this.Yc()})}ta(p){this.Qc.push(p)}Jc(p){const i=this.Uc.indexOf(p);this.Uc.splice(i,1)}}function Yo(y){return function(p,i){if(typeof p!="object"||p===null)return!1;const m=p;for(const t of i)if(t in m&&typeof m[t]=="function")return!0;return!1}(y,["next","error","complete"])}class ti extends Ea{constructor(p,i,m,t){super(p,i,m,t),this.type="firestore",this._queue=new sm,this._persistenceKey=(t==null?void 0:t.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ou(this),this._firestoreClient.terminate()}}function rm(y,p){const i=typeof y=="object"?y:hd(),m=typeof y=="string"?y:p||"(default)";return nd(i,"firestore").getImmediate({identifier:m})}function Ca(y){return y._firestoreClient||ou(y),y._firestoreClient.verifyNotTerminated(),y._firestoreClient}function ou(y){var p;const i=y._freezeSettings(),m=function(t,e,f,a){return new zc(t,e,f,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(y._databaseId,((p=y._app)===null||p===void 0?void 0:p.options.appId)||"",y._persistenceKey,i);y._firestoreClient=new kp(y._authCredentials,y._appCheckCredentials,y._queue,m)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(...p){for(let i=0;i<p.length;++i)if(p[i].length===0)throw new ot(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(p)}isEqual(p){return this._internalPath.isEqual(p._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(p){this._byteString=p}static fromBase64String(p){try{return new yi(Ht.fromBase64String(p))}catch(i){throw new ot(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(p){return new yi(Ht.fromUint8Array(p))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(p){return this._byteString.isEqual(p._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(p){this._methodName=p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(p,i){if(!isFinite(p)||p<-90||p>90)throw new ot(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+p);if(!isFinite(i)||i<-180||i>180)throw new ot(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=p,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(p){return this._lat===p._lat&&this._long===p._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(p){return Et(this._lat,p._lat)||Et(this._long,p._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=/^__.*__$/;class om{constructor(p,i,m){this.data=p,this.fieldMask=i,this.fieldTransforms=m}toMutation(p,i){return this.fieldMask!==null?new Ye(p,this.data,this.fieldMask,i,this.fieldTransforms):new An(p,this.data,i,this.fieldTransforms)}}class hu{constructor(p,i,m){this.data=p,this.fieldMask=i,this.fieldTransforms=m}toMutation(p,i){return new Ye(p,this.data,this.fieldMask,i,this.fieldTransforms)}}function lu(y){switch(y){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class Ra{constructor(p,i,m,t,e,f){this.settings=p,this.databaseId=i,this.It=m,this.ignoreUndefinedProperties=t,e===void 0&&this.ea(),this.fieldTransforms=e||[],this.fieldMask=f||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(p){return new Ra(Object.assign(Object.assign({},this.settings),p),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(p){var i;const m=(i=this.path)===null||i===void 0?void 0:i.child(p),t=this.sa({path:m,ra:!1});return t.oa(p),t}ua(p){var i;const m=(i=this.path)===null||i===void 0?void 0:i.child(p),t=this.sa({path:m,ra:!1});return t.ea(),t}ca(p){return this.sa({path:void 0,ra:!0})}aa(p){return ts(p,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(p){return this.fieldMask.find(i=>p.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>p.isPrefixOf(i.field))!==void 0}ea(){if(this.path)for(let p=0;p<this.path.length;p++)this.oa(this.path.get(p))}oa(p){if(p.length===0)throw this.aa("Document fields must not be empty");if(lu(this.na)&&am.test(p))throw this.aa('Document fields cannot begin and end with "__"')}}class hm{constructor(p,i,m){this.databaseId=p,this.ignoreUndefinedProperties=i,this.It=m||Cs(p)}fa(p,i,m,t=!1){return new Ra({na:p,methodName:i,la:m,path:Kt.emptyPath(),ra:!1,ha:t},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function La(y){const p=y._freezeSettings(),i=Cs(y._databaseId);return new hm(y._databaseId,!!p.ignoreUndefinedProperties,i)}function uu(y,p,i,m,t,e={}){const f=y.fa(e.merge||e.mergeFields?2:0,p,i,t);Oa("Data must be an object, but it was:",f,m);const a=fu(m,f);let o,s;if(e.merge)o=new fe(f.fieldMask),s=f.fieldTransforms;else if(e.mergeFields){const n=[];for(const r of e.mergeFields){const u=Pr(p,r,i);if(!f.contains(u))throw new ot(q.INVALID_ARGUMENT,`Field '${u}' is specified in your field mask but missing from your input data.`);cu(n,u)||n.push(u)}o=new fe(n),s=f.fieldTransforms.filter(r=>o.covers(r.field))}else o=null,s=f.fieldTransforms;return new om(new ie(a),o,s)}class Os extends Pa{_toFieldTransform(p){if(p.na!==2)throw p.na===1?p.aa(`${this._methodName}() can only appear at the top level of your update data`):p.aa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return p.fieldMask.push(p.path),null}isEqual(p){return p instanceof Os}}function lm(y,p,i,m){const t=y.fa(1,p,i);Oa("Data must be an object, but it was:",t,m);const e=[],f=ie.empty();ii(m,(o,s)=>{const n=Fa(p,o,i);s=Pe(s);const r=t.ua(n);if(s instanceof Os)e.push(n);else{const u=Fs(s,r);u!=null&&(e.push(n),f.set(n,u))}});const a=new fe(e);return new hu(f,a,t.fieldTransforms)}function um(y,p,i,m,t,e){const f=y.fa(1,p,i),a=[Pr(p,m,i)],o=[t];if(e.length%2!=0)throw new ot(q.INVALID_ARGUMENT,`Function ${p}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let u=0;u<e.length;u+=2)a.push(Pr(p,e[u])),o.push(e[u+1]);const s=[],n=ie.empty();for(let u=a.length-1;u>=0;--u)if(!cu(s,a[u])){const h=a[u];let l=o[u];l=Pe(l);const d=f.ua(h);if(l instanceof Os)s.push(h);else{const v=Fs(l,d);v!=null&&(s.push(h),n.set(h,v))}}const r=new fe(s);return new hu(n,r,f.fieldTransforms)}function Fs(y,p){if(du(y=Pe(y)))return Oa("Unsupported field value:",p,y),fu(y,p);if(y instanceof Pa)return function(i,m){if(!lu(m.na))throw m.aa(`${i._methodName}() can only be used with update() and set()`);if(!m.path)throw m.aa(`${i._methodName}() is not currently supported inside arrays`);const t=i._toFieldTransform(m);t&&m.fieldTransforms.push(t)}(y,p),null;if(y===void 0&&p.ignoreUndefinedProperties)return null;if(p.path&&p.fieldMask.push(p.path),y instanceof Array){if(p.settings.ra&&p.na!==4)throw p.aa("Nested arrays are not supported");return function(i,m){const t=[];let e=0;for(const f of i){let a=Fs(f,m.ca(e));a==null&&(a={nullValue:"NULL_VALUE"}),t.push(a),e++}return{arrayValue:{values:t}}}(y,p)}return function(i,m){if((i=Pe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rv(m.It,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const t=Nt.fromDate(i);return{timestampValue:qn(m.It,t)}}if(i instanceof Nt){const t=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:qn(m.It,t)}}if(i instanceof Ma)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yi)return{bytesValue:Bl(m.It,i._byteString)};if(i instanceof kt){const t=m.databaseId,e=i.firestore._databaseId;if(!e.isEqual(t))throw m.aa(`Document reference is for database ${e.projectId}/${e.database} but should be for database ${t.projectId}/${t.database}`);return{referenceValue:la(i.firestore._databaseId||m.databaseId,i._key.path)}}throw m.aa(`Unsupported field value: ${Ta(i)}`)}(y,p)}function fu(y,p){const i={};return ul(y)?p.path&&p.path.length>0&&p.fieldMask.push(p.path):ii(y,(m,t)=>{const e=Fs(t,p.ia(m));e!=null&&(i[m]=e)}),{mapValue:{fields:i}}}function du(y){return!(typeof y!="object"||y===null||y instanceof Array||y instanceof Date||y instanceof Nt||y instanceof Ma||y instanceof yi||y instanceof kt||y instanceof Pa)}function Oa(y,p,i){if(!du(i)||!function(m){return typeof m=="object"&&m!==null&&(Object.getPrototypeOf(m)===Object.prototype||Object.getPrototypeOf(m)===null)}(i)){const m=Ta(i);throw m==="an object"?p.aa(y+" a custom object"):p.aa(y+" "+m)}}function Pr(y,p,i){if((p=Pe(p))instanceof Ls)return p._internalPath;if(typeof p=="string")return Fa(y,p);throw ts("Field path arguments must be of type string or ",y,!1,void 0,i)}const fm=new RegExp("[~\\*/\\[\\]]");function Fa(y,p,i){if(p.search(fm)>=0)throw ts(`Invalid field path (${p}). Paths must not contain '~', '*', '/', '[', or ']'`,y,!1,void 0,i);try{return new Ls(...p.split("."))._internalPath}catch{throw ts(`Invalid field path (${p}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,y,!1,void 0,i)}}function ts(y,p,i,m,t){const e=m&&!m.isEmpty(),f=t!==void 0;let a=`Function ${p}() called with invalid data`;i&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(e||f)&&(o+=" (found",e&&(o+=` in field ${m}`),f&&(o+=` in document ${t}`),o+=")"),new ot(q.INVALID_ARGUMENT,a+y+o)}function cu(y,p){return y.some(i=>i.isEqual(p))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(p,i,m,t,e){this._firestore=p,this._userDataWriter=i,this._key=m,this._document=t,this._converter=e}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const p=new dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(p)}return this._userDataWriter.convertValue(this._document.data.value)}}get(p){if(this._document){const i=this._document.data.field(pu("DocumentSnapshot.get",p));if(i!==null)return this._userDataWriter.convertValue(i)}}}class dm extends vu{data(){return super.data()}}function pu(y,p){return typeof p=="string"?Fa(y,p):p instanceof Ls?p._internalPath:p._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(p,i){this.hasPendingWrites=p,this.fromCache=i}isEqual(p){return this.hasPendingWrites===p.hasPendingWrites&&this.fromCache===p.fromCache}}class mu extends vu{constructor(p,i,m,t,e,f){super(p,i,m,t,f),this._firestore=p,this._firestoreImpl=p,this.metadata=e}exists(){return super.exists()}data(p={}){if(this._document){if(this._converter){const i=new Un(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,p)}return this._userDataWriter.convertValue(this._document.data.value,p.serverTimestamps)}}get(p,i={}){if(this._document){const m=this._document.data.field(pu("DocumentSnapshot.get",p));if(m!==null)return this._userDataWriter.convertValue(m,i.serverTimestamps)}}}class Un extends mu{data(p={}){return super.data(p)}}class cm{constructor(p,i,m,t){this._firestore=p,this._userDataWriter=i,this._snapshot=t,this.metadata=new Bi(t.hasPendingWrites,t.fromCache),this.query=m}get docs(){const p=[];return this.forEach(i=>p.push(i)),p}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(p,i){this._snapshot.docs.forEach(m=>{p.call(i,new Un(this._firestore,this._userDataWriter,m.key,m,new Bi(this._snapshot.mutatedKeys.has(m.key),this._snapshot.fromCache),this.query.converter))})}docChanges(p={}){const i=!!p.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ot(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(m,t){if(m._snapshot.oldDocs.isEmpty()){let e=0;return m._snapshot.docChanges.map(f=>({type:"added",doc:new Un(m._firestore,m._userDataWriter,f.doc.key,f.doc,new Bi(m._snapshot.mutatedKeys.has(f.doc.key),m._snapshot.fromCache),m.query.converter),oldIndex:-1,newIndex:e++}))}{let e=m._snapshot.oldDocs;return m._snapshot.docChanges.filter(f=>t||f.type!==3).map(f=>{const a=new Un(m._firestore,m._userDataWriter,f.doc.key,f.doc,new Bi(m._snapshot.mutatedKeys.has(f.doc.key),m._snapshot.fromCache),m.query.converter);let o=-1,s=-1;return f.type!==0&&(o=e.indexOf(f.doc.key),e=e.delete(f.doc.key)),f.type!==1&&(e=e.add(f.doc),s=e.indexOf(f.doc.key)),{type:vm(f.type),doc:a,oldIndex:o,newIndex:s}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function vm(y){switch(y){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(y){if(y.limitType==="L"&&y.explicitOrderBy.length===0)throw new ot(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{convertValue(p,i="none"){switch(_e(p)){case 0:return null;case 1:return p.booleanValue;case 2:return Dt(p.integerValue||p.doubleValue);case 3:return this.convertTimestamp(p.timestampValue);case 4:return this.convertServerTimestamp(p,i);case 5:return p.stringValue;case 6:return this.convertBytes(pi(p.bytesValue));case 7:return this.convertReference(p.referenceValue);case 8:return this.convertGeoPoint(p.geoPointValue);case 9:return this.convertArray(p.arrayValue,i);case 10:return this.convertObject(p.mapValue,i);default:throw ft()}}convertObject(p,i){const m={};return ii(p.fields,(t,e)=>{m[t]=this.convertValue(e,i)}),m}convertGeoPoint(p){return new Ma(Dt(p.latitude),Dt(p.longitude))}convertArray(p,i){return(p.values||[]).map(m=>this.convertValue(m,i))}convertServerTimestamp(p,i){switch(i){case"previous":const m=dl(p);return m==null?null:this.convertValue(m,i);case"estimate":return this.convertTimestamp(qi(p));default:return null}}convertTimestamp(p){const i=we(p);return new Nt(i.seconds,i.nanos)}convertDocumentKey(p,i){const m=Mt.fromString(p);St(Ul(m));const t=new _i(m.get(1),m.get(3)),e=new at(m.popFirst(5));return t.isEqual(i)||Re(`Document ${e} contains a document reference within a different database (${t.projectId}/${t.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(y,p,i){let m;return m=y?i&&(i.merge||i.mergeFields)?y.toFirestore(p,i):y.toFirestore(p):p,m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(y){y=ve(y,kt);const p=ve(y.firestore,ti);return im(Ca(p),y._key).then(i=>Au(p,y,i))}class xu extends mm{constructor(p){super(),this.firestore=p}convertBytes(p){return new yi(p)}convertReference(p){const i=this.convertDocumentKey(p,this.firestore._databaseId);return new kt(this.firestore,null,i)}}function xm(y,p,i){y=ve(y,kt);const m=ve(y.firestore,ti),t=gu(y.converter,p,i);return Ia(m,[uu(La(m),"setDoc",y._key,t,y.converter!==null,i).toMutation(y._key,de.none())])}function ym(y,p,i,...m){y=ve(y,kt);const t=ve(y.firestore,ti),e=La(t);let f;return f=typeof(p=Pe(p))=="string"||p instanceof Ls?um(e,"updateDoc",y._key,p,i,m):lm(e,"updateDoc",y._key,p),Ia(t,[f.toMutation(y._key,de.exists(!0))])}function yu(y,p){const i=ve(y.firestore,ti),m=Sa(y),t=gu(y.converter,p);return Ia(i,[uu(La(y.firestore),"addDoc",m._key,t,y.converter!==null,{}).toMutation(m._key,de.exists(!1))]).then(()=>m)}function Mr(y,...p){var i,m,t;y=Pe(y);let e={includeMetadataChanges:!1},f=0;typeof p[f]!="object"||Yo(p[f])||(e=p[f],f++);const a={includeMetadataChanges:e.includeMetadataChanges};if(Yo(p[f])){const r=p[f];p[f]=(i=r.next)===null||i===void 0?void 0:i.bind(r),p[f+1]=(m=r.error)===null||m===void 0?void 0:m.bind(r),p[f+2]=(t=r.complete)===null||t===void 0?void 0:t.bind(r)}let o,s,n;if(y instanceof kt)s=ve(y.firestore,ti),n=ys(y._key.path),o={next:r=>{p[f]&&p[f](Au(s,y,r))},error:p[f+1],complete:p[f+2]};else{const r=ve(y,Rs);s=ve(r.firestore,ti),n=r._query;const u=new xu(s);o={next:h=>{p[f]&&p[f](new cm(s,u,r,h))},error:p[f+1],complete:p[f+2]},pm(y._query)}return function(r,u,h,l){const d=new su(l),v=new kl(u,d,h);return r.asyncQueue.enqueueAndForget(async()=>Jl(await Cr(r),v)),()=>{d.Rc(),r.asyncQueue.enqueueAndForget(async()=>jl(await Cr(r),v))}}(Ca(s),n,a,o)}function Ia(y,p){return function(i,m){const t=new Ie;return i.asyncQueue.enqueueAndForget(async()=>zp(await em(i),m,t)),t.promise}(Ca(y),p)}function Au(y,p,i){const m=i.docs.get(p._key),t=new xu(y);return new mu(y,t,p._key,m,new Bi(i.hasPendingWrites,i.fromCache),p.converter)}(function(y,p=!0){(function(i){Mi=i})(ad),Vn(new Hi("firestore",(i,{instanceIdentifier:m,options:t})=>{const e=i.getProvider("app").getImmediate(),f=new ti(new Rc(i.getProvider("auth-internal")),new Ic(i.getProvider("app-check-internal")),function(a,o){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ot(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _i(a.options.projectId,o)}(e,m),e);return t=Object.assign({useFetchStreams:p},t),f._setSettings(t),f},"PUBLIC").setMultipleInstances(!0)),li(oo,"3.4.15",y),li(oo,"3.4.15","esm2017")})();var Am="firebase",Tm="9.9.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(Am,Tm,"app");var Em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var Tu={exports:{}};(function(y,p){(function(m,t){y.exports=t()})(Em,function(){return function(i){var m={};function t(e){if(m[e])return m[e].exports;var f=m[e]={i:e,l:!1,exports:{}};return i[e].call(f.exports,f,f.exports,t),f.l=!0,f.exports}return t.m=i,t.c=m,t.d=function(e,f,a){t.o(e,f)||Object.defineProperty(e,f,{enumerable:!0,get:a})},t.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,f){if(f&1&&(e=t(e)),f&8||f&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),f&2&&typeof e!="string")for(var o in e)t.d(a,o,function(s){return e[s]}.bind(null,o));return a},t.n=function(e){var f=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(f,"a",f),f},t.o=function(e,f){return Object.prototype.hasOwnProperty.call(e,f)},t.p="",t(t.s=1528)}([function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}function e(n,r,u){var h=u?n[r]:Object.getOwnPropertyDescriptor(n,r);return!u&&h.value&&typeof h.value=="object"&&(h=h.value),h&&t(h)?(typeof h.enumerable>"u"&&(h.enumerable=!0),typeof h.configurable>"u"&&(h.configurable=!0),h):!1}function f(n,r){var u=Object.getOwnPropertyDescriptor(n,r);return u?(u.value&&typeof u.value=="object"&&(u=u.value),u.configurable===!1):!1}function a(n,r,u,h){for(var l in r)if(!!r.hasOwnProperty(l)){var d=e(r,l,u);if(d!==!1){var v=h||n;if(f(v.prototype,l)){if(s.ignoreFinals)continue;throw new Error("cannot override final property '"+l+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(n.prototype,l,d)}else n.prototype[l]=r[l]}}function o(n,r){if(!!r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++)a(n,r[u].prototype||r[u])}}function s(n){n||(n={});var r,u;if(n.initialize){if(typeof n.initialize!="function")throw new Error("initialize must be a function");r=n.initialize,delete n.initialize}else if(n.Extends){var h=n.Extends;r=function(){h.apply(this,arguments)}}else r=function(){};n.Extends?(r.prototype=Object.create(n.Extends.prototype),r.prototype.constructor=r,u=n.Extends,delete n.Extends):r.prototype.constructor=r;var l=null;return n.Mixins&&(l=n.Mixins,delete n.Mixins),o(r,l),a(r,n,!0,u),r}s.extend=a,s.mixin=o,s.ignoreFinals=!1,i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=typeof e;return!e||o==="number"||o==="string"?a:e.hasOwnProperty(f)&&e[f]!==void 0?e[f]:a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(124),a=new e({initialize:function(s,n){this.x=0,this.y=0,typeof s=="object"?(this.x=s.x||0,this.y=s.y||0):(n===void 0&&(n=s),this.x=s||0,this.y=n||0)},clone:function(){return new a(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,s){return s===void 0&&(s=o),this.x=o,this.y=s,this},setTo:function(o,s){return this.set(o,s)},setToPolar:function(o,s){return s==null&&(s=1),this.x=Math.cos(o)*s,this.y=Math.sin(o)*s,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,s){return f(this.x,o.x,s)&&f(this.y,o.y,s)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var s=o.x-this.x,n=o.y-this.y;return Math.sqrt(s*s+n*n)},distanceSq:function(o){var s=o.x-this.x,n=o.y-this.y;return s*s+n*n},length:function(){var o=this.x,s=this.y;return Math.sqrt(o*o+s*s)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,s=this.y;return o*o+s*s},normalize:function(){var o=this.x,s=this.y,n=o*o+s*s;return n>0&&(n=1/Math.sqrt(n),this.x=o*n,this.y=s*n),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,s){s===void 0&&(s=0);var n=this.x,r=this.y;return this.x=n+s*(o.x-n),this.y=r+s*(o.y-r),this},transformMat3:function(o){var s=this.x,n=this.y,r=o.val;return this.x=r[0]*s+r[3]*n+r[6],this.y=r[1]*s+r[4]*n+r[7],this},transformMat4:function(o){var s=this.x,n=this.y,r=o.val;return this.x=r[0]*s+r[4]*n+r[12],this.y=r[1]*s+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var s=this.length();return s&&s>o&&this.scale(o/s),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var s=Math.cos(o),n=Math.sin(o);return this.set(s*this.x-n*this.y,n*this.x+s*this.y)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(56),a=new e({initialize:function(s,n){s===void 0&&(s=0),n===void 0&&(n=s),this.type=f.POINT,this.x=s,this.y=n},setTo:function(o,s){return o===void 0&&(o=0),s===void 0&&(s=o),this.x=o,this.y=s,this}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(24),a=t(20),o=new e({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(s){return(s.renderCanvas||s.renderWebGL)&&this.displayList.add(s),s.preUpdate&&this.updateList.add(s),s},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(s,n){o.prototype.hasOwnProperty(s)||(o.prototype[s]=n)},o.remove=function(s){o.prototype.hasOwnProperty(s)&&delete o.prototype[s]},f.register("GameObjectFactory",o,"add"),i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(!e||typeof e=="number")return a;if(e.hasOwnProperty(f))return e[f];if(f.indexOf(".")!==-1){for(var o=f.split("."),s=e,n=a,r=0;r<o.length;r++)if(s.hasOwnProperty(o[r]))n=s[o[r]],s=s[o[r]];else{n=a;break}return n}else return a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={install:function(f){for(var a in t)f[a]=t[a]},register:function(f,a){t[f]=a},destroy:function(){t={}}};i.exports=e},function(i,m,t){var e=Object.prototype.hasOwnProperty,f="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(f=!1));function o(u,h,l){this.fn=u,this.context=h,this.once=l||!1}function s(u,h,l,d,v){if(typeof l!="function")throw new TypeError("The listener must be a function");var c=new o(l,d||u,v),g=f?f+h:h;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],c]:u._events[g].push(c):(u._events[g]=c,u._eventsCount++),u}function n(u,h){--u._eventsCount===0?u._events=new a:delete u._events[h]}function r(){this._events=new a,this._eventsCount=0}r.prototype.eventNames=function(){var h=[],l,d;if(this._eventsCount===0)return h;for(d in l=this._events)e.call(l,d)&&h.push(f?d.slice(1):d);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},r.prototype.listeners=function(h){var l=f?f+h:h,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var v=0,c=d.length,g=new Array(c);v<c;v++)g[v]=d[v].fn;return g},r.prototype.listenerCount=function(h){var l=f?f+h:h,d=this._events[l];return d?d.fn?1:d.length:0},r.prototype.emit=function(h,l,d,v,c,g){var x=f?f+h:h;if(!this._events[x])return!1;var A=this._events[x],T=arguments.length,E,S;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),T){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,l),!0;case 3:return A.fn.call(A.context,l,d),!0;case 4:return A.fn.call(A.context,l,d,v),!0;case 5:return A.fn.call(A.context,l,d,v,c),!0;case 6:return A.fn.call(A.context,l,d,v,c,g),!0}for(S=1,E=new Array(T-1);S<T;S++)E[S-1]=arguments[S];A.fn.apply(A.context,E)}else{var C=A.length,P;for(S=0;S<C;S++)switch(A[S].once&&this.removeListener(h,A[S].fn,void 0,!0),T){case 1:A[S].fn.call(A[S].context);break;case 2:A[S].fn.call(A[S].context,l);break;case 3:A[S].fn.call(A[S].context,l,d);break;case 4:A[S].fn.call(A[S].context,l,d,v);break;default:if(!E)for(P=1,E=new Array(T-1);P<T;P++)E[P-1]=arguments[P];A[S].fn.apply(A[S].context,E)}}return!0},r.prototype.on=function(h,l,d){return s(this,h,l,d,!1)},r.prototype.once=function(h,l,d){return s(this,h,l,d,!0)},r.prototype.removeListener=function(h,l,d,v){var c=f?f+h:h;if(!this._events[c])return this;if(!l)return n(this,c),this;var g=this._events[c];if(g.fn)g.fn===l&&(!v||g.once)&&(!d||g.context===d)&&n(this,c);else{for(var x=0,A=[],T=g.length;x<T;x++)(g[x].fn!==l||v&&!g[x].once||d&&g[x].context!==d)&&A.push(g[x]);A.length?this._events[c]=A.length===1?A[0]:A:n(this,c)}return this},r.prototype.removeAllListeners=function(h){var l;return h?(l=f?f+h:h,this._events[l]&&n(this,l)):(this._events=new a,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=f,r.EventEmitter=r,i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(57),a=t(171),o=t(306),s=t(56),n=t(47),r=t(174),u=new e({initialize:function(l,d,v,c){l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=0),this.type=s.RECTANGLE,this.x=l,this.y=d,this.width=v,this.height=c},contains:function(h,l){return f(this,h,l)},getPoint:function(h,l){return a(this,h,l)},getPoints:function(h,l,d){return o(this,h,l,d)},getRandomPoint:function(h){return r(this,h)},setTo:function(h,l,d,v){return this.x=h,this.y=l,this.width=d,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(h,l){return l===void 0&&(l=h),this.x=h,this.y=l,this},setSize:function(h,l){return l===void 0&&(l=h),this.width=h,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(h){return h===void 0&&(h=new n),h.setTo(this.x,this.y,this.right,this.y),h},getLineB:function(h){return h===void 0&&(h=new n),h.setTo(this.right,this.y,this.right,this.bottom),h},getLineC:function(h){return h===void 0&&(h=new n),h.setTo(this.right,this.bottom,this.x,this.bottom),h},getLineD:function(h){return h===void 0&&(h=new n),h.setTo(this.x,this.bottom,this.x,this.y),h},left:{get:function(){return this.x},set:function(h){h>=this.right?this.width=0:this.width=this.right-h,this.x=h}},right:{get:function(){return this.x+this.width},set:function(h){h<=this.x?this.width=0:this.width=h-this.x}},top:{get:function(){return this.y},set:function(h){h>=this.bottom?this.height=0:this.height=this.bottom-h,this.y=h}},bottom:{get:function(){return this.y+this.height},set:function(h){h<=this.y?this.height=0:this.height=h-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(e){for(var f="",a=0;a<e;++a)a>0&&(f+=`
else `),a<e-1&&(f+="if(test == "+a+".0){}");return f}i.exports={getTintFromFloats:function(e,f,a,o){var s=(e*255|0)&255,n=(f*255|0)&255,r=(a*255|0)&255,u=(o*255|0)&255;return(u<<24|s<<16|n<<8|r)>>>0},getTintAppendFloatAlpha:function(e,f){var a=(f*255|0)&255;return(a<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,f){var a=(e>>16|0)&255,o=(e>>8|0)&255,s=(e|0)&255,n=(f*255|0)&255;return(n<<24|s<<16|o<<8|a)>>>0},getFloatsFromUintRGB:function(e){var f=(e>>16|0)&255,a=(e>>8|0)&255,o=(e|0)&255;return[f/255,a/255,o/255]},checkShaderMax:function(e,f){(!f||f===-1)&&(f=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var a=e.createShader(e.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var s=o.replace(/%forloop%/gi,t(f));if(e.shaderSource(a,s),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))f=f/2|0;else break}return f},parseFragmentShaderMaxTextures:function(e,f){if(!e)return"";for(var a="",o=0;o<f;o++)o>0&&(a+=`
	else `),o<f-1&&(a+="if (outTexId < "+o+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",a+=`
	}`;return e=e.replace(/%count%/gi,f.toString()),e.replace(/%forloop%/gi,a)}}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(193),f=t(6),a=function(o,s,n){var r=f(o,s,null);if(r===null)return n;if(Array.isArray(r))return e.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return e.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return e.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(s);return r};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(176),a=t(101),o=t(9),s=t(75),n=t(20),r=new e({Extends:o,initialize:function(h,l){o.call(this),this.scene=h,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this),h.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(u,h){return this.data||(this.data=new a(this)),this.data.set(u,h),this},incData:function(u,h){return this.data||(this.data=new a(this)),this.data.inc(u,h),this},toggleData:function(u){return this.data||(this.data=new a(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new a(this)),this.data.get(u)},setInteractive:function(u,h,l){return this.scene.sys.input.enable(this,u,h,l),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return f(this)},willRender:function(u){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,h=this.parentContainer,l=[];h&&(l.unshift(h.getIndex(u)),u=h,h.parentContainer);)h=h.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(u)):l.unshift(this.scene.sys.displayList.getIndex(u)),l},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(s.ADDED_TO_SCENE,this,this.scene),u.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(s.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(u){!this.scene||this.ignoreDestroy||(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(s.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});r.RENDER_MASK=15,i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(24),a=t(20),o=new e({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(s,n){o.prototype.hasOwnProperty(s)||(o.prototype[s]=n)},o.remove=function(s){o.prototype.hasOwnProperty(s)&&delete o.prototype[s]},f.register("GameObjectCreator",o,"make"),i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(7),f=function(){var a,o,s,n,r,u,h=arguments[0]||{},l=1,d=arguments.length,v=!1;for(typeof h=="boolean"&&(v=h,h=arguments[1]||{},l=2),d===l&&(h=this,--l);l<d;l++)if((a=arguments[l])!=null)for(o in a)s=h[o],n=a[o],h!==n&&(v&&n&&(e(n)||(r=Array.isArray(n)))?(r?(r=!1,u=s&&Array.isArray(s)?s:[]):u=s&&e(s)?s:{},h[o]=f(v,u,n)):n!==void 0&&(h[o]=n));return h};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return Math.max(f,Math.min(a,e))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=new e,a=new e,o=new e,s={camera:f,sprite:a,calc:o},n=function(r,u,h){var l=f,d=a,v=o;return d.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),l.copyFrom(u.matrix),h?(l.multiplyWithOffset(h,-u.scrollX*r.scrollFactorX,-u.scrollY*r.scrollFactorY),d.e=r.x,d.f=r.y):(d.e-=u.scrollX*r.scrollFactorX,d.f-=u.scrollY*r.scrollFactorY),l.multiply(d,v),s};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(95),o=t(2),s=t(155),n=t(240),r=t(517),u=t(156),h=new e({initialize:function(d,v){this.loader=d,this.cache=o(v,"cache",!1),this.type=o(v,"type",!1),this.key=o(v,"key",!1);var c=this.key;if(d.prefix&&d.prefix!==""&&(this.key=d.prefix+c),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var g=o(v,"url");g===void 0?g=d.path+c+"."+o(v,"extension",""):typeof g=="string"&&!g.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(g=d.path+g),this.url=g,this.src="",this.xhrSettings=u(o(v,"responseType",void 0)),o(v,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,o(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?f.FILE_POPULATED:f.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(v,"config",{}),this.multiFile,this.linkFile},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===f.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=f.FILE_LOADING,this.src=s(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=r(this,this.loader.xhr))},onLoad:function(l,d){var v=l.responseURL&&(l.responseURL.indexOf("file://")===0||l.responseURL.indexOf("capacitor://")===0),c=v&&d.target.status===0,g=!(d.target&&d.target.status!==200)||c;l.readyState===4&&l.status>=400&&l.status<=599&&(g=!1),this.state=f.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,g)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=f.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=f.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=f.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(l){l===void 0&&(l=this.data);var d=this.key,v=this.type;this.loader.emit(a.FILE_COMPLETE,d,v,l),this.loader.emit(a.FILE_KEY_COMPLETE+v+"-"+d,d,v,l),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});h.createObjectURL=function(l,d,v){if(typeof URL=="function")l.src=URL.createObjectURL(d);else{var c=new FileReader;c.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(d.type||v)+";base64,"+c.result.split(",")[1]},c.onerror=l.onerror,c.readAsDataURL(d)}},h.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},i.exports=h},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={},f={};f.register=function(a,o,s,n){n===void 0&&(n=!1),t[a]={plugin:o,mapping:s,custom:n}},f.registerCustom=function(a,o,s,n){e[a]={plugin:o,mapping:s,data:n}},f.hasCore=function(a){return t.hasOwnProperty(a)},f.hasCustom=function(a){return e.hasOwnProperty(a)},f.getCore=function(a){return t[a]},f.getCustom=function(a){return e[a]},f.getCustomClass=function(a){return e.hasOwnProperty(a)?e[a].plugin:null},f.remove=function(a){t.hasOwnProperty(a)&&delete t[a]},f.removeCustom=function(a){e.hasOwnProperty(a)&&delete e[a]},f.destroyCorePlugins=function(){for(var a in t)t.hasOwnProperty(a)&&delete t[a]},f.destroyCustomPlugins=function(){for(var a in e)e.hasOwnProperty(a)&&delete e[a]},i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(14),a=t(3),o=new e({initialize:function(n,r,u,h,l,d){n===void 0&&(n=1),r===void 0&&(r=0),u===void 0&&(u=0),h===void 0&&(h=1),l===void 0&&(l=0),d===void 0&&(d=0),this.matrix=new Float32Array([n,r,u,h,l,d,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(s){this.matrix[0]=s}},b:{get:function(){return this.matrix[1]},set:function(s){this.matrix[1]=s}},c:{get:function(){return this.matrix[2]},set:function(s){this.matrix[2]=s}},d:{get:function(){return this.matrix[3]},set:function(s){this.matrix[3]=s}},e:{get:function(){return this.matrix[4]},set:function(s){this.matrix[4]=s}},f:{get:function(){return this.matrix[5]},set:function(s){this.matrix[5]=s}},tx:{get:function(){return this.matrix[4]},set:function(s){this.matrix[4]=s}},ty:{get:function(){return this.matrix[5]},set:function(s){this.matrix[5]=s}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var s=this.matrix,n=s[0],r=s[1],u=s[2],h=s[3];return n||r?r>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):u||h?f.TAU-(h>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var s=this.matrix;return s[0]=1,s[1]=0,s[2]=0,s[3]=1,s[4]=0,s[5]=0,this},translate:function(s,n){var r=this.matrix;return r[4]=r[0]*s+r[2]*n+r[4],r[5]=r[1]*s+r[3]*n+r[5],this},scale:function(s,n){var r=this.matrix;return r[0]*=s,r[1]*=s,r[2]*=n,r[3]*=n,this},rotate:function(s){var n=Math.sin(s),r=Math.cos(s),u=this.matrix,h=u[0],l=u[1],d=u[2],v=u[3];return u[0]=h*r+d*n,u[1]=l*r+v*n,u[2]=h*-n+d*r,u[3]=l*-n+v*r,this},multiply:function(s,n){var r=this.matrix,u=s.matrix,h=r[0],l=r[1],d=r[2],v=r[3],c=r[4],g=r[5],x=u[0],A=u[1],T=u[2],E=u[3],S=u[4],C=u[5],P=n===void 0?this:n;return P.a=x*h+A*d,P.b=x*l+A*v,P.c=T*h+E*d,P.d=T*l+E*v,P.e=S*h+C*d+c,P.f=S*l+C*v+g,P},multiplyWithOffset:function(s,n,r){var u=this.matrix,h=s.matrix,l=u[0],d=u[1],v=u[2],c=u[3],g=u[4],x=u[5],A=n*l+r*v+g,T=n*d+r*c+x,E=h[0],S=h[1],C=h[2],P=h[3],R=h[4],M=h[5];return u[0]=E*l+S*v,u[1]=E*d+S*c,u[2]=C*l+P*v,u[3]=C*d+P*c,u[4]=R*l+M*v+A,u[5]=R*d+M*c+T,this},transform:function(s,n,r,u,h,l){var d=this.matrix,v=d[0],c=d[1],g=d[2],x=d[3],A=d[4],T=d[5];return d[0]=s*v+n*g,d[1]=s*c+n*x,d[2]=r*v+u*g,d[3]=r*c+u*x,d[4]=h*v+l*g+A,d[5]=h*c+l*x+T,this},transformPoint:function(s,n,r){r===void 0&&(r={x:0,y:0});var u=this.matrix,h=u[0],l=u[1],d=u[2],v=u[3],c=u[4],g=u[5];return r.x=s*h+n*d+c,r.y=s*l+n*v+g,r},invert:function(){var s=this.matrix,n=s[0],r=s[1],u=s[2],h=s[3],l=s[4],d=s[5],v=n*h-r*u;return s[0]=h/v,s[1]=-r/v,s[2]=-u/v,s[3]=n/v,s[4]=(u*d-h*l)/v,s[5]=-(n*d-r*l)/v,this},copyFrom:function(s){var n=this.matrix;return n[0]=s.a,n[1]=s.b,n[2]=s.c,n[3]=s.d,n[4]=s.e,n[5]=s.f,this},copyFromArray:function(s){var n=this.matrix;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],this},copyToContext:function(s){var n=this.matrix;return s.transform(n[0],n[1],n[2],n[3],n[4],n[5]),s},setToContext:function(s){var n=this.matrix;return s.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]),s},copyToArray:function(s){var n=this.matrix;return s===void 0?s=[n[0],n[1],n[2],n[3],n[4],n[5]]:(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5]),s},setTransform:function(s,n,r,u,h,l){var d=this.matrix;return d[0]=s,d[1]=n,d[2]=r,d[3]=u,d[4]=h,d[5]=l,this},decomposeMatrix:function(){var s=this.decomposedMatrix,n=this.matrix,r=n[0],u=n[1],h=n[2],l=n[3],d=r*l-u*h;if(s.translateX=n[4],s.translateY=n[5],r||u){var v=Math.sqrt(r*r+u*u);s.rotation=u>0?Math.acos(r/v):-Math.acos(r/v),s.scaleX=v,s.scaleY=d/v}else if(h||l){var c=Math.sqrt(h*h+l*l);s.rotation=Math.PI*.5-(l>0?Math.acos(-h/c):-Math.acos(h/c)),s.scaleX=d/c,s.scaleY=c}else s.rotation=0,s.scaleX=0,s.scaleY=0;return s},applyITRS:function(s,n,r,u,h){var l=this.matrix,d=Math.sin(r),v=Math.cos(r);return l[4]=s,l[5]=n,l[0]=v*u,l[1]=d*u,l[2]=-d*h,l[3]=v*h,this},applyInverse:function(s,n,r){r===void 0&&(r=new a);var u=this.matrix,h=u[0],l=u[1],d=u[2],v=u[3],c=u[4],g=u[5],x=1/(h*v+d*-l);return r.x=v*x*s+-d*x*n+(g*d-c*v)*x,r.y=h*x*n+-l*x*s+(-g*h+c*l)*x,r},getX:function(s,n){return s*this.a+n*this.c+this.e},getY:function(s,n){return s*this.b+n*this.d+this.f},getXRound:function(s,n,r){var u=this.getX(s,n);return r&&(u=Math.round(u)),u},getYRound:function(s,n,r){var u=this.getY(s,n);return r&&(u=Math.round(u)),u},getCSSMatrix:function(){var s=this.matrix;return"matrix("+s[0]+","+s[1]+","+s[2]+","+s[3]+","+s[4]+","+s[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(a,o,s,n,r,u){a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=u.width),n===void 0&&(n=u.height),r||(r={});var h=e(r,"isNotEmpty",!1),l=e(r,"isColliding",!1),d=e(r,"hasInterestingFace",!1);a<0&&(s+=a,a=0),o<0&&(n+=o,o=0),a+s>u.width&&(s=Math.max(u.width-a,0)),o+n>u.height&&(n=Math.max(u.height-o,0));for(var v=[],c=o;c<o+n;c++)for(var g=a;g<a+s;g++){var x=u.data[c][g];if(x!==null){if(h&&x.index===-1||l&&!x.collides||d&&!x.hasInterestingFace)continue;v.push(x)}}return v};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n){o===void 0&&(o=0),s===void 0&&(s=0),n===void 0&&(n=1);var r,u=0,h=e.length;if(n===1)for(r=s;r<h;r++)e[r][f]=a+u*o,u++;else for(r=s;r>=0;r--)e[r][f]=a+u*o,u++;return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(13),a=function(o,s,n){s.x=f(n,"x",0),s.y=f(n,"y",0),s.depth=f(n,"depth",0),s.flipX=f(n,"flipX",!1),s.flipY=f(n,"flipY",!1);var r=f(n,"scale",null);typeof r=="number"?s.setScale(r):r!==null&&(s.scaleX=f(r,"x",1),s.scaleY=f(r,"y",1));var u=f(n,"scrollFactor",null);typeof u=="number"?s.setScrollFactor(u):u!==null&&(s.scrollFactorX=f(u,"x",1),s.scrollFactorY=f(u,"y",1)),s.rotation=f(n,"rotation",0);var h=f(n,"angle",null);h!==null&&(s.angle=h),s.alpha=f(n,"alpha",1);var l=f(n,"origin",null);if(typeof l=="number")s.setOrigin(l);else if(l!==null){var d=f(l,"x",.5),v=f(l,"y",.5);s.setOrigin(d,v)}s.blendMode=f(n,"blendMode",e.NORMAL),s.visible=f(n,"visible",!0);var c=f(n,"add",!0);return c&&o.sys.displayList.add(s),s.preUpdate&&o.sys.updateList.add(s),s};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(a,o,s,n,r){var u=n.alpha*s.alpha;if(u<=0)return!1;var h=e(s,n,r).calc;return o.globalCompositeOperation=a.blendModes[s.blendMode],o.globalAlpha=u,o.save(),h.setToContext(o),o.imageSmoothingEnabled=!(!a.antialias||s.frame&&s.frame.source.scaleMode),!0};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),f=t(192),a=[],o=!1,s=function(){var n=function(x,A,T,E,S){A===void 0&&(A=1),T===void 0&&(T=1),E===void 0&&(E=e.CANVAS),S===void 0&&(S=!1);var C,P=h(E);return P===null?(P={parent:x,canvas:document.createElement("canvas"),type:E},E===e.CANVAS&&a.push(P),C=P.canvas):(P.parent=x,C=P.canvas),S&&(P.parent=C),C.width=A,C.height=T,o&&E===e.CANVAS&&f.disable(C.getContext("2d")),C},r=function(x,A,T){return n(x,A,T,e.CANVAS)},u=function(x,A,T){return n(x,A,T,e.WEBGL)},h=function(x){if(x===void 0&&(x=e.CANVAS),x===e.WEBGL)return null;for(var A=0;A<a.length;A++){var T=a[A];if(!T.parent&&T.type===x)return T}return null},l=function(x){var A=x instanceof HTMLCanvasElement;a.forEach(function(T){(A&&T.canvas===x||!A&&T.parent===x)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},d=function(){var x=0;return a.forEach(function(A){A.parent&&x++}),x},v=function(){return a.length-d()},c=function(){o=!0},g=function(){o=!1};return{create2D:r,create:n,createWebGL:u,disableSmoothing:c,enableSmoothing:g,first:h,free:v,pool:a,remove:l,total:d}};i.exports=s()},function(i,m){var t={};i.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(f,a){var o,s;typeof a=="boolean"?(o=2,s=a):(o=1,s=!0);for(var n=o;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)s&&r[u]&&r[u].constructor===Object&&(!f[u]||f[u].constructor===Object)?(f[u]=f[u]||{},t.extend(f[u],s,r[u])):f[u]=r[u]}return f},t.clone=function(f,a){return t.extend({},a,f)},t.keys=function(f){if(Object.keys)return Object.keys(f);var a=[];for(var o in f)a.push(o);return a},t.values=function(f){var a=[];if(Object.keys){for(var o=Object.keys(f),s=0;s<o.length;s++)a.push(f[o[s]]);return a}for(var n in f)a.push(f[n]);return a},t.get=function(f,a,o,s){a=a.split(".").slice(o,s);for(var n=0;n<a.length;n+=1)f=f[a[n]];return f},t.set=function(f,a,o,s,n){var r=a.split(".").slice(s,n);return t.get(f,a,0,-1)[r[r.length-1]]=o,o},t.shuffle=function(f){for(var a=f.length-1;a>0;a--){var o=Math.floor(t.random()*(a+1)),s=f[a];f[a]=f[o],f[o]=s}return f},t.choose=function(f){return f[Math.floor(t.random()*f.length)]},t.isElement=function(f){return typeof HTMLElement<"u"?f instanceof HTMLElement:!!(f&&f.nodeType&&f.nodeName)},t.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},t.isFunction=function(f){return typeof f=="function"},t.isPlainObject=function(f){return typeof f=="object"&&f.constructor===Object},t.isString=function(f){return Object.prototype.toString.call(f)==="[object String]"},t.clamp=function(f,a,o){return f<a?a:f>o?o:f},t.sign=function(f){return f<0?-1:1},t.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(f,a){return f=typeof f<"u"?f:0,a=typeof a<"u"?a:1,f+e()*(a-f)};var e=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(f){return f=f.replace("#",""),f.length==3&&(f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)),parseInt(f,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(f,a){if(f.indexOf)return f.indexOf(a);for(var o=0;o<f.length;o++)if(f[o]===a)return o;return-1},t.map=function(f,a){if(f.map)return f.map(a);for(var o=[],s=0;s<f.length;s+=1)o.push(a(f[s]));return o},t.topologicalSort=function(f){var a=[],o=[],s=[];for(var n in f)!o[n]&&!s[n]&&t._topologicalSort(n,o,s,f,a);return a},t._topologicalSort=function(f,a,o,s,n){var r=s[f]||[];o[f]=!0;for(var u=0;u<r.length;u+=1){var h=r[u];o[h]||a[h]||t._topologicalSort(h,a,o,s,n)}o[f]=!1,a[f]=!0,n.push(f)},t.chain=function(){for(var f=[],a=0;a<arguments.length;a+=1){var o=arguments[a];o._chained?f.push.apply(f,o._chained):f.push(o)}var s=function(){for(var n,r=new Array(arguments.length),u=0,h=arguments.length;u<h;u++)r[u]=arguments[u];for(u=0;u<f.length;u+=1){var l=f[u].apply(n,r);typeof l<"u"&&(n=l)}return n};return s._chained=f,s},t.chainPathBefore=function(f,a,o){return t.set(f,a,t.chain(o,t.get(f,a)))},t.chainPathAfter=function(f,a,o){return t.set(f,a,t.chain(t.get(f,a),o))}}()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(47),s=new e({Extends:a,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Transform,f.Visible],initialize:function(r,u,h){u===void 0&&(u="Shape"),a.call(this,r,u),this.geom=h,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(n,r){return r===void 0&&(r=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=r,this.isFilled=!0),this},setStrokeStyle:function(n,r,u){return u===void 0&&(u=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=r,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,r){return this.width=n,this.height=r,this},setDisplaySize:function(n,r){return this.displayWidth=n,this.displayHeight=r,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(a){return a*e.DEG_TO_RAD};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(103),a=t(328),o=t(188),s=t(329),n=new e({initialize:function(u,h,l,d){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(u,h,l,d)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(r,u,h,l,d){return l===void 0&&(l=255),d===void 0&&(d=!0),this._locked=!0,this.red=r,this.green=u,this.blue=h,this.alpha=l,this._locked=!1,this.update(d)},setGLTo:function(r,u,h,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=r,this.greenGL=u,this.blueGL=h,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(r){return this._locked=!0,this.red=r.r,this.green=r.g,this.blue=r.b,r.hasOwnProperty("a")&&(this.alpha=r.a),this._locked=!1,this.update(!0)},setFromHSV:function(r,u,h){return o(r,u,h,this)},update:function(r){if(r===void 0&&(r=!1),this._locked)return this;var u=this.r,h=this.g,l=this.b,d=this.a;return this._color=f(u,h,l),this._color32=a(u,h,l,d),this._rgba="rgba("+u+","+h+","+l+","+d/255+")",r&&s(u,h,l,this),this},updateHSV:function(){var r=this.r,u=this.g,h=this.b;return s(r,u,h,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(r){return this.setTo(r,r,r)},random:function(r,u){r===void 0&&(r=0),u===void 0&&(u=255);var h=Math.floor(r+Math.random()*(u-r)),l=Math.floor(r+Math.random()*(u-r)),d=Math.floor(r+Math.random()*(u-r));return this.setTo(h,l,d)},randomGray:function(r,u){r===void 0&&(r=0),u===void 0&&(u=255);var h=Math.floor(r+Math.random()*(u-r));return this.setTo(h,h,h)},saturate:function(r){return this.s+=r/100,this},desaturate:function(r){return this.s-=r/100,this},lighten:function(r){return this.v+=r/100,this},darken:function(r){return this.v-=r/100,this},brighten:function(r){var u=this.r,h=this.g,l=this.b;return u=Math.max(0,Math.min(255,u-Math.round(255*-(r/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(r/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(r/100)))),this.setTo(u,h,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(r){this.gl[0]=Math.min(Math.abs(r),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(r){this.gl[1]=Math.min(Math.abs(r),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(r){this.gl[2]=Math.min(Math.abs(r),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(r){this.gl[3]=Math.min(Math.abs(r),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(r){r=Math.floor(Math.abs(r)),this.r=Math.min(r,255),this.gl[0]=r/255,this.update(!0)}},green:{get:function(){return this.g},set:function(r){r=Math.floor(Math.abs(r)),this.g=Math.min(r,255),this.gl[1]=r/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(r){r=Math.floor(Math.abs(r)),this.b=Math.min(r,255),this.gl[2]=r/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(r){r=Math.floor(Math.abs(r)),this.a=Math.min(r,255),this.gl[3]=r/255,this.update()}},h:{get:function(){return this._h},set:function(r){this._h=r,o(r,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(r){this._s=r,o(this._h,r,this._v,this)}},v:{get:function(){return this._v},set:function(r){this._v=r,o(this._h,this._s,r,this)}}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=s||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clone:function(){return new f(this.x,this.y,this.z)},addVectors:function(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this},crossVectors:function(a,o){var s=a.x,n=a.y,r=a.z,u=o.x,h=o.y,l=o.z;return this.x=n*l-r*h,this.y=r*u-s*l,this.z=s*h-n*u,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this},set:function(a,o,s){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=o||0,this.z=s||0),this},setFromMatrixPosition:function(a){return this.fromArray(a.val,12)},setFromMatrixColumn:function(a,o){return this.fromArray(a.val,o*4)},fromArray:function(a,o){return o===void 0&&(o=0),this.x=a[o],this.y=a[o+1],this.z=a[o+2],this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addScale:function(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(a){var o=a.x-this.x,s=a.y-this.y,n=a.z-this.z||0;return Math.sqrt(o*o+s*s+n*n)},distanceSq:function(a){var o=a.x-this.x,s=a.y-this.y,n=a.z-this.z||0;return o*o+s*s+n*n},length:function(){var a=this.x,o=this.y,s=this.z;return Math.sqrt(a*a+o*o+s*s)},lengthSq:function(){var a=this.x,o=this.y,s=this.z;return a*a+o*o+s*s},normalize:function(){var a=this.x,o=this.y,s=this.z,n=a*a+o*o+s*s;return n>0&&(n=1/Math.sqrt(n),this.x=a*n,this.y=o*n,this.z=s*n),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var o=this.x,s=this.y,n=this.z,r=a.x,u=a.y,h=a.z;return this.x=s*h-n*u,this.y=n*r-o*h,this.z=o*u-s*r,this},lerp:function(a,o){o===void 0&&(o=0);var s=this.x,n=this.y,r=this.z;return this.x=s+o*(a.x-s),this.y=n+o*(a.y-n),this.z=r+o*(a.z-r),this},applyMatrix3:function(a){var o=this.x,s=this.y,n=this.z,r=a.val;return this.x=r[0]*o+r[3]*s+r[6]*n,this.y=r[1]*o+r[4]*s+r[7]*n,this.z=r[2]*o+r[5]*s+r[8]*n,this},applyMatrix4:function(a){var o=this.x,s=this.y,n=this.z,r=a.val,u=1/(r[3]*o+r[7]*s+r[11]*n+r[15]);return this.x=(r[0]*o+r[4]*s+r[8]*n+r[12])*u,this.y=(r[1]*o+r[5]*s+r[9]*n+r[13])*u,this.z=(r[2]*o+r[6]*s+r[10]*n+r[14])*u,this},transformMat3:function(a){var o=this.x,s=this.y,n=this.z,r=a.val;return this.x=o*r[0]+s*r[3]+n*r[6],this.y=o*r[1]+s*r[4]+n*r[7],this.z=o*r[2]+s*r[5]+n*r[8],this},transformMat4:function(a){var o=this.x,s=this.y,n=this.z,r=a.val;return this.x=r[0]*o+r[4]*s+r[8]*n+r[12],this.y=r[1]*o+r[5]*s+r[9]*n+r[13],this.z=r[2]*o+r[6]*s+r[10]*n+r[14],this},transformCoordinates:function(a){var o=this.x,s=this.y,n=this.z,r=a.val,u=o*r[0]+s*r[4]+n*r[8]+r[12],h=o*r[1]+s*r[5]+n*r[9]+r[13],l=o*r[2]+s*r[6]+n*r[10]+r[14],d=o*r[3]+s*r[7]+n*r[11]+r[15];return this.x=u/d,this.y=h/d,this.z=l/d,this},transformQuat:function(a){var o=this.x,s=this.y,n=this.z,r=a.x,u=a.y,h=a.z,l=a.w,d=l*o+u*n-h*s,v=l*s+h*o-r*n,c=l*n+r*s-u*o,g=-r*o-u*s-h*n;return this.x=d*l+g*-r+v*-h-c*-u,this.y=v*l+g*-u+c*-r-d*-h,this.z=c*l+g*-h+d*-u-v*-r,this},project:function(a){var o=this.x,s=this.y,n=this.z,r=a.val,u=r[0],h=r[1],l=r[2],d=r[3],v=r[4],c=r[5],g=r[6],x=r[7],A=r[8],T=r[9],E=r[10],S=r[11],C=r[12],P=r[13],R=r[14],M=r[15],L=1/(o*d+s*x+n*S+M);return this.x=(o*u+s*v+n*A+C)*L,this.y=(o*h+s*c+n*T+P)*L,this.z=(o*l+s*g+n*E+R)*L,this},projectViewMatrix:function(a,o){return this.applyMatrix4(a).applyMatrix4(o)},unprojectViewMatrix:function(a,o){return this.applyMatrix4(a).applyMatrix4(o)},unproject:function(a,o){var s=a.x,n=a.y,r=a.z,u=a.w,h=this.x-s,l=u-this.y-1-n,d=this.z;return this.x=2*h/r-1,this.y=2*l/u-1,this.z=2*d-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});f.ZERO=new f,f.RIGHT=new f(1,0,0),f.LEFT=new f(-1,0,0),f.UP=new f(0,-1,0),f.DOWN=new f(0,1,0),f.FORWARD=new f(0,0,1),f.BACK=new f(0,0,-1),f.ONE=new f(1,1,1),i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(i,m,t){var e={};i.exports=e;var f=t(64),a=t(83),o=t(165),s=t(32),n=t(84),r=t(271);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(h){var l={id:s.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!h.hasOwnProperty("position")&&h.hasOwnProperty("vertices")?h.position=f.centre(h.vertices):h.hasOwnProperty("vertices")||(l.vertices=f.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var d=s.extend(l,h);return u(d,h),d.setOnCollideWith=function(v,c){return c?this.onCollideWith[v.id]=c:delete this.onCollideWith[v.id],this},d},e.nextGroup=function(h){return h?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var u=function(h,l){l=l||{},e.set(h,{bounds:h.bounds||n.create(h.vertices),positionPrev:h.positionPrev||a.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h});var d=h.bounds;if(f.rotate(h.vertices,h.angle,h.position),r.rotate(h.axes,h.angle),n.update(d,h.vertices,h.velocity),e.set(h,{axes:l.axes||h.axes,area:l.area||h.area,mass:l.mass||h.mass,inertia:l.inertia||h.inertia}),h.parts.length===1){var v=h.centerOfMass,c=h.centerOffset,g=d.max.x-d.min.x,x=d.max.y-d.min.y;v.x=-(d.min.x-h.position.x)/g,v.y=-(d.min.y-h.position.y)/x,c.x=g*v.x,c.y=x*v.y}};e.set=function(h,l,d){var v;typeof l=="string"&&(v=l,l={},l[v]=d);for(v in l)if(!!Object.prototype.hasOwnProperty.call(l,v))switch(d=l[v],v){case"isStatic":e.setStatic(h,d);break;case"isSleeping":o.set(h,d);break;case"mass":e.setMass(h,d);break;case"density":e.setDensity(h,d);break;case"inertia":e.setInertia(h,d);break;case"vertices":e.setVertices(h,d);break;case"position":e.setPosition(h,d);break;case"angle":e.setAngle(h,d);break;case"velocity":e.setVelocity(h,d);break;case"angularVelocity":e.setAngularVelocity(h,d);break;case"parts":e.setParts(h,d);break;case"centre":e.setCentre(h,d);break;default:h[v]=d}},e.setStatic=function(h,l){for(var d=0;d<h.parts.length;d++){var v=h.parts[d];v.isStatic=l,l?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(h,l){var d=h.inertia/(h.mass/6);h.inertia=d*(l/6),h.inverseInertia=1/h.inertia,h.mass=l,h.inverseMass=1/h.mass,h.density=h.mass/h.area},e.setDensity=function(h,l){e.setMass(h,l*h.area),h.density=l},e.setInertia=function(h,l){h.inertia=l,h.inverseInertia=1/h.inertia},e.setVertices=function(h,l){l[0].body===h?h.vertices=l:h.vertices=f.create(l,h),h.axes=r.fromVertices(h.vertices),h.area=f.area(h.vertices),e.setMass(h,h.density*h.area);var d=f.centre(h.vertices);f.translate(h.vertices,d,-1),e.setInertia(h,e._inertiaScale*f.inertia(h.vertices,h.mass)),f.translate(h.vertices,h.position),n.update(h.bounds,h.vertices,h.velocity)},e.setParts=function(h,l,d){var v;for(l=l.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,v=0;v<l.length;v++){var c=l[v];c!==h&&(c.parent=h,h.parts.push(c))}if(h.parts.length!==1){if(d=typeof d<"u"?d:!0,d){var g=[];for(v=0;v<l.length;v++)g=g.concat(l[v].vertices);f.clockwiseSort(g);var x=f.hull(g),A=f.centre(x);e.setVertices(h,x),f.translate(h.vertices,A)}var T=e._totalProperties(h),E=T.centre.x,S=T.centre.y,C=h.bounds,P=h.centerOfMass,R=h.centerOffset;n.update(C,h.vertices,h.velocity),P.x=-(C.min.x-E)/(C.max.x-C.min.x),P.y=-(C.min.y-S)/(C.max.y-C.min.y),R.x=E,R.y=S,h.area=T.area,h.parent=h,h.position.x=E,h.position.y=S,h.positionPrev.x=E,h.positionPrev.y=S,e.setMass(h,T.mass),e.setInertia(h,T.inertia),e.setPosition(h,T.centre)}},e.setCentre=function(h,l,d){d?(h.positionPrev.x+=l.x,h.positionPrev.y+=l.y,h.position.x+=l.x,h.position.y+=l.y):(h.positionPrev.x=l.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=l.y-(h.position.y-h.positionPrev.y),h.position.x=l.x,h.position.y=l.y)},e.setPosition=function(h,l){var d=a.sub(l,h.position);h.positionPrev.x+=d.x,h.positionPrev.y+=d.y;for(var v=0;v<h.parts.length;v++){var c=h.parts[v];c.position.x+=d.x,c.position.y+=d.y,f.translate(c.vertices,d),n.update(c.bounds,c.vertices,h.velocity)}},e.setAngle=function(h,l){var d=l-h.angle;h.anglePrev+=d;for(var v=0;v<h.parts.length;v++){var c=h.parts[v];c.angle+=d,f.rotate(c.vertices,d,h.position),r.rotate(c.axes,d),n.update(c.bounds,c.vertices,h.velocity),v>0&&a.rotateAbout(c.position,d,h.position,c.position)}},e.setVelocity=function(h,l){h.positionPrev.x=h.position.x-l.x,h.positionPrev.y=h.position.y-l.y,h.velocity.x=l.x,h.velocity.y=l.y,h.speed=a.magnitude(h.velocity)},e.setAngularVelocity=function(h,l){h.anglePrev=h.angle-l,h.angularVelocity=l,h.angularSpeed=Math.abs(h.angularVelocity)},e.translate=function(h,l){e.setPosition(h,a.add(h.position,l))},e.rotate=function(h,l,d){if(!d)e.setAngle(h,h.angle+l);else{var v=Math.cos(l),c=Math.sin(l),g=h.position.x-d.x,x=h.position.y-d.y;e.setPosition(h,{x:d.x+(g*v-x*c),y:d.y+(g*c+x*v)}),e.setAngle(h,h.angle+l)}},e.scale=function(h,l,d,v){var c=0,g=0;v=v||h.position;for(var x=0;x<h.parts.length;x++){var A=h.parts[x];A.scale.x=l,A.scale.y=d,f.scale(A.vertices,l,d,v),A.axes=r.fromVertices(A.vertices),A.area=f.area(A.vertices),e.setMass(A,h.density*A.area),f.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),e.setInertia(A,e._inertiaScale*f.inertia(A.vertices,A.mass)),f.translate(A.vertices,{x:A.position.x,y:A.position.y}),x>0&&(c+=A.area,g+=A.inertia),A.position.x=v.x+(A.position.x-v.x)*l,A.position.y=v.y+(A.position.y-v.y)*d,n.update(A.bounds,A.vertices,h.velocity)}h.parts.length>1&&(h.area=c,h.isStatic||(e.setMass(h,h.density*c),e.setInertia(h,g))),h.circleRadius&&(l===d?h.circleRadius*=l:h.circleRadius=null)},e.update=function(h,l,d,v){var c=Math.pow(l*d*h.timeScale,2),g=1-h.frictionAir*d*h.timeScale,x=h.position.x-h.positionPrev.x,A=h.position.y-h.positionPrev.y;h.velocity.x=x*g*v+h.force.x/h.mass*c,h.velocity.y=A*g*v+h.force.y/h.mass*c,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.angularVelocity=(h.angle-h.anglePrev)*g*v+h.torque/h.inertia*c,h.anglePrev=h.angle,h.angle+=h.angularVelocity,h.speed=a.magnitude(h.velocity),h.angularSpeed=Math.abs(h.angularVelocity);for(var T=0;T<h.parts.length;T++){var E=h.parts[T];f.translate(E.vertices,h.velocity),T>0&&(E.position.x+=h.velocity.x,E.position.y+=h.velocity.y),h.angularVelocity!==0&&(f.rotate(E.vertices,h.angularVelocity,h.position),r.rotate(E.axes,h.angularVelocity),T>0&&a.rotateAbout(E.position,h.angularVelocity,h.position,E.position)),n.update(E.bounds,E.vertices,h.velocity)}},e.applyForce=function(h,l,d){h.force.x+=d.x,h.force.y+=d.y;var v={x:l.x-h.position.x,y:l.y-h.position.y};h.torque+=v.x*d.y-v.y*d.x},e._totalProperties=function(h){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},d=h.parts.length===1?0:1;d<h.parts.length;d++){var v=h.parts[d],c=v.mass!==1/0?v.mass:1;l.mass+=c,l.area+=v.area,l.inertia+=v.inertia,l.centre=a.add(l.centre,a.mult(v.position,c))}return l.centre=a.div(l.centre,l.mass),l}})()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y+e.height-e.height*e.originY};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x+e.width-e.width*e.originX};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n){o===void 0&&(o=0),s===void 0&&(s=0),n===void 0&&(n=1);var r,u=0,h=e.length;if(n===1)for(r=s;r<h;r++)e[r][f]+=a+u*o,u++;else for(r=s;r>=0;r--)e[r][f]+=a+u*o,u++;return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(307),a=t(172),o=t(56),s=t(173),n=t(3),r=new e({initialize:function(h,l,d,v){h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),this.type=o.LINE,this.x1=h,this.y1=l,this.x2=d,this.y2=v},getPoint:function(u,h){return f(this,u,h)},getPoints:function(u,h,l){return a(this,u,h,l)},getRandomPoint:function(u){return s(this,u)},setTo:function(u,h,l,d){return u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=0),this.x1=u,this.y1=h,this.x2=l,this.y2=d,this},getPointA:function(u){return u===void 0&&(u=new n),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new n),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});i.exports=r},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=a||f.fillColor,n=o||f.fillAlpha,r=(s&16711680)>>>16,u=(s&65280)>>>8,h=s&255;e.fillStyle="rgba("+r+","+u+","+h+","+n+")"};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r){var u=[];r.forEach(function(l){l&&u.push(l)}),this.loader=o,this.type=s,this.key=n,this.multiKeyIndex=o.multiKeyIndex++,this.files=u,this.complete=!1,this.pending=u.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var h=0;h<u.length;h++)u[h].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(a){return this.files.push(a),a.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(a){var o=this.files.indexOf(a);o!==-1&&this.pending--},onFileFailed:function(a){var o=this.files.indexOf(a);o!==-1&&this.failed++}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=e-a,n=f-o;return Math.sqrt(s*s+n*n)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.y=f+e.height*e.originY,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x=f+e.width*e.originX,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x=f-e.width+e.width*e.originX,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.y=f-e.height+e.height*e.originY,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.width<=0||e.height<=0?!1:e.x<=f&&e.x+e.width>=f&&e.y<=a&&e.y+e.height>=a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(175),a=t(9),o=t(374),s=t(2),n=t(69),r=t(91),u=t(141),h=t(12),l=t(375),d=new e({Extends:a,initialize:function(c){a.call(this);var g=c.game,x=g.renderer,A=x.gl;this.name=s(c,"name","WebGLPipeline"),this.game=g,this.renderer=x,this.manager,this.gl=A,this.view=g.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=s(c,"topology",A.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=s(c,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=c,this.glReset=!1},boot:function(){var v,c=this.gl,g=this.config,x=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var A=this.renderTargets,T=s(g,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var E=x.width,S=x.height;if(typeof T=="number")for(v=0;v<T;v++)A.push(new u(x,E,S,1,0,!0));else if(Array.isArray(T))for(v=0;v<T.length;v++){var C=s(T[v],"scale",1),P=s(T[v],"minFilter",0),R=s(T[v],"autoClear",1);A.push(new u(x,E,S,C,P,R))}A.length&&(this.currentRenderTarget=A[0]),this.setShadersFromConfig(g);var M=this.shaders,L=0;for(v=0;v<M.length;v++)M[v].vertexSize>L&&(L=M[v].vertexSize);var F=s(g,"batchSize",x.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var w=s(g,"vertices",null);for(w?(this.vertexViewF32.set(w),this.vertexBuffer=x.createVertexBuffer(I,c.STATIC_DRAW)):this.vertexBuffer=x.createVertexBuffer(I.byteLength,c.DYNAMIC_DRAW),this.setVertexBuffer(),v=M.length-1;v>=0;v--)M[v].rebind();this.hasBooted=!0,x.on(r.RESIZE,this.resize,this),x.on(r.PRE_RENDER,this.onPreRender,this),x.on(r.RENDER,this.onRender,this),x.on(r.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,c){var g=this.renderer;if(v!==this.currentShader||g.currentProgram!==this.currentShader.program){this.flush(),g.resetTextures();var x=this.setVertexBuffer();x&&!c&&(c=!0),v.bind(c,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var c=this.shaders,g=0;g<c.length;g++)if(c[g].name===v)return c[g]},setShadersFromConfig:function(v){var c,g=this.shaders,x=this.renderer;for(c=0;c<g.length;c++)g[c].destroy();var A="vertShader",T="fragShader",E="attributes",S=s(v,A,null),C=h.parseFragmentShaderMaxTextures(s(v,T,null),x.maxTextures),P=s(v,E,null),R=s(v,"shaders",[]),M=R.length;if(M===0)S&&C&&(this.shaders=[new l(this,"default",S,C,f(P))]);else{var L=[];for(c=0;c<M;c++){var F=R[c],I=s(F,"name","default"),w=s(F,A,S),U=h.parseFragmentShaderMaxTextures(s(F,T,C),x.maxTextures),z=s(F,E,P);w&&U&&L.push(new l(this,I,w,U,f(z)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(v,c){return c===void 0&&(c=v.frame),this.currentUnit=this.renderer.setTextureSource(c.source),this.currentUnit},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},resize:function(v,c){(v!==this.width||c!==this.height)&&this.flush(),this.width=v,this.height=c;for(var g=this.renderTargets,x=0;x<g.length;x++)g[x].resize(v,c);return this.setProjectionMatrix(v,c),this.emit(o.RESIZE,v,c,this),this.onResize(v,c),this},setProjectionMatrix:function(v,c){var g=this.projectionMatrix;if(!g)return this;this.projectionWidth=v,this.projectionHeight=c,g.ortho(0,v,c,0,-1e3,1e3);for(var x=this.shaders,A="uProjectionMatrix",T=0;T<x.length;T++){var E=x[T];E.hasUniform(A)&&(E.resetUniform(A),E.setMatrix4fv(A,!1,g.val,E))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,c=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==c)&&this.setProjectionMatrix(v,c)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var c=this.setVertexBuffer();return v.bind(c),this.currentShader=v,this.emit(o.BIND,this,v),this.onActive(v),this},rebind:function(v){this.setVertexBuffer();for(var c=this.shaders,g=c.length-1;g>=0;g--){var x=c[g].rebind();(!v||x===v)&&(this.currentShader=x)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var v=this.gl,c=this.vertexBuffer;return v.getParameter(v.ARRAY_BUFFER_BINDING)!==c?(v.bindBuffer(v.ARRAY_BUFFER,c),!0):!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var c=this.gl,g=this.vertexCount,x=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),g===this.vertexCapacity?c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.DYNAMIC_DRAW):c.bufferSubData(c.ARRAY_BUFFER,0,this.bytes.subarray(0,g*x)),c.drawArrays(this.topology,0,g)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,c,g,x,A,T,E){var S=this.vertexViewF32,C=this.vertexViewU32,P=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++P]=v,S[++P]=c,S[++P]=g,S[++P]=x,S[++P]=A,S[++P]=T,C[++P]=E,this.vertexCount++},batchQuad:function(v,c,g,x,A,T,E,S,C,P,R,M,L,F,I,w,U,z,W,H){H===void 0&&(H=this.currentUnit);var D=!1;return this.shouldFlush(6)&&(this.flush(),D=!0,H=this.setTexture2D(W)),this.batchVert(c,g,P,R,H,z,F),this.batchVert(x,A,P,L,H,z,w),this.batchVert(T,E,M,L,H,z,U),this.batchVert(c,g,P,R,H,z,F),this.batchVert(T,E,M,L,H,z,U),this.batchVert(S,C,M,R,H,z,I),this.onBatch(v),D},batchTri:function(v,c,g,x,A,T,E,S,C,P,R,M,L,F,I,w,U){U===void 0&&(U=this.currentUnit);var z=!1;return this.shouldFlush(3)&&(this.flush(),z=!0,U=this.setTexture2D(w)),this.batchVert(c,g,S,C,U,I,M),this.batchVert(x,A,S,R,U,I,L),this.batchVert(T,E,P,R,U,I,F),this.onBatch(v),z},drawFillRect:function(v,c,g,x,A,T,E,S){E===void 0&&(E=this.renderer.whiteTexture.glTexture),S===void 0&&(S=!0),v=Math.floor(v),c=Math.floor(c);var C=Math.floor(v+g),P=Math.floor(c+x),R=this.setTexture2D(E),M=h.getTintAppendFloatAlphaAndSwap(A,T),L=0,F=0,I=1,w=1;S&&(F=1,w=0),this.batchQuad(null,v,c,v,P,C,P,C,c,L,F,I,w,M,M,M,M,0,E,R)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(v),this.currentUnit},bindTexture:function(v,c){c===void 0&&(c=0);var g=this.gl;return g.activeTexture(g.TEXTURE0+c),g.bindTexture(g.TEXTURE_2D,v),this},bindRenderTarget:function(v,c){return this.bindTexture(v.texture,c)},setTime:function(v){return this.set1f(v,this.game.loop.getDuration()),this},set1f:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set1f(v,c),this},set2f:function(v,c,g,x){return x===void 0&&(x=this.currentShader),x.set2f(v,c,g),this},set3f:function(v,c,g,x,A){return A===void 0&&(A=this.currentShader),A.set3f(v,c,g,x),this},set4f:function(v,c,g,x,A,T){return T===void 0&&(T=this.currentShader),T.set4f(v,c,g,x,A),this},set1fv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set1fv(v,c),this},set2fv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set2fv(v,c),this},set3fv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set3fv(v,c),this},set4fv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set4fv(v,c),this},set1iv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set1iv(v,c),this},set2iv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set2iv(v,c),this},set3iv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set3iv(v,c),this},set4iv:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set4iv(v,c),this},set1i:function(v,c,g){return g===void 0&&(g=this.currentShader),g.set1i(v,c),this},set2i:function(v,c,g,x){return x===void 0&&(x=this.currentShader),x.set2i(v,c,g),this},set3i:function(v,c,g,x,A){return A===void 0&&(A=this.currentShader),A.set3i(v,c,g,x),this},set4i:function(v,c,g,x,A,T){return T===void 0&&(T=this.currentShader),T.set4i(v,c,g,x,A),this},setMatrix2fv:function(v,c,g,x){return x===void 0&&(x=this.currentShader),x.setMatrix2fv(v,c,g),this},setMatrix3fv:function(v,c,g,x){return x===void 0&&(x=this.currentShader),x.setMatrix3fv(v,c,g),this},setMatrix4fv:function(v,c,g,x){return x===void 0&&(x=this.currentShader),x.setMatrix4fv(v,c,g),this},destroy:function(){this.emit(o.DESTROY,this);var v,c=this.shaders;for(v=0;v<c.length;v++)c[v].destroy();var g=this.renderTargets;for(v=0;v<g.length;v++)g[v].destroy();this.gl.deleteBuffer(this.vertexBuffer);var x=this.renderer;return x.off(r.RESIZE,this.resize,this),x.off(r.PRE_RENDER,this.onPreRender,this),x.off(r.RENDER,this.onRender,this),x.off(r.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(O,B,N){N=N||2;var G=B&&B.length,V=G?B[0]*N:O.length,Y=f(O,0,V,N,!0),X=[];if(!Y||Y.next===Y.prev)return X;var b,Q,K,$,Z,k,J;if(G&&(Y=h(O,B,Y,N)),O.length>80*N){b=K=O[0],Q=$=O[1];for(var tt=N;tt<V;tt+=N)Z=O[tt],k=O[tt+1],Z<b&&(b=Z),k<Q&&(Q=k),Z>K&&(K=Z),k>$&&($=k);J=Math.max(K-b,$-Q),J=J!==0?1/J:0}return o(Y,X,N,b,Q,J),X}function f(O,B,N,G,V){var Y,X;if(V===D(O,B,N,G)>0)for(Y=B;Y<N;Y+=G)X=z(Y,O[Y],O[Y+1],X);else for(Y=N-G;Y>=B;Y-=G)X=z(Y,O[Y],O[Y+1],X);return X&&P(X,X.next)&&(W(X),X=X.next),X}function a(O,B){if(!O)return O;B||(B=O);var N=O,G;do if(G=!1,!N.steiner&&(P(N,N.next)||C(N.prev,N,N.next)===0)){if(W(N),N=B=N.prev,N===N.next)break;G=!0}else N=N.next;while(G||N!==B);return B}function o(O,B,N,G,V,Y,X){if(!!O){!X&&Y&&g(O,G,V,Y);for(var b=O,Q,K;O.prev!==O.next;){if(Q=O.prev,K=O.next,Y?n(O,G,V,Y):s(O)){B.push(Q.i/N),B.push(O.i/N),B.push(K.i/N),W(O),O=K.next,b=K.next;continue}if(O=K,O===b){X?X===1?(O=r(a(O),B,N),o(O,B,N,G,V,Y,2)):X===2&&u(O,B,N,G,V,Y):o(a(O),B,N,G,V,Y,1);break}}}}function s(O){var B=O.prev,N=O,G=O.next;if(C(B,N,G)>=0)return!1;for(var V=O.next.next;V!==O.prev;){if(E(B.x,B.y,N.x,N.y,G.x,G.y,V.x,V.y)&&C(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function n(O,B,N,G){var V=O.prev,Y=O,X=O.next;if(C(V,Y,X)>=0)return!1;for(var b=V.x<Y.x?V.x<X.x?V.x:X.x:Y.x<X.x?Y.x:X.x,Q=V.y<Y.y?V.y<X.y?V.y:X.y:Y.y<X.y?Y.y:X.y,K=V.x>Y.x?V.x>X.x?V.x:X.x:Y.x>X.x?Y.x:X.x,$=V.y>Y.y?V.y>X.y?V.y:X.y:Y.y>X.y?Y.y:X.y,Z=A(b,Q,B,N,G),k=A(K,$,B,N,G),J=O.prevZ,tt=O.nextZ;J&&J.z>=Z&&tt&&tt.z<=k;){if(J!==O.prev&&J!==O.next&&E(V.x,V.y,Y.x,Y.y,X.x,X.y,J.x,J.y)&&C(J.prev,J,J.next)>=0||(J=J.prevZ,tt!==O.prev&&tt!==O.next&&E(V.x,V.y,Y.x,Y.y,X.x,X.y,tt.x,tt.y)&&C(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;J&&J.z>=Z;){if(J!==O.prev&&J!==O.next&&E(V.x,V.y,Y.x,Y.y,X.x,X.y,J.x,J.y)&&C(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;tt&&tt.z<=k;){if(tt!==O.prev&&tt!==O.next&&E(V.x,V.y,Y.x,Y.y,X.x,X.y,tt.x,tt.y)&&C(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function r(O,B,N){var G=O;do{var V=G.prev,Y=G.next.next;!P(V,Y)&&R(V,G,G.next,Y)&&I(V,Y)&&I(Y,V)&&(B.push(V.i/N),B.push(G.i/N),B.push(Y.i/N),W(G),W(G.next),G=O=Y),G=G.next}while(G!==O);return a(G)}function u(O,B,N,G,V,Y){var X=O;do{for(var b=X.next.next;b!==X.prev;){if(X.i!==b.i&&S(X,b)){var Q=U(X,b);X=a(X,X.next),Q=a(Q,Q.next),o(X,B,N,G,V,Y),o(Q,B,N,G,V,Y);return}b=b.next}X=X.next}while(X!==O)}function h(O,B,N,G){var V=[],Y,X,b,Q,K;for(Y=0,X=B.length;Y<X;Y++)b=B[Y]*G,Q=Y<X-1?B[Y+1]*G:O.length,K=f(O,b,Q,G,!1),K===K.next&&(K.steiner=!0),V.push(T(K));for(V.sort(l),Y=0;Y<V.length;Y++)d(V[Y],N),N=a(N,N.next);return N}function l(O,B){return O.x-B.x}function d(O,B){if(B=v(O,B),B){var N=U(B,O);a(B,B.next),a(N,N.next)}}function v(O,B){var N=B,G=O.x,V=O.y,Y=-1/0,X;do{if(V<=N.y&&V>=N.next.y&&N.next.y!==N.y){var b=N.x+(V-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(b<=G&&b>Y){if(Y=b,b===G){if(V===N.y)return N;if(V===N.next.y)return N.next}X=N.x<N.next.x?N:N.next}}N=N.next}while(N!==B);if(!X)return null;if(G===Y)return X;var Q=X,K=X.x,$=X.y,Z=1/0,k;N=X;do G>=N.x&&N.x>=K&&G!==N.x&&E(V<$?G:Y,V,K,$,V<$?Y:G,V,N.x,N.y)&&(k=Math.abs(V-N.y)/(G-N.x),I(N,O)&&(k<Z||k===Z&&(N.x>X.x||N.x===X.x&&c(X,N)))&&(X=N,Z=k)),N=N.next;while(N!==Q);return X}function c(O,B){return C(O.prev,O,B.prev)<0&&C(B.next,O,O.next)<0}function g(O,B,N,G){var V=O;do V.z===null&&(V.z=A(V.x,V.y,B,N,G)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==O);V.prevZ.nextZ=null,V.prevZ=null,x(V)}function x(O){var B,N,G,V,Y,X,b,Q,K=1;do{for(N=O,O=null,Y=null,X=0;N;){for(X++,G=N,b=0,B=0;B<K&&(b++,G=G.nextZ,!!G);B++);for(Q=K;b>0||Q>0&&G;)b!==0&&(Q===0||!G||N.z<=G.z)?(V=N,N=N.nextZ,b--):(V=G,G=G.nextZ,Q--),Y?Y.nextZ=V:O=V,V.prevZ=Y,Y=V;N=G}Y.nextZ=null,K*=2}while(X>1);return O}function A(O,B,N,G,V){return O=32767*(O-N)*V,B=32767*(B-G)*V,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,O|B<<1}function T(O){var B=O,N=O;do(B.x<N.x||B.x===N.x&&B.y<N.y)&&(N=B),B=B.next;while(B!==O);return N}function E(O,B,N,G,V,Y,X,b){return(V-X)*(B-b)-(O-X)*(Y-b)>=0&&(O-X)*(G-b)-(N-X)*(B-b)>=0&&(N-X)*(Y-b)-(V-X)*(G-b)>=0}function S(O,B){return O.next.i!==B.i&&O.prev.i!==B.i&&!F(O,B)&&(I(O,B)&&I(B,O)&&w(O,B)&&(C(O.prev,O,B.prev)||C(O,B.prev,B))||P(O,B)&&C(O.prev,O,O.next)>0&&C(B.prev,B,B.next)>0)}function C(O,B,N){return(B.y-O.y)*(N.x-B.x)-(B.x-O.x)*(N.y-B.y)}function P(O,B){return O.x===B.x&&O.y===B.y}function R(O,B,N,G){var V=L(C(O,B,N)),Y=L(C(O,B,G)),X=L(C(N,G,O)),b=L(C(N,G,B));return!!(V!==Y&&X!==b||V===0&&M(O,N,B)||Y===0&&M(O,G,B)||X===0&&M(N,O,G)||b===0&&M(N,B,G))}function M(O,B,N){return B.x<=Math.max(O.x,N.x)&&B.x>=Math.min(O.x,N.x)&&B.y<=Math.max(O.y,N.y)&&B.y>=Math.min(O.y,N.y)}function L(O){return O>0?1:O<0?-1:0}function F(O,B){var N=O;do{if(N.i!==O.i&&N.next.i!==O.i&&N.i!==B.i&&N.next.i!==B.i&&R(N,N.next,O,B))return!0;N=N.next}while(N!==O);return!1}function I(O,B){return C(O.prev,O,O.next)<0?C(O,B,O.next)>=0&&C(O,O.prev,B)>=0:C(O,B,O.prev)<0||C(O,O.next,B)<0}function w(O,B){var N=O,G=!1,V=(O.x+B.x)/2,Y=(O.y+B.y)/2;do N.y>Y!=N.next.y>Y&&N.next.y!==N.y&&V<(N.next.x-N.x)*(Y-N.y)/(N.next.y-N.y)+N.x&&(G=!G),N=N.next;while(N!==O);return G}function U(O,B){var N=new H(O.i,O.x,O.y),G=new H(B.i,B.x,B.y),V=O.next,Y=B.prev;return O.next=B,B.prev=O,N.next=V,V.prev=N,G.next=N,N.prev=G,Y.next=G,G.prev=Y,G}function z(O,B,N,G){var V=new H(O,B,N);return G?(V.next=G.next,V.prev=G,G.next.prev=V,G.next=V):(V.prev=V,V.next=V),V}function W(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function H(O,B,N){this.i=O,this.x=B,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(O,B,N,G){var V=B&&B.length,Y=V?B[0]*N:O.length,X=Math.abs(D(O,0,Y,N));if(V)for(var b=0,Q=B.length;b<Q;b++){var K=B[b]*N,$=b<Q-1?B[b+1]*N:O.length;X-=Math.abs(D(O,K,$,N))}var Z=0;for(b=0;b<G.length;b+=3){var k=G[b]*N,J=G[b+1]*N,tt=G[b+2]*N;Z+=Math.abs((O[k]-O[tt])*(O[J+1]-O[k+1])-(O[k]-O[J])*(O[tt+1]-O[k+1]))}return X===0&&Z===0?0:Math.abs((Z-X)/X)};function D(O,B,N,G){for(var V=0,Y=B,X=N-G;Y<N;Y+=G)V+=(O[X]-O[Y])*(O[Y+1]+O[X+1]),X=Y;return V}e.flatten=function(O){for(var B=O[0][0].length,N={vertices:[],holes:[],dimensions:B},G=0,V=0;V<O.length;V++){for(var Y=0;Y<O[V].length;Y++)for(var X=0;X<B;X++)N.vertices.push(O[V][Y][X]);V>0&&(G+=O[V-1].length,N.holes.push(G))}return N},i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=a||f.strokeColor,n=o||f.strokeAlpha,r=(s&16711680)>>>16,u=(s&65280)>>>8,h=s&255;e.strokeStyle="rgba("+r+","+u+","+h+","+n+")",e.lineWidth=f.lineWidth};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(6),r=t(7),u=new e({Extends:a,initialize:function(l,d,v,c,g){var x="json";if(r(d)){var A=d;d=s(A,"key"),v=s(A,"url"),c=s(A,"xhrSettings"),x=s(A,"extension",x),g=s(A,"dataKey",g)}var T={type:"json",cache:l.cacheManager.json,extension:x,responseType:"text",key:d,url:v,xhrSettings:c,config:g};a.call(this,l,T),r(v)&&(g?this.data=n(v,g):this.data=v,this.state=f.FILE_POPULATED)},onProcess:function(){if(this.state!==f.FILE_POPULATED){this.state=f.FILE_PROCESSING;try{var h=JSON.parse(this.xhrLoader.responseText)}catch(d){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),d}var l=this.config;typeof l=="string"?this.data=n(h,l,h):this.data=h}this.onProcessComplete()}});o.register("json",function(h,l,d,v){if(Array.isArray(h))for(var c=0;c<h.length;c++)this.addFile(new u(this,h[c]));else this.addFile(new u(this,h,l,v,d));return this}),i.exports=u},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),f=t(26),a=function(o,s,n,r,u){for(var h=null,l=null,d=null,v=null,c=f(o,s,n,r,null,u),g=0;g<c.length;g++){var x=c[g];x&&(x.collides?(h=e(x.x,x.y-1,!0,u),l=e(x.x,x.y+1,!0,u),d=e(x.x-1,x.y,!0,u),v=e(x.x+1,x.y,!0,u),x.faceTop=!(h&&h.collides),x.faceBottom=!(l&&l.collides),x.faceLeft=!(d&&d.collides),x.faceRight=!(v&&v.collides)):x.resetFaces())}};i.exports=a},function(i,m,t){var e={};i.exports=e;var f=t(83),a=t(32);(function(){e.create=function(o,s){for(var n=[],r=0;r<o.length;r++){var u=o[r],h={x:u.x,y:u.y,index:r,body:s,isInternal:!1,contact:null,offset:null};h.contact={vertex:h,normalImpulse:0,tangentImpulse:0},n.push(h)}return n},e.fromPath=function(o,s){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,r=[];return o.replace(n,function(u,h,l){r.push({x:parseFloat(h),y:parseFloat(l)})}),e.create(r,s)},e.centre=function(o){for(var s=e.area(o,!0),n={x:0,y:0},r,u,h,l=0;l<o.length;l++)h=(l+1)%o.length,r=f.cross(o[l],o[h]),u=f.mult(f.add(o[l],o[h]),r),n=f.add(n,u);return f.div(n,6*s)},e.mean=function(o){for(var s={x:0,y:0},n=0;n<o.length;n++)s.x+=o[n].x,s.y+=o[n].y;return f.div(s,o.length)},e.area=function(o,s){for(var n=0,r=o.length-1,u=0;u<o.length;u++)n+=(o[r].x-o[u].x)*(o[r].y+o[u].y),r=u;return s?n/2:Math.abs(n)/2},e.inertia=function(o,s){for(var n=0,r=0,u=o,h,l,d=0;d<u.length;d++)l=(d+1)%u.length,h=Math.abs(f.cross(u[l],u[d])),n+=h*(f.dot(u[l],u[l])+f.dot(u[l],u[d])+f.dot(u[d],u[d])),r+=h;return s/6*(n/r)},e.translate=function(o,s,n){var r;if(n)for(r=0;r<o.length;r++)o[r].x+=s.x*n,o[r].y+=s.y*n;else for(r=0;r<o.length;r++)o[r].x+=s.x,o[r].y+=s.y;return o},e.rotate=function(o,s,n){if(s!==0){for(var r=Math.cos(s),u=Math.sin(s),h=0;h<o.length;h++){var l=o[h],d=l.x-n.x,v=l.y-n.y;l.x=n.x+(d*r-v*u),l.y=n.y+(d*u+v*r)}return o}},e.contains=function(o,s){for(var n=0;n<o.length;n++){var r=o[n],u=o[(n+1)%o.length];if((s.x-r.x)*(u.y-r.y)+(s.y-r.y)*(r.x-u.x)>0)return!1}return!0},e.scale=function(o,s,n,r){if(s===1&&n===1)return o;r=r||e.centre(o);for(var u,h,l=0;l<o.length;l++)u=o[l],h=f.sub(u,r),o[l].x=r.x+h.x*s,o[l].y=r.y+h.y*n;return o},e.chamfer=function(o,s,n,r,u){typeof s=="number"?s=[s]:s=s||[8],n=typeof n<"u"?n:-1,r=r||2,u=u||14;for(var h=[],l=0;l<o.length;l++){var d=o[l-1>=0?l-1:o.length-1],v=o[l],c=o[(l+1)%o.length],g=s[l<s.length?l:s.length-1];if(g===0){h.push(v);continue}var x=f.normalise({x:v.y-d.y,y:d.x-v.x}),A=f.normalise({x:c.y-v.y,y:v.x-c.x}),T=Math.sqrt(2*Math.pow(g,2)),E=f.mult(a.clone(x),g),S=f.normalise(f.mult(f.add(x,A),.5)),C=f.sub(v,f.mult(S,T)),P=n;n===-1&&(P=Math.pow(g,.32)*1.75),P=a.clamp(P,r,u),P%2===1&&(P+=1);for(var R=Math.acos(f.dot(x,A)),M=R/P,L=0;L<P;L++)h.push(f.add(f.rotate(E,M*L),C))}return h},e.clockwiseSort=function(o){var s=e.mean(o);return o.sort(function(n,r){return f.angle(s,n)-f.angle(s,r)}),o},e.isConvex=function(o){var s=0,n=o.length,r,u,h,l;if(n<3)return null;for(r=0;r<n;r++)if(u=(r+1)%n,h=(r+2)%n,l=(o[u].x-o[r].x)*(o[h].y-o[u].y),l-=(o[u].y-o[r].y)*(o[h].x-o[u].x),l<0?s|=1:l>0&&(s|=2),s===3)return!1;return s!==0?!0:null},e.hull=function(o){var s=[],n=[],r,u;for(o=o.slice(0),o.sort(function(h,l){var d=h.x-l.x;return d!==0?d:h.y-l.y}),u=0;u<o.length;u+=1){for(r=o[u];n.length>=2&&f.cross3(n[n.length-2],n[n.length-1],r)<=0;)n.pop();n.push(r)}for(u=o.length-1;u>=0;u-=1){for(r=o[u];s.length>=2&&f.cross3(s[s.length-2],s[s.length-1],r)<=0;)s.pop();s.push(r)}return s.pop(),n.pop(),s.concat(n)}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(66),a=t(300),o=t(301),s=t(56),n=t(170),r=new e({initialize:function(h,l,d){h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=0),this.type=s.CIRCLE,this.x=h,this.y=l,this._radius=d,this._diameter=d*2},contains:function(u,h){return f(this,u,h)},getPoint:function(u,h){return a(this,u,h)},getPoints:function(u,h,l){return o(this,u,h,l)},getRandomPoint:function(u){return n(this,u)},setTo:function(u,h,l){return this.x=u,this.y=h,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,h){return h===void 0&&(h=u),this.x=u,this.y=h,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=u*2}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=u*.5}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});i.exports=r},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(e.radius>0&&f>=e.left&&f<=e.right&&a>=e.top&&a<=e.bottom){var o=(e.x-f)*(e.x-f),s=(e.y-a)*(e.y-a);return o+s<=e.radius*e.radius}else return!1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=a-f;return f+((e-f)%o+o)%o};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(39),a=1e-6,o=new e({initialize:function(d){this.val=new Float32Array(16),d?this.copy(d):this.identity()},clone:function(){return new o(this)},set:function(l){return this.copy(l)},setValues:function(l,d,v,c,g,x,A,T,E,S,C,P,R,M,L,F){var I=this.val;return I[0]=l,I[1]=d,I[2]=v,I[3]=c,I[4]=g,I[5]=x,I[6]=A,I[7]=T,I[8]=E,I[9]=S,I[10]=C,I[11]=P,I[12]=R,I[13]=M,I[14]=L,I[15]=F,this},copy:function(l){var d=l.val;return this.setValues(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,d,v){var c=s.fromQuat(v),g=c.val,x=d.x,A=d.y,T=d.z;return this.setValues(g[0]*x,g[1]*x,g[2]*x,0,g[4]*A,g[5]*A,g[6]*A,0,g[8]*T,g[9]*T,g[10]*T,0,l.x,l.y,l.z,1)},xyz:function(l,d,v){this.identity();var c=this.val;return c[12]=l,c[13]=d,c[14]=v,this},scaling:function(l,d,v){this.zero();var c=this.val;return c[0]=l,c[5]=d,c[10]=v,c[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,d=l[1],v=l[2],c=l[3],g=l[6],x=l[7],A=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=d,l[6]=l[9],l[7]=l[13],l[8]=v,l[9]=g,l[11]=l[14],l[12]=c,l[13]=x,l[14]=A,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,d=l[0],v=l[1],c=l[2],g=l[3],x=l[4],A=l[5],T=l[6],E=l[7],S=l[8],C=l[9],P=l[10],R=l[11],M=l[12],L=l[13],F=l[14],I=l[15],w=d*A-v*x,U=d*T-c*x,z=d*E-g*x,W=v*T-c*A,H=v*E-g*A,D=c*E-g*T,O=S*L-C*M,B=S*F-P*M,N=S*I-R*M,G=C*F-P*L,V=C*I-R*L,Y=P*I-R*F,X=w*Y-U*V+z*G+W*N-H*B+D*O;return X?(X=1/X,this.setValues((A*Y-T*V+E*G)*X,(c*V-v*Y-g*G)*X,(L*D-F*H+I*W)*X,(P*H-C*D-R*W)*X,(T*N-x*Y-E*B)*X,(d*Y-c*N+g*B)*X,(F*z-M*D-I*U)*X,(S*D-P*z+R*U)*X,(x*V-A*N+E*O)*X,(v*N-d*V-g*O)*X,(M*H-L*z+I*w)*X,(C*z-S*H-R*w)*X,(A*B-x*G-T*O)*X,(d*G-v*B+c*O)*X,(L*U-M*W-F*w)*X,(S*W-C*U+P*w)*X)):this},adjoint:function(){var l=this.val,d=l[0],v=l[1],c=l[2],g=l[3],x=l[4],A=l[5],T=l[6],E=l[7],S=l[8],C=l[9],P=l[10],R=l[11],M=l[12],L=l[13],F=l[14],I=l[15];return this.setValues(A*(P*I-R*F)-C*(T*I-E*F)+L*(T*R-E*P),-(v*(P*I-R*F)-C*(c*I-g*F)+L*(c*R-g*P)),v*(T*I-E*F)-A*(c*I-g*F)+L*(c*E-g*T),-(v*(T*R-E*P)-A*(c*R-g*P)+C*(c*E-g*T)),-(x*(P*I-R*F)-S*(T*I-E*F)+M*(T*R-E*P)),d*(P*I-R*F)-S*(c*I-g*F)+M*(c*R-g*P),-(d*(T*I-E*F)-x*(c*I-g*F)+M*(c*E-g*T)),d*(T*R-E*P)-x*(c*R-g*P)+S*(c*E-g*T),x*(C*I-R*L)-S*(A*I-E*L)+M*(A*R-E*C),-(d*(C*I-R*L)-S*(v*I-g*L)+M*(v*R-g*C)),d*(A*I-E*L)-x*(v*I-g*L)+M*(v*E-g*A),-(d*(A*R-E*C)-x*(v*R-g*C)+S*(v*E-g*A)),-(x*(C*F-P*L)-S*(A*F-T*L)+M*(A*P-T*C)),d*(C*F-P*L)-S*(v*F-c*L)+M*(v*P-c*C),-(d*(A*F-T*L)-x*(v*F-c*L)+M*(v*T-c*A)),d*(A*P-T*C)-x*(v*P-c*C)+S*(v*T-c*A))},determinant:function(){var l=this.val,d=l[0],v=l[1],c=l[2],g=l[3],x=l[4],A=l[5],T=l[6],E=l[7],S=l[8],C=l[9],P=l[10],R=l[11],M=l[12],L=l[13],F=l[14],I=l[15],w=d*A-v*x,U=d*T-c*x,z=d*E-g*x,W=v*T-c*A,H=v*E-g*A,D=c*E-g*T,O=S*L-C*M,B=S*F-P*M,N=S*I-R*M,G=C*F-P*L,V=C*I-R*L,Y=P*I-R*F;return w*Y-U*V+z*G+W*N-H*B+D*O},multiply:function(l){var d=this.val,v=d[0],c=d[1],g=d[2],x=d[3],A=d[4],T=d[5],E=d[6],S=d[7],C=d[8],P=d[9],R=d[10],M=d[11],L=d[12],F=d[13],I=d[14],w=d[15],U=l.val,z=U[0],W=U[1],H=U[2],D=U[3];return d[0]=z*v+W*A+H*C+D*L,d[1]=z*c+W*T+H*P+D*F,d[2]=z*g+W*E+H*R+D*I,d[3]=z*x+W*S+H*M+D*w,z=U[4],W=U[5],H=U[6],D=U[7],d[4]=z*v+W*A+H*C+D*L,d[5]=z*c+W*T+H*P+D*F,d[6]=z*g+W*E+H*R+D*I,d[7]=z*x+W*S+H*M+D*w,z=U[8],W=U[9],H=U[10],D=U[11],d[8]=z*v+W*A+H*C+D*L,d[9]=z*c+W*T+H*P+D*F,d[10]=z*g+W*E+H*R+D*I,d[11]=z*x+W*S+H*M+D*w,z=U[12],W=U[13],H=U[14],D=U[15],d[12]=z*v+W*A+H*C+D*L,d[13]=z*c+W*T+H*P+D*F,d[14]=z*g+W*E+H*R+D*I,d[15]=z*x+W*S+H*M+D*w,this},multiplyLocal:function(l){var d=this.val,v=l.val;return this.setValues(d[0]*v[0]+d[1]*v[4]+d[2]*v[8]+d[3]*v[12],d[0]*v[1]+d[1]*v[5]+d[2]*v[9]+d[3]*v[13],d[0]*v[2]+d[1]*v[6]+d[2]*v[10]+d[3]*v[14],d[0]*v[3]+d[1]*v[7]+d[2]*v[11]+d[3]*v[15],d[4]*v[0]+d[5]*v[4]+d[6]*v[8]+d[7]*v[12],d[4]*v[1]+d[5]*v[5]+d[6]*v[9]+d[7]*v[13],d[4]*v[2]+d[5]*v[6]+d[6]*v[10]+d[7]*v[14],d[4]*v[3]+d[5]*v[7]+d[6]*v[11]+d[7]*v[15],d[8]*v[0]+d[9]*v[4]+d[10]*v[8]+d[11]*v[12],d[8]*v[1]+d[9]*v[5]+d[10]*v[9]+d[11]*v[13],d[8]*v[2]+d[9]*v[6]+d[10]*v[10]+d[11]*v[14],d[8]*v[3]+d[9]*v[7]+d[10]*v[11]+d[11]*v[15],d[12]*v[0]+d[13]*v[4]+d[14]*v[8]+d[15]*v[12],d[12]*v[1]+d[13]*v[5]+d[14]*v[9]+d[15]*v[13],d[12]*v[2]+d[13]*v[6]+d[14]*v[10]+d[15]*v[14],d[12]*v[3]+d[13]*v[7]+d[14]*v[11]+d[15]*v[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,d){var v=l.val,c=d.val,g=v[0],x=v[4],A=v[8],T=v[12],E=v[1],S=v[5],C=v[9],P=v[13],R=v[2],M=v[6],L=v[10],F=v[14],I=v[3],w=v[7],U=v[11],z=v[15],W=c[0],H=c[4],D=c[8],O=c[12],B=c[1],N=c[5],G=c[9],V=c[13],Y=c[2],X=c[6],b=c[10],Q=c[14],K=c[3],$=c[7],Z=c[11],k=c[15];return this.setValues(g*W+x*B+A*Y+T*K,E*W+S*B+C*Y+P*K,R*W+M*B+L*Y+F*K,I*W+w*B+U*Y+z*K,g*H+x*N+A*X+T*$,E*H+S*N+C*X+P*$,R*H+M*N+L*X+F*$,I*H+w*N+U*X+z*$,g*D+x*G+A*b+T*Z,E*D+S*G+C*b+P*Z,R*D+M*G+L*b+F*Z,I*D+w*G+U*b+z*Z,g*O+x*V+A*Q+T*k,E*O+S*V+C*Q+P*k,R*O+M*V+L*Q+F*k,I*O+w*V+U*Q+z*k)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,d,v){var c=this.val;return c[12]=c[0]*l+c[4]*d+c[8]*v+c[12],c[13]=c[1]*l+c[5]*d+c[9]*v+c[13],c[14]=c[2]*l+c[6]*d+c[10]*v+c[14],c[15]=c[3]*l+c[7]*d+c[11]*v+c[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,d,v){var c=this.val;return c[0]=c[0]*l,c[1]=c[1]*l,c[2]=c[2]*l,c[3]=c[3]*l,c[4]=c[4]*d,c[5]=c[5]*d,c[6]=c[6]*d,c[7]=c[7]*d,c[8]=c[8]*v,c[9]=c[9]*v,c[10]=c[10]*v,c[11]=c[11]*v,this},makeRotationAxis:function(l,d){var v=Math.cos(d),c=Math.sin(d),g=1-v,x=l.x,A=l.y,T=l.z,E=g*x,S=g*A;return this.setValues(E*x+v,E*A-c*T,E*T+c*A,0,E*A+c*T,S*A+v,S*T-c*x,0,E*T-c*A,S*T+c*x,g*T*T+v,0,0,0,0,1)},rotate:function(l,d){var v=this.val,c=d.x,g=d.y,x=d.z,A=Math.sqrt(c*c+g*g+x*x);if(Math.abs(A)<a)return this;A=1/A,c*=A,g*=A,x*=A;var T=Math.sin(l),E=Math.cos(l),S=1-E,C=v[0],P=v[1],R=v[2],M=v[3],L=v[4],F=v[5],I=v[6],w=v[7],U=v[8],z=v[9],W=v[10],H=v[11],D=v[12],O=v[13],B=v[14],N=v[15],G=c*c*S+E,V=g*c*S+x*T,Y=x*c*S-g*T,X=c*g*S-x*T,b=g*g*S+E,Q=x*g*S+c*T,K=c*x*S+g*T,$=g*x*S-c*T,Z=x*x*S+E;return this.setValues(C*G+L*V+U*Y,P*G+F*V+z*Y,R*G+I*V+W*Y,M*G+w*V+H*Y,C*X+L*b+U*Q,P*X+F*b+z*Q,R*X+I*b+W*Q,M*X+w*b+H*Q,C*K+L*$+U*Z,P*K+F*$+z*Z,R*K+I*$+W*Z,M*K+w*$+H*Z,D,O,B,N)},rotateX:function(l){var d=this.val,v=Math.sin(l),c=Math.cos(l),g=d[4],x=d[5],A=d[6],T=d[7],E=d[8],S=d[9],C=d[10],P=d[11];return d[4]=g*c+E*v,d[5]=x*c+S*v,d[6]=A*c+C*v,d[7]=T*c+P*v,d[8]=E*c-g*v,d[9]=S*c-x*v,d[10]=C*c-A*v,d[11]=P*c-T*v,this},rotateY:function(l){var d=this.val,v=Math.sin(l),c=Math.cos(l),g=d[0],x=d[1],A=d[2],T=d[3],E=d[8],S=d[9],C=d[10],P=d[11];return d[0]=g*c-E*v,d[1]=x*c-S*v,d[2]=A*c-C*v,d[3]=T*c-P*v,d[8]=g*v+E*c,d[9]=x*v+S*c,d[10]=A*v+C*c,d[11]=T*v+P*c,this},rotateZ:function(l){var d=this.val,v=Math.sin(l),c=Math.cos(l),g=d[0],x=d[1],A=d[2],T=d[3],E=d[4],S=d[5],C=d[6],P=d[7];return d[0]=g*c+E*v,d[1]=x*c+S*v,d[2]=A*c+C*v,d[3]=T*c+P*v,d[4]=E*c-g*v,d[5]=S*c-x*v,d[6]=C*c-A*v,d[7]=P*c-T*v,this},fromRotationTranslation:function(l,d){var v=l.x,c=l.y,g=l.z,x=l.w,A=v+v,T=c+c,E=g+g,S=v*A,C=v*T,P=v*E,R=c*T,M=c*E,L=g*E,F=x*A,I=x*T,w=x*E;return this.setValues(1-(R+L),C+w,P-I,0,C-w,1-(S+L),M+F,0,P+I,M-F,1-(S+R),0,d.x,d.y,d.z,1)},fromQuat:function(l){var d=l.x,v=l.y,c=l.z,g=l.w,x=d+d,A=v+v,T=c+c,E=d*x,S=d*A,C=d*T,P=v*A,R=v*T,M=c*T,L=g*x,F=g*A,I=g*T;return this.setValues(1-(P+M),S+I,C-F,0,S-I,1-(E+M),R+L,0,C+F,R-L,1-(E+P),0,0,0,0,1)},frustum:function(l,d,v,c,g,x){var A=1/(d-l),T=1/(c-v),E=1/(g-x);return this.setValues(g*2*A,0,0,0,0,g*2*T,0,0,(d+l)*A,(c+v)*T,(x+g)*E,-1,0,0,x*g*2*E,0)},perspective:function(l,d,v,c){var g=1/Math.tan(l/2),x=1/(v-c);return this.setValues(g/d,0,0,0,0,g,0,0,0,0,(c+v)*x,-1,0,0,2*c*v*x,0)},perspectiveLH:function(l,d,v,c){return this.setValues(2*v/l,0,0,0,0,2*v/d,0,0,0,0,-c/(v-c),1,0,0,v*c/(v-c),0)},ortho:function(l,d,v,c,g,x){var A=l-d,T=v-c,E=g-x;return A=A===0?A:1/A,T=T===0?T:1/T,E=E===0?E:1/E,this.setValues(-2*A,0,0,0,0,-2*T,0,0,0,0,2*E,0,(l+d)*A,(c+v)*T,(x+g)*E,1)},lookAtRH:function(l,d,v){var c=this.val;return h.subVectors(l,d),h.getLengthSquared()===0&&(h.z=1),h.normalize(),r.crossVectors(v,h),r.getLengthSquared()===0&&(Math.abs(v.z)===1?h.x+=1e-4:h.z+=1e-4,h.normalize(),r.crossVectors(v,h)),r.normalize(),u.crossVectors(h,r),c[0]=r.x,c[1]=r.y,c[2]=r.z,c[4]=u.x,c[5]=u.y,c[6]=u.z,c[8]=h.x,c[9]=h.y,c[10]=h.z,this},lookAt:function(l,d,v){var c=l.x,g=l.y,x=l.z,A=v.x,T=v.y,E=v.z,S=d.x,C=d.y,P=d.z;if(Math.abs(c-S)<a&&Math.abs(g-C)<a&&Math.abs(x-P)<a)return this.identity();var R=c-S,M=g-C,L=x-P,F=1/Math.sqrt(R*R+M*M+L*L);R*=F,M*=F,L*=F;var I=T*L-E*M,w=E*R-A*L,U=A*M-T*R;F=Math.sqrt(I*I+w*w+U*U),F?(F=1/F,I*=F,w*=F,U*=F):(I=0,w=0,U=0);var z=M*U-L*w,W=L*I-R*U,H=R*w-M*I;return F=Math.sqrt(z*z+W*W+H*H),F?(F=1/F,z*=F,W*=F,H*=F):(z=0,W=0,H=0),this.setValues(I,z,R,0,w,W,M,0,U,H,L,0,-(I*c+w*g+U*x),-(z*c+W*g+H*x),-(R*c+M*g+L*x),1)},yawPitchRoll:function(l,d,v){this.zero(),s.zero(),n.zero();var c=this.val,g=s.val,x=n.val,A=Math.sin(v),T=Math.cos(v);return c[10]=1,c[15]=1,c[0]=T,c[1]=A,c[4]=-A,c[5]=T,A=Math.sin(d),T=Math.cos(d),g[0]=1,g[15]=1,g[5]=T,g[10]=T,g[9]=-A,g[6]=A,A=Math.sin(l),T=Math.cos(l),x[5]=1,x[15]=1,x[0]=T,x[2]=-A,x[8]=A,x[10]=T,this.multiplyLocal(s),this.multiplyLocal(n),this},setWorldMatrix:function(l,d,v,c,g){return this.yawPitchRoll(l.y,l.x,l.z),s.scaling(v.x,v.y,v.z),n.xyz(d.x,d.y,d.z),this.multiplyLocal(s),this.multiplyLocal(n),c&&this.multiplyLocal(c),g&&this.multiplyLocal(g),this},multiplyToMat4:function(l,d){var v=this.val,c=l.val,g=v[0],x=v[1],A=v[2],T=v[3],E=v[4],S=v[5],C=v[6],P=v[7],R=v[8],M=v[9],L=v[10],F=v[11],I=v[12],w=v[13],U=v[14],z=v[15],W=c[0],H=c[1],D=c[2],O=c[3],B=c[4],N=c[5],G=c[6],V=c[7],Y=c[8],X=c[9],b=c[10],Q=c[11],K=c[12],$=c[13],Z=c[14],k=c[15];return d.setValues(W*g+H*E+D*R+O*I,H*x+H*S+D*M+O*w,D*A+H*C+D*L+O*U,O*T+H*P+D*F+O*z,B*g+N*E+G*R+V*I,B*x+N*S+G*M+V*w,B*A+N*C+G*L+V*U,B*T+N*P+G*F+V*z,Y*g+X*E+b*R+Q*I,Y*x+X*S+b*M+Q*w,Y*A+X*C+b*L+Q*U,Y*T+X*P+b*F+Q*z,K*g+$*E+Z*R+k*I,K*x+$*S+Z*M+k*w,K*A+$*C+Z*L+k*U,K*T+$*P+Z*F+k*z)},fromRotationXYTranslation:function(l,d,v){var c=d.x,g=d.y,x=d.z,A=Math.sin(l.x),T=Math.cos(l.x),E=Math.sin(l.y),S=Math.cos(l.y),C=c,P=g,R=x,M=-A,L=0-M*E,F=0-T*E,I=M*S,w=T*S;return v||(C=S*c+E*x,P=L*c+T*g+I*x,R=F*c+A*g+w*x),this.setValues(S,L,F,0,0,T,A,0,E,I,w,0,C,P,R,1)},getMaxScaleOnAxis:function(){var l=this.val,d=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],v=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],c=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(d,v,c))}}),s=new o,n=new o,r=new f,u=new f,h=new f;i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function u(h,l,d,v,c){var g="png",x;if(n(l)){var A=l;l=s(A,"key"),d=s(A,"url"),x=s(A,"normalMap"),v=s(A,"xhrSettings"),g=s(A,"extension",g),c=s(A,"frameConfig")}Array.isArray(d)&&(x=d[1],d=d[0]);var T={type:"image",cache:h.textureManager,extension:g,responseType:"blob",key:l,url:d,xhrSettings:v,config:c};if(a.call(this,h,T),x){var E=new u(h,this.key,x,v,c);E.type="normalMap",this.setLink(E),h.addFile(E)}},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var u=this;this.data.onload=function(){a.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(u.data),u.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var u,h=this.linkFile;h&&h.state===f.FILE_COMPLETE?(this.type==="image"?u=this.cache.addImage(this.key,this.data,h.data):u=this.cache.addImage(h.key,h.data,this.data),this.pendingDestroy(u),h.pendingDestroy(u)):h||(u=this.cache.addImage(this.key,this.data),this.pendingDestroy(u))}});o.register("image",function(u,h,l){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,h,l));return this}),i.exports=r},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),f=t(0),a=t(11),o=t(15),s=t(1065),n=new f({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,s],initialize:function(u,h,l,d,v){o.call(this,u,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(d,v),this.setPosition(h,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(r,u){this.anims.update(r,u)},play:function(r,u){return this.anims.play(r,u)},playReverse:function(r,u){return this.anims.playReverse(r,u)},playAfterDelay:function(r,u){return this.anims.playAfterDelay(r,u)},playAfterRepeat:function(r,u){return this.anims.playAfterRepeat(r,u)},chain:function(r){return this.anims.chain(r)},stop:function(){return this.anims.stop()},stopAfterDelay:function(r){return this.anims.stopAfterDelay(r)},stopAfterRepeat:function(r){return this.anims.stopAfterRepeat(r)},stopOnFrame:function(r){return this.anims.stopOnFrame(r)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});i.exports=n},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){if(!(f>=e.length)){for(var a=e.length-1,o=e[f],s=f;s<a;s++)e[s]=e[s+1];return e.length=a,o}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return a===void 0&&(a=0),f===0?e:(e-=a,e=f*Math.floor(e/f),o?(a+e)/f:a+e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f={};for(var a in e)Array.isArray(e[a])?f[a]=e[a].slice(0):f[a]=e[a];return f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=e.length;if(f<0||f>s||f>=a||a>s||f+a>s){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,s){return String(o).localeCompare(s)}function e(o,s){var n=o.length;if(n<=1)return o;for(var r=new Array(n),u=1;u<n;u*=2){f(o,s,u,r);var h=o;o=r,r=h}return o}function f(o,s,n,r){var u=o.length,h=0,l=n*2,d,v,c,g,x;for(d=0;d<u;d+=l)for(v=d+n,c=v+n,v>u&&(v=u),c>u&&(c=u),g=d,x=v;;)if(g<v&&x<c)s(o[g],o[x])<=0?r[h++]=o[g++]:r[h++]=o[x++];else if(g<v)r[h++]=o[g++];else if(x<c)r[h++]=o[x++];else break}var a=function(o,s){s===void 0&&(s=t);var n=e(o,s);return n!==o&&f(n,null,o.length,o),o};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(134),f=t(205),a=function(o,s){var n=e.Power0;if(typeof o=="string")if(e.hasOwnProperty(o))n=e[o];else{var r="";o.indexOf(".")&&(r=o.substr(o.indexOf(".")+1),r.toLowerCase()==="in"?r="easeIn":r.toLowerCase()==="out"?r="easeOut":r.toLowerCase()==="inout"&&(r="easeInOut")),o=f(o.substr(0,o.indexOf(".")+1)+r),e.hasOwnProperty(o)&&(n=e[o])}else typeof o=="function"?n=o:Array.isArray(o)&&o.length;if(!s)return n;var u=s.slice(0);return u.unshift(0),function(h){return u[0]=h,n.apply(this,u)}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(a,o,s,n,r){var u=a.strokeTint,h=e.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*s);u.TL=h,u.TR=h,u.BL=h,u.BR=h;var l=o.pathData,d=l.length-1,v=o.lineWidth,c=v/2,g=l[0]-n,x=l[1]-r;o.closePath||(d-=2);for(var A=2;A<d;A+=2){var T=l[A]-n,E=l[A+1]-r;a.batchLine(g,x,T,E,c,c,v,A-2,o.closePath?A===d-1:!1),g=T,x=E}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(115),a=t(476),o=t(477),s=t(56),n=t(47),r=t(181),u=new e({initialize:function(l,d,v,c,g,x){l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=0),this.type=s.TRIANGLE,this.x1=l,this.y1=d,this.x2=v,this.y2=c,this.x3=g,this.y3=x},contains:function(h,l){return f(this,h,l)},getPoint:function(h,l){return a(this,h,l)},getPoints:function(h,l,d){return o(this,h,l,d)},getRandomPoint:function(h){return r(this,h)},setTo:function(h,l,d,v,c,g){return h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),this.x1=h,this.y1=l,this.x2=d,this.y2=v,this.x3=c,this.y3=g,this},getLineA:function(h){return h===void 0&&(h=new n),h.setTo(this.x1,this.y1,this.x2,this.y2),h},getLineB:function(h){return h===void 0&&(h=new n),h.setTo(this.x2,this.y2,this.x3,this.y3),h},getLineC:function(h){return h===void 0&&(h=new n),h.setTo(this.x3,this.y3,this.x1,this.y1),h},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(h){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-h:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-h:l=this.x3-h,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(h){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-h:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-h:l=this.x3-h,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(h){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-h:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-h:l=this.y3-h,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(h){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-h:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-h:l=this.y3-h,this.y1-=l,this.y2-=l,this.y3-=l}}});i.exports=u},function(i,m){var t={};i.exports=t,function(){t.create=function(e,f){return{x:e||0,y:f||0}},t.clone=function(e){return{x:e.x,y:e.y}},t.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},t.rotate=function(e,f,a){var o=Math.cos(f),s=Math.sin(f);a||(a={});var n=e.x*o-e.y*s;return a.y=e.x*s+e.y*o,a.x=n,a},t.rotateAbout=function(e,f,a,o){var s=Math.cos(f),n=Math.sin(f);o||(o={});var r=a.x+((e.x-a.x)*s-(e.y-a.y)*n);return o.y=a.y+((e.x-a.x)*n+(e.y-a.y)*s),o.x=r,o},t.normalise=function(e){var f=t.magnitude(e);return f===0?{x:0,y:0}:{x:e.x/f,y:e.y/f}},t.dot=function(e,f){return e.x*f.x+e.y*f.y},t.cross=function(e,f){return e.x*f.y-e.y*f.x},t.cross3=function(e,f,a){return(f.x-e.x)*(a.y-e.y)-(f.y-e.y)*(a.x-e.x)},t.add=function(e,f,a){return a||(a={}),a.x=e.x+f.x,a.y=e.y+f.y,a},t.sub=function(e,f,a){return a||(a={}),a.x=e.x-f.x,a.y=e.y-f.y,a},t.mult=function(e,f){return{x:e.x*f,y:e.y*f}},t.div=function(e,f){return{x:e.x/f,y:e.y/f}},t.perp=function(e,f){return f=f===!0?-1:1,{x:f*-e.y,y:f*e.x}},t.neg=function(e){return{x:-e.x,y:-e.y}},t.angle=function(e,f){return Math.atan2(f.y-e.y,f.x-e.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(i,m){var t={};i.exports=t,function(){t.create=function(e){var f={min:{x:0,y:0},max:{x:0,y:0}};return e&&t.update(f,e),f},t.update=function(e,f,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<f.length;o++){var s=f[o];s.x>e.max.x&&(e.max.x=s.x),s.x<e.min.x&&(e.min.x=s.x),s.y>e.max.y&&(e.max.y=s.y),s.y<e.min.y&&(e.min.y=s.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},t.contains=function(e,f){return f.x>=e.min.x&&f.x<=e.max.x&&f.y>=e.min.y&&f.y<=e.max.y},t.overlaps=function(e,f){return e.min.x<=f.max.x&&e.max.x>=f.min.x&&e.max.y>=f.min.y&&e.min.y<=f.max.y},t.translate=function(e,f){e.min.x+=f.x,e.max.x+=f.x,e.min.y+=f.y,e.max.y+=f.y},t.shift=function(e,f){var a=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=f.x,e.max.x=f.x+a,e.min.y=f.y,e.max.y=f.y+o}}()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(0),a=t(11),o=t(502),s=new f({Mixins:[a.Alpha,a.Flip,a.Visible],initialize:function(r,u,h,l,d,v,c,g){this.layer=r,this.index=u,this.x=h,this.y=l,this.width=d,this.height=v,this.right,this.bottom,this.baseWidth=c!==void 0?c:d,this.baseHeight=g!==void 0?g:v,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(n,r){return!(n<this.pixelX||r<this.pixelY||n>this.right||r>this.bottom)},copy:function(n){return this.index=n.index,this.alpha=n.alpha,this.properties=n.properties,this.visible=n.visible,this.setFlip(n.flipX,n.flipY),this.tint=n.tint,this.rotation=n.rotation,this.collideUp=n.collideUp,this.collideDown=n.collideDown,this.collideLeft=n.collideLeft,this.collideRight=n.collideRight,this.collisionCallback=n.collisionCallback,this.collisionCallbackContext=n.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(n){var r=this.tilemapLayer;return r?r.tileToWorldX(this.x,n):this.x*this.baseWidth},getRight:function(n){var r=this.tilemapLayer;return r?this.getLeft(n)+this.width*r.scaleX:this.getLeft(n)+this.width},getTop:function(n){var r=this.tilemapLayer;return r?r.tileToWorldY(this.y,n)-(this.height-this.baseHeight)*r.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(n){var r=this.tilemapLayer;return r?this.getTop(n)+this.height*r.scaleY:this.getTop(n)+this.height},getBounds:function(n,r){return r===void 0&&(r=new o),r.x=this.getLeft(),r.y=this.getTop(),r.width=this.getRight()-r.x,r.height=this.getBottom()-r.y,r},getCenterX:function(n){return(this.getLeft(n)+this.getRight(n))/2},getCenterY:function(n){return(this.getTop(n)+this.getBottom(n))/2},intersects:function(n,r,u,h){return!(u<=this.pixelX||h<=this.pixelY||n>=this.right||r>=this.bottom)},isInteresting:function(n,r){return n&&r?this.canCollide||this.hasInterestingFace:n?this.collides:r?this.hasInterestingFace:!1},resetCollision:function(n){if(n===void 0&&(n=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,n){var r=this.tilemapLayer;r&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(n,r,u,h,l){if(r===void 0&&(r=n),u===void 0&&(u=n),h===void 0&&(h=n),l===void 0&&(l=!0),this.collideLeft=n,this.collideRight=r,this.collideUp=u,this.collideDown=h,this.faceLeft=n,this.faceRight=r,this.faceTop=u,this.faceBottom=h,l){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(n,r){return n===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=n,this.collisionCallbackContext=r),this},setSize:function(n,r,u,h){return n!==void 0&&(this.width=n),r!==void 0&&(this.height=r),u!==void 0&&(this.baseWidth=u),h!==void 0&&(this.baseHeight=h),this.updatePixelXY(),this},updatePixelXY:function(){var n=this.layer.orientation;if(n===e.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(n===e.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(n===e.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(n===e.HEXAGONAL){var r=this.layer.hexSideLength,u=(this.baseHeight-r)/2+r;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*u}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var n=this.layer.tilemapLayer;if(n){var r=n.gidMap[this.index];if(r)return r}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var n=this.tilemapLayer;return n?n.tilemap:null}}});i.exports=s},function(i,m,t){var e={};i.exports=e;var f=t(64),a=t(32),o=t(41),s=t(84),n=t(83),r=t(1393);(function(){e.rectangle=function(u,h,l,d,v){v=v||{};var c={label:"Rectangle Body",position:{x:u,y:h},vertices:f.fromPath("L 0 0 L "+l+" 0 L "+l+" "+d+" L 0 "+d)};if(v.chamfer){var g=v.chamfer;c.vertices=f.chamfer(c.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete v.chamfer}return o.create(a.extend({},c,v))},e.trapezoid=function(u,h,l,d,v,c){c=c||{},v*=.5;var g=(1-v*2)*l,x=l*v,A=x+g,T=A+x,E;v<.5?E="L 0 0 L "+x+" "+-d+" L "+A+" "+-d+" L "+T+" 0":E="L 0 0 L "+A+" "+-d+" L "+T+" 0";var S={label:"Trapezoid Body",position:{x:u,y:h},vertices:f.fromPath(E)};if(c.chamfer){var C=c.chamfer;S.vertices=f.chamfer(S.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete c.chamfer}return o.create(a.extend({},S,c))},e.circle=function(u,h,l,d,v){d=d||{};var c={label:"Circle Body",circleRadius:l};v=v||25;var g=Math.ceil(Math.max(10,Math.min(v,l)));return g%2===1&&(g+=1),e.polygon(u,h,g,l,a.extend({},c,d))},e.polygon=function(u,h,l,d,v){if(v=v||{},l<3)return e.circle(u,h,d,v);for(var c=2*Math.PI/l,g="",x=c*.5,A=0;A<l;A+=1){var T=x+A*c,E=Math.cos(T)*d,S=Math.sin(T)*d;g+="L "+E.toFixed(3)+" "+S.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:u,y:h},vertices:f.fromPath(g)};if(v.chamfer){var P=v.chamfer;C.vertices=f.chamfer(C.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete v.chamfer}return o.create(a.extend({},C,v))},e.fromVertices=function(u,h,l,d,v,c,g){var x,A,T,E,S,C;for(d=d||{},A=[],v=typeof v<"u"?v:!1,c=typeof c<"u"?c:.01,g=typeof g<"u"?g:10,r||a.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),a.isArray(l[0])||(l=[l]),C=0;C<l.length;C+=1)if(E=l[C],T=f.isConvex(E),T||!r)T?E=f.clockwiseSort(E):E=f.hull(E),A.push({position:{x:u,y:h},vertices:E});else{var P=E.map(function(F){return[F.x,F.y]});r.makeCCW(P),c!==!1&&r.removeCollinearPoints(P,c);var R=r.quickDecomp(P);for(S=0;S<R.length;S++){var M=R[S],L=M.map(function(F){return{x:F[0],y:F[1]}});g>0&&f.area(L)<g||A.push({position:f.centre(L),vertices:L})}}for(S=0;S<A.length;S++)A[S]=o.create(a.extend(A[S],d));return v&&e.flagCoincidentParts(A,5),A.length>1?(x=o.create(a.extend({parts:A.slice(0)},d)),o.setPosition(x,{x:u,y:h}),x):A[0]},e.flagCoincidentParts=function(u,h){h===void 0&&(h=5);for(var l=0;l<u.length;l++)for(var d=u[l],v=l+1;v<u.length;v++){var c=u[v];if(s.overlaps(d.bounds,c.bounds))for(var g=d.vertices,x=c.vertices,A=0;A<d.vertices.length;A++)for(var T=0;T<c.vertices.length;T++){var E=n.magnitudeSquared(n.sub(g[(A+1)%g.length],x[T])),S=n.magnitudeSquared(n.sub(g[A],x[(T+1)%x.length]));E<h&&S<h&&(g[A].isInternal=!0,x[T].isInternal=!0)}}return u}})()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX+e.width*.5};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.width*e.originX;return e.x=f+a-e.width*.5,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY+e.height*.5};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.height*e.originY;return e.y=f+a-e.height*.5,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),f=function(a,o,s,n){n===void 0&&(n=a);var r;if(!Array.isArray(o))return r=a.indexOf(o),r!==-1?(e(a,r),s&&s.call(n,o),o):null;for(var u=o.length-1,h=[];u>=0;){var l=o[u];r=a.indexOf(l),r!==-1&&(e(a,r),h.push(l),s&&s.call(n,l)),u--}return h};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(199),a=t(10),o=t(3),s=new e({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(n,r){return r===void 0&&(r=32),n.strokePoints(this.getPoints(r))},getBounds:function(n,r){n||(n=new a),r===void 0&&(r=16);var u=this.getLength();r>u&&(r=u/2);var h=Math.max(1,Math.round(u/r));return f(this.getSpacedPoints(h),n)},getDistancePoints:function(n){var r=this.getLength(),u=Math.max(1,r/n);return this.getSpacedPoints(u)},getEndPoint:function(n){return n===void 0&&(n=new o),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],u,h=this.getPoint(0,this._tmpVec2A),l=0;r.push(0);for(var d=1;d<=n;d++)u=this.getPoint(d/n,this._tmpVec2B),l+=u.distance(h),r.push(l),h.copy(u);return this.cacheArcLengths=r,r},getPointAt:function(n,r){var u=this.getUtoTmapping(n);return this.getPoint(u,r)},getPoints:function(n,r,u){u===void 0&&(u=[]),n||(r?n=this.getLength()/r:n=this.defaultDivisions);for(var h=0;h<=n;h++)u.push(this.getPoint(h/n));return u},getRandomPoint:function(n){return n===void 0&&(n=new o),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,r,u){u===void 0&&(u=[]),n||(r?n=this.getLength()/r:n=this.defaultDivisions);for(var h=0;h<=n;h++){var l=this.getUtoTmapping(h/n,null,n);u.push(this.getPoint(l))}return u},getStartPoint:function(n){return n===void 0&&(n=new o),this.getPointAt(0,n)},getTangent:function(n,r){r===void 0&&(r=new o);var u=1e-4,h=n-u,l=n+u;return h<0&&(h=0),l>1&&(l=1),this.getPoint(h,this._tmpVec2A),this.getPoint(l,r),r.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,r){var u=this.getUtoTmapping(n);return this.getTangent(u,r)},getTFromDistance:function(n,r){return n<=0?0:this.getUtoTmapping(0,n,r)},getUtoTmapping:function(n,r,u){var h=this.getLengths(u),l=0,d=h.length,v;r?v=Math.min(r,h[d-1]):v=n*h[d-1];for(var c=0,g=d-1,x;c<=g;)if(l=Math.floor(c+(g-c)/2),x=h[l]-v,x<0)c=l+1;else if(x>0)g=l-1;else{g=l;break}if(l=g,h[l]===v)return l/(d-1);var A=h[l],T=h[l+1],E=T-A,S=(v-A)/E;return(l+S)/(d-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s){s===void 0&&(s=new e);var n=a.x1,r=a.y1,u=a.x2,h=a.y2,l=o.x1,d=o.y1,v=o.x2,c=o.y2,g=(v-l)*(r-d)-(c-d)*(n-l),x=(u-n)*(r-d)-(h-r)*(n-l),A=(c-d)*(u-n)-(v-l)*(h-r);if(A===0)return!1;var T=g/A,E=x/A;return T>=0&&T<=1&&E>=0&&E<=1?(s.x=n+T*(u-n),s.y=r+T*(h-r),!0):!1};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=function(a,o,s){return a=e(a,0,1),(s-o)*a+o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e&&e.hasOwnProperty(f)?e[f]:a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(315),a=new e({initialize:function(s,n){this.parent=s,this.events=n,n||(this.events=s.events?s.events:s),this.list={},this.values={},this._frozen=!1,!s.hasOwnProperty("sys")&&this.events&&this.events.once(f.DESTROY,this.destroy,this)},get:function(o){var s=this.list;if(Array.isArray(o)){for(var n=[],r=0;r<o.length;r++)n.push(s[o[r]]);return n}else return s[o]},getAll:function(){var o={};for(var s in this.list)this.list.hasOwnProperty(s)&&(o[s]=this.list[s]);return o},query:function(o){var s={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(o)&&(s[n]=this.list[n]);return s},set:function(o,s){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,s);for(var n in o)this.setValue(n,o[n]);return this},inc:function(o,s){if(this._frozen)return this;s===void 0&&(s=1);var n=this.get(o);return n===void 0&&(n=0),this.set(o,n+s),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,s){if(this._frozen)return this;if(this.has(o))this.values[o]=s;else{var n=this,r=this.list,u=this.events,h=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return r[o]},set:function(l){if(!n._frozen){var d=r[o];r[o]=l,u.emit(f.CHANGE_DATA,h,o,l,d),u.emit(f.CHANGE_DATA_KEY+o,h,l,d)}}}),r[o]=s,u.emit(f.SET_DATA,h,o,s)}return this},each:function(o,s){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var u in this.list)n[1]=u,n[2]=this.list[u],o.apply(s,n);return this},merge:function(o,s){s===void 0&&(s=!0);for(var n in o)o.hasOwnProperty(n)&&(s||!s&&!this.has(n))&&this.setValue(n,o[n]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var s=0;s<o.length;s++)this.removeValue(o[s]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var s=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(f.REMOVE_DATA,this.parent,o,s)}return this},pop:function(o){var s=void 0;return!this._frozen&&this.has(o)&&(s=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(f.REMOVE_DATA,this.parent,o,s)),s},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(f.CHANGE_DATA),this.events.off(f.SET_DATA),this.events.off(f.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var s in this.list)this.list[s]!==void 0&&o++;return o}}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var s=0;s<o.length;s++)this.set(o[s][0],o[s][1])},set:function(a,o){return this.has(a)||this.size++,this.entries[a]=o,this},get:function(a){if(this.has(a))return this.entries[a]},getArray:function(){var a=[],o=this.entries;for(var s in o)a.push(o[s]);return a},has:function(a){return this.entries.hasOwnProperty(a)},delete:function(a){return this.has(a)&&(delete this.entries[a],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(a){delete this.entries[a]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var a=[],o=this.entries;for(var s in o)a.push(o[s]);return a},dump:function(){var a=this.entries;console.group("Map");for(var o in a)console.log(o,a[o]);console.groupEnd()},each:function(a){var o=this.entries;for(var s in o)if(a(s,o[s])===!1)break;return this},contains:function(a){var o=this.entries;for(var s in o)if(o[s]===a)return!0;return!1},merge:function(a,o){o===void 0&&(o=!1);var s=this.entries,n=a.entries;for(var r in n)s.hasOwnProperty(r)&&o?s[r]=n[r]:this.set(r,n[r]);return this}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e<<16|f<<8|a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(i,m,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var f={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function a(){if(typeof importScripts=="function")return f;var o=navigator.userAgent;/Windows/.test(o)?f.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(f.iOS=!0,f.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),f.iOSVersion=parseInt(RegExp.$1,10)):f.macOS=!0:/Android/.test(o)?f.android=!0:/Linux/.test(o)?f.linux=!0:/iP[ao]d|iPhone/i.test(o)?(f.iOS=!0,navigator.appVersion.match(/OS (\d+)/),f.iOSVersion=parseInt(RegExp.$1,10),f.iPhone=o.toLowerCase().indexOf("iphone")!==-1,f.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?f.kindle=!0:/CrOS/.test(o)&&(f.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(f.android=!1,f.iOS=!1,f.macOS=!1,f.windows=!0,f.windowsPhone=!0);var s=/Silk/.test(o);return(f.windows||f.macOS||f.linux&&!s||f.chromeOS)&&(f.desktop=!0),(f.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(f.desktop=!1),navigator.standalone&&(f.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(f.cordova=!0),window.ejecta!==void 0&&(f.ejecta=!0)),typeof e<"u"&&e.versions&&e.versions.node&&(f.node=!0),f.node&&typeof e.versions=="object"&&(f.nodeWebkit=!!e.versions["node-webkit"],f.electron=!!e.versions.electron),/Crosswalk/.test(o)&&(f.crosswalk=!0),f.pixelRatio=window.devicePixelRatio||1,f}i.exports=a()}).call(this,t(807))},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(59),a=t(2),o=t(878),s=t(879),n=t(25),r=t(12),u=t(107),h=t(58),l=new e({Extends:h,initialize:function(v){var c=v.game.renderer,g=a(v,"fragShader",o);v.fragShader=r.parseFragmentShaderMaxTextures(g,c.maxTextures),v.vertShader=a(v,"vertShader",s),v.attributes=a(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),h.call(this,v),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){h.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(d,v,c){this.manager.set(this,d);var g=this._tempMatrix1,x=this._tempMatrix2,A=this._tempMatrix3,T=d.frame,E=T.glTexture,S=T.u0,C=T.v0,P=T.u1,R=T.v1,M=T.x,L=T.y,F=T.cutWidth,I=T.cutHeight,w=T.customPivot,U=d.displayOriginX,z=d.displayOriginY,W=-U+M,H=-z+L;if(d.isCropped){var D=d._crop;(D.flipX!==d.flipX||D.flipY!==d.flipY)&&T.updateCropUVs(D,d.flipX,d.flipY),S=D.u0,C=D.v0,P=D.u1,R=D.v1,F=D.width,I=D.height,M=D.x,L=D.y,W=-U+M,H=-z+L}var O=1,B=1;d.flipX&&(w||(W+=-T.realWidth+U*2),O=-1),(d.flipY||T.source.isGLTexture&&!E.flipY)&&(w||(H+=-T.realHeight+z*2),B=-1),x.applyITRS(d.x,d.y,d.rotation,d.scaleX*O,d.scaleY*B),g.copyFrom(v.matrix),c?(g.multiplyWithOffset(c,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),x.e=d.x,x.f=d.y):(x.e-=v.scrollX*d.scrollFactorX,x.f-=v.scrollY*d.scrollFactorY),g.multiply(x,A);var N=W+F,G=H+I,V=v.roundPixels,Y=A.getXRound(W,H,V),X=A.getYRound(W,H,V),b=A.getXRound(W,G,V),Q=A.getYRound(W,G,V),K=A.getXRound(N,G,V),$=A.getYRound(N,G,V),Z=A.getXRound(N,H,V),k=A.getYRound(N,H,V),J=r.getTintAppendFloatAlpha,tt=v.alpha,ut=J(d.tintTopLeft,tt*d._alphaTL),rt=J(d.tintTopRight,tt*d._alphaTR),it=J(d.tintBottomLeft,tt*d._alphaBL),j=J(d.tintBottomRight,tt*d._alphaBR);this.shouldFlush(6)&&this.flush();var vt=this.setGameObject(d,T);this.manager.preBatch(d),this.batchQuad(d,Y,X,b,Q,K,$,Z,k,S,C,P,R,ut,rt,it,j,d.tintFill,E,vt),this.manager.postBatch(d)},batchTexture:function(d,v,c,g,x,A,T,E,S,C,P,R,M,L,F,I,w,U,z,W,H,D,O,B,N,G,V,Y,X,b,Q,K){this.manager.set(this,d);var $=this._tempMatrix1,Z=this._tempMatrix2,k=this._tempMatrix3,J=U/c+V,tt=z/g+Y,ut=(U+W)/c+V,rt=(z+H)/g+Y,it=T,j=E,vt=-I,nt=-w;if(d.isCropped){var ht=d._crop,qt=ht.width,_t=ht.height;it=qt,j=_t,T=qt,E=_t,U=ht.x,z=ht.y;var Ct=U,xt=z;R&&(Ct=W-ht.x-qt),M&&(xt=H-ht.y-_t),J=Ct/c+V,tt=xt/g+Y,ut=(Ct+qt)/c+V,rt=(xt+_t)/g+Y,vt=-I+U,nt=-w+z}M=M^(!Q&&v.isRenderTexture?1:0),R&&(it*=-1,vt+=T),M&&(j*=-1,nt+=E);var Ot=vt+it,Lt=nt+j;Z.applyITRS(x,A,P,S,C),$.copyFrom(X.matrix),b?($.multiplyWithOffset(b,-X.scrollX*L,-X.scrollY*F),Z.e=x,Z.f=A):(Z.e-=X.scrollX*L,Z.f-=X.scrollY*F),$.multiply(Z,k);var Rt=X.roundPixels,te=k.getXRound(vt,nt,Rt),me=k.getYRound(vt,nt,Rt),ge=k.getXRound(vt,Lt,Rt),xe=k.getYRound(vt,Lt,Rt),ye=k.getXRound(Ot,Lt,Rt),Ae=k.getYRound(Ot,Lt,Rt),Te=k.getXRound(Ot,nt,Rt),Iu=k.getYRound(Ot,nt,Rt);K===void 0&&(K=this.renderer.setTexture2D(v)),d&&this.manager.preBatch(d),this.batchQuad(d,te,me,ge,xe,ye,Ae,Te,Iu,J,tt,ut,rt,D,O,B,N,G,v,K),d&&this.manager.postBatch(d)},batchTextureFrame:function(d,v,c,g,x,A,T){this.manager.set(this);var E=this._tempMatrix1.copyFrom(A),S=this._tempMatrix2,C=v+d.width,P=c+d.height;T?E.multiply(T,S):S=E;var R=S.getX(v,c),M=S.getY(v,c),L=S.getX(v,P),F=S.getY(v,P),I=S.getX(C,P),w=S.getY(C,P),U=S.getX(C,c),z=S.getY(C,c),W=this.renderer.setTextureSource(d.source);g=r.getTintAppendFloatAlpha(g,x),this.batchQuad(null,R,M,L,F,I,w,U,z,d.u0,d.v0,d.u1,d.v1,g,g,g,g,0,d.glTexture,W)},batchFillRect:function(d,v,c,g,x,A){this.renderer.pipelines.set(this);var T=this.calcMatrix;A&&A.multiply(x,T);var E=d+c,S=v+g,C=T.getX(d,v),P=T.getY(d,v),R=T.getX(d,S),M=T.getY(d,S),L=T.getX(E,S),F=T.getY(E,S),I=T.getX(E,v),w=T.getY(E,v),U=this.fillTint;this.batchQuad(null,C,P,R,M,L,F,I,w,0,0,1,1,U.TL,U.TR,U.BL,U.BR,2)},batchFillTriangle:function(d,v,c,g,x,A,T,E){this.renderer.pipelines.set(this);var S=this.calcMatrix;E&&E.multiply(T,S);var C=S.getX(d,v),P=S.getY(d,v),R=S.getX(c,g),M=S.getY(c,g),L=S.getX(x,A),F=S.getY(x,A),I=this.fillTint;this.batchTri(null,C,P,R,M,L,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(d,v,c,g,x,A,T,E,S){var C=this.tempTriangle;C[0].x=d,C[0].y=v,C[0].width=T,C[1].x=c,C[1].y=g,C[1].width=T,C[2].x=x,C[2].y=A,C[2].width=T,C[3].x=d,C[3].y=v,C[3].width=T,this.batchStrokePath(C,T,!1,E,S)},batchFillPath:function(d,v,c){this.renderer.pipelines.set(this);var g=this.calcMatrix;c&&c.multiply(v,g);for(var x=d.length,A=this.polygonCache,T,E,S=this.fillTint.TL,C=this.fillTint.TR,P=this.fillTint.BL,R=0;R<x;++R)E=d[R],A.push(E.x,E.y);T=f(A),x=T.length;for(var M=0;M<x;M+=3){var L=T[M+0]*2,F=T[M+1]*2,I=T[M+2]*2,w=A[L+0],U=A[L+1],z=A[F+0],W=A[F+1],H=A[I+0],D=A[I+1],O=g.getX(w,U),B=g.getY(w,U),N=g.getX(z,W),G=g.getY(z,W),V=g.getX(H,D),Y=g.getY(H,D);this.batchTri(null,O,B,N,G,V,Y,0,0,1,1,S,C,P,2)}A.length=0},batchStrokePath:function(d,v,c,g,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var A=d.length-1,T=0;T<A;T++){var E=d[T],S=d[T+1];this.batchLine(E.x,E.y,S.x,S.y,E.width/2,S.width/2,v,T,!c&&T===A-1,g,x)}},batchLine:function(d,v,c,g,x,A,T,E,S,C,P){this.renderer.pipelines.set(this);var R=this.calcMatrix;P&&P.multiply(C,R);var M=c-d,L=g-v,F=Math.sqrt(M*M+L*L),I=x*(g-v)/F,w=x*(d-c)/F,U=A*(g-v)/F,z=A*(d-c)/F,W=c-U,H=g-z,D=d-I,O=v-w,B=c+U,N=g+z,G=d+I,V=v+w,Y=R.getX(W,H),X=R.getY(W,H),b=R.getX(D,O),Q=R.getY(D,O),K=R.getX(B,N),$=R.getY(B,N),Z=R.getX(G,V),k=R.getY(G,V),J=this.strokeTint,tt=J.TL,ut=J.TR,rt=J.BL,it=J.BR;if(this.batchQuad(null,Z,k,b,Q,Y,X,K,$,0,0,1,1,tt,ut,rt,it,2),!(T<=2)){var j=this.prevQuad,vt=this.firstQuad;E>0&&j[4]?this.batchQuad(null,Z,k,b,Q,j[0],j[1],j[2],j[3],0,0,1,1,tt,ut,rt,it,2):(vt[0]=Z,vt[1]=k,vt[2]=b,vt[3]=Q,vt[4]=1),S&&vt[4]?this.batchQuad(null,Y,X,K,$,vt[0],vt[1],vt[2],vt[3],0,0,1,1,tt,ut,rt,it,2):(j[0]=Y,j[1]=X,j[2]=K,j[3]=$,j[4]=1)}}});i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),a=t(17),o=new e({initialize:function(n,r,u,h,l,d,v){this.texture=n,this.name=r,this.source=n.source[u],this.sourceIndex=u,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(d,v,h,l)},setSize:function(s,n,r,u){r===void 0&&(r=0),u===void 0&&(u=0),this.cutX=r,this.cutY=u,this.cutWidth=s,this.cutHeight=n,this.width=s,this.height=n,this.halfWidth=Math.floor(s*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(s/2),this.centerY=Math.floor(n/2);var h=this.data,l=h.cut;l.x=r,l.y=u,l.w=s,l.h=n,l.r=r+s,l.b=u+n,h.sourceSize.w=s,h.sourceSize.h=n,h.spriteSourceSize.w=s,h.spriteSourceSize.h=n,h.radius=.5*Math.sqrt(s*s+n*n);var d=h.drawImage;return d.x=r,d.y=u,d.width=s,d.height=n,this.updateUVs()},setTrim:function(s,n,r,u,h,l){var d=this.data,v=d.spriteSourceSize;return d.trim=!0,d.sourceSize.w=s,d.sourceSize.h=n,v.x=r,v.y=u,v.w=h,v.h=l,v.r=r+h,v.b=u+l,this.x=r,this.y=u,this.width=h,this.height=l,this.halfWidth=h*.5,this.halfHeight=l*.5,this.centerX=Math.floor(h/2),this.centerY=Math.floor(l/2),this.updateUVs()},setCropUVs:function(s,n,r,u,h,l,d){var v=this.cutX,c=this.cutY,g=this.cutWidth,x=this.cutHeight,A=this.realWidth,T=this.realHeight;n=f(n,0,A),r=f(r,0,T),u=f(u,0,A-n),h=f(h,0,T-r);var E=v+n,S=c+r,C=u,P=h,R=this.data;if(R.trim){var M=R.spriteSourceSize;u=f(u,0,g-n),h=f(h,0,x-r);var L=n+u,F=r+h,I=!(M.r<n||M.b<r||M.x>L||M.y>F);if(I){var w=Math.max(M.x,n),U=Math.max(M.y,r),z=Math.min(M.r,L)-w,W=Math.min(M.b,F)-U;C=z,P=W,l?E=v+(g-(w-M.x)-z):E=v+(w-M.x),d?S=c+(x-(U-M.y)-W):S=c+(U-M.y),n=w,r=U,u=z,h=W}else E=0,S=0,C=0,P=0}else l&&(E=v+(g-n-u)),d&&(S=c+(x-r-h));var H=this.source.width,D=this.source.height;return s.u0=Math.max(0,E/H),s.v0=Math.max(0,S/D),s.u1=Math.min(1,(E+C)/H),s.v1=Math.min(1,(S+P)/D),s.x=n,s.y=r,s.cx=E,s.cy=S,s.cw=C,s.ch=P,s.width=u,s.height=h,s.flipX=l,s.flipY=d,s},updateCropUVs:function(s,n,r){return this.setCropUVs(s,s.x,s.y,s.width,s.height,n,r)},setUVs:function(s,n,r,u,h,l){var d=this.data.drawImage;return d.width=s,d.height=n,this.u0=r,this.v0=u,this.u1=h,this.v1=l,this},updateUVs:function(){var s=this.cutX,n=this.cutY,r=this.cutWidth,u=this.cutHeight,h=this.data.drawImage;h.width=r,h.height=u;var l=this.source.width,d=this.source.height;return this.u0=s/l,this.v0=n/d,this.u1=(s+r)/l,this.v1=(n+u)/d,this},updateUVsInverted:function(){var s=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/s,this.v0=this.cutY/n,this.u1=this.cutX/s,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var s=new o(this.texture,this.name,this.sourceIndex);return s.cutX=this.cutX,s.cutY=this.cutY,s.cutWidth=this.cutWidth,s.cutHeight=this.cutHeight,s.x=this.x,s.y=this.y,s.width=this.width,s.height=this.height,s.halfWidth=this.halfWidth,s.halfHeight=this.halfHeight,s.centerX=this.centerX,s.centerY=this.centerY,s.rotated=this.rotated,s.data=a(!0,s.data,this.data),s.updateUVs(),s},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),f=t(0),a=t(1),o=t(79),s=new f({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(n,r){return r?e.Add(this.list,n):e.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,r,u){return u?e.AddAt(this.list,n,r):e.AddAt(this.list,n,r,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,r){return n?(r===void 0&&(r=function(u,h){return u[n]-h[n]}),o(this.list,r),this):this},getByName:function(n){return e.GetFirst(this.list,"name",n)},getRandom:function(n,r){return e.GetRandom(this.list,n,r)},getFirst:function(n,r,u,h){return e.GetFirst(this.list,n,r,u,h)},getAll:function(n,r,u,h){return e.GetAll(this.list,n,r,u,h)},count:function(n,r){return e.CountAllMatching(this.list,n,r)},swap:function(n,r){e.Swap(this.list,n,r)},moveTo:function(n,r){return e.MoveTo(this.list,n,r)},moveAbove:function(n,r){return e.MoveAbove(this.list,n,r)},moveBelow:function(n,r){return e.MoveBelow(this.list,n,r)},remove:function(n,r){return r?e.Remove(this.list,n):e.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,r){return r?e.RemoveAt(this.list,n):e.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,r,u){return u?e.RemoveBetween(this.list,n,r):e.RemoveBetween(this.list,n,r,this.removeCallback,this)},removeAll:function(n){for(var r=this.list.length;r--;)this.remove(this.list[r],n);return this},bringToTop:function(n){return e.BringToTop(this.list,n)},sendToBack:function(n){return e.SendToBack(this.list,n)},moveUp:function(n){return e.MoveUp(this.list,n),n},moveDown:function(n){return e.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(n,r){return e.Replace(this.list,n,r)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,r,u,h){return e.SetAll(this.list,n,r,u,h),this},each:function(n,r){for(var u=[null],h=2;h<arguments.length;h++)u.push(arguments[h]);for(h=0;h<this.list.length;h++)u[0]=this.list[h],n.apply(r,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(112),a=t(445),o=t(446),s=t(56),n=t(180),r=new e({initialize:function(h,l,d,v){h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),this.type=s.ELLIPSE,this.x=h,this.y=l,this.width=d,this.height=v},contains:function(u,h){return f(this,u,h)},getPoint:function(u,h){return a(this,u,h)},getPoints:function(u,h,l){return o(this,u,h,l)},getRandomPoint:function(u){return n(this,u)},setTo:function(u,h,l,d){return this.x=u,this.y=h,this.width=l,this.height=d,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,h){return h===void 0&&(h=u),this.x=u,this.y=h,this},setSize:function(u,h){return h===void 0&&(h=u),this.width=u,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});i.exports=r},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(e.width<=0||e.height<=0)return!1;var o=(f-e.x)/e.width,s=(a-e.y)/e.height;return o*=o,s*=s,o+s<.25};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(275),f=t(0),a=t(75),o=t(9),s=t(207),n=t(2),r=t(6),u=t(7),h=t(437),l=t(149),d=t(73),v=new f({Extends:o,initialize:function(g,x,A){o.call(this),A?x&&!Array.isArray(x)&&(x=[x]):Array.isArray(x)?u(x[0])&&(A=x,x=null):u(x)&&(A=x,x=null),this.scene=g,this.children=new l,this.isParent=!0,this.type="Group",this.classType=n(A,"classType",d),this.name=n(A,"name",""),this.active=n(A,"active",!0),this.maxSize=n(A,"maxSize",-1),this.defaultKey=n(A,"defaultKey",null),this.defaultFrame=n(A,"defaultFrame",null),this.runChildUpdate=n(A,"runChildUpdate",!1),this.createCallback=n(A,"createCallback",null),this.removeCallback=n(A,"removeCallback",null),this.createMultipleCallback=n(A,"createMultipleCallback",null),this.internalCreateCallback=n(A,"internalCreateCallback",null),this.internalRemoveCallback=n(A,"internalRemoveCallback",null),x&&this.addMultiple(x),A&&this.createMultiple(A),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(c,g,x,A,T,E){if(c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=this.defaultKey),A===void 0&&(A=this.defaultFrame),T===void 0&&(T=!0),E===void 0&&(E=!0),this.isFull())return null;var S=new this.classType(this.scene,c,g,x,A);return S.addToDisplayList(this.scene.sys.displayList),S.addToUpdateList(),S.visible=T,S.setActive(E),this.add(S),S},createMultiple:function(c){if(this.isFull())return[];Array.isArray(c)||(c=[c]);var g=[];if(c[0].key)for(var x=0;x<c.length;x++){var A=this.createFromConfig(c[x]);g=g.concat(A)}return g},createFromConfig:function(c){if(this.isFull())return[];this.classType=n(c,"classType",this.classType);var g=n(c,"key",void 0),x=n(c,"frame",null),A=n(c,"visible",!0),T=n(c,"active",!0),E=[];if(g===void 0)return E;Array.isArray(g)||(g=[g]),Array.isArray(x)||(x=[x]);var S=n(c,"repeat",0),C=n(c,"randomKey",!1),P=n(c,"randomFrame",!1),R=n(c,"yoyo",!1),M=n(c,"quantity",!1),L=n(c,"frameQuantity",1),F=n(c,"max",0),I=h(g,x,{max:F,qty:M||L,random:C,randomB:P,repeat:S,yoyo:R});c.createCallback&&(this.createCallback=c.createCallback),c.removeCallback&&(this.removeCallback=c.removeCallback);for(var w=0;w<I.length;w++){var U=this.create(0,0,I[w].a,I[w].b,A,T);if(!U)break;E.push(U)}var z=r(c,"setXY.x",0),W=r(c,"setXY.y",0),H=r(c,"setXY.stepX",0),D=r(c,"setXY.stepY",0);e.SetXY(E,z,W,H,D);var O=r(c,"setRotation.value",0),B=r(c,"setRotation.step",0);e.SetRotation(E,O,B);var N=r(c,"setScale.x",1),G=r(c,"setScale.y",N),V=r(c,"setScale.stepX",0),Y=r(c,"setScale.stepY",0);e.SetScale(E,N,G,V,Y);var X=r(c,"setOrigin.x",.5),b=r(c,"setOrigin.y",X),Q=r(c,"setOrigin.stepX",0),K=r(c,"setOrigin.stepY",0);e.SetOrigin(E,X,b,Q,K);var $=r(c,"setAlpha.value",1),Z=r(c,"setAlpha.step",0);e.SetAlpha(E,$,Z);var k=r(c,"setDepth.value",0),J=r(c,"setDepth.step",0);e.SetDepth(E,k,J);var tt=r(c,"setScrollFactor.x",1),ut=r(c,"setScrollFactor.y",tt),rt=r(c,"setScrollFactor.stepX",0),it=r(c,"setScrollFactor.stepY",0);e.SetScrollFactor(E,tt,ut,rt,it);var j=n(c,"hitArea",null),vt=n(c,"hitAreaCallback",null);j&&e.SetHitArea(E,j,vt);var nt=n(c,"gridAlign",!1);return nt&&e.GridAlign(E,nt),this.createMultipleCallback&&this.createMultipleCallback.call(this,E),E},preUpdate:function(c,g){if(!(!this.runChildUpdate||this.children.size===0))for(var x=this.children.entries.slice(),A=0;A<x.length;A++){var T=x[A];T.active&&T.update(c,g)}},add:function(c,g){return g===void 0&&(g=!1),this.isFull()?this:(this.children.set(c),this.internalCreateCallback&&this.internalCreateCallback.call(this,c),this.createCallback&&this.createCallback.call(this,c),g&&(c.addToDisplayList(this.scene.sys.displayList),c.addToUpdateList()),c.on(a.DESTROY,this.remove,this),this)},addMultiple:function(c,g){if(g===void 0&&(g=!1),Array.isArray(c))for(var x=0;x<c.length;x++)this.add(c[x],g);return this},remove:function(c,g,x){return g===void 0&&(g=!1),x===void 0&&(x=!1),this.children.contains(c)?(this.children.delete(c),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,c),this.removeCallback&&this.removeCallback.call(this,c),c.off(a.DESTROY,this.remove,this),x?c.destroy():g&&(c.removeFromDisplayList(),c.removeFromUpdateList()),this):this},clear:function(c,g){c===void 0&&(c=!1),g===void 0&&(g=!1);for(var x=this.children,A=0;A<x.size;A++){var T=x.entries[A];T.off(a.DESTROY,this.remove,this),g?T.destroy():c&&(T.removeFromDisplayList(),T.removeFromUpdateList())}return this.children.clear(),this},contains:function(c){return this.children.contains(c)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(c,g,x,A){return s(this.children.entries,c,g,x,A)},getFirst:function(c,g,x,A,T,E,S){return this.getHandler(!0,1,c,g,x,A,T,E,S)},getFirstNth:function(c,g,x,A,T,E,S,C){return this.getHandler(!0,c,g,x,A,T,E,S,C)},getLast:function(c,g,x,A,T,E,S){return this.getHandler(!1,1,c,g,x,A,T,E,S)},getLastNth:function(c,g,x,A,T,E,S,C){return this.getHandler(!1,c,g,x,A,T,E,S,C)},getHandler:function(c,g,x,A,T,E,S,C,P){x===void 0&&(x=!1),A===void 0&&(A=!1);var R,M,L=0,F=this.children.entries;if(c)for(M=0;M<F.length;M++)if(R=F[M],R.active===x){if(L++,L===g)break}else R=null;else for(M=F.length-1;M>=0;M--)if(R=F[M],R.active===x){if(L++,L===g)break}else R=null;return R?(typeof T=="number"&&(R.x=T),typeof E=="number"&&(R.y=E),R):A?this.create(T,E,S,C,P):null},get:function(c,g,x,A,T){return this.getFirst(!1,!0,c,g,x,A,T)},getFirstAlive:function(c,g,x,A,T,E){return this.getFirst(!0,c,g,x,A,T,E)},getFirstDead:function(c,g,x,A,T,E){return this.getFirst(!1,c,g,x,A,T,E)},playAnimation:function(c,g){return e.PlayAnimation(this.children.entries,c,g),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(c){c===void 0&&(c=!0);for(var g=0,x=0;x<this.children.size;x++)this.children.entries[x].active===c&&g++;return g},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var c=this.getTotalUsed(),g=this.maxSize===-1?999999999999:this.maxSize;return g-c},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},propertyValueSet:function(c,g,x,A,T){return e.PropertyValueSet(this.children.entries,c,g,x,A,T),this},propertyValueInc:function(c,g,x,A,T){return e.PropertyValueInc(this.children.entries,c,g,x,A,T),this},setX:function(c,g){return e.SetX(this.children.entries,c,g),this},setY:function(c,g){return e.SetY(this.children.entries,c,g),this},setXY:function(c,g,x,A){return e.SetXY(this.children.entries,c,g,x,A),this},incX:function(c,g){return e.IncX(this.children.entries,c,g),this},incY:function(c,g){return e.IncY(this.children.entries,c,g),this},incXY:function(c,g,x,A){return e.IncXY(this.children.entries,c,g,x,A),this},shiftPosition:function(c,g,x){return e.ShiftPosition(this.children.entries,c,g,x),this},angle:function(c,g){return e.Angle(this.children.entries,c,g),this},rotate:function(c,g){return e.Rotate(this.children.entries,c,g),this},rotateAround:function(c,g){return e.RotateAround(this.children.entries,c,g),this},rotateAroundDistance:function(c,g,x){return e.RotateAroundDistance(this.children.entries,c,g,x),this},setAlpha:function(c,g){return e.SetAlpha(this.children.entries,c,g),this},setTint:function(c,g,x,A){return e.SetTint(this.children.entries,c,g,x,A),this},setOrigin:function(c,g,x,A){return e.SetOrigin(this.children.entries,c,g,x,A),this},scaleX:function(c,g){return e.ScaleX(this.children.entries,c,g),this},scaleY:function(c,g){return e.ScaleY(this.children.entries,c,g),this},scaleXY:function(c,g,x,A){return e.ScaleXY(this.children.entries,c,g,x,A),this},setDepth:function(c,g){return e.SetDepth(this.children.entries,c,g),this},setBlendMode:function(c){return e.SetBlendMode(this.children.entries,c),this},setHitArea:function(c,g){return e.SetHitArea(this.children.entries,c,g),this},shuffle:function(){return e.Shuffle(this.children.entries),this},kill:function(c){this.children.contains(c)&&c.setActive(!1)},killAndHide:function(c){this.children.contains(c)&&(c.setActive(!1),c.setVisible(!1))},setVisible:function(c,g,x){return e.SetVisible(this.children.entries,c,g,x),this},toggleVisible:function(){return e.ToggleVisible(this.children.entries),this},destroy:function(c,g){c===void 0&&(c=!1),g===void 0&&(g=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(g,c),this.scene=void 0,this.children=void 0)}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(a,o,s,n,r,u){for(var h=e.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*n),l=s.pathData,d=s.pathIndexes,v=0;v<d.length;v+=3){var c=d[v]*2,g=d[v+1]*2,x=d[v+2]*2,A=l[c+0]-r,T=l[c+1]-u,E=l[g+0]-r,S=l[g+1]-u,C=l[x+0]-r,P=l[x+1]-u,R=o.getX(A,T),M=o.getY(A,T),L=o.getX(E,S),F=o.getY(E,S),I=o.getX(C,P),w=o.getY(C,P);a.batchTri(s,R,M,L,F,I,w,0,0,1,1,h,h,h,2)}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=e.x3-e.x1,s=e.y3-e.y1,n=e.x2-e.x1,r=e.y2-e.y1,u=f-e.x1,h=a-e.y1,l=o*o+s*s,d=o*n+s*r,v=o*u+s*h,c=n*n+r*r,g=n*u+r*h,x=l*c-d*d,A=x===0?0:1/x,T=(c*v-d*g)*A,E=(l*g-d*v)*A;return T>=0&&E>=0&&T+E<1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(10),a=t(3);function o(n,r,u,h){var l=n-u,d=r-h,v=l*l+d*d;return Math.sqrt(v)}var s=new e({initialize:function(r,u,h){this.vertex1=r,this.vertex2=u,this.vertex3=h,this.bounds=new f,this._inCenter=new a},getInCenter:function(n){n===void 0&&(n=!0);var r=this.vertex1,u=this.vertex2,h=this.vertex3,l,d,v,c,g,x;n?(l=r.x,d=r.y,v=u.x,c=u.y,g=h.x,x=h.y):(l=r.vx,d=r.vy,v=u.vx,c=u.vy,g=h.vx,x=h.vy);var A=o(g,x,v,c),T=o(l,d,g,x),E=o(v,c,l,d),S=A+T+E;return this._inCenter.set((l*A+v*T+g*E)/S,(d*A+c*T+x*E)/S)},contains:function(n,r,u){var h=this.vertex1,l=this.vertex2,d=this.vertex3,v=h.vx,c=h.vy,g=l.vx,x=l.vy,A=d.vx,T=d.vy;if(u){var E=u.a,S=u.b,C=u.c,P=u.d,R=u.e,M=u.f;v=h.vx*E+h.vy*C+R,c=h.vx*S+h.vy*P+M,g=l.vx*E+l.vy*C+R,x=l.vx*S+l.vy*P+M,A=d.vx*E+d.vy*C+R,T=d.vx*S+d.vy*P+M}var L=A-v,F=T-c,I=g-v,w=x-c,U=n-v,z=r-c,W=L*L+F*F,H=L*I+F*w,D=L*U+F*z,O=I*I+w*w,B=I*U+w*z,N=W*O-H*H,G=N===0?0:1/N,V=(O*D-H*B)*G,Y=(W*B-H*D)*G;return V>=0&&Y>=0&&V+Y<1},isCounterClockwise:function(n){var r=this.vertex1,u=this.vertex2,h=this.vertex3,l=(u.vx-r.vx)*(h.vy-r.vy)-(u.vy-r.vy)*(h.vx-r.vx);return n<=0?l>=0:l<0},load:function(n,r,u,h,l){return u=this.vertex1.load(n,r,u,h,l),u=this.vertex2.load(n,r,u,h,l),u=this.vertex3.load(n,r,u,h,l),u},transformCoordinatesLocal:function(n,r,u,h){return this.vertex1.transformCoordinatesLocal(n,r,u,h),this.vertex2.transformCoordinatesLocal(n,r,u,h),this.vertex3.transformCoordinatesLocal(n,r,u,h),this},updateBounds:function(){var n=this.vertex1,r=this.vertex2,u=this.vertex3,h=this.bounds;return h.x=Math.min(n.vx,r.vx,u.vx),h.y=Math.min(n.vy,r.vy,u.vy),h.width=Math.max(n.vx,r.vx,u.vx)-h.x,h.height=Math.max(n.vy,r.vy,u.vy)-h.y,this},isInView:function(n,r,u,h,l,d,v,c,g,x,A){var T=this.vertex1.update(l,d,v,c,g,x,A,h),E=this.vertex2.update(l,d,v,c,g,x,A,h),S=this.vertex3.update(l,d,v,c,g,x,A,h);if(T.ta<=0&&E.ta<=0&&S.ta<=0||r&&!this.isCounterClockwise(u))return!1;var C=this.bounds;C.x=Math.min(T.tx,E.tx,S.tx),C.y=Math.min(T.ty,E.ty,S.ty),C.width=Math.max(T.tx,E.tx,S.tx)-C.x,C.height=Math.max(T.ty,E.ty,S.ty)-C.y;var P=n.x+n.width,R=n.y+n.height;return C.width<=0||C.height<=0||n.width<=0||n.height<=0?!1:!(C.right<n.x||C.bottom<n.y||C.x>P||C.y>R)},translate:function(n,r){r===void 0&&(r=0);var u=this.vertex1,h=this.vertex2,l=this.vertex3;return u.x+=n,u.y+=r,h.x+=n,h.y+=r,l.x+=n,l.y+=r,this},x:{get:function(){return this.getInCenter().x},set:function(n){var r=this.getInCenter();this.translate(n-r.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var r=this.getInCenter();this.translate(0,n-r.y)}},alpha:{get:function(){var n=this.vertex1,r=this.vertex2,u=this.vertex3;return(n.alpha+r.alpha+u.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,r=this.vertex2,u=this.vertex3;return(n.vz+r.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(12),a=t(39),o=new e({Extends:a,initialize:function(n,r,u,h,l,d,v,c,g,x){d===void 0&&(d=16777215),v===void 0&&(v=1),c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=0),a.call(this,n,r,u),this.vx=0,this.vy=0,this.vz=0,this.nx=c,this.ny=g,this.nz=x,this.u=h,this.v=l,this.color=d,this.alpha=v,this.tx=0,this.ty=0,this.ta=0},setUVs:function(s,n){return this.u=s,this.v=n,this},transformCoordinatesLocal:function(s,n,r,u){var h=this.x,l=this.y,d=this.z,v=s.val,c=h*v[0]+l*v[4]+d*v[8]+v[12],g=h*v[1]+l*v[5]+d*v[9]+v[13],x=h*v[2]+l*v[6]+d*v[10]+v[14],A=h*v[3]+l*v[7]+d*v[11]+v[15];this.vx=c/A*n,this.vy=-(g/A)*r,u<=0?this.vz=x/A:this.vz=-(x/A)},update:function(s,n,r,u,h,l,d,v){var c=this.vx*s+this.vy*r+h,g=this.vx*n+this.vy*u+l;return d&&(c=Math.round(c),g=Math.round(g)),this.tx=c,this.ty=g,this.ta=this.alpha*v,this},load:function(s,n,r,u,h){return s[++r]=this.tx,s[++r]=this.ty,s[++r]=this.u,s[++r]=this.v,s[++r]=u,s[++r]=h,n[++r]=f.getTintAppendFloatAlpha(this.color,this.ta),r}});i.exports=o},function(i,m,t){var e={};i.exports=e;var f=t(166),a=t(32),o=t(84),s=t(41);(function(){e.create=function(n){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},n)},e.setModified=function(n,r,u,h){if(f.trigger(n,"compositeModified",n),n.isModified=r,u&&n.parent&&e.setModified(n.parent,r,u,h),h)for(var l=0;l<n.composites.length;l++){var d=n.composites[l];e.setModified(d,r,u,h)}},e.add=function(n,r){var u=[].concat(r);f.trigger(n,"beforeAdd",{object:r});for(var h=0;h<u.length;h++){var l=u[h];switch(l.type){case"body":if(l.parent!==l){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(n,l);break;case"constraint":e.addConstraint(n,l);break;case"composite":e.addComposite(n,l);break;case"mouseConstraint":e.addConstraint(n,l.constraint);break}}return f.trigger(n,"afterAdd",{object:r}),n},e.remove=function(n,r,u){var h=[].concat(r);f.trigger(n,"beforeRemove",{object:r});for(var l=0;l<h.length;l++){var d=h[l];switch(d.type){case"body":e.removeBody(n,d,u);break;case"constraint":e.removeConstraint(n,d,u);break;case"composite":e.removeComposite(n,d,u);break;case"mouseConstraint":e.removeConstraint(n,d.constraint);break}}return f.trigger(n,"afterRemove",{object:r}),n},e.addComposite=function(n,r){return n.composites.push(r),r.parent=n,e.setModified(n,!0,!0,!1),n},e.removeComposite=function(n,r,u){var h=n.composites.indexOf(r);if(h!==-1&&(e.removeCompositeAt(n,h),e.setModified(n,!0,!0,!1)),u)for(var l=0;l<n.composites.length;l++)e.removeComposite(n.composites[l],r,!0);return n},e.removeCompositeAt=function(n,r){return n.composites.splice(r,1),e.setModified(n,!0,!0,!1),n},e.addBody=function(n,r){return n.bodies.push(r),e.setModified(n,!0,!0,!1),n},e.removeBody=function(n,r,u){var h=n.bodies.indexOf(r);if(h!==-1&&(e.removeBodyAt(n,h),e.setModified(n,!0,!0,!1)),u)for(var l=0;l<n.composites.length;l++)e.removeBody(n.composites[l],r,!0);return n},e.removeBodyAt=function(n,r){return n.bodies.splice(r,1),e.setModified(n,!0,!0,!1),n},e.addConstraint=function(n,r){return n.constraints.push(r),e.setModified(n,!0,!0,!1),n},e.removeConstraint=function(n,r,u){var h=n.constraints.indexOf(r);if(h!==-1&&e.removeConstraintAt(n,h),u)for(var l=0;l<n.composites.length;l++)e.removeConstraint(n.composites[l],r,!0);return n},e.removeConstraintAt=function(n,r){return n.constraints.splice(r,1),e.setModified(n,!0,!0,!1),n},e.clear=function(n,r,u){if(u)for(var h=0;h<n.composites.length;h++)e.clear(n.composites[h],r,!0);return r?n.bodies=n.bodies.filter(function(l){return l.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,e.setModified(n,!0,!0,!1),n},e.allBodies=function(n){for(var r=[].concat(n.bodies),u=0;u<n.composites.length;u++)r=r.concat(e.allBodies(n.composites[u]));return r},e.allConstraints=function(n){for(var r=[].concat(n.constraints),u=0;u<n.composites.length;u++)r=r.concat(e.allConstraints(n.composites[u]));return r},e.allComposites=function(n){for(var r=[].concat(n.composites),u=0;u<n.composites.length;u++)r=r.concat(e.allComposites(n.composites[u]));return r},e.get=function(n,r,u){var h,l;switch(u){case"body":h=e.allBodies(n);break;case"constraint":h=e.allConstraints(n);break;case"composite":h=e.allComposites(n).concat(n);break}return h?(l=h.filter(function(d){return d.id.toString()===r.toString()}),l.length===0?null:l[0]):null},e.move=function(n,r,u){return e.remove(n,r),e.add(u,r),n},e.rebase=function(n){for(var r=e.allBodies(n).concat(e.allConstraints(n)).concat(e.allComposites(n)),u=0;u<r.length;u++)r[u].id=a.nextId();return e.setModified(n,!0,!0,!1),n},e.translate=function(n,r,u){for(var h=u?e.allBodies(n):n.bodies,l=0;l<h.length;l++)s.translate(h[l],r);return e.setModified(n,!0,!0,!1),n},e.rotate=function(n,r,u,h){for(var l=Math.cos(r),d=Math.sin(r),v=h?e.allBodies(n):n.bodies,c=0;c<v.length;c++){var g=v[c],x=g.position.x-u.x,A=g.position.y-u.y;s.setPosition(g,{x:u.x+(x*l-A*d),y:u.y+(x*d+A*l)}),s.rotate(g,r)}return e.setModified(n,!0,!0,!1),n},e.scale=function(n,r,u,h,l){for(var d=l?e.allBodies(n):n.bodies,v=0;v<d.length;v++){var c=d[v],g=c.position.x-h.x,x=c.position.y-h.y;s.setPosition(c,{x:h.x+g*r,y:h.y+x*u}),s.scale(c,r,u)}return e.setModified(n,!0,!0,!1),n},e.bounds=function(n){for(var r=e.allBodies(n),u=[],h=0;h<r.length;h+=1){var l=r[h];u.push(l.bounds.min,l.bounds.max)}return o.create(u)}})()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e>=0&&e<a.width&&f>=0&&f<a.height};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(29),a=t(2),o=new e({initialize:function(n){n===void 0&&(n={}),this.name=a(n,"name","layer"),this.x=a(n,"x",0),this.y=a(n,"y",0),this.width=a(n,"width",0),this.height=a(n,"height",0),this.tileWidth=a(n,"tileWidth",0),this.tileHeight=a(n,"tileHeight",0),this.baseTileWidth=a(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(n,"baseTileHeight",this.tileHeight),this.orientation=a(n,"orientation",f.ORTHOGONAL),this.widthInPixels=a(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(n,"alpha",1),this.visible=a(n,"visible",!0),this.properties=a(n,"properties",[]),this.indexes=a(n,"indexes",[]),this.collideIndexes=a(n,"collideIndexes",[]),this.callbacks=a(n,"callbacks",[]),this.bodies=a(n,"bodies",[]),this.data=a(n,"data",[]),this.tilemapLayer=a(n,"tilemapLayer",null),this.hexSideLength=a(n,"hexSideLength",0)}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(29),a=t(2),o=new e({initialize:function(n){n===void 0&&(n={}),this.name=a(n,"name","map"),this.width=a(n,"width",0),this.height=a(n,"height",0),this.infinite=a(n,"infinite",!1),this.tileWidth=a(n,"tileWidth",0),this.tileHeight=a(n,"tileHeight",0),this.widthInPixels=a(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(n,"heightInPixels",this.height*this.tileHeight),this.format=a(n,"format",null),this.orientation=a(n,"orientation",f.ORTHOGONAL),this.renderOrder=a(n,"renderOrder","right-down"),this.version=a(n,"version","1"),this.properties=a(n,"properties",{}),this.layers=a(n,"layers",[]),this.images=a(n,"images",[]),this.objects=a(n,"objects",{}),this.collision=a(n,"collision",{}),this.tilesets=a(n,"tilesets",[]),this.imageCollections=a(n,"imageCollections",[]),this.tiles=a(n,"tiles",[]),this.hexSideLength=a(n,"hexSideLength",0)}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r,u,h,l,d){(n===void 0||n<=0)&&(n=32),(r===void 0||r<=0)&&(r=32),u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l={}),d===void 0&&(d={}),this.name=o,this.firstgid=s,this.tileWidth=n,this.tileHeight=r,this.tileMargin=u,this.tileSpacing=h,this.tileProperties=l,this.tileData=d,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(a){return this.containsTileIndex(a)?this.tileProperties[a-this.firstgid]:null},getTileData:function(a){return this.containsTileIndex(a)?this.tileData[a-this.firstgid]:null},getTileCollisionGroup:function(a){var o=this.getTileData(a);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},getTileTextureCoordinates:function(a){return this.containsTileIndex(a)?this.texCoordinates[a-this.firstgid]:null},setImage:function(a){return this.image=a,this.glTexture=a.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(a,o){return a!==void 0&&(this.tileWidth=a),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(a,o){return a!==void 0&&(this.tileMargin=a),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(a,o){var s=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(a-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(s%1!==0||n%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),s=Math.floor(s),n=Math.floor(n),this.rows=s,this.columns=n,this.total=s*n,this.texCoordinates.length=0;for(var r=this.tileMargin,u=this.tileMargin,h=0;h<this.rows;h++){for(var l=0;l<this.columns;l++)this.texCoordinates.push({x:r,y:u}),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,u+=this.tileHeight+this.tileSpacing}return this}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return a===void 0&&(a=1e-4),Math.abs(e-f)<a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(1068),s=new e({Extends:a,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,o],initialize:function(r,u,h,l,d){a.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,d),this.setPosition(u,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.hasOwnProperty(f)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(a,o){var s=e(a);for(var n in o)s.hasOwnProperty(n)||(s[n]=o[n]);return s};i.exports=f},function(i,m,t){var e={};i.exports=e;var f=t(64),a=t(83),o=t(165),s=t(84),n=t(271),r=t(32);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(u){var h=u;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var l=h.bodyA?a.add(h.bodyA.position,h.pointA):h.pointA,d=h.bodyB?a.add(h.bodyB.position,h.pointB):h.pointB,v=a.magnitude(a.sub(l,d));h.length=typeof h.length<"u"?h.length:v,h.id=h.id||r.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var c={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return h.length===0&&h.stiffness>.1?(c.type="pin",c.anchors=!1):h.stiffness<.9&&(c.type="spring"),h.render=r.extend(c,h.render),h},e.preSolveAll=function(u){for(var h=0;h<u.length;h+=1){var l=u[h],d=l.constraintImpulse;l.isStatic||d.x===0&&d.y===0&&d.angle===0||(l.position.x+=d.x,l.position.y+=d.y,l.angle+=d.angle)}},e.solveAll=function(u,h){for(var l=0;l<u.length;l+=1){var d=u[l],v=!d.bodyA||d.bodyA&&d.bodyA.isStatic,c=!d.bodyB||d.bodyB&&d.bodyB.isStatic;(v||c)&&e.solve(u[l],h)}for(l=0;l<u.length;l+=1)d=u[l],v=!d.bodyA||d.bodyA&&d.bodyA.isStatic,c=!d.bodyB||d.bodyB&&d.bodyB.isStatic,!v&&!c&&e.solve(u[l],h)},e.solve=function(u,h){var l=u.bodyA,d=u.bodyB,v=u.pointA,c=u.pointB;if(!(!l&&!d)){l&&!l.isStatic&&(a.rotate(v,l.angle-u.angleA,v),u.angleA=l.angle),d&&!d.isStatic&&(a.rotate(c,d.angle-u.angleB,c),u.angleB=d.angle);var g=v,x=c;if(l&&(g=a.add(l.position,v)),d&&(x=a.add(d.position,c)),!(!g||!x)){var A=a.sub(g,x),T=a.magnitude(A);T<e._minLength&&(T=e._minLength);var E=(T-u.length)/T,S=u.stiffness<1?u.stiffness*h:u.stiffness,C=a.mult(A,E*S),P=(l?l.inverseMass:0)+(d?d.inverseMass:0),R=(l?l.inverseInertia:0)+(d?d.inverseInertia:0),M=P+R,L,F,I,w,U;if(u.damping){var z=a.create();I=a.div(A,T),U=a.sub(d&&a.sub(d.position,d.positionPrev)||z,l&&a.sub(l.position,l.positionPrev)||z),w=a.dot(I,U)}l&&!l.isStatic&&(F=l.inverseMass/P,l.constraintImpulse.x-=C.x*F,l.constraintImpulse.y-=C.y*F,l.position.x-=C.x*F,l.position.y-=C.y*F,u.damping&&(l.positionPrev.x-=u.damping*I.x*w*F,l.positionPrev.y-=u.damping*I.y*w*F),L=a.cross(v,C)/M*e._torqueDampen*l.inverseInertia*(1-u.angularStiffness),l.constraintImpulse.angle-=L,l.angle-=L),d&&!d.isStatic&&(F=d.inverseMass/P,d.constraintImpulse.x+=C.x*F,d.constraintImpulse.y+=C.y*F,d.position.x+=C.x*F,d.position.y+=C.y*F,u.damping&&(d.positionPrev.x+=u.damping*I.x*w*F,d.positionPrev.y+=u.damping*I.y*w*F),L=a.cross(c,C)/M*e._torqueDampen*d.inverseInertia*(1-u.angularStiffness),d.constraintImpulse.angle+=L,d.angle+=L)}}},e.postSolveAll=function(u){for(var h=0;h<u.length;h++){var l=u[h],d=l.constraintImpulse;if(!(l.isStatic||d.x===0&&d.y===0&&d.angle===0)){o.set(l,!1);for(var v=0;v<l.parts.length;v++){var c=l.parts[v];f.translate(c.vertices,d),v>0&&(c.position.x+=d.x,c.position.y+=d.y),d.angle!==0&&(f.rotate(c.vertices,d.angle,l.position),n.rotate(c.axes,d.angle),v>0&&a.rotateAbout(c.position,d.angle,l.position,c.position)),s.update(c.bounds,c.vertices,l.velocity)}d.angle*=e._warming,d.x*=e._warming,d.y*=e._warming}}},e.pointAWorld=function(u){return{x:(u.bodyA?u.bodyA.position.x:0)+u.pointA.x,y:(u.bodyA?u.bodyA.position.y:0)+u.pointA.y}},e.pointBWorld=function(u){return{x:(u.bodyB?u.bodyB.position.x:0)+u.pointB.x,y:(u.bodyB?u.bodyB.position.y:0)+u.pointB.y}}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(65),a=t(66),o=t(0),s=t(11),n=t(15),r=t(10),u=t(57),h=new o({Extends:n,Mixins:[s.Depth,s.GetBounds,s.Origin,s.Transform,s.ScrollFactor,s.Visible],initialize:function(d,v,c,g,x){g===void 0&&(g=1),x===void 0&&(x=g),n.call(this,d,"Zone"),this.setPosition(v,c),this.width=g,this.height=x,this.blendMode=e.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,d,v){v===void 0&&(v=!0),this.width=l,this.height=d,this.updateDisplayOrigin();var c=this.input;return v&&c&&!c.customHitArea&&(c.hitArea.width=l,c.hitArea.height=d),this},setDisplaySize:function(l,d){return this.displayWidth=l,this.displayHeight=d,this},setCircleDropZone:function(l){return this.setDropZone(new f(0,0,l),a)},setRectangleDropZone:function(l,d){return this.setDropZone(new r(0,0,l,d),u)},setDropZone:function(l,d){return l===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(l,d,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,d,v){v.addToRenderList(d)},renderWebGL:function(l,d,v){v.addToRenderList(d)}});i.exports=h},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(e.width+e.height)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=e.length-1;f>0;f--){var a=Math.floor(Math.random()*(f+1)),o=e[f];e[f]=e[a],e[a]=o}return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(36),o=t(9),s=t(37),n=t(10),r=t(25),u=t(187),h=t(3),l=new e({Extends:o,Mixins:[f.Alpha,f.Visible],initialize:function(v,c,g,x){v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=v,this._y=c,this._width=g,this._height=x,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new r,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new h(g/2,x/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(d){this.renderList.push(d)},setOrigin:function(d,v){return d===void 0&&(d=.5),v===void 0&&(v=d),this.originX=d,this.originY=v,this},getScroll:function(d,v,c){c===void 0&&(c=new h);var g=this.width*.5,x=this.height*.5;return c.x=d-g,c.y=v-x,this.useBounds&&(c.x=this.clampX(c.x),c.y=this.clampY(c.y)),c},centerOnX:function(d){var v=this.width*.5;return this.midPoint.x=d,this.scrollX=d-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(d){var v=this.height*.5;return this.midPoint.y=d,this.scrollY=d-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(d,v){return this.centerOnX(d),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var d=this._bounds,v=this.width*.5,c=this.height*.5;this.midPoint.set(d.centerX,d.centerY),this.scrollX=d.centerX-v,this.scrollY=d.centerY-c}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(d){if(this.disableCull)return d;var v=this.matrix.matrix,c=v[0],g=v[1],x=v[2],A=v[3],T=c*A-g*x;if(!T)return d;var E=v[4],S=v[5],C=this.scrollX,P=this.scrollY,R=this.width,M=this.height,L=this.y,F=L+M,I=this.x,w=I+R,U=this.culledObjects,z=d.length;T=1/T,U.length=0;for(var W=0;W<z;++W){var H=d[W];if(!H.hasOwnProperty("width")||H.parentContainer){U.push(H);continue}var D=H.width,O=H.height,B=H.x-C*H.scrollFactorX-D*H.originX,N=H.y-P*H.scrollFactorY-O*H.originY,G=B*c+N*x+E,V=B*g+N*A+S,Y=(B+D)*c+(N+O)*x+E,X=(B+D)*g+(N+O)*A+S;Y>I&&G<w&&X>L&&V<F&&U.push(H)}return U},getWorldPoint:function(d,v,c){c===void 0&&(c=new h);var g=this.matrix.matrix,x=g[0],A=g[1],T=g[2],E=g[3],S=g[4],C=g[5],P=x*E-A*T;if(!P)return c.x=d,c.y=v,c;P=1/P;var R=E*P,M=-A*P,L=-T*P,F=x*P,I=(T*C-E*S)*P,w=(A*S-x*C)*P,U=Math.cos(this.rotation),z=Math.sin(this.rotation),W=this.zoomX,H=this.zoomY,D=this.scrollX,O=this.scrollY,B=d+(D*U-O*z)*W,N=v+(D*z+O*U)*H;return c.x=B*R+N*L+I,c.y=B*M+N*F+w,c},ignore:function(d){var v=this.id;Array.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var g=d[c];Array.isArray(g)?this.ignore(g):g.isParent?this.ignore(g.getChildren()):g.cameraFilter|=v}return this},preRender:function(){this.renderList.length=0;var d=this.width,v=this.height,c=d*.5,g=v*.5,x=this.zoomX,A=this.zoomY,T=this.matrix,E=d*this.originX,S=v*this.originY,C=this.scrollX,P=this.scrollY;this.useBounds&&(C=this.clampX(C),P=this.clampY(P)),this.roundPixels&&(E=Math.round(E),S=Math.round(S)),this.scrollX=C,this.scrollY=P;var R=C+c,M=P+g;this.midPoint.set(R,M);var L=d/x,F=v/A;this.worldView.setTo(R-L/2,M-F/2,L,F),T.applyITRS(this.x+E,this.y+S,this.rotation,x,A),T.translate(-E,-S)},clampX:function(d){var v=this._bounds,c=this.displayWidth,g=v.x+(c-this.width)/2,x=Math.max(g,g+v.width-c);return d<g?d=g:d>x&&(d=x),d},clampY:function(d){var v=this._bounds,c=this.displayHeight,g=v.y+(c-this.height)/2,x=Math.max(g,g+v.height-c);return d<g?d=g:d>x&&(d=x),d},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(d){return d===void 0&&(d=0),this.rotation=a(d),this},setBackgroundColor:function(d){return d===void 0&&(d="rgba(0,0,0,0)"),this.backgroundColor=u(d),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(d,v,c,g,x){return x===void 0&&(x=!1),this._bounds.setTo(d,v,c,g),this.dirty=!0,this.useBounds=!0,x?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(d){d===void 0&&(d=new n);var v=this._bounds;return d.setTo(v.x,v.y,v.width,v.height),d},setName:function(d){return d===void 0&&(d=""),this.name=d,this},setPosition:function(d,v){return v===void 0&&(v=d),this.x=d,this.y=v,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setRoundPixels:function(d){return this.roundPixels=d,this},setScene:function(d){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=d;var v=d.sys;return this.sceneManager=v.game.scene,this.scaleManager=v.scale,this.cameraManager=v.cameras,this.updateSystem(),this},setScroll:function(d,v){return v===void 0&&(v=d),this.scrollX=d,this.scrollY=v,this},setSize:function(d,v){return v===void 0&&(v=d),this.width=d,this.height=v,this},setViewport:function(d,v,c,g){return this.x=d,this.y=v,this.width=c,this.height=g,this},setZoom:function(d,v){return d===void 0&&(d=1),v===void 0&&(v=d),d===0&&(d=.001),v===0&&(v=.001),this.zoomX=d,this.zoomY=v,this},setMask:function(d,v){return v===void 0&&(v=!0),this.mask=d,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(d){return d===void 0&&(d=!1),d&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var d={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(d.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),d},update:function(){},updateSystem:function(){if(!!this.scaleManager){var d=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;d&&!this._customViewport?v.customViewports++:!d&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=d}},destroy:function(){this.emit(s.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(d){this._x=d,this.updateSystem()}},y:{get:function(){return this._y},set:function(d){this._y=d,this.updateSystem()}},width:{get:function(){return this._width},set:function(d){this._width=d,this.updateSystem()}},height:{get:function(){return this._height},set:function(d){this._height=d,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(d){this._scrollX=d,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(d){this._scrollY=d,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(d){this._zoomX=d,this._zoomY=d,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(d){this._zoomX=d,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(d){this._zoomY=d,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=d,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(334),f=t(335),a=t(336),o=t(337),s=t(338),n=t(339),r=t(340),u=t(341),h=t(342),l=t(343),d=t(344),v=t(345);i.exports={Power0:r,Power1:u.Out,Power2:o.Out,Power3:h.Out,Power4:l.Out,Linear:r,Quad:u.Out,Cubic:o.Out,Quart:h.Out,Quint:l.Out,Sine:d.Out,Expo:n.Out,Circ:a.Out,Elastic:s.Out,Back:e.Out,Bounce:f.Out,Stepped:v,"Quad.easeIn":u.In,"Cubic.easeIn":o.In,"Quart.easeIn":h.In,"Quint.easeIn":l.In,"Sine.easeIn":d.In,"Expo.easeIn":n.In,"Circ.easeIn":a.In,"Elastic.easeIn":s.In,"Back.easeIn":e.In,"Bounce.easeIn":f.In,"Quad.easeOut":u.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":h.Out,"Quint.easeOut":l.Out,"Sine.easeOut":d.Out,"Expo.easeOut":n.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":s.Out,"Back.easeOut":e.Out,"Bounce.easeOut":f.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":h.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":d.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":s.InOut,"Back.easeInOut":e.InOut,"Bounce.easeInOut":f.InOut}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return(f-e)*a+e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),f={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function a(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?f.edge=!0:/Chrome\/(\d+)/.test(o)&&!e.windowsPhone?(f.chrome=!0,f.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(f.firefox=!0,f.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&e.iOS?f.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(f.ie=!0,f.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?f.opera=!0:/Safari/.test(o)&&!e.windowsPhone?f.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(f.ie=!0,f.trident=!0,f.tridentVersion=parseInt(RegExp.$1,10),f.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(f.silk=!0),f}i.exports=a()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.random()*(f-e)+e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e>0&&(e&e-1)===0&&f>0&&(f&f-1)===0};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return a===void 0&&(a=0),f===0?e:(e-=a,e=f*Math.ceil(e/f),o?(a+e)/f:a+e)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=s||0,this.z=n||0,this.w=r||0)},clone:function(){return new f(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this.w=a.w||0,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,o,s,n){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=o||0,this.z=s||0,this.w=n||0),this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this.w+=a.w||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this.w-=a.w||0,this},scale:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},length:function(){var a=this.x,o=this.y,s=this.z,n=this.w;return Math.sqrt(a*a+o*o+s*s+n*n)},lengthSq:function(){var a=this.x,o=this.y,s=this.z,n=this.w;return a*a+o*o+s*s+n*n},normalize:function(){var a=this.x,o=this.y,s=this.z,n=this.w,r=a*a+o*o+s*s+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=a*r,this.y=o*r,this.z=s*r,this.w=n*r),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,o){o===void 0&&(o=0);var s=this.x,n=this.y,r=this.z,u=this.w;return this.x=s+o*(a.x-s),this.y=n+o*(a.y-n),this.z=r+o*(a.z-r),this.w=u+o*(a.w-u),this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this.w*=a.w||1,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this.w/=a.w||1,this},distance:function(a){var o=a.x-this.x,s=a.y-this.y,n=a.z-this.z||0,r=a.w-this.w||0;return Math.sqrt(o*o+s*s+n*n+r*r)},distanceSq:function(a){var o=a.x-this.x,s=a.y-this.y,n=a.z-this.z||0,r=a.w-this.w||0;return o*o+s*s+n*n+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(a){var o=this.x,s=this.y,n=this.z,r=this.w,u=a.val;return this.x=u[0]*o+u[4]*s+u[8]*n+u[12]*r,this.y=u[1]*o+u[5]*s+u[9]*n+u[13]*r,this.z=u[2]*o+u[6]*s+u[10]*n+u[14]*r,this.w=u[3]*o+u[7]*s+u[11]*n+u[15]*r,this},transformQuat:function(a){var o=this.x,s=this.y,n=this.z,r=a.x,u=a.y,h=a.z,l=a.w,d=l*o+u*n-h*s,v=l*s+h*o-r*n,c=l*n+r*s-u*o,g=-r*o-u*s-h*n;return this.x=d*l+g*-r+v*-h-c*-u,this.y=v*l+g*-u+c*-r-d*-h,this.z=c*l+g*-h+d*-u-v*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});f.prototype.sub=f.prototype.subtract,f.prototype.mul=f.prototype.multiply,f.prototype.div=f.prototype.divide,f.prototype.dist=f.prototype.distance,f.prototype.distSq=f.prototype.distanceSq,f.prototype.len=f.prototype.length,f.prototype.lenSq=f.prototype.lengthSq,i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(91),a=new e({initialize:function(s,n,r,u,h,l,d){u===void 0&&(u=1),h===void 0&&(h=0),l===void 0&&(l=!0),d===void 0&&(d=!1),this.renderer=s,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=u,this.minFilter=h,this.autoClear=l,this.autoResize=!1,this.resize(n,r),d&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(f.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(f.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,s){var n=o*this.scale,r=s*this.scale;if(n!==this.width||r!==this.height){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),o*=this.scale,s*=this.scale,o=Math.round(o),s=Math.round(s),o<=0&&(o=1),s<=0&&(s=1),this.texture=u.createTextureFromSource(null,o,s,this.minFilter),this.framebuffer=u.createFramebuffer(o,s,this.texture,!1),this.width=o,this.height=s}return this},bind:function(o,s,n){if(o===void 0&&(o=!1),o&&this.renderer.flush(),s&&n&&this.resize(s,n),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,s=o.gl;o.pushFramebuffer(this.framebuffer),s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var s=this.renderer;return o&&s.flush(),s.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(f.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a;if(f)typeof f=="string"?a=document.getElementById(f):typeof f=="object"&&f.nodeType===1&&(a=f);else if(e.parentElement||f===null)return e;return a||(a=document.body),a.appendChild(e),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(77),a=t(9),o=t(70),s=t(22),n=t(1),r=t(207),u=t(428),h=new e({Extends:a,initialize:function(d){a.call(this),this.game=d,this.jsonCache=d.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,d.events.on(s.BLUR,this.onGameBlur,this),d.events.on(s.FOCUS,this.onGameFocus,this),d.events.on(s.PRE_STEP,this.update,this),d.events.once(s.DESTROY,this.destroy,this)},add:n,addAudioSprite:function(l,d){d===void 0&&(d={});var v=this.add(l,d);v.spritemap=this.jsonCache.get(l).spritemap;for(var c in v.spritemap)if(!!v.spritemap.hasOwnProperty(c)){var g=f(d),x=v.spritemap[c];g.loop=x.hasOwnProperty("loop")?x.loop:!1,v.addMarker({name:c,start:x.start,duration:x.end-x.start,config:g})}return v},get:function(l){return u(this.sounds,"key",l)},getAll:function(l){return r(this.sounds,"key",l)},play:function(l,d){var v=this.add(l);return v.once(o.COMPLETE,v.destroy,v),d?d.name?(v.addMarker(d),v.play(d.name)):v.play(d):v.play()},playAudioSprite:function(l,d,v){var c=this.addAudioSprite(l);return c.once(o.COMPLETE,c.destroy,c),c.play(d,v)},remove:function(l){var d=this.sounds.indexOf(l);return d!==-1?(l.destroy(),this.sounds.splice(d,1),!0):!1},removeAll:function(){this.sounds.forEach(function(l){l.destroy()}),this.sounds.length=0},removeByKey:function(l){for(var d=0,v=this.sounds.length-1;v>=0;v--){var c=this.sounds[v];c.key===l&&(c.destroy(),this.sounds.splice(v,1),d++)}return d},pauseAll:function(){this.forEachActiveSound(function(l){l.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(l){l.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(l){l.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(l){var d=0;return this.getAll(l).forEach(function(v){v.stop()&&d++}),d},unlock:n,onBlur:n,onFocus:n,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(l,d){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var v=this.sounds.length-1;v>=0;v--)this.sounds[v].pendingRemove&&this.sounds.splice(v,1);this.sounds.forEach(function(c){c.update(l,d)})},destroy:function(){this.game.events.off(s.BLUR,this.onGameBlur,this),this.game.events.off(s.FOCUS,this.onGameFocus,this),this.game.events.off(s.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(l,d){var v=this;this.sounds.forEach(function(c,g){c&&!c.pendingRemove&&l.call(d||v,c,g,v.sounds)})},setRate:function(l){return this.rate=l,this},rate:{get:function(){return this._rate},set:function(l){this._rate=l,this.forEachActiveSound(function(d){d.calculateRate()}),this.emit(o.GLOBAL_RATE,this,l)}},setDetune:function(l){return this.detune=l,this},detune:{get:function(){return this._detune},set:function(l){this._detune=l,this.forEachActiveSound(function(d){d.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,l)}}});i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(70),o=t(17),s=t(1),n=new e({Extends:f,initialize:function(u,h,l){f.call(this),this.manager=u,this.key=h,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(console.error("addMarker "+r.name+" already exists in Sound"),!1):(r=o(!0,{name:"",start:0,duration:this.totalDuration-(r.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},r),this.markers[r.name]=r,!0)},updateMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(this.markers[r.name]=o(!0,this.markers[r.name],r),!0):(console.warn("Audio Marker: "+r.name+" missing in Sound: "+this.key),!1)},removeMarker:function(r){var u=this.markers[r];return u?(this.markers[r]=null,u):null},play:function(r,u){if(r===void 0&&(r=""),typeof r=="object"&&(u=r,r=""),typeof r!="string")return!1;if(!r)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[r])return console.warn("Marker: "+r+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[r],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:s,calculateRate:function(){var r=1.0005777895065548,u=this.currentConfig.detune+this.manager.detune,h=Math.pow(r,u);this.totalRate=this.currentConfig.rate*this.manager.rate*h},destroy:function(){this.pendingRemove||(this.emit(a.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(209),f=t(435),a=function(o,s){if(s===void 0&&(s=90),!e(o))return null;if(typeof s!="string"&&(s=(s%360+360)%360),s===90||s===-270||s==="rotateLeft")o=f(o),o.reverse();else if(s===-90||s===270||s==="rotateRight")o.reverse(),o=f(o);else if(Math.abs(s)===180||s==="rotate180"){for(var n=0;n<o.length;n++)o[n].reverse();o.reverse()}return o};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),a=t(11),o=t(15),s=t(1043),n=t(1044),r=t(212),u=t(10),h=t(1045),l=new e({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,h],initialize:function(v,c,g,x,A,T,E){A===void 0&&(A=""),E===void 0&&(E=0),o.call(this,v,"BitmapText"),this.font=x;var S=this.scene.sys.cache.bitmapFont.get(x);S||console.warn("Invalid BitmapText key: "+x),this.fontData=S.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._align=E,this._bounds=s(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=S.fromAtlas,this.setTexture(S.texture,S.frame),this.setPosition(c,g),this.setOrigin(0,0),this.initPipeline(),this.setText(A)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(d){return this._fontSize=d,this._dirty=!0,this},setLetterSpacing:function(d){return d===void 0&&(d=0),this._letterSpacing=d,this._dirty=!0,this},setText:function(d){return!d&&d!==0&&(d=""),Array.isArray(d)&&(d=d.join(`
`)),d!==this.text&&(this._text=d.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(d,v,c,g){return d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=.5),this.dropShadowX=d,this.dropShadowY=v,this.dropShadowColor=c,this.dropShadowAlpha=g,this},setCharacterTint:function(d,v,c,g,x,A,T){d===void 0&&(d=0),v===void 0&&(v=1),c===void 0&&(c=!1),g===void 0&&(g=-1),x===void 0&&(x=g,A=g,T=g);var E=this.text.length;v===-1&&(v=E),d<0&&(d=E+d),d=f(d,0,E-1);for(var S=f(d+v,d,E),C=this.charColors,P=d;P<S;P++){var R=C[P];if(g===-1)C[P]=null;else{var M=c?1:0;R?(R.tintEffect=M,R.tintTL=g,R.tintTR=x,R.tintBL=A,R.tintBR=T):C[P]={tintEffect:M,tintTL:g,tintTR:x,tintBL:A,tintBR:T}}}return this},setWordTint:function(d,v,c,g,x,A,T){v===void 0&&(v=1);for(var E=this.getTextBounds(),S=E.words,C=typeof d=="number",P=0,R=0;R<S.length;R++){var M=S[R];if((C&&R===d||!C&&M.word===d)&&(this.setCharacterTint(M.i,M.word.length,c,g,x,A,T),P++,P===v))return this}return this},getTextBounds:function(d){var v=this._bounds;return(this._dirty||d||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(s(this,d,!0,v),this._dirty=!1),v},getCharacterAt:function(d,v,c){for(var g=this.getLocalPoint(d,v,null,c),x=this.getTextBounds(),A=x.characters,T=new u,E=0;E<A.length;E++){var S=A[E];if(T.setTo(S.x,S.t,S.r-S.x,S.b),T.contains(g.x,g.y))return S}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(d,v,c){if(v===void 0&&(v=this._fontSize),c===void 0&&(c=this._align),d!==this.font){var g=this.scene.sys.cache.bitmapFont.get(d);g&&(this.font=d,this.fontData=g.data,this._fontSize=v,this._align=c,this.fromAtlas=g.fromAtlas===!0,this.setTexture(g.texture,g.frame),s(this,!1,!0,this._bounds))}return this},setMaxWidth:function(d,v){return this._maxWidth=d,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},align:{set:function(d){this._align=d,this._dirty=!0},get:function(){return this._align}},text:{set:function(d){this.setText(d)},get:function(){return this._text}},fontSize:{set:function(d){this._fontSize=d,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(d){this._letterSpacing=d,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(d){this._maxWidth=d,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var d=a.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return d.data=v,d},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=n,l.ParseXMLBitmapFont=r,i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var s=0;s<o.length;s++)this.set(o[s])},set:function(a){return this.entries.indexOf(a)===-1&&this.entries.push(a),this},get:function(a,o){for(var s=0;s<this.entries.length;s++){var n=this.entries[s];if(n[a]===o)return n}},getArray:function(){return this.entries.slice(0)},delete:function(a){var o=this.entries.indexOf(a);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var a=0;a<this.entries.length;a++){var o=this.entries[a];console.log(o)}console.groupEnd()},each:function(a,o){var s,n=this.entries.slice(),r=n.length;if(o)for(s=0;s<r&&a.call(o,n[s],s)!==!1;s++);else for(s=0;s<r&&a(n[s],s)!==!1;s++);return this},iterate:function(a,o){var s,n=this.entries.length;if(o)for(s=0;s<n&&a.call(o,this.entries[s],s)!==!1;s++);else for(s=0;s<n&&a(this.entries[s],s)!==!1;s++);return this},iterateLocal:function(a){var o,s=[];for(o=1;o<arguments.length;o++)s.push(arguments[o]);var n=this.entries.length;for(o=0;o<n;o++){var r=this.entries[o];r[a].apply(r,s)}return this},clear:function(){return this.entries.length=0,this},contains:function(a){return this.entries.indexOf(a)>-1},union:function(a){var o=new f;return a.entries.forEach(function(s){o.set(s)}),this.entries.forEach(function(s){o.set(s)}),o},intersect:function(a){var o=new f;return this.entries.forEach(function(s){a.contains(s)&&o.set(s)}),o},difference:function(a){var o=new f;return this.entries.forEach(function(s){a.contains(s)||o.set(s)}),o},size:{get:function(){return this.entries.length},set:function(a){return a<this.entries.length?this.entries.length=a:this.entries.length}}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(189),s=t(92),n=t(1182),r=new e({Extends:a,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Pipeline,f.ScrollFactor,f.Transform,f.Visible,n],initialize:function(h,l,d,v,c,g,x){v===void 0&&(v=16777215),c===void 0&&(c=128),g===void 0&&(g=1),x===void 0&&(x=.1),a.call(this,h,"PointLight"),this.initPipeline(s.POINTLIGHT_PIPELINE),this.setPosition(l,d),this.color=o(v),this.intensity=g,this.attenuation=x,this.width=c*2,this.height=c*2,this._radius=c},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this.width=u*2,this.height=u*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});i.exports=r},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=f.width/2,o=f.height/2,s=Math.abs(e.x-f.x-a),n=Math.abs(e.y-f.y-o),r=a+e.radius,u=o+e.radius;if(s>r||n>u)return!1;if(s<=a||n<=o)return!0;var h=s-a,l=n-o,d=h*h,v=l*l,c=e.radius*e.radius;return d+v<=c};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.width<=0||e.height<=0||f.width<=0||f.height<=0?!1:!(e.right<f.x||e.bottom<f.y||e.x>f.right||e.y>f.bottom)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f={},a={};a.register=function(o,s,n,r,u){f[o]={plugin:s,mapping:n,settingsKey:r,configKey:u}},a.getPlugin=function(o){return f[o]},a.install=function(o){var s=o.scene.sys,n=s.settings.input,r=s.game.config;for(var u in f){var h=f[u].plugin,l=f[u].mapping,d=f[u].settingsKey,v=f[u].configKey;e(n,d,r[v])&&(o[l]=new h(o))}},a.remove=function(o){f.hasOwnProperty(o)&&delete f[o]},i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.url?e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:f+e.url:!1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n){return e===void 0&&(e=""),f===void 0&&(f=!0),a===void 0&&(a=""),o===void 0&&(o=""),s===void 0&&(s=0),n===void 0&&(n=!1),{responseType:e,async:f,user:a,password:o,timeout:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:n}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(243),a=t(73),o=new e({Extends:a,Mixins:[f.Acceleration,f.Angular,f.Bounce,f.Debug,f.Drag,f.Enable,f.Friction,f.Gravity,f.Immovable,f.Mass,f.Pushable,f.Size,f.Velocity],initialize:function(n,r,u,h,l){a.call(this,n,r,u,h,l),this.body=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),f=function(a,o,s,n){if(s===void 0&&(s=!1),e(a,o,n)){var r=n.data[o][a]||null;return r?r.index===-1?s?r:null:r:null}else return null};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=e.data,n=e.width,r=e.height,u=e.tilemapLayer,h=Math.max(0,f.left),l=Math.min(n,f.right),d=Math.max(0,f.top),v=Math.min(r,f.bottom),c,g,x;if(a===0)for(g=d;g<v;g++)for(c=h;s[g]&&c<l;c++)x=s[g][c],!(!x||x.index===-1||!x.visible||x.alpha===0)&&o.push(x);else if(a===1)for(g=d;g<v;g++)for(c=l;s[g]&&c>=h;c--)x=s[g][c],!(!x||x.index===-1||!x.visible||x.alpha===0)&&o.push(x);else if(a===2)for(g=v;g>=d;g--)for(c=h;s[g]&&c<l;c++)x=s[g][c],!(!x||x.index===-1||!x.visible||x.alpha===0)&&o.push(x);else if(a===3)for(g=v;g>=d;g--)for(c=l;s[g]&&c>=h;c--)x=s[g][c],!(!x||x.index===-1||!x.visible||x.alpha===0)&&o.push(x);return u.tilesDrawn=o.length,u.tilesTotal=n*r,o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=a.collideIndexes.indexOf(e);f&&o===-1?a.collideIndexes.push(e):!f&&o!==-1&&a.collideIndexes.splice(o,1)};i.exports=t},function(i,m,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(a,o,s){if(!o)return{i:0,layers:a.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=o.x+e(o,"startx",0)*a.tilewidth+e(o,"offsetx",0),r=o.y+e(o,"starty",0)*a.tileheight+e(o,"offsety",0);return{i:0,layers:o.layers,name:s.name+o.name+"/",opacity:s.opacity*o.opacity,visible:s.visible&&o.visible,x:s.x+n,y:s.y+r}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o;if(e.hasOwnProperty(f)){var s=typeof e[f];s==="function"?o=function(n,r,u,h,l,d){return e[f](n,r,u,h,l,d)}:o=function(){return e[f]}}else typeof a=="function"?o=a:o=function(){return a};return o};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),f=t(13),a=t(99),o=t(80),s=t(162),n=t(583),r=t(263),u=t(6),h=t(264),l=t(266),d=t(268),v=function(c,g,x){x===void 0&&(x=e);for(var A=x.targets?x.targets:r(g),T=n(g),E=s(g,"delay",x.delay),S=s(g,"duration",x.duration),C=u(g,"easeParams",x.easeParams),P=o(u(g,"ease",x.ease),C),R=s(g,"hold",x.hold),M=s(g,"repeat",x.repeat),L=s(g,"repeatDelay",x.repeatDelay),F=a(g,"yoyo",x.yoyo),I=a(g,"flipX",x.flipX),w=a(g,"flipY",x.flipY),U=[],z=0;z<T.length;z++)for(var W=T[z].key,H=T[z].value,D=0;D<A.length;D++){var O=h(W,H),B=d(A[D],D,W,O.getEnd,O.getStart,O.getActive,o(u(H,"ease",P),u(H,"easeParams",C)),s(H,"delay",E),s(H,"duration",S),a(H,"yoyo",F),s(H,"hold",R),s(H,"repeat",M),s(H,"repeatDelay",L),a(H,"flipX",I),a(H,"flipY",w));U.push(B)}var N=new l(c,U,A);N.offset=f(g,"offset",null),N.completeDelay=f(g,"completeDelay",0),N.loop=Math.round(f(g,"loop",0)),N.loopDelay=Math.round(f(g,"loopDelay",0)),N.paused=a(g,"paused",!1),N.useFrames=a(g,"useFrames",!1);for(var G=u(g,"callbackScope",N),V=[N,null],Y=l.TYPES,X=0;X<Y.length;X++){var b=Y[X],Q=u(g,b,!1);if(Q){var K=u(g,b+"Scope",G),$=u(g,b+"Params",[]);N.setCallback(b,Q,V.concat($),K)}}return N};i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(102),a=t(2),o=t(132),s=t(185),n=new e({initialize:function(u){this.parent=u,this.animationManager=u.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(r){var u=this.parent;if(r===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++){var l=r[h];this.nextAnim===null?this.nextAnim=l:this.nextAnimsQueue.push(l)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(r){this.isPlaying&&this.stop();var u=this.animationManager,h=typeof r=="string"?r:a(r,"key",null),l=this.exists(h)?this.get(h):u.get(h);if(!l)console.warn("Missing animation: "+h);else{this.currentAnim=l;var d=l.getTotalFrames(),v=a(r,"frameRate",l.frameRate),c=a(r,"duration",l.duration);l.calculateDuration(this,d,c,v),this.delay=a(r,"delay",l.delay),this.repeat=a(r,"repeat",l.repeat),this.repeatDelay=a(r,"repeatDelay",l.repeatDelay),this.yoyo=a(r,"yoyo",l.yoyo),this.showOnStart=a(r,"showOnStart",l.showOnStart),this.hideOnComplete=a(r,"hideOnComplete",l.hideOnComplete),this.skipMissedFrames=a(r,"skipMissedFrames",l.skipMissedFrames),this.timeScale=a(r,"timeScale",this.timeScale);var g=a(r,"startFrame",0);g>l.getTotalFrames()&&(g=0);var x=l.frames[g];g===0&&!this.forward&&(x=l.getLastFrame()),this.currentFrame=x}return this.parent},pause:function(r){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),r!==void 0&&this.setCurrentFrame(r),this.parent},resume:function(r){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),r!==void 0&&this.setCurrentFrame(r),this.parent},playAfterDelay:function(r,u){if(!this.isPlaying)this.delayCounter=u,this.play(r,!0);else{var h=this.nextAnim,l=this.nextAnimsQueue;h&&l.unshift(h),this.nextAnim=r,this._pendingStop=1,this._pendingStopValue=u}return this.parent},playAfterRepeat:function(r,u){if(u===void 0&&(u=1),!this.isPlaying)this.play(r);else{var h=this.nextAnim,l=this.nextAnimsQueue;h&&l.unshift(h),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=r,this._pendingStop=2,this._pendingStopValue=u}return this.parent},play:function(r,u){u===void 0&&(u=!1);var h=this.currentAnim,l=this.parent,d=typeof r=="string"?r:r.key;if(u&&this.isPlaying&&h.key===d)return l;if(h&&this.isPlaying){var v=this.animationManager.getMix(h.key,r);if(v>0)return this.playAfterDelay(r,v)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r)},playReverse:function(r,u){u===void 0&&(u=!1);var h=typeof r=="string"?r:r.key;return u&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r))},startAnimation:function(r){this.load(r);var u=this.currentAnim,h=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(r,u){var h=this.currentAnim,l=this.currentFrame,d=this.parent,v=l.textureFrame;d.emit(r,h,l,d,v),u&&d.emit(u+h.key,h,l,d,v)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var r=this.currentFrame;if(!r)return 0;var u=r.progress;return this.inReverse&&(u*=-1),u},setProgress:function(r){return this.forward||(r=1-r),this.setCurrentFrame(this.currentAnim.getFrameByProgress(r)),this.parent},setRepeat:function(r){return this.repeatCounter=r===-1?Number.MAX_VALUE:r,this.parent},globalRemove:function(r,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(r,u){r===void 0&&(r=!1),u===void 0&&(u=!1);var h=this.currentAnim,l=this.parent;return h?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!r,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):l},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(r)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(r)}return this.parent},stopAfterDelay:function(r){return this._pendingStop=1,this._pendingStopValue=r,this.parent},stopAfterRepeat:function(r){return r===void 0&&(r=1),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=r,this.parent},stopOnFrame:function(r){return this._pendingStop=3,this._pendingStopValue=r,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(r,u){var h=this.currentAnim;if(!(!this.isPlaying||!h||h.paused)){if(this.accumulator+=u*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var l=0;do this.forward?h.nextFrame(this):h.previousFrame(this),l++;while(this.isPlaying&&this.accumulator>this.nextTick&&l<60)}}},setCurrentFrame:function(r){var u=this.parent;return this.currentFrame=r,u.texture=r.frame.texture,u.frame=r.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),r.setAlpha&&(u.alpha=r.alpha),u.setSizeToFrame(),u._originComponent&&(r.frame.customPivot?u.setOrigin(r.frame.pivotX,r.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===r&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(r){return this.anims?this.anims.get(r):null},exists:function(r){return this.anims?this.anims.has(r):!1},create:function(r){var u=r.key,h=!1;return u&&(h=this.get(u),h||(h=new s(this,u,r),this.anims||(this.anims=new f),this.anims.set(u,h))),h},generateFrameNames:function(r,u){return this.animationManager.generateFrameNames(r,u)},generateFrameNumbers:function(r,u){return this.animationManager.generateFrameNumbers(r,u)},remove:function(r){var u=this.get(r);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(r)),u},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});i.exports=n},function(i,m,t){var e={};i.exports=e;var f=t(166);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(a,o){for(var s=o*o*o,n=0;n<a.length;n++){var r=a[n],u=r.speed*r.speed+r.angularSpeed*r.angularSpeed;if(r.force.x!==0||r.force.y!==0){e.set(r,!1);continue}var h=Math.min(r.motion,u),l=Math.max(r.motion,u);r.motion=e._minBias*h+(1-e._minBias)*l,r.sleepThreshold>0&&r.motion<e._motionSleepThreshold*s?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold&&e.set(r,!0)):r.sleepCounter>0&&(r.sleepCounter-=1)}},e.afterCollisions=function(a,o){for(var s=o*o*o,n=0;n<a.length;n++){var r=a[n];if(!!r.isActive){var u=r.collision,h=u.bodyA.parent,l=u.bodyB.parent;if(!(h.isSleeping&&l.isSleeping||h.isStatic||l.isStatic)&&(h.isSleeping||l.isSleeping)){var d=h.isSleeping&&!h.isStatic?h:l,v=d===h?l:h;!d.isStatic&&v.motion>e._motionWakeThreshold*s&&e.set(d,!1)}}}},e.set=function(a,o){var s=a.isSleeping;o?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,s||f.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,s&&f.trigger(a,"sleepEnd"))}})()},function(i,m,t){var e={};i.exports=e;var f=t(32);(function(){e.on=function(a,o,s){for(var n=o.split(" "),r,u=0;u<n.length;u++)r=n[u],a.events=a.events||{},a.events[r]=a.events[r]||[],a.events[r].push(s);return s},e.off=function(a,o,s){if(!o){a.events={};return}typeof o=="function"&&(s=o,o=f.keys(a.events).join(" "));for(var n=o.split(" "),r=0;r<n.length;r++){var u=a.events[n[r]],h=[];if(s&&u)for(var l=0;l<u.length;l++)u[l]!==s&&h.push(u[l]);a.events[n[r]]=h}},e.trigger=function(a,o,s){var n,r,u,h,l=a.events;if(l&&f.keys(l).length>0){s||(s={}),n=o.split(" ");for(var d=0;d<n.length;d++)if(r=n[d],u=l[r],u){h=f.clone(s,!1),h.name=r,h.source=a;for(var v=0;v<u.length;v++)u[v].apply(a,[h])}}}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(175),f=t(92),a=t(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(s){s===void 0&&(s=f.MULTI_PIPELINE);var n=this.scene.sys.renderer;if(!n)return!1;var r=n.pipelines;if(this.postPipelines=[],this.pipelineData={},r){var u=r.get(s);if(u)return this.defaultPipeline=u,this.pipeline=u,!0}return!1},setPipeline:function(s,n,r){var u=this.scene.sys.renderer;if(!u)return this;var h=u.pipelines;if(h){var l=h.get(s);l&&(this.pipeline=l),n&&(this.pipelineData=r?e(n):n)}return this},setPostPipeline:function(s,n,r){var u=this.scene.sys.renderer;if(!u)return this;var h=u.pipelines;if(h){Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++){var d=h.getPostPipeline(s[l],this);d&&this.postPipelines.push(d)}n&&(this.pipelineData=r?e(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(s,n){var r=this.pipelineData;return n===void 0?delete r[s]:r[s]=n,this},getPostPipeline:function(s){for(var n=this.postPipelines,r=[],u=0;u<n.length;u++){var h=n[u];(typeof s=="string"&&h.name===s||h instanceof s)&&r.push(h)}return r.length===1?r[0]:r},resetPipeline:function(s,n){return s===void 0&&(s=!1),n===void 0&&(n=!1),this.pipeline=this.defaultPipeline,s&&(this.postPipelines=[],this.hasPostPipeline=!1),n&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(s){s===void 0&&(s=!1);for(var n=this.postPipelines,r=0;r<n.length;r++)n[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,s&&(this.pipelineData={})},removePostPipeline:function(s){for(var n=this.postPipelines,r=n.length-1;r>=0;r--){var u=n[r];(typeof s=="string"&&u.name===s||typeof s!="string"&&u instanceof s)&&(u.destroy(),a(n,r))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s){return s===void 0&&(s=new e),s.x=a.x+a.radius*Math.cos(o),s.y=a.y+a.radius*Math.sin(o),s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){o===void 0&&(o=new e);var s=2*Math.PI*Math.random(),n=Math.random()+Math.random(),r=n>1?2-n:n,u=r*Math.cos(s),h=r*Math.sin(s);return o.x=a.x+u*a.radius,o.y=a.y+h*a.radius,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),f=t(4),a=function(o,s,n){if(n===void 0&&(n=new f),s<=0||s>=1)return n.x=o.x,n.y=o.y,n;var r=e(o)*s;return s>.5?(r-=o.width+o.height,r<=o.width?(n.x=o.right-r,n.y=o.bottom):(n.x=o.x,n.y=o.bottom-(r-o.width))):r<=o.width?(n.x=o.x+r,n.y=o.y):(n.x=o.right,n.y=o.y+(r-o.width)),n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(4),a=function(o,s,n,r){r===void 0&&(r=[]),!s&&n>0&&(s=e(o)/n);for(var u=o.x1,h=o.y1,l=o.x2,d=o.y2,v=0;v<s;v++){var c=v/s,g=u+(l-u)*c,x=h+(d-h)*c;r.push(new f(g,x))}return r};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){o===void 0&&(o=new e);var s=Math.random();return o.x=a.x1+s*(a.x2-a.x1),o.y=a.y1+s*(a.y2-a.y1),o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){return o===void 0&&(o=new e),o.x=a.x+Math.random()*a.width,o.y=a.y+Math.random()*a.height,o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f,a,o;if(typeof e!="object"||e===null)return e;f=Array.isArray(e)?[]:{};for(o in e)a=e[o],f[o]=t(a);return f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(f.textureKey=e.texture.key,f.frameKey=e.frame.name),f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r,u,h,l){l===void 0&&(l=new e);var d=Math.sin(r),v=Math.cos(r),c=v*u,g=d*u,x=-d*h,A=v*h,T=1/(c*A+x*-g);return l.x=A*T*a+-x*T*o+(n*x-s*A)*T,l.y=c*T*o+-g*T*a+(-n*c+s*g)*T,l};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);for(var a=null,o=0;o<f;o++)a=e.shift(),e.push(a);return a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);for(var a=null,o=0;o<f;o++)a=e.pop(),e.unshift(a);return a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){o===void 0&&(o=new e);var s=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return o.x=a.x+n*Math.cos(s)*a.width/2,o.y=a.y+n*Math.sin(s)*a.height/2,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){o===void 0&&(o=new e);var s=a.x2-a.x1,n=a.y2-a.y1,r=a.x3-a.x1,u=a.y3-a.y1,h=Math.random(),l=Math.random();return h+l>=1&&(h=1-h,l=1-l),o.x=a.x1+(s*h+r*l),o.y=a.y1+(n*h+u*l),o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){var n=o+Math.atan2(e.y-a,e.x-f);return e.x=f+s*Math.cos(n),e.y=a+s*Math.sin(n),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e=Math.max(0,Math.min(1,(e-f)/(a-f))),e*e*e*(e*(e*6-15)+10)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e<=f?0:e>=a?1:(e=(e-f)/(a-f),e*e*(3-2*e))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(132),o=t(318),s=t(319),n=t(6),r=t(320),u=new f({initialize:function(l,d,v){this.manager=l,this.key=d,this.type="frame",this.frames=this.getFrames(l.textureManager,n(v,"frames",[]),n(v,"defaultTextureKey",null),n(v,"sortFrames",!0)),this.frameRate=n(v,"frameRate",null),this.duration=n(v,"duration",null),this.msPerFrame,this.skipMissedFrames=n(v,"skipMissedFrames",!0),this.delay=n(v,"delay",0),this.repeat=n(v,"repeat",0),this.repeatDelay=n(v,"repeatDelay",0),this.yoyo=n(v,"yoyo",!1),this.showOnStart=n(v,"showOnStart",!1),this.hideOnComplete=n(v,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(h,l,d,v){d===null&&v===null?(h.frameRate=24,h.duration=24/l*1e3):d&&v===null?(h.duration=d,h.frameRate=l/(d/1e3)):(h.frameRate=v,h.duration=l/v*1e3),h.msPerFrame=1e3/h.frameRate},addFrame:function(h){return this.addFrameAt(this.frames.length,h)},addFrameAt:function(h,l){var d=this.getFrames(this.manager.textureManager,l);if(d.length>0){if(h===0)this.frames=d.concat(this.frames);else if(h===this.frames.length)this.frames=this.frames.concat(d);else{var v=this.frames.slice(0,h),c=this.frames.slice(h);this.frames=v.concat(d,c)}this.updateFrameSequence()}return this},checkFrame:function(h){return h>=0&&h<this.frames.length},getFirstTick:function(h){h.accumulator=0,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameAt:function(h){return this.frames[h]},getFrames:function(h,l,d,v){v===void 0&&(v=!0);var c=[],g,x,A=1,T,E;if(typeof l=="string"){E=l;var S=h.get(E),C=S.getFrameNames();v&&r(C),l=[],C.forEach(function(I){l.push({key:E,frame:I})})}if(!Array.isArray(l)||l.length===0)return c;for(T=0;T<l.length;T++){var P=l[T],R=n(P,"key",d);if(!!R){var M=n(P,"frame",0),L=h.getFrame(R,M);x=new s(R,M,A,L),x.duration=n(P,"duration",0),x.isFirst=!g,g&&(g.nextFrame=x,x.prevFrame=g),c.push(x),g=x,A++}}if(c.length>0){x.isLast=!0,x.nextFrame=c[0],c[0].prevFrame=x;var F=1/(c.length-1);for(T=0;T<c.length;T++)c[T].progress=T*F}return c},getNextTick:function(h){h.accumulator-=h.nextTick,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameByProgress:function(h){return h=e(h,0,1),o(h,this.frames,"progress")},nextFrame:function(h){var l=h.currentFrame;l.isLast?h.yoyo?this.handleYoyoFrame(h,!1):h.repeatCounter>0?h.inReverse&&h.forward?h.forward=!1:this.repeatAnimation(h):h.complete():this.updateAndGetNextTick(h,l.nextFrame)},handleYoyoFrame:function(h,l){if(l||(l=!1),h.inReverse===!l&&h.repeatCounter>0){(h.repeatDelay===0||h.pendingRepeat)&&(h.forward=l),this.repeatAnimation(h);return}if(h.inReverse!==l&&h.repeatCounter===0){h.complete();return}h.forward=l;var d=l?h.currentFrame.nextFrame:h.currentFrame.prevFrame;this.updateAndGetNextTick(h,d)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(h){var l=h.currentFrame;l.isFirst?h.yoyo?this.handleYoyoFrame(h,!0):h.repeatCounter>0?h.inReverse&&!h.forward?this.repeatAnimation(h):(h.forward=!0,this.repeatAnimation(h)):h.complete():this.updateAndGetNextTick(h,l.prevFrame)},updateAndGetNextTick:function(h,l){h.setCurrentFrame(l),this.getNextTick(h)},removeFrame:function(h){var l=this.frames.indexOf(h);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(h){return this.frames.splice(h,1),this.updateFrameSequence(),this},repeatAnimation:function(h){if(h._pendingStop===2){if(h._pendingStopValue===0)return h.stop();h._pendingStopValue--}h.repeatDelay>0&&!h.pendingRepeat?(h.pendingRepeat=!0,h.accumulator-=h.nextTick,h.nextTick+=h.repeatDelay):(h.repeatCounter--,h.forward?h.setCurrentFrame(h.currentFrame.nextFrame):h.setCurrentFrame(h.currentFrame.prevFrame),h.isPlaying&&(this.getNextTick(h),h.handleRepeat()))},toJSON:function(){var h={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){h.frames.push(l.toJSON())}),h},updateFrameSequence:function(){for(var h=this.frames.length,l=1/(h-1),d,v=0;v<h;v++)d=this.frames[v],d.index=v+1,d.isFirst=!1,d.isLast=!1,d.progress=v*l,v===0?(d.isFirst=!0,h===1?(d.isLast=!0,d.nextFrame=d,d.prevFrame=d):(d.isLast=!1,d.prevFrame=this.frames[h-1],d.nextFrame=this.frames[v+1])):v===h-1&&h>1?(d.isLast=!0,d.prevFrame=this.frames[h-2],d.nextFrame=this.frames[0]):h>1&&(d.prevFrame=this.frames[v-1],d.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var h=0;h<this.frames.length;h++)this.frames[h].destroy();this.frames=[],this.manager=null}});i.exports=u},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f===void 0&&(f=0),a===void 0&&(a=" "),o===void 0&&(o=3),e=e.toString();var s=0;if(f+1>=e.length)switch(o){case 1:e=new Array(f+1-e.length).join(a)+e;break;case 3:var n=Math.ceil((s=f-e.length)/2),r=s-n;e=new Array(r+1).join(a)+e+new Array(n+1).join(a);break;default:e=e+new Array(f+1-e.length).join(a);break}return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(327),f=t(189),a=t(331),o=t(332),s=function(n){var r=typeof n;switch(r){case"string":return n.substr(0,3).toLowerCase()==="rgb"?o(n):e(n);case"number":return f(n);case"object":return a(n)}};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103);function f(o,s,n,r){var u=(o+s*6)%6,h=Math.min(u,4-u,1);return Math.round(255*(r-r*n*Math.max(0,h)))}var a=function(o,s,n,r){s===void 0&&(s=1),n===void 0&&(n=1);var u=f(5,o,s,n),h=f(3,o,s,n),l=f(1,o,s,n);return r?r.setTo?r.setTo(u,h,l,r.alpha,!1):(r.r=u,r.g=h,r.b=l,r.color=e(u,h,l),r):{r:u,g:h,b:l,color:e(u,h,l)}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=t(330),a=function(o){var s=f(o);return new e(s.r,s.g,s.b,s.a)};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.x=f-e.width/2,e.y=a-e.height/2,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),f=t(136),a=t(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function s(){var r=new ArrayBuffer(4),u=new Uint8Array(r),h=new Uint32Array(r);return u[0]=161,u[1]=178,u[2]=195,u[3]=212,h[0]===3569595041?!0:h[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var r=!1,u=function(){if(window.WebGLRenderingContext)try{var h=a.createWebGL(this),l=h.getContext("webgl")||h.getContext("experimental-webgl"),d=a.create2D(this),v=d.getContext("2d"),c=v.createImageData(1,1);return r=c.data instanceof Uint8ClampedArray,a.remove(h),a.remove(d),!!l}catch{return!1}return!1};return o.webGL=u(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,f.firefox&&f.firefoxVersion<21&&(o.getUserMedia=!1),!e.iOS&&(f.ie||f.firefox||f.chrome)&&(o.canvasBitBltShift=!0),(f.safari||f.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=s()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&r,o}i.exports=n()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",e=function(){var f=function(n){for(var r=["i","webkitI","msI","mozI","oI"],u=0;u<r.length;u++){var h=r[u]+"mageSmoothingEnabled";if(h in n)return h}return null},a=function(n){return t===""&&(t=f(n)),t&&(n[t]=!0),n},o=function(n){return t===""&&(t=f(n)),t&&(n[t]=!1),n},s=function(n){return t!==null?n[t]:null};return{disable:o,enable:a,getPrefix:f,isEnabled:s}};i.exports=e()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(17),a={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};a=f(!1,a,e),i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){var n=(o-f)*.5,r=(s-a)*.5,u=e*e,h=e*u;return(2*a-2*o+n+r)*h+(-3*a+3*o-2*n-r)*u+n*e+a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.floor(Math.random()*(f-e+1)+e)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(a){return a*e.RAD_TO_DEG};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(a){return this._matrix=a,this._dirty=!0,this},reset:function(){var a=this._matrix;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=1,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=1,a[13]=0,a[14]=0,a[15]=0,a[16]=0,a[17]=0,a[18]=1,a[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var a=new Float32Array(this._matrix);a[4]/=255,a[9]/=255,a[14]/=255,a[19]/=255,this._data=a,this._dirty=!1}return this._data},brightness:function(a,o){a===void 0&&(a=0),o===void 0&&(o=!1);var s=a;return this.multiply([s,0,0,0,0,0,s,0,0,0,0,0,s,0,0,0,0,0,1,0],o)},saturate:function(a,o){a===void 0&&(a=0),o===void 0&&(o=!1);var s=a*2/3+1,n=(s-1)*-.5;return this.multiply([s,n,n,0,0,n,s,n,0,0,n,n,s,0,0,0,0,0,1,0],o)},desaturate:function(a){return a===void 0&&(a=!1),this.saturate(-1,a)},hue:function(a,o){a===void 0&&(a=0),o===void 0&&(o=!1),a=a/180*Math.PI;var s=Math.cos(a),n=Math.sin(a),r=.213,u=.715,h=.072;return this.multiply([r+s*(1-r)+n*-r,u+s*-u+n*-u,h+s*-h+n*(1-h),0,0,r+s*-r+n*.143,u+s*(1-u)+n*.14,h+s*-h+n*-.283,0,0,r+s*-r+n*-(1-r),u+s*-u+n*u,h+s*(1-h)+n*h,0,0,0,0,0,1,0],o)},grayscale:function(a,o){return a===void 0&&(a=1),o===void 0&&(o=!1),this.saturate(-a,o)},blackWhite:function(a){return a===void 0&&(a=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a)},contrast:function(a,o){a===void 0&&(a=0),o===void 0&&(o=!1);var s=a+1,n=-.5*(s-1);return this.multiply([s,0,0,0,n,0,s,0,0,n,0,0,s,0,n,0,0,0,1,0],o)},negative:function(a){return a===void 0&&(a=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a)},desaturateLuminance:function(a){return a===void 0&&(a=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a)},sepia:function(a){return a===void 0&&(a=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a)},night:function(a,o){return a===void 0&&(a=.1),o===void 0&&(o=!1),this.multiply([a*-2,-a,0,0,0,-a,0,a,0,0,0,a,a*2,0,0,0,0,0,1,0],o)},lsd:function(a){return a===void 0&&(a=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a)},brown:function(a){return a===void 0&&(a=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)},vintagePinhole:function(a){return a===void 0&&(a=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a)},kodachrome:function(a){return a===void 0&&(a=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a)},technicolor:function(a){return a===void 0&&(a=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a)},polaroid:function(a){return a===void 0&&(a=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a)},shiftToBGR:function(a){return a===void 0&&(a=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)},multiply:function(a,o){o||this.reset();for(var s=this._matrix,n=[],r=0;r<20;r++)n[r]=s[r];return s[0]=n[0]*a[0]+n[1]*a[5]+n[2]*a[10]+n[3]*a[15],s[1]=n[0]*a[1]+n[1]*a[6]+n[2]*a[11]+n[3]*a[16],s[2]=n[0]*a[2]+n[1]*a[7]+n[2]*a[12]+n[3]*a[17],s[3]=n[0]*a[3]+n[1]*a[8]+n[2]*a[13]+n[3]*a[18],s[4]=n[0]*a[4]+n[1]*a[9]+n[2]*a[14]+n[3]*a[19]+n[4],s[5]=n[5]*a[0]+n[6]*a[5]+n[7]*a[10]+n[8]*a[15],s[6]=n[5]*a[1]+n[6]*a[6]+n[7]*a[11]+n[8]*a[16],s[7]=n[5]*a[2]+n[6]*a[7]+n[7]*a[12]+n[8]*a[17],s[8]=n[5]*a[3]+n[6]*a[8]+n[7]*a[13]+n[8]*a[18],s[9]=n[5]*a[4]+n[6]*a[9]+n[7]*a[14]+n[8]*a[19]+n[9],s[10]=n[10]*a[0]+n[11]*a[5]+n[12]*a[10]+n[13]*a[15],s[11]=n[10]*a[1]+n[11]*a[6]+n[12]*a[11]+n[13]*a[16],s[12]=n[10]*a[2]+n[11]*a[7]+n[12]*a[12]+n[13]*a[17],s[13]=n[10]*a[3]+n[11]*a[8]+n[12]*a[13]+n[13]*a[18],s[14]=n[10]*a[4]+n[11]*a[9]+n[12]*a[14]+n[13]*a[19]+n[14],s[15]=n[15]*a[0]+n[16]*a[5]+n[17]*a[10]+n[18]*a[15],s[16]=n[15]*a[1]+n[16]*a[6]+n[17]*a[11]+n[18]*a[16],s[17]=n[15]*a[2]+n[16]*a[7]+n[17]*a[12]+n[18]*a[17],s[18]=n[15]*a[3]+n[16]*a[8]+n[17]*a[13]+n[18]*a[18],s[19]=n[15]*a[4]+n[16]*a[9]+n[17]*a[14]+n[18]*a[19]+n[19],this._dirty=!0,this}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(14),a=function(o,s){if(s===void 0&&(s=new e),o.length===0)return s;for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,u=f.MIN_SAFE_INTEGER,h=f.MIN_SAFE_INTEGER,l,d,v,c=0;c<o.length;c++)l=o[c],Array.isArray(l)?(d=l[0],v=l[1]):(d=l.x,v=l.y),n=Math.min(n,d),r=Math.min(r,v),u=Math.max(u,d),h=Math.max(h,v);return s.x=n,s.y=r,s.width=u-n,s.height=h-r,s};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1),a=new e({initialize:function(s,n,r){this._rgb=[0,0,0],this.onChangeCallback=f,this.dirty=!1,this.set(s,n,r)},set:function(o,s,n){return o===void 0&&(o=0),s===void 0&&(s=0),n===void 0&&(n=0),this._rgb=[o,s,n],this.onChange(),this},equals:function(o,s,n){var r=this._rgb;return r.r===o&&r.g===s&&r.b===n},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){e.parentNode&&e.parentNode.removeChild(e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(144),a=t(197),o=t(20),s=t(419),n=t(420),r=t(33),u=t(1),h=t(421),l=new e({initialize:function(v,c){this.scene=v,this.game,this.renderer,this.config=c,this.settings=h.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(d){this.settings.status=f.INIT,this.sceneUpdate=u,this.game=d,this.renderer=d.renderer,this.canvas=d.canvas,this.context=d.context;var v=d.plugins;this.plugins=v,v.addToScene(this,a.Global,[a.CoreScene,n(this),s(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(d,v){var c=this.events;c.emit(o.PRE_UPDATE,d,v),c.emit(o.UPDATE,d,v),this.sceneUpdate.call(this.scene,d,v),c.emit(o.POST_UPDATE,d,v)},render:function(d){var v=this.displayList;v.depthSort(),this.events.emit(o.PRE_RENDER,d),this.cameras.render(d,v),this.events.emit(o.RENDER,d)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(d){var v=this.events,c=this.settings;return this.settings.active&&(c.status=f.PAUSED,c.active=!1,v.emit(o.PAUSE,this,d)),this},resume:function(d){var v=this.events,c=this.settings;return this.settings.active||(c.status=f.RUNNING,c.active=!0,v.emit(o.RESUME,this,d)),this},sleep:function(d){var v=this.events,c=this.settings;return c.status=f.SLEEPING,c.active=!1,c.visible=!1,v.emit(o.SLEEP,this,d),this},wake:function(d){var v=this.events,c=this.settings;return c.status=f.RUNNING,c.active=!0,c.visible=!0,v.emit(o.WAKE,this,d),c.isTransition&&v.emit(o.TRANSITION_WAKE,c.transitionFrom,c.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===f.SLEEPING},isActive:function(){return this.settings.status===f.RUNNING},isPaused:function(){return this.settings.status===f.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(d){return this.settings.visible=d,this},setActive:function(d,v){return d?this.resume(v):this.pause(v)},start:function(d){var v=this.events,c=this.settings;d&&(c.data=d),c.status=f.START,c.active=!0,c.visible=!0,v.emit(o.START,this),v.emit(o.READY,this,d)},shutdown:function(d){var v=this.events,c=this.settings;v.off(o.TRANSITION_INIT),v.off(o.TRANSITION_START),v.off(o.TRANSITION_COMPLETE),v.off(o.TRANSITION_OUT),c.status=f.SHUTDOWN,c.active=!1,c.visible=!1,this.renderer===r.WEBGL&&this.renderer.resetTextures(!0),v.emit(o.SHUTDOWN,this,d)},destroy:function(){var d=this.events,v=this.settings;v.status=f.DESTROYED,v.active=!1,v.visible=!1,d.emit(o.DESTROY,this),d.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<c.length;g++)this[c[g]]=null}});i.exports=l},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e&&e[0].toUpperCase()+e.slice(1)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),f=t(0),a=t(109),o=t(424),s="Texture.frame missing: ",n=new f({initialize:function(u,h,l,d,v){Array.isArray(l)||(l=[l]),this.manager=u,this.key=h,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<l.length;c++)this.source.push(new o(this,l[c],d,v))},add:function(r,u,h,l,d,v){if(this.has(r))return null;var c=new a(this,r,u,h,l,d,v);return this.frames[r]=c,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,c},remove:function(r){if(this.has(r)){var u=this.get(r);return u.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames[r]},get:function(r){r||(r=this.firstFrame);var u=this.frames[r];return u||(console.warn(s+r),u=this.frames[this.firstFrame]),u},getTextureSourceIndex:function(r){for(var u=0;u<this.source.length;u++)if(this.source[u]===r)return u;return-1},getFramesFromTextureSource:function(r,u){u===void 0&&(u=!1);var h=[];for(var l in this.frames)if(!(l==="__BASE"&&!u)){var d=this.frames[l];d.sourceIndex===r&&h.push(d)}return h},getFrameNames:function(r){r===void 0&&(r=!1);var u=Object.keys(this.frames);if(!r){var h=u.indexOf("__BASE");h!==-1&&u.splice(h,1)}return u},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var u=this.frames[r];return u?u.source.image:(console.warn(s+r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var u=this.frames[r],h;return u?h=u.sourceIndex:(console.warn(s+r),h=this.frames.__BASE.sourceIndex),this.dataSource[h].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++){var h=this.source[u];this.dataSource.push(new o(this,r[u],h.width,h.height))}},setFilter:function(r){var u;for(u=0;u<this.source.length;u++)this.source[u].setFilter(r);for(u=0;u<this.dataSource.length;u++)this.dataSource[u].setFilter(r)},destroy:function(){var r;for(r=0;r<this.source.length;r++)this.source[r].destroy();for(r=0;r<this.dataSource.length;r++)this.dataSource[r].destroy();for(var u in this.frames){var h=this.frames[u];h.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var l=this.manager.game.renderer;l&&l.type===e.WEBGL&&l.resetTextures(!0),this.manager=null}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(a,o,s,n,r){n===void 0&&(n=0),r===void 0&&(r=a.length);var u=[];if(e(a,n,r))for(var h=n;h<r;h++){var l=a[h];(!o||o&&s===void 0&&l.hasOwnProperty(o)||o&&s!==void 0&&l[o]===s)&&u.push(l)}return u};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var f=e[0].length,a=1;a<e.length;a++)if(e[a].length!==f)return!1;return!0};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){f===void 0&&(f=0),a===void 0&&(a=e.length);var o=f+Math.floor(Math.random()*a);return e[o]===void 0?null:e[o]};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(438),o=new e({Extends:f,initialize:function(){f.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(s){return this._pending.push(s),this._toProcess++,s},remove:function(s){return this._destroy.push(s),this._toProcess++,s},removeAll:function(){for(var s=this._active,n=this._destroy,r=s.length;r--;)n.push(s[r]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var s=this._destroy,n=this._active,r,u;for(r=0;r<s.length;r++){u=s[r];var h=n.indexOf(u);h!==-1&&(n.splice(h,1),this.emit(a.PROCESS_QUEUE_REMOVE,u))}for(s.length=0,s=this._pending,r=0;r<s.length;r++)u=s[r],(!this.checkQueue||this.checkQueue&&n.indexOf(u)===-1)&&(n.push(u),this.emit(a.PROCESS_QUEUE_ADD,u));return s.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(f,a){return parseInt(f.getAttribute(a),10)}var e=function(f,a,o,s,n){o===void 0&&(o=0),s===void 0&&(s=0);var r=a.cutX,u=a.cutY,h=a.source.width,l=a.source.height,d=a.sourceIndex,v={},c=f.getElementsByTagName("info")[0],g=f.getElementsByTagName("common")[0];v.font=c.getAttribute("face"),v.size=t(c,"size"),v.lineHeight=t(g,"lineHeight")+s,v.chars={};var x=f.getElementsByTagName("char"),A=a!==void 0&&a.trimmed;if(A)var T=a.height,E=a.width;for(var S=0;S<x.length;S++){var C=x[S],P=t(C,"id"),R=String.fromCharCode(P),M=t(C,"x"),L=t(C,"y"),F=t(C,"width"),I=t(C,"height");A&&(M<E&&(E=M),L<T&&(T=L)),A&&T!==0&&E!==0&&(M-=a.x,L-=a.y);var w=(r+M)/h,U=(u+L)/l,z=(r+M+F)/h,W=(u+L+I)/l;if(v.chars[P]={x:M,y:L,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:t(C,"xoffset"),yOffset:t(C,"yoffset"),xAdvance:t(C,"xadvance")+o,data:{},kerning:{},u0:w,v0:U,u1:z,v1:W},n&&F!==0&&I!==0){var H=n.add(R,d,M,L,F,I);H&&H.setUVs(F,I,w,U,z,W)}}var D=f.getElementsByTagName("kerning");for(S=0;S<D.length;S++){var O=D[S],B=t(O,"first"),N=t(O,"second"),G=t(O,"amount");v.chars[N].kerning[B]=G}return v};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1049),f=t(440),a=t(0),o=t(11),s=t(109),n=t(15),r=t(110),u=new a({Extends:n,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,e],initialize:function(l,d,v,c,g){n.call(this,l,"Blitter"),this.setTexture(c,g),this.setPosition(d,v),this.initPipeline(),this.children=new r,this.renderList=[],this.dirty=!1},create:function(h,l,d,v,c){v===void 0&&(v=!0),c===void 0&&(c=this.children.length),d===void 0?d=this.frame:d instanceof s||(d=this.texture.get(d));var g=new f(this,h,l,d,v);return this.children.addAt(g,c,!1),this.dirty=!0,g},createFromCallback:function(h,l,d,v){for(var c=this.createMultiple(l,d,v),g=0;g<c.length;g++){var x=c[g];h.call(this,x,g)}return c},createMultiple:function(h,l,d){l===void 0&&(l=this.frame.name),d===void 0&&(d=!0),Array.isArray(l)||(l=[l]);var v=[],c=this;return l.forEach(function(g){for(var x=0;x<h;x++)v.push(c.create(0,0,g,d))}),v},childCanRender:function(h){return h.visible&&h.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),f=t(35),a=t(0),o=t(11),s=t(75),n=t(15),r=t(10),u=t(1052),h=t(441),l=t(3),d=new a({Extends:n,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,u],initialize:function(c,g,x,A){n.call(this,c,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=c.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(g,x),this.clearAlpha(),this.setBlendMode(f.SKIP_CHECK),A&&this.add(A)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(v){return v===void 0&&(v=!0),this.exclusive=v,this},getBounds:function(v){if(v===void 0&&(v=new r),v.setTo(this.x,this.y,0,0),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix(),g=c.transformPoint(this.x,this.y);v.setTo(g.x,g.y,0,0)}if(this.list.length>0){var x=this.list,A=new r,T=!1;v.setEmpty();for(var E=0;E<x.length;E++){var S=x[E];S.getBounds&&(S.getBounds(A),T?h(A,v,v):(v.setTo(A.x,A.y,A.width,A.height),T=!0))}}return v},addHandler:function(v){v.once(s.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer&&v.parentContainer.remove(v),v.removeFromDisplayList(),v.parentContainer=this)},removeHandler:function(v){v.off(s.DESTROY,this.remove),this.exclusive&&(v.parentContainer=null,v.addToDisplayList())},pointToContainer:function(v,c){c===void 0&&(c=new l),this.parentContainer?this.parentContainer.pointToContainer(v,c):c=new l(v.x,v.y);var g=this.tempTransformMatrix;return g.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),g.invert(),g.transformPoint(v.x,v.y,c),c},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(v){return e.Add(this.list,v,this.maxSize,this.addHandler,this),this},addAt:function(v,c){return e.AddAt(this.list,v,c,this.maxSize,this.addHandler,this),this},getAt:function(v){return this.list[v]},getIndex:function(v){return this.list.indexOf(v)},sort:function(v,c){return v?(c===void 0&&(c=function(g,x){return g[v]-x[v]}),e.StableSort(this.list,c),this):this},getByName:function(v){return e.GetFirst(this.list,"name",v)},getRandom:function(v,c){return e.GetRandom(this.list,v,c)},getFirst:function(v,c,g,x){return e.GetFirst(this.list,v,c,g,x)},getAll:function(v,c,g,x){return e.GetAll(this.list,v,c,g,x)},count:function(v,c,g,x){return e.CountAllMatching(this.list,v,c,g,x)},swap:function(v,c){return e.Swap(this.list,v,c),this},moveTo:function(v,c){return e.MoveTo(this.list,v,c),this},moveAbove:function(v,c){return e.MoveAbove(this.list,v,c),this},moveBelow:function(v,c){return e.MoveBelow(this.list,v,c),this},remove:function(v,c){var g=e.Remove(this.list,v,this.removeHandler,this);if(c&&g){Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++)g[x].destroy()}return this},removeAt:function(v,c){var g=e.RemoveAt(this.list,v,this.removeHandler,this);return c&&g&&g.destroy(),this},removeBetween:function(v,c,g){var x=e.RemoveBetween(this.list,v,c,this.removeHandler,this);if(g)for(var A=0;A<x.length;A++)x[A].destroy();return this},removeAll:function(v){var c=e.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(v)for(var g=0;g<c.length;g++)c[g].destroy();return this},bringToTop:function(v){return e.BringToTop(this.list,v),this},sendToBack:function(v){return e.SendToBack(this.list,v),this},moveUp:function(v){return e.MoveUp(this.list,v),this},moveDown:function(v){return e.MoveDown(this.list,v),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(v,c,g){var x=e.Replace(this.list,v,c);return x&&(this.addHandler(c),this.removeHandler(v),g&&v.destroy()),this},exists:function(v){return this.list.indexOf(v)>-1},setAll:function(v,c,g,x){return e.SetAll(this.list,v,c,g,x),this},each:function(v,c){var g=[null],x,A=this.list.slice(),T=A.length;for(x=2;x<arguments.length;x++)g.push(arguments[x]);for(x=0;x<T;x++)g[0]=A[x],v.apply(c,g);return this},iterate:function(v,c){var g=[null],x;for(x=2;x<arguments.length;x++)g.push(arguments[x]);for(x=0;x<this.list.length;x++)g[0]=this.list[x],v.apply(c,g);return this},setScrollFactor:function(v,c,g){return c===void 0&&(c=v),g===void 0&&(g=!1),this.scrollFactorX=v,this.scrollFactorY=c,g&&(e.SetAll(this.list,"scrollFactorX",v),e.SetAll(this.list,"scrollFactorY",c)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),f=t(0),a=t(1057),o=new f({Extends:e,Mixins:[a],initialize:function(n,r,u,h,l,d,v){e.call(this,n,r,u,h,l,d,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(s,n){return this.cropWidth=s,this.cropHeight=n,this},setDisplayCallback:function(s){return this.displayCallback=s,this},setScrollX:function(s){return this.scrollX=s,this},setScrollY:function(s){return this.scrollY=s,this}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),f=t(0),a=t(217),o=t(303),s=t(304),n=t(305),r=t(309),u=t(167),h=t(312),l=t(313),d=t(314),v=t(111),c=t(15),g=t(2),x=t(6),A=t(14),T=t(1063),E=new f({Extends:c,Mixins:[o,s,n,r,u,l,d,h,T],initialize:function(C,P){var R=x(P,"x",0),M=x(P,"y",0);c.call(this,C,"Graphics"),this.setPosition(R,M),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(P)},setDefaultStyles:function(S){return x(S,"lineStyle",null)&&(this.defaultStrokeWidth=x(S,"lineStyle.width",1),this.defaultStrokeColor=x(S,"lineStyle.color",16777215),this.defaultStrokeAlpha=x(S,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),x(S,"fillStyle",null)&&(this.defaultFillColor=x(S,"fillStyle.color",16777215),this.defaultFillAlpha=x(S,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(S,C,P){return P===void 0&&(P=1),this.commandBuffer.push(a.LINE_STYLE,S,C,P),this._lineWidth=S,this},fillStyle:function(S,C){return C===void 0&&(C=1),this.commandBuffer.push(a.FILL_STYLE,S,C),this},fillGradientStyle:function(S,C,P,R,M,L,F,I){return M===void 0&&(M=1),L===void 0&&(L=M),F===void 0&&(F=M),I===void 0&&(I=M),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,M,L,F,I,S,C,P,R),this},lineGradientStyle:function(S,C,P,R,M,L){return L===void 0&&(L=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,S,L,C,P,R,M),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(S){return this.fillCircle(S.x,S.y,S.radius)},strokeCircleShape:function(S){return this.strokeCircle(S.x,S.y,S.radius)},fillCircle:function(S,C,P){return this.beginPath(),this.arc(S,C,P,0,A.PI2),this.fillPath(),this},strokeCircle:function(S,C,P){return this.beginPath(),this.arc(S,C,P,0,A.PI2),this.strokePath(),this},fillRectShape:function(S){return this.fillRect(S.x,S.y,S.width,S.height)},strokeRectShape:function(S){return this.strokeRect(S.x,S.y,S.width,S.height)},fillRect:function(S,C,P,R){return this.commandBuffer.push(a.FILL_RECT,S,C,P,R),this},strokeRect:function(S,C,P,R){var M=this._lineWidth/2,L=S-M,F=S+M;return this.beginPath(),this.moveTo(S,C),this.lineTo(S,C+R),this.strokePath(),this.beginPath(),this.moveTo(S+P,C),this.lineTo(S+P,C+R),this.strokePath(),this.beginPath(),this.moveTo(L,C),this.lineTo(F+P,C),this.strokePath(),this.beginPath(),this.moveTo(L,C+R),this.lineTo(F+P,C+R),this.strokePath(),this},fillRoundedRect:function(S,C,P,R,M){M===void 0&&(M=20);var L=M,F=M,I=M,w=M;return typeof M!="number"&&(L=g(M,"tl",20),F=g(M,"tr",20),I=g(M,"bl",20),w=g(M,"br",20)),this.beginPath(),this.moveTo(S+L,C),this.lineTo(S+P-F,C),this.arc(S+P-F,C+F,F,-A.TAU,0),this.lineTo(S+P,C+R-w),this.arc(S+P-w,C+R-w,w,0,A.TAU),this.lineTo(S+I,C+R),this.arc(S+I,C+R-I,I,A.TAU,Math.PI),this.lineTo(S,C+L),this.arc(S+L,C+L,L,-Math.PI,-A.TAU),this.fillPath(),this},strokeRoundedRect:function(S,C,P,R,M){M===void 0&&(M=20);var L=M,F=M,I=M,w=M;return typeof M!="number"&&(L=g(M,"tl",20),F=g(M,"tr",20),I=g(M,"bl",20),w=g(M,"br",20)),this.beginPath(),this.moveTo(S+L,C),this.lineTo(S+P-F,C),this.moveTo(S+P-F,C),this.arc(S+P-F,C+F,F,-A.TAU,0),this.lineTo(S+P,C+R-w),this.moveTo(S+P,C+R-w),this.arc(S+P-w,C+R-w,w,0,A.TAU),this.lineTo(S+I,C+R),this.moveTo(S+I,C+R),this.arc(S+I,C+R-I,I,A.TAU,Math.PI),this.lineTo(S,C+L),this.moveTo(S,C+L),this.arc(S+L,C+L,L,-Math.PI,-A.TAU),this.strokePath(),this},fillPointShape:function(S,C){return this.fillPoint(S.x,S.y,C)},fillPoint:function(S,C,P){return!P||P<1?P=1:(S-=P/2,C-=P/2),this.commandBuffer.push(a.FILL_RECT,S,C,P,P),this},fillTriangleShape:function(S){return this.fillTriangle(S.x1,S.y1,S.x2,S.y2,S.x3,S.y3)},strokeTriangleShape:function(S){return this.strokeTriangle(S.x1,S.y1,S.x2,S.y2,S.x3,S.y3)},fillTriangle:function(S,C,P,R,M,L){return this.commandBuffer.push(a.FILL_TRIANGLE,S,C,P,R,M,L),this},strokeTriangle:function(S,C,P,R,M,L){return this.commandBuffer.push(a.STROKE_TRIANGLE,S,C,P,R,M,L),this},strokeLineShape:function(S){return this.lineBetween(S.x1,S.y1,S.x2,S.y2)},lineBetween:function(S,C,P,R){return this.beginPath(),this.moveTo(S,C),this.lineTo(P,R),this.strokePath(),this},lineTo:function(S,C){return this.commandBuffer.push(a.LINE_TO,S,C),this},moveTo:function(S,C){return this.commandBuffer.push(a.MOVE_TO,S,C),this},strokePoints:function(S,C,P,R){C===void 0&&(C=!1),P===void 0&&(P=!1),R===void 0&&(R=S.length),this.beginPath(),this.moveTo(S[0].x,S[0].y);for(var M=1;M<R;M++)this.lineTo(S[M].x,S[M].y);return C&&this.lineTo(S[0].x,S[0].y),P&&this.closePath(),this.strokePath(),this},fillPoints:function(S,C,P,R){C===void 0&&(C=!1),P===void 0&&(P=!1),R===void 0&&(R=S.length),this.beginPath(),this.moveTo(S[0].x,S[0].y);for(var M=1;M<R;M++)this.lineTo(S[M].x,S[M].y);return C&&this.lineTo(S[0].x,S[0].y),P&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(S,C){C===void 0&&(C=32);var P=S.getPoints(C);return this.strokePoints(P,!0)},strokeEllipse:function(S,C,P,R,M){M===void 0&&(M=32);var L=new v(S,C,P,R),F=L.getPoints(M);return this.strokePoints(F,!0)},fillEllipseShape:function(S,C){C===void 0&&(C=32);var P=S.getPoints(C);return this.fillPoints(P,!0)},fillEllipse:function(S,C,P,R,M){M===void 0&&(M=32);var L=new v(S,C,P,R),F=L.getPoints(M);return this.fillPoints(F,!0)},arc:function(S,C,P,R,M,L,F){return L===void 0&&(L=!1),F===void 0&&(F=0),this.commandBuffer.push(a.ARC,S,C,P,R,M,L,F),this},slice:function(S,C,P,R,M,L,F){return L===void 0&&(L=!1),F===void 0&&(F=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,S,C),this.commandBuffer.push(a.ARC,S,C,P,R,M,L,F),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(S,C){return this.commandBuffer.push(a.TRANSLATE,S,C),this},scaleCanvas:function(S,C){return this.commandBuffer.push(a.SCALE,S,C),this},rotateCanvas:function(S){return this.commandBuffer.push(a.ROTATE,S),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(S,C,P){var R=this.scene.sys,M=R.game.renderer;C===void 0&&(C=R.scale.width),P===void 0&&(P=R.scale.height),E.TargetCamera.setScene(this.scene),E.TargetCamera.setViewport(0,0,C,P),E.TargetCamera.scrollX=this.x,E.TargetCamera.scrollY=this.y;var L,F;if(typeof S=="string")if(R.textures.exists(S)){L=R.textures.get(S);var I=L.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else L=R.textures.createCanvas(S,C,P),F=L.getSourceImage().getContext("2d");else S instanceof HTMLCanvasElement&&(F=S.getContext("2d"));return F&&(this.renderCanvas(M,this,E.TargetCamera,null,F,!1),L&&L.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});E.TargetCamera=new e,i.exports=E},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s){s===void 0&&(s=new e);var n=a.width/2,r=a.height/2;return s.x=a.x+n*Math.cos(o),s.y=a.y+r*Math.sin(o),s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(0),a=t(11),o=t(176),s=t(101),n=t(9),r=t(75),u=t(110),h=t(1071),l=t(20),d=t(79),v=new f({Extends:u,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.Visible,n,h],initialize:function(g,x){u.call(this,g),n.call(this),this.scene=g,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=g.sys,this.events=g.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(e.SKIP_CHECK),x&&this.add(x),g.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(c,g){return this.data||(this.data=new s(this)),this.data.set(c,g),this},incData:function(c,g){return this.data||(this.data=new s(this)),this.data.inc(c,g),this},toggleData:function(c){return this.data||(this.data=new s(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new s(this)),this.data.get(c)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(c){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,g=this.parentContainer,x=[];g&&(x.unshift(g.getIndex(c)),c=g,g.parentContainer);)g=g.parentContainer;return x.unshift(this.displayList.getIndex(c)),x},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(r.ADDED_TO_SCENE,c,this.scene),this.events.emit(l.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(r.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,c,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(d(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,g){return c._depth-g._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(r.DESTROY,this);for(var c=this.list.length;c--;)this.list[c].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(450),s=t(110),n=t(452),r=t(1075),u=new e({Extends:a,Mixins:[f.Depth,f.Mask,f.Pipeline,f.Transform,f.Visible,r],initialize:function(l,d,v,c){if(a.call(this,l,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],v!==null&&(typeof v=="object"||Array.isArray(v))&&(c=v,v=null),this.setTexture(d,v),this.initPipeline(),this.emitters=new s(this),this.wells=new s(this),c){Array.isArray(c)||(c=[c]);for(var g=0;g<c.length;g++)this.createEmitter(c[g])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(h,l){return this.texture=this.scene.sys.textures.get(h),this.setFrame(l)},setFrame:function(h){this.frame=this.texture.get(h);var l=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),d=[];return l.forEach(function(v){d.push(v.name)}),this.frameNames=d,this.defaultFrame=this.frame,this},setEmitterFrames:function(h,l){Array.isArray(h)||(h=[h]);var d=l.frames;d.length=0;for(var v=0;v<h.length;v++){var c=h[v];this.frameNames.indexOf(c)!==-1&&d.push(this.texture.get(c))}return d.length>0?l.defaultFrame=d[0]:l.defaultFrame=this.defaultFrame,this},addEmitter:function(h){return this.emitters.add(h)},createEmitter:function(h){return this.addEmitter(new n(this,h))},removeEmitter:function(h){return this.emitters.remove(h,!0)},addGravityWell:function(h){return this.wells.add(h)},createGravityWell:function(h){return this.addGravityWell(new o(h))},emitParticle:function(h,l,d){for(var v=this.emitters.list,c=0;c<v.length;c++){var g=v[c];g.active&&g.emitParticle(h,l,d)}return this},emitParticleAt:function(h,l,d){return this.emitParticle(d,h,l)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(h,l){l*=this.timeScale;for(var d=this.emitters.list,v=0;v<d.length;v++){var c=d[v];c.active&&c.preUpdate(h,l)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(133),a=t(31),o=t(0),s=t(11),n=t(33),r=t(109),u=t(15),h=t(1),l=t(92),d=t(1079),v=t(141),c=t(12),g=t(222),x=new o({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,d],initialize:function(T,E,S,C,P,R,M){E===void 0&&(E=0),S===void 0&&(S=0),C===void 0&&(C=32),P===void 0&&(P=32),u.call(this,T,"RenderTexture"),this.renderer=T.sys.renderer,this.textureManager=T.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,R===void 0?(this.canvas=a.create2D(this,C,P),this.texture=T.sys.textures.addCanvas(g(),this.canvas),this.frame=this.texture.get()):(this.texture=T.sys.textures.get(R),this.frame=this.texture.get(M),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new f(0,0,C,P),this.renderTarget=null;var L=this.renderer;L?L.type===n.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new v(L,C,P,1,0,!1)):L.type===n.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=h,this.camera.setScene(T),this.setPosition(E,S),R===void 0&&this.setSize(C,P),this.setOrigin(0,0),this.initPipeline(l.SINGLE_PIPELINE)},setSize:function(A,T){return this.resize(A,T)},resize:function(A,T){T===void 0&&(T=A);var E=this.frame;if(A!==this.width||T!==this.height){if(E.name==="__BASE"){this.canvas.width=A,this.canvas.height=T,this.texture.width=A,this.texture.height=T;var S=this.renderTarget;S&&(S.resize(A,T),E.glTexture=S.texture,E.source.isRenderTexture=!0,E.source.isGLTexture=!0,E.source.glTexture=S.texture),this.camera.setSize(A,T),E.source.width=A,E.source.height=T,E.setSize(A,T),this.width=A,this.height=T}}else{var C=this.texture.getSourceImage();E.cutX+A>C.width&&(A=C.width-E.cutX),E.cutY+T>C.height&&(T=C.height-E.cutY),E.setSize(A,T,E.cutX,E.cutY)}this.updateDisplayOrigin();var P=this.input;return P&&!P.customHitArea&&(P.hitArea.width=A,P.hitArea.height=T),this},setGlobalTint:function(A){return this.globalTint=A,this},setGlobalAlpha:function(A){return this.globalAlpha=A,this},saveTexture:function(A){return this.textureManager.renameTexture(this.texture.key,A),this._saved=!0,this.texture},fill:function(A,T,E,S,C,P){var R=this.frame,M=this.camera,L=this.renderer;T===void 0&&(T=1),E===void 0&&(E=0),S===void 0&&(S=0),C===void 0&&(C=R.cutWidth),P===void 0&&(P=R.cutHeight);var F=(A>>16&255)/255,I=(A>>8&255)/255,w=(A&255)/255,U=this.renderTarget;if(M.preRender(),U){U.bind(!0);var z=this.pipeline;z.manager.set(z);var W=U.width,H=U.height,D=L.width,O=L.height,B=D/W,N=O/H;z.drawFillRect(E*B,S*N,C*B,P*N,c.getTintFromFloats(w,I,F,1),T),U.unbind(!0)}else{var G=this.context;L.setContext(G),G.fillStyle="rgba("+F+","+I+","+w+","+T+")",G.fillRect(E+R.cutX,S+R.cutY,C,P),L.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var A=this.renderTarget;if(A)A.clear();else{var T=this.context;T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),T.restore()}this.dirty=!1}return this},erase:function(A,T,E){return this._eraseMode=!0,this.draw(A,T,E,1,16777215),this._eraseMode=!1,this},draw:function(A,T,E,S,C){return this.beginDraw(),this.batchDraw(A,T,E,S,C),this.endDraw(),this},drawFrame:function(A,T,E,S,C,P){return this.beginDraw(),this.batchDrawFrame(A,T,E,S,C,P),this.endDraw(),this},beginDraw:function(){var A=this.camera,T=this.renderer,E=this.renderTarget;return A.preRender(),E?T.beginCapture(E.width,E.height):T.setContext(this.context),this},batchDraw:function(A,T,E,S,C){return S===void 0&&(S=this.globalAlpha),C===void 0?C=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):C=(C>>16)+(C&65280)+((C&255)<<16),Array.isArray(A)||(A=[A]),this.batchList(A,T,E,S,C),this},batchDrawFrame:function(A,T,E,S,C,P){E===void 0&&(E=0),S===void 0&&(S=0),C===void 0&&(C=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16);var R=this.textureManager.getFrame(A,T);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,E,S,P,C,this.camera.matrix,null):this.batchTextureFrame(R,E+this.frame.cutX,S+this.frame.cutY,C,P)),this},endDraw:function(A){A===void 0&&(A=this._eraseMode);var T=this.renderer,E=this.renderTarget;if(E){var S=T.endCapture(),C=T.pipelines.setUtility();C.blitFrame(S,E,1,!1,!1,A),T.resetScissor(),T.resetViewport()}else T.setContext();return this.dirty=!0,this},batchList:function(A,T,E,S,C){for(var P=0;P<A.length;P++){var R=A[P];!R||R===this||(R.renderWebGL||R.renderCanvas?this.drawGameObject(R,T,E):R.isParent||R.list?this.batchGroup(R.getChildren(),T,E):typeof R=="string"?this.batchTextureFrameKey(R,null,T,E,S,C):R instanceof r?this.batchTextureFrame(R,T,E,S,C):Array.isArray(R)&&this.batchList(R,T,E,S,C))}},batchGroup:function(A,T,E){T===void 0&&(T=0),E===void 0&&(E=0),T+=this.frame.cutX,E+=this.frame.cutY;for(var S=0;S<A.length;S++){var C=A[S];if(C.willRender(this.camera)){var P=C.x+T,R=C.y+E;this.drawGameObject(C,P,R)}}},batchGameObjectWebGL:function(A,T,E){T===void 0&&(T=A.x),E===void 0&&(E=A.y);var S=A.x,C=A.y;A.setPosition(T+this.frame.cutX,E+this.frame.cutY),A.renderDirect?A.renderDirect(this.renderer,A,this.camera):A.renderWebGL(this.renderer,A,this.camera),A.setPosition(S,C)},batchGameObjectCanvas:function(A,T,E){T===void 0&&(T=A.x),E===void 0&&(E=A.y);var S=A.x,C=A.y;if(this._eraseMode){var P=A.blendMode;A.blendMode=e.ERASE}A.setPosition(T+this.frame.cutX,E+this.frame.cutY),A.renderCanvas(this.renderer,A,this.camera,null),A.setPosition(S,C),this._eraseMode&&(A.blendMode=P)},batchTextureFrameKey:function(A,T,E,S,C,P){var R=this.textureManager.getFrame(A,T);R&&this.batchTextureFrame(R,E,S,C,P)},batchTextureFrame:function(A,T,E,S,C){T===void 0&&(T=0),E===void 0&&(E=0),T+=this.frame.cutX,E+=this.frame.cutY;var P=this.renderTarget;if(P)this.pipeline.batchTextureFrame(A,T,E,C,S,this.camera.matrix,null);else{var R=this.context,M=A.canvasData,L=A.source.image,F=this.camera.matrix;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=S,F.setToContext(R),R.drawImage(L,M.x,M.y,M.width,M.height,T,E,M.width,M.height),R.restore()}},snapshotArea:function(A,T,E,S,C,P,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!1,A,T,E,S,P,R):this.renderer.snapshotCanvas(this.canvas,C,!1,A,T,E,S,P,R),this},snapshot:function(A,T,E){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,A,!1,0,0,this.width,this.height,T,E):this.renderer.snapshotCanvas(this.canvas,A,!1,0,0,this.width,this.height,T,E),this},snapshotPixel:function(A,T,E){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!0,A,T):this.renderer.snapshotCanvas(this.canvas,E,!0,A,T),this},preDestroy:function(){this._saved||(a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});i.exports=x},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var f=Math.random()*16|0,a=e==="x"?f:f&3|8;return a.toString(16)})};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),f=t(0),a=t(11),o=t(15),s=t(92),n=t(1085),r=t(3),u=new f({Extends:o,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,n],initialize:function(l,d,v,c,g,x,A,T,E){c===void 0&&(c="__DEFAULT"),x===void 0&&(x=2),A===void 0&&(A=!0),o.call(this,l,"Rope"),this.anims=new e(this),this.points=x,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=c==="__DEFAULT",this.dirty=!1,this.horizontal=A,this._flipX=!1,this._flipY=!1,this._perp=new r,this.debugCallback=null,this.debugGraphic=null,this.setTexture(c,g),this.setPosition(d,v),this.setSizeToFrame(),this.initPipeline(s.ROPE_PIPELINE),Array.isArray(x)&&this.resizeArrays(x.length),this.setPoints(x,T,E),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,l){var d=this.anims.currentFrame;this.anims.update(h,l),this.anims.currentFrame!==d&&(this.updateUVs(),this.updateVertices())},play:function(h,l,d){return this.anims.play(h,l,d),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(h,l,d){return h===void 0&&(h=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(h,l,d))},setVertical:function(h,l,d){return h===void 0&&(h=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(h,l,d)):this},setTintFill:function(h){return h===void 0&&(h=!1),this.tintFill=h,this},setAlphas:function(h,l){var d=this.points.length;if(d<1)return this;var v=this.alphas;h===void 0?h=[1]:!Array.isArray(h)&&l===void 0&&(h=[h]);var c,g=0;if(l!==void 0)for(c=0;c<d;c++)g=c*2,v[g]=h,v[g+1]=l;else if(h.length===d)for(c=0;c<d;c++)g=c*2,v[g]=h[c],v[g+1]=h[c];else{var x=h[0];for(c=0;c<d;c++)g=c*2,h.length>g&&(x=h[g]),v[g]=x,h.length>g+1&&(x=h[g+1]),v[g+1]=x}return this},setColors:function(h){var l=this.points.length;if(l<1)return this;var d=this.colors;h===void 0?h=[16777215]:Array.isArray(h)||(h=[h]);var v,c=0;if(h.length===l)for(v=0;v<l;v++)c=v*2,d[c]=h[v],d[c+1]=h[v];else{var g=h[0];for(v=0;v<l;v++)c=v*2,h.length>c&&(g=h[c]),d[c]=g,h.length>c+1&&(g=h[c+1]),d[c+1]=g}return this},setPoints:function(h,l,d){if(h===void 0&&(h=2),typeof h=="number"){var v=h;v<2&&(v=2),h=[];var c,g,x;if(this.horizontal)for(x=-this.frame.halfWidth,g=this.frame.width/(v-1),c=0;c<v;c++)h.push({x:x+c*g,y:0});else for(x=-this.frame.halfHeight,g=this.frame.height/(v-1),c=0;c<v;c++)h.push({x:0,y:x+c*g})}var A=h.length,T=this.points.length;return A<1?(console.warn("Rope: Not enough points given"),this):(A===1&&(h.unshift({x:0,y:0}),A++),T!==A&&this.resizeArrays(A),this.points=h,this.updateUVs(),l!=null&&this.setColors(l),d!=null&&this.setAlphas(d),this)},updateUVs:function(){for(var h=this.uv,l=this.points.length,d=this.frame.u0,v=this.frame.v0,c=this.frame.u1,g=this.frame.v1,x=(c-d)/(l-1),A=(g-v)/(l-1),T=0;T<l;T++){var E=T*4,S,C,P,R;this.horizontal?(this._flipX?(S=c-T*x,P=c-T*x):(S=d+T*x,P=d+T*x),this._flipY?(C=g,R=v):(C=v,R=g)):(this._flipX?(S=d,P=c):(S=c,P=d),this._flipY?(C=g-T*A,R=g-T*A):(C=v+T*A,R=v+T*A)),h[E+0]=S,h[E+1]=C,h[E+2]=P,h[E+3]=R}return this},resizeArrays:function(h){var l=this.colors,d=this.alphas;this.vertices=new Float32Array(h*4),this.uv=new Float32Array(h*4),l=new Uint32Array(h*2),d=new Float32Array(h*2);for(var v=0;v<h*2;v++)l[v]=16777215,d[v]=1;return this.colors=l,this.alphas=d,this.dirty=!0,this},updateVertices:function(){var h=this._perp,l=this.points,d=this.vertices,v=l.length;if(this.dirty=!1,!(v<1)){for(var c,g=l[0],x=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,A=0;A<v;A++){var T=l[A],E=A*4;A<v-1?c=l[A+1]:c=T,h.x=c.y-g.y,h.y=-(c.x-g.x);var S=h.length();h.x/=S,h.y/=S,h.x*=x,h.y*=x,d[E]=T.x+h.x,d[E+1]=T.y+h.y,d[E+2]=T.x-h.x,d[E+3]=T.y-h.y,g=T}return this}},setDebug:function(h,l){return this.debugGraphic=h,!h&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(h,l,d){var v=h.debugGraphic,c=d[0],g=d[1],x=d[2],A=d[3];v.lineBetween(c,g,x,A);for(var T=4;T<l;T+=4){var E=d[T+0],S=d[T+1],C=d[T+2],P=d[T+3];v.lineBetween(c,g,E,S),v.lineBetween(x,A,C,P),v.lineBetween(x,A,E,S),v.lineBetween(E,S,C,P),c=E,g=S,x=C,A=P}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(h){return this._flipX=h,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(h){return this._flipY=h,this.updateUVs()}}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),f=t(31),a=t(0),o=t(11),s=t(22),n=t(15),r=t(458),u=t(6),h=t(202),l=t(1088),d=t(459),v=new a({Extends:n,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,l],initialize:function(g,x,A,T,E){x===void 0&&(x=0),A===void 0&&(A=0),n.call(this,g,"Text"),this.renderer=g.sys.renderer,this.setPosition(x,A),this.setOrigin(0,0),this.initPipeline(),this.canvas=f.create(this),this.context=this.canvas.getContext("2d"),this.style=new d(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=g.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(T),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing),g.sys.game.events.on(s.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",e(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(c){var g=this.style;if(g.wordWrapCallback){var x=g.wordWrapCallback.call(g.wordWrapCallbackScope,c,this);return Array.isArray(x)&&(x=x.join(`
`)),x}else return g.wordWrapWidth?g.wordWrapUseAdvanced?this.advancedWordWrap(c,this.context,this.style.wordWrapWidth):this.basicWordWrap(c,this.context,this.style.wordWrapWidth):c},advancedWordWrap:function(c,g,x){for(var A="",T=c.replace(/ +/gi," ").split(this.splitRegExp),E=T.length,S=0;S<E;S++){var C=T[S],P="";C=C.replace(/^ *|\s*$/gi,"");var R=g.measureText(C).width;if(R<x){A+=C+`
`;continue}for(var M=x,L=C.split(" "),F=0;F<L.length;F++){var I=L[F],w=I+" ",U=g.measureText(w).width;if(U>M){if(F===0){for(var z=w;z.length&&(z=z.slice(0,-1),U=g.measureText(z).width,!(U<=M)););if(!z.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var W=I.substr(z.length);L[F]=W,P+=z}var H=L[F].length?F:F+1,D=L.slice(H).join(" ").replace(/[ \n]*$/gi,"");T[S+1]=D+" "+(T[S+1]||""),E=T.length;break}else P+=w,M-=U}A+=P.replace(/[ \n]*$/gi,"")+`
`}return A=A.replace(/[\s|\n]*$/gi,""),A},basicWordWrap:function(c,g,x){for(var A="",T=c.split(this.splitRegExp),E=T.length-1,S=g.measureText(" ").width,C=0;C<=E;C++){for(var P=x,R=T[C].split(" "),M=R.length-1,L=0;L<=M;L++){var F=R[L],I=g.measureText(F).width,w=I;L<M&&(w+=S),w>P&&L>0&&(A+=`
`,P=x),A+=F,L<M?(A+=" ",P-=w):P-=I}C<E&&(A+=`
`)}return A},getWrappedText:function(c){c===void 0&&(c=this._text),this.style.syncFont(this.canvas,this.context);var g=this.runWordWrap(c);return g.split(this.splitRegExp)},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this._text&&(this._text=c.toString(),this.updateText()),this},setStyle:function(c){return this.style.setStyle(c)},setFont:function(c){return this.style.setFont(c)},setFontFamily:function(c){return this.style.setFontFamily(c)},setFontSize:function(c){return this.style.setFontSize(c)},setFontStyle:function(c){return this.style.setFontStyle(c)},setFixedSize:function(c,g){return this.style.setFixedSize(c,g)},setBackgroundColor:function(c){return this.style.setBackgroundColor(c)},setFill:function(c){return this.style.setFill(c)},setColor:function(c){return this.style.setColor(c)},setStroke:function(c,g){return this.style.setStroke(c,g)},setShadow:function(c,g,x,A,T,E){return this.style.setShadow(c,g,x,A,T,E)},setShadowOffset:function(c,g){return this.style.setShadowOffset(c,g)},setShadowColor:function(c){return this.style.setShadowColor(c)},setShadowBlur:function(c){return this.style.setShadowBlur(c)},setShadowStroke:function(c){return this.style.setShadowStroke(c)},setShadowFill:function(c){return this.style.setShadowFill(c)},setWordWrapWidth:function(c,g){return this.style.setWordWrapWidth(c,g)},setWordWrapCallback:function(c,g){return this.style.setWordWrapCallback(c,g)},setAlign:function(c){return this.style.setAlign(c)},setResolution:function(c){return this.style.setResolution(c)},setLineSpacing:function(c){return this.lineSpacing=c,this.updateText()},setPadding:function(c,g,x,A){if(typeof c=="object"){var T=c,E=u(T,"x",null);E!==null?(c=E,x=E):(c=u(T,"left",0),x=u(T,"right",c));var S=u(T,"y",null);S!==null?(g=S,A=S):(g=u(T,"top",0),A=u(T,"bottom",g))}else c===void 0&&(c=0),g===void 0&&(g=c),x===void 0&&(x=c),A===void 0&&(A=g);return this.padding.left=c,this.padding.top=g,this.padding.right=x,this.padding.bottom=A,this.updateText()},setMaxLines:function(c){return this.style.setMaxLines(c)},updateText:function(){var c=this.canvas,g=this.context,x=this.style,A=x.resolution,T=x.metrics;x.syncFont(c,g);var E=this._text;(x.wordWrapWidth||x.wordWrapCallback)&&(E=this.runWordWrap(this._text));var S=E.split(this.splitRegExp),C=r(this,T,S),P=this.padding,R;x.fixedWidth===0?(this.width=C.width+P.left+P.right,R=C.width):(this.width=x.fixedWidth,R=this.width-P.left-P.right,R<C.width&&(R=C.width)),x.fixedHeight===0?this.height=C.height+P.top+P.bottom:this.height=x.fixedHeight;var M=this.width,L=this.height;this.updateDisplayOrigin(),M*=A,L*=A,M=Math.max(M,1),L=Math.max(L,1),c.width!==M||c.height!==L?(c.width=M,c.height=L,this.frame.setSize(M,L),x.syncFont(c,g)):g.clearRect(0,0,M,L),g.save(),g.scale(A,A),x.backgroundColor&&(g.fillStyle=x.backgroundColor,g.fillRect(0,0,M,L)),x.syncStyle(c,g),g.textBaseline="alphabetic",g.translate(P.left,P.top);for(var F,I,w=0;w<C.lines;w++){if(F=x.strokeThickness/2,I=x.strokeThickness/2+w*C.lineHeight+T.ascent,w>0&&(I+=C.lineSpacing*w),x.rtl)F=M-F;else if(x.align==="right")F+=R-C.lineWidths[w];else if(x.align==="center")F+=(R-C.lineWidths[w])/2;else if(x.align==="justify"){var U=.85;if(C.lineWidths[w]/C.width>=U){var z=C.width-C.lineWidths[w],W=g.measureText(" ").width,H=S[w].trim(),D=H.split(" ");z+=(S[w].length-H.length)*W;for(var O=Math.floor(z/W),B=0;O>0;)D[B]+=" ",B=(B+1)%(D.length-1||1),--O;S[w]=D.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),x.strokeThickness&&(this.style.syncShadow(g,x.shadowStroke),g.strokeText(S[w],F,I)),x.color&&(this.style.syncShadow(g,x.shadowFill),g.fillText(S[w],F,I))}g.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(c,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var N=this.input;return N&&!N.customHitArea&&(N.hitArea.width=this.width,N.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(c){this.setText(c)}},toJSON:function(){var c=o.ToJSON(this),g={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return c.data=g,c},preDestroy:function(){this.style.rtl&&h(this.canvas),f.remove(this.canvas),this.texture.destroy()}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(0),a=t(11),o=t(22),s=t(15),n=t(361),r=t(192),u=t(1091),h=t(3),l=8,d=new f({Extends:s,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,u],initialize:function(c,g,x,A,T,E,S){var C=c.sys.renderer;s.call(this,c,"TileSprite");var P=c.sys.textures.get(E),R=P.get(S);!A||!T?(A=R.width,T=R.height):(A=Math.floor(A),T=Math.floor(T)),this._tilePosition=new h,this._tileScale=new h(1,1),this.dirty=!1,this.renderer=C,this.canvas=e.create(this,A,T),this.context=this.canvas.getContext("2d"),this.displayTexture=P,this.displayFrame=R,this._crop=this.resetCropObject(),this.texture=c.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=n(R.width),this.potHeight=n(R.height),this.fillCanvas=e.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(g,x),this.setSize(A,T),this.setFrame(S),this.setOriginFromFrame(),this.initPipeline(),c.sys.game.events.on(o.CONTEXT_RESTORED,function(M){if(!!M){var L=M.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=M.createTexture2D(0,L.LINEAR,L.LINEAR,L.REPEAT,L.REPEAT,L.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(v,c){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(c)},setFrame:function(v){var c=this.displayTexture.get(v);return this.potWidth=n(c.width),this.potHeight=n(c.height),this.canvas.width=0,!c.cutWidth||!c.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=c,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,c){return v!==void 0&&(this.tilePositionX=v),c!==void 0&&(this.tilePositionY=c),this},setTileScale:function(v,c){return v===void 0&&(v=this.tileScaleX),c===void 0&&(c=v),this.tileScaleX=v,this.tileScaleY=c,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var c=this.fillContext,g=this.fillCanvas,x=this.potWidth,A=this.potHeight;(!this.renderer||!this.renderer.gl)&&(x=v.cutWidth,A=v.cutHeight),c.clearRect(0,0,x,A),g.width=x,g.height=A,c.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,x,A),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(g,this.fillPattern):this.fillPattern=c.createPattern(g,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var c=this.context;this.scene.sys.game.config.antialias||r.disable(c);var g=this._tileScale.x,x=this._tileScale.y,A=this._tilePosition.x,T=this._tilePosition.y;c.clearRect(0,0,this.width,this.height),c.save(),c.scale(g,x),c.translate(-A,-T),c.fillStyle=this.fillPattern,c.fillRect(A,T,this.width/g,this.height/x),c.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),e.remove(this.canvas),e.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),a=t(11),o=t(75),s=t(22),n=t(51),r=t(15),u=t(70),h=t(222),l=t(1094),d=t(14),v=new e({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,l],initialize:function(g,x,A,T){r.call(this,g,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=h(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=d.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(x,A),this.initPipeline(),T&&this.changeSource(T,!1);var E=g.sys.game.events;E.on(s.PAUSE,this.globalPause,this),E.on(s.RESUME,this.globalResume,this);var S=g.sys.sound;S&&S.on(u.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(c,g,x){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var A=this.video;if(!A)return console.warn("Video not loaded"),this;c===void 0&&(c=A.loop);var T=this.scene.sys.sound;T&&T.mute&&this.setMute(!0),isNaN(g)||(this._markerIn=g),!isNaN(x)&&x>g&&(this._markerOut=x),A.loop=c;var E=this._callbacks,S=A.play();return S!==void 0?S.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(A.addEventListener("playing",E.play,!0),A.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),A.addEventListener("ended",E.end,!0),A.addEventListener("timeupdate",E.time,!0),A.addEventListener("seeking",E.seeking,!0),A.addEventListener("seeked",E.seeked,!0),this},changeSource:function(c,g,x,A,T){g===void 0&&(g=!0);var E=this.video;E&&this.stop();var S=this.scene.sys.cache.video.get(c);return S?(this.video=S,this._cacheKey=c,this._codePaused=S.paused,this._codeMuted=S.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,S,S.videoWidth,S.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,S.videoWidth,S.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,S.videoWidth,S.videoHeight)):this.updateTexture(),S.currentTime=0,this._lastUpdate=0,g&&this.play(x,A,T)):this.video=null,this},addMarker:function(c,g,x){return!isNaN(g)&&g>=0&&!isNaN(x)&&(this.markers[c]=[g,x]),this},playMarker:function(c,g){var x=this.markers[c];return x&&this.play(g,x[0],x[1]),this},removeMarker:function(c){return delete this.markers[c],this},snapshot:function(c,g){return c===void 0&&(c=this.width),g===void 0&&(g=this.height),this.snapshotArea(0,0,this.width,this.height,c,g)},snapshotArea:function(c,g,x,A,T,E){c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=this.width),A===void 0&&(A=this.height),T===void 0&&(T=x),E===void 0&&(E=A);var S=this.video,C=this.snapshotTexture;return C?(C.setSize(T,E),S&&C.context.drawImage(S,c,g,x,A,0,0,T,E)):(C=this.scene.sys.textures.createCanvas(h(),T,E),this.snapshotTexture=C,S&&C.context.drawImage(S,c,g,x,A,0,0,T,E)),C.update()},saveSnapshotTexture:function(c){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,c):this.snapshotTexture=this.scene.sys.textures.createCanvas(c,this.width,this.height),this.snapshotTexture},loadURL:function(c,g,x){x===void 0&&(x=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var A=document.createElement("video");return A.controls=!1,x&&(A.muted=!0,A.defaultMuted=!0,A.setAttribute("autoplay","autoplay")),A.setAttribute("playsinline","playsinline"),A.setAttribute("preload","auto"),A.addEventListener("error",this._callbacks.error,!0),A.src=c,A.load(),this.video=A,this},loadMediaStream:function(c,g,x){x===void 0&&(x=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var A=document.createElement("video");A.controls=!1,x&&(A.muted=!0,A.defaultMuted=!0,A.setAttribute("autoplay","autoplay")),A.setAttribute("playsinline","playsinline"),A.setAttribute("preload","auto"),A.addEventListener("error",this._callbacks.error,!0);try{A.srcObject=c}catch{A.src=window.URL.createObjectURL(c)}return A.load(),this.video=A,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(c){this.scene.sys.input.once(n.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,c)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(c){this.stop(),this.emit(o.VIDEO_ERROR,this,c)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var c=this.video;if(c){var g=c.currentTime;g!==this._lastUpdate&&(this._lastUpdate=g,this.updateTexture(),g>=this._markerOut&&(c.loop?(c.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=g,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var c=this.video,g=c.videoWidth,x=c.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,c,g,x),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,g,x),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,g,x);else{var A=this.videoTextureSource;A.source!==c&&(A.source=c,A.width=g,A.height=x),A.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(c){var g=this.video;if(g){var x=g.duration;if(x!==1/0&&!isNaN(x)){var A=x*c;this.setCurrentTime(A)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(c){var g=this.video;if(g){if(typeof c=="string"){var x=c[0],A=parseFloat(c.substr(1));x==="+"?c=g.currentTime+A:x==="-"&&(c=g.currentTime-A)}g.currentTime=c,this._lastUpdate=c}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var c=this.video;c&&this.updateTexture()},getProgress:function(){var c=this.video;if(c){var g=c.currentTime,x=c.duration;if(x!==1/0&&!isNaN(x))return g/x}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(c){c===void 0&&(c=!0),this._codeMuted=c;var g=this.video;return g&&(g.muted=this._systemMuted?!0:c),this},isMuted:function(){return this._codeMuted},globalMute:function(c,g){this._systemMuted=g;var x=this.video;x&&(x.muted=this._codeMuted?!0:g)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(c){c===void 0&&(c=!0);var g=this.video;return this._codePaused=c,g&&(c?g.paused||g.pause():c||g.paused&&!this._systemPaused&&g.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(c){return c===void 0&&(c=1),this.video&&(this.video.volume=f(c,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(c){return this.video&&(this.video.playbackRate=c),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(c){return c===void 0&&(c=!0),this.video&&(this.video.loop=c),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(c,g){return g===void 0&&(g=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,c),this._key=c,this.flipY=g,this.videoTextureSource&&this.videoTextureSource.setFlipY(g),this.videoTexture},stop:function(){var c=this.video;if(c){var g=this._callbacks;for(var x in g)c.removeEventListener(x,g[x],!0);c.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var c=this.video;if(!!c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("autoplay"),c.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var c=this.scene.sys.game.events;c.off(s.PAUSE,this.globalPause,this),c.off(s.RESUME,this.globalResume,this);var g=this.scene.sys.sound;g&&g.off(u.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(228),a=t(470),o=t(56),s=new e({initialize:function(r){this.type=o.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(n,r){return f(this,n,r)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var r,u=Number.MAX_VALUE,h=0;h<n.length;h++)r={x:0,y:0},typeof n[h]=="number"||typeof n[h]=="string"?(r.x=parseFloat(n[h]),r.y=parseFloat(n[h+1]),h++):Array.isArray(n[h])?(r.x=n[h][0],r.y=n[h][1]):(r.x=n[h].x,r.y=n[h].y),this.points.push(r),r.y<u&&(u=r.y);return this.calculateArea(u),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,r,u,h=0;h<this.points.length-1;h++)r=this.points[h],u=this.points[h+1],n+=(u.x-r.x)*(r.y+u.y);return r=this.points[0],u=this.points[this.points.length-1],n+=(r.x-u.x)*(u.y+r.y),this.area=-n*.5,this.area},getPoints:function(n,r,u){return a(this,n,r,u)}});i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){for(var o=!1,s=-1,n=e.points.length-1;++s<e.points.length;n=s){var r=e.points[s].x,u=e.points[s].y,h=e.points[n].x,l=e.points[n].y;(u<=a&&a<l||l<=a&&a<u)&&f<(h-r)*(a-u)/(l-u)+r&&(o=!o)}return o};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(2),s=t(17),n=t(478),r=t(1176),u=t(25),h=new e({Extends:a,Mixins:[f.ComputedSize,f.Depth,f.GetBounds,f.Mask,f.Origin,f.ScrollFactor,f.Transform,f.Visible,r],initialize:function(d,v,c,g,x,A,T,E){c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=128),A===void 0&&(A=128),a.call(this,d,"Shader"),this.blendMode=-1,this.shader;var S=d.sys.renderer;this.renderer=S,this.gl=S.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=S.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=S.width,this._rendererHeight=S.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(c,g),this.setSize(x,A),this.setOrigin(.5,.5),this.setShader(v,T,E)},willRender:function(l){return this.renderToTexture?!0:!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setRenderToTexture:function(l,d){if(d===void 0&&(d=!1),!this.renderToTexture){var v=this.width,c=this.height,g=this.renderer;this.glTexture=g.createTextureFromSource(null,v,c,0),this.glTexture.flipY=d,this.framebuffer=g.createFramebuffer(v,c,this.glTexture,!1),this._rendererWidth=v,this._rendererHeight=c,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),l&&(this.texture=this.scene.sys.textures.addGLTexture(l,this.glTexture,v,c))}return this.shader&&(g.pipelines.clear(),this.load(),this.flush(),g.pipelines.rebind()),this},setShader:function(l,d,v){if(d===void 0&&(d=[]),typeof l=="string"){var c=this.scene.sys.cache.shader;if(!c.has(l))return console.warn("Shader missing: "+l),this;this.shader=c.get(l)}else this.shader=l;var g=this.gl,x=this.renderer;this.program&&g.deleteProgram(this.program);var A=x.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);g.uniformMatrix4fv(g.getUniformLocation(A,"uViewMatrix"),!1,this.viewMatrix),g.uniformMatrix4fv(g.getUniformLocation(A,"uProjectionMatrix"),!1,this.projectionMatrix),g.uniform2f(g.getUniformLocation(A,"uResolution"),this.width,this.height),this.program=A;var T=new Date,E={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),T.getHours()*60*60+T.getMinutes()*60+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=s(!0,{},this.shader.uniforms,E):this.uniforms=E;for(var S=0;S<4;S++)d[S]&&this.setSampler2D("iChannel"+S,d[S],S,v);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(l){return this.pointer=l,this},projOrtho:function(l,d,v,c){var g=-1e3,x=1e3,A=1/(l-d),T=1/(v-c),E=1/(g-x),S=this.projectionMatrix;S[0]=-2*A,S[5]=-2*T,S[10]=2*E,S[12]=(l+d)*A,S[13]=(c+v)*T,S[14]=(x+g)*E;var C=this.program,P=this.gl,R=this.renderer;R.setProgram(C),P.uniformMatrix4fv(P.getUniformLocation(C,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=d,this._rendererHeight=v},initUniforms:function(){var l=this.gl,d=this.renderer.glFuncMap,v=this.program;this._textureCount=0;for(var c in this.uniforms){var g=this.uniforms[c],x=g.type,A=d[x];g.uniformLocation=l.getUniformLocation(v,c),x!=="sampler2D"&&(g.glMatrix=A.matrix,g.glValueLength=A.length,g.glFunc=A.func)}},setSampler2DBuffer:function(l,d,v,c,g,x){g===void 0&&(g=0),x===void 0&&(x={});var A=this.uniforms[l];return A.value=d,x.width=v,x.height=c,A.textureData=x,this._textureCount=g,this.initSampler2D(A),this},setSampler2D:function(l,d,v,c){v===void 0&&(v=0);var g=this.scene.sys.textures;if(g.exists(d)){var x=g.getFrame(d);if(x.glTexture&&x.glTexture.isRenderTexture)return this.setSampler2DBuffer(l,x.glTexture,x.width,x.height,v,c);var A=this.uniforms[l],T=x.source;A.textureKey=d,A.source=T.image,A.value=x.glTexture,T.isGLTexture&&(c||(c={}),c.width=T.width,c.height=T.height),c&&(A.textureData=c),this._textureCount=v,this.initSampler2D(A)}return this},setUniform:function(l,d){return n(this.uniforms,l,d),this},getUniform:function(l){return o(this.uniforms,l,null)},setChannel0:function(l,d){return this.setSampler2D("iChannel0",l,0,d)},setChannel1:function(l,d){return this.setSampler2D("iChannel1",l,1,d)},setChannel2:function(l,d){return this.setSampler2D("iChannel2",l,2,d)},setChannel3:function(l,d){return this.setSampler2D("iChannel3",l,3,d)},initSampler2D:function(l){if(!!l.value){var d=this.gl;d.activeTexture(d.TEXTURE0+this._textureCount),d.bindTexture(d.TEXTURE_2D,l.value);var v=l.textureData;if(v&&!l.value.isRenderTexture){var c=d[o(v,"magFilter","linear").toUpperCase()],g=d[o(v,"minFilter","linear").toUpperCase()],x=d[o(v,"wrapS","repeat").toUpperCase()],A=d[o(v,"wrapT","repeat").toUpperCase()],T=d[o(v,"format","rgba").toUpperCase()];if(v.repeat&&(x=d.REPEAT,A=d.REPEAT),d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!!v.flipY),v.width){var E=o(v,"width",512),S=o(v,"height",2),C=o(v,"border",0);d.texImage2D(d.TEXTURE_2D,0,T,E,S,C,T,d.UNSIGNED_BYTE,null)}else d.texImage2D(d.TEXTURE_2D,0,T,d.RGBA,d.UNSIGNED_BYTE,l.source);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,c),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,g),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,x),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,A)}this.renderer.setProgram(this.program),d.uniform1i(l.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var l=this.gl,d=this.uniforms,v,c,g,x,A,T=0;for(var E in d)v=d[E],g=v.glFunc,c=v.glValueLength,x=v.uniformLocation,A=v.value,A!==null&&(c===1?v.glMatrix?g.call(l,x,v.transpose,A):g.call(l,x,A):c===2?g.call(l,x,A.x,A.y):c===3?g.call(l,x,A.x,A.y,A.z):c===4?g.call(l,x,A.x,A.y,A.z,A.w):v.type==="sampler2D"&&(l.activeTexture(l.TEXTURE0+T),l.bindTexture(l.TEXTURE_2D,A),l.uniform1i(x,T),T++))},load:function(l){var d=this.gl,v=this.width,c=this.height,g=this.renderer,x=this.program,A=this.viewMatrix;if(!this.renderToTexture){var T=-this._displayOriginX,E=-this._displayOriginY;A[0]=l[0],A[1]=l[1],A[4]=l[2],A[5]=l[3],A[8]=l[4],A[9]=l[5],A[12]=A[0]*T+A[4]*E,A[13]=A[1]*T+A[5]*E}d.useProgram(x),d.uniformMatrix4fv(d.getUniformLocation(x,"uViewMatrix"),!1,A),d.uniform2f(d.getUniformLocation(x,"uResolution"),this.width,this.height);var S=this.uniforms,C=S.resolution;C.value.x=v,C.value.y=c,S.time.value=g.game.loop.getDuration();var P=this.pointer;if(P){var R=S.mouse,M=P.x/v,L=1-P.y/c;R.value.x=M.toFixed(2),R.value.y=L.toFixed(2)}this.syncUniforms()},flush:function(){var l=this.width,d=this.height,v=this.program,c=this.gl,g=this.vertexBuffer,x=this.renderer,A=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(x.setFramebuffer(this.framebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)),c.bindBuffer(c.ARRAY_BUFFER,g);var T=c.getAttribLocation(v,"inPosition");T!==-1&&(c.enableVertexAttribArray(T),c.vertexAttribPointer(T,2,c.FLOAT,!1,A,0));var E=this.vertexViewF32;E[3]=d,E[4]=l,E[5]=d,E[8]=l,E[9]=d,E[10]=l;var S=6;c.bufferSubData(c.ARRAY_BUFFER,0,this.bytes.subarray(0,S*A)),c.drawArrays(c.TRIANGLES,0,S),this.renderToTexture&&x.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var l=this.gl;l.deleteProgram(this.program),l.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(36),o=t(116),s=t(15),n=t(479),r=t(480),u=t(19),h=t(69),l=t(1179),d=t(79),v=t(39),c=t(117),g=new e({Extends:s,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Mask,f.Pipeline,f.Size,f.Texture,f.Transform,f.Visible,f.ScrollFactor,l],initialize:function(A,T,E,S,C,P,R,M,L,F,I,w){T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S="__WHITE"),s.call(this,A,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new v,this.modelScale=new v(1,1,1),this.modelRotation=new v,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new h,this.viewPosition=new v,this.viewMatrix=new h,this.projectionMatrix=new h,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var U=A.sys.renderer;this.setPosition(T,E),this.setTexture(S,C),this.setSize(U.width,U.height),this.initPipeline(),this.setPerspective(U.width,U.height),P&&this.addVertices(P,R,M,L,F,I,w)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(x){return this.viewPosition.addScale(v.LEFT,x),this.dirtyCache[10]=1,this},panY:function(x){return this.viewPosition.y+=v.DOWN.y*x,this.dirtyCache[10]=1,this},panZ:function(x){return this.viewPosition.z+=x,this.dirtyCache[10]=1,this},setPerspective:function(x,A,T,E,S){return T===void 0&&(T=45),E===void 0&&(E=.01),S===void 0&&(S=1e3),this.projectionMatrix.perspective(a(T),x/A,E,S),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(x,A,T,E){return x===void 0&&(x=this.scene.sys.renderer.getAspectRatio()),A===void 0&&(A=1),T===void 0&&(T=-1e3),E===void 0&&(E=1e3),this.projectionMatrix.ortho(-x,x,-A,A,T,E),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(x){x.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(x,A,T,E,S,C,P,R,M){var L=this.scene.sys.cache.obj.get(x);return L&&r(L,this,A,T,E,S,C,P,R,M),this},sortByDepth:function(x,A){return x.depth-A.depth},depthSort:function(){return d(this.faces,this.sortByDepth),this},addVertex:function(x,A,T,E,S,C,P){var R=new c(x,A,T,E,S,C,P);return this.vertices.push(R),R},addFace:function(x,A,T){var E=new o(x,A,T);return this.faces.push(E),this.dirtyCache[9]=-1,E},addVertices:function(x,A,T,E,S,C,P){var R=n(x,A,T,E,S,C,P);return R&&(this.faces=this.faces.concat(R.faces),this.vertices=this.vertices.concat(R.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(x){return this.faces[x]},getFaceAt:function(x,A,T){T===void 0&&(T=this.scene.sys.cameras.main);for(var E=u(this,T).calc,S=this.faces,C=[],P=0;P<S.length;P++){var R=S[P];R.contains(x,A,E)&&C.push(R)}return d(C,this.sortByDepth)},setDebug:function(x,A){return this.debugGraphic=x,!x&&!A?this.debugCallback=null:A?this.debugCallback=A:this.debugCallback=this.renderDebug,this},isDirty:function(){var x=this.modelPosition,A=this.modelRotation,T=this.modelScale,E=this.dirtyCache,S=x.x,C=x.y,P=x.z,R=A.x,M=A.y,L=A.z,F=T.x,I=T.y,w=T.z,U=this.getFaceCount(),z=E[0],W=E[1],H=E[2],D=E[3],O=E[4],B=E[5],N=E[6],G=E[7],V=E[8],Y=E[9];return E[0]=S,E[1]=C,E[2]=P,E[3]=R,E[4]=M,E[5]=L,E[6]=F,E[7]=I,E[8]=w,E[9]=U,z!==S||W!==C||H!==P||D!==R||O!==M||B!==L||N!==F||G!==I||V!==w||Y!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var x=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!x[10]&&!this.isDirty())){var A=this.width,T=this.height,E=this.viewMatrix,S=this.viewPosition;x[10]&&(E.identity(),E.translate(S),E.invert(),x[10]=0);var C=this.transformMatrix;C.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var P=S.z,R=this.faces,M=0;M<R.length;M++)R[M].transformCoordinatesLocal(C,A,T,P);this.depthSort()}},renderDebug:function(x,A){for(var T=x.debugGraphic,E=0;E<A.length;E++){var S=A[E],C=S.vertex1.tx,P=S.vertex1.ty,R=S.vertex2.tx,M=S.vertex2.ty,L=S.vertex3.tx,F=S.vertex3.ty;T.strokeTriangle(C,P,R,M,L,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});i.exports=g},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(50),f=function(a,o){return e(a.x,a.y,o.x,o.y)<=a.radius+o.radius};i.exports=f},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(233),a=function(o,s,n){if(n===void 0&&(n=[]),f(o,s)){var r=o.x1,u=o.y1,h=o.x2,l=o.y2,d=s.x,v=s.y,c=s.radius,g=h-r,x=l-u,A=r-d,T=u-v,E=g*g+x*x,S=2*(g*A+x*T),C=A*A+T*T-c*c,P=S*S-4*E*C,R,M;if(P===0){var L=-S/(2*E);R=r+L*g,M=u+L*x,L>=0&&L<=1&&n.push(new e(R,M))}else if(P>0){var F=(-S-Math.sqrt(P))/(2*E);R=r+F*g,M=u+F*x,F>=0&&F<=1&&n.push(new e(R,M));var I=(-S+Math.sqrt(P))/(2*E);R=r+I*g,M=u+I*x,I>=0&&I<=1&&n.push(new e(R,M))}}return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=t(4),a=new f,o=function(s,n,r){if(r===void 0&&(r=a),e(n,s.x1,s.y1))return r.x=s.x1,r.y=s.y1,!0;if(e(n,s.x2,s.y2))return r.x=s.x2,r.y=s.y2,!0;var u=s.x2-s.x1,h=s.y2-s.y1,l=n.x-s.x1,d=n.y-s.y1,v=u*u+h*h,c=u,g=h;if(v>0){var x=(l*u+d*h)/v;c*=x,g*=x}r.x=s.x1+c,r.y=s.y1+g;var A=c*c+g*g;return A<=v&&c*u+g*h>=0&&e(n,r.x,r.y)};i.exports=o},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(96),a=t(488),o=function(s,n,r){if(r===void 0&&(r=[]),a(s,n))for(var u=n.getLineA(),h=n.getLineB(),l=n.getLineC(),d=n.getLineD(),v=[new e,new e,new e,new e],c=[f(u,s,v[0]),f(h,s,v[1]),f(l,s,v[2]),f(d,s,v[3])],g=0;g<4;g++)c[g]&&r.push(v[g]);return r};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a===void 0&&(a=!1),o===void 0&&(o=[]);for(var s=e.x3-e.x1,n=e.y3-e.y1,r=e.x2-e.x1,u=e.y2-e.y1,h=s*s+n*n,l=s*r+n*u,d=r*r+u*u,v=h*d-l*l,c=v===0?0:1/v,g,x,A,T,E,S,C=e.x1,P=e.y1,R=0;R<f.length&&(A=f[R].x-C,T=f[R].y-P,E=s*A+n*T,S=r*A+u*T,g=(d*E-l*S)*c,x=(h*S-l*E)*c,!(g>=0&&x>=0&&g+x<1&&(o.push({x:f[R].x,y:f[R].y}),a)));R++);return o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=Math.cos(o),n=Math.sin(o),r=e.x1-f,u=e.y1-a;return e.x1=r*s-u*n+f,e.y1=r*n+u*s+a,r=e.x2-f,u=e.y2-a,e.x2=r*s-u*n+f,e.y2=r*n+u*s+a,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height===0?NaN:e.width/e.height};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=Math.cos(o),n=Math.sin(o),r=e.x1-f,u=e.y1-a;return e.x1=r*s-u*n+f,e.y1=r*n+u*s+a,r=e.x2-f,u=e.y2-a,e.x2=r*s-u*n+f,e.y2=r*n+u*s+a,r=e.x3-f,u=e.y3-a,e.x3=r*s-u*n+f,e.y3=r*n+u*s+a,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(156),a=function(o,s){var n=o===void 0?f():e({},o);if(s)for(var r in s)s[r]!==void 0&&(n[r]=s[r]);return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=t(408),u=new e({Extends:a,initialize:function(l,d,v,c){var g="xml";if(n(d)){var x=d;d=s(x,"key"),v=s(x,"url"),c=s(x,"xhrSettings"),g=s(x,"extension",g)}var A={type:"xml",cache:l.cacheManager.xml,extension:g,responseType:"text",key:d,url:v,xhrSettings:c};a.call(this,l,A)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=r(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(h,l,d){if(Array.isArray(h))for(var v=0;v<h.length;v++)this.addFile(new u(this,h[v]));else this.addFile(new u(this,h,l,d));return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v){var c="text",g="txt",x=h.cacheManager.text;if(n(l)){var A=l;l=s(A,"key"),d=s(A,"url"),v=s(A,"xhrSettings"),g=s(A,"extension",g),c=s(A,"type",c),x=s(A,"cache",x)}var T={type:c,cache:x,extension:g,responseType:"text",key:l,url:d,xhrSettings:v};a.call(this,h,T)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(u,h,l){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,h,l));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(i,m){var t=function(e,f,a,o,s,n,r){n===void 0&&(n=!0),r===void 0&&(r=!1);var u=[],h=[],l=e.treeMinMax;if(l.minX=f,l.minY=a,l.maxX=f+o,l.maxY=a+s,r&&(h=e.staticTree.search(l)),n&&e.useTree)u=e.tree.search(l);else if(n){var d=e.bodies,v={position:{x:f,y:a},left:f,top:a,right:f+o,bottom:a+s,isCircle:!1},c=e.intersects;d.iterate(function(g){c(g,v)&&u.push(g)})}return h.concat(u)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),f=function(a,o,s,n){var r=0,u=a.deltaAbsX()+o.deltaAbsX()+n;return a._dx===0&&o._dx===0?(a.embedded=!0,o.embedded=!0):a._dx>o._dx?(r=a.right-o.x,r>u&&!s||a.checkCollision.right===!1||o.checkCollision.left===!1?r=0:(a.touching.none=!1,a.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===e.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.right=!0),a.physicsType===e.STATIC_BODY&&!s&&(o.blocked.none=!1,o.blocked.left=!0))):a._dx<o._dx&&(r=a.x-o.width-o.x,-r>u&&!s||a.checkCollision.left===!1||o.checkCollision.right===!1?r=0:(a.touching.none=!1,a.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===e.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.left=!0),a.physicsType===e.STATIC_BODY&&!s&&(o.blocked.none=!1,o.blocked.right=!0))),a.overlapX=r,o.overlapX=r,r};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),f=function(a,o,s,n){var r=0,u=a.deltaAbsY()+o.deltaAbsY()+n;return a._dy===0&&o._dy===0?(a.embedded=!0,o.embedded=!0):a._dy>o._dy?(r=a.bottom-o.y,r>u&&!s||a.checkCollision.down===!1||o.checkCollision.up===!1?r=0:(a.touching.none=!1,a.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===e.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.down=!0),a.physicsType===e.STATIC_BODY&&!s&&(o.blocked.none=!1,o.blocked.up=!0))):a._dy<o._dy&&(r=a.y-o.bottom,-r>u&&!s||a.checkCollision.up===!1||o.checkCollision.down===!1?r=0:(a.touching.none=!1,a.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===e.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.up=!0),a.physicsType===e.STATIC_BODY&&!s&&(o.blocked.none=!1,o.blocked.down=!0))),a.overlapY=r,o.overlapY=r,r};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return!(f.right<=e.left||f.bottom<=e.top||f.position.x>=e.right||f.position.y>=e.bottom)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(i,m){var t={};i.exports=t,function(){t.create=function(e,f){var a=e.bodyA,o=e.bodyB,s={id:t.id(a,o),bodyA:a,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:a.isSensor||o.isSensor,timeCreated:f,timeUpdated:f,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(s,e,f),s},t.update=function(e,f,a){if(e.collision=f,f.collided){var o=f.supports,s=e.activeContacts,n=f.parentA,r=f.parentB;e.inverseMass=n.inverseMass+r.inverseMass,e.friction=Math.min(n.friction,r.friction),e.frictionStatic=Math.max(n.frictionStatic,r.frictionStatic),e.restitution=Math.max(n.restitution,r.restitution),e.slop=Math.max(n.slop,r.slop);for(var u=0;u<o.length;u++)s[u]=o[u].contact;var h=o.length;h<s.length&&(s.length=h),e.separation=f.depth,t.setActive(e,!0,a)}else e.isActive===!0&&t.setActive(e,!1,a)},t.setActive=function(e,f,a){f?(e.isActive=!0,e.timeUpdated=a):(e.isActive=!1,e.activeContacts.length=0)},t.id=function(e,f){return e.id<f.id?"A"+e.id+"B"+f.id:"A"+f.id+"B"+e.id}}()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),f=function(a,o,s){var n=e(a,o,!0,s),r=e(a,o-1,!0,s),u=e(a,o+1,!0,s),h=e(a-1,o,!0,s),l=e(a+1,o,!0,s),d=n&&n.collides;return d&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),r&&r.collides&&(d&&(n.faceTop=!1),r.faceBottom=!d),u&&u.collides&&(d&&(n.faceBottom=!1),u.faceTop=!d),h&&h.collides&&(d&&(n.faceLeft=!1),h.faceRight=!d),l&&l.collides&&(d&&(n.faceRight=!1),l.faceLeft=!d),n&&!n.collides&&n.resetFaces(),n};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=a.baseTileWidth,s=a.tilemapLayer,n=0;return s&&(f||(f=s.scene.cameras.main),n=s.x+f.scrollX*(1-s.scrollFactorX),o*=s.scaleX),n+e*o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=a.baseTileHeight,s=a.tilemapLayer,n=0;return s&&(f||(f=s.scene.cameras.main),n=s.y+f.scrollY*(1-s.scrollFactorY),o*=s.scaleY),n+e*o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f===void 0&&(f=!0);var s=o.baseTileWidth,n=o.tilemapLayer;return n&&(a||(a=n.scene.cameras.main),e=e-(n.x+a.scrollX*(1-n.scrollFactorX)),s*=n.scaleX),f?Math.floor(e/s):e/s};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f===void 0&&(f=!0);var s=o.baseTileHeight,n=o.tilemapLayer;return n&&(a||(a=n.scene.cameras.main),e=e-(n.y+a.scrollY*(1-n.scrollFactorY)),s*=n.scaleY),f?Math.floor(e/s):e/s};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),f=t(119),a=t(252),o=t(72),s=function(n,r,u,h,l){if(h===void 0&&(h=!0),!f(r,u,l))return null;var d=l.data[u][r],v=d&&d.collides;if(n instanceof e)l.data[u][r]===null&&(l.data[u][r]=new e(l,n.index,r,u,l.tileWidth,l.tileHeight)),l.data[u][r].copy(n);else{var c=n;l.data[u][r]===null?l.data[u][r]=new e(l,c,r,u,l.tileWidth,l.tileHeight):l.data[u][r].index=c}var g=l.data[u][r],x=l.collideIndexes.indexOf(g.index)!==-1;return o(g,x),h&&v!==g.collides&&a(r,u,l),g};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=function(a){return a=a.toLowerCase(),a==="isometric"?e.ISOMETRIC:a==="staggered"?e.STAGGERED:a==="hexagonal"?e.HEXAGONAL:e.ORTHOGONAL};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(120),a=t(121),o=t(85),s=function(n,r,u,h,l){for(var d=new f({tileWidth:u,tileHeight:h}),v=new a({name:n,tileWidth:u,tileHeight:h,format:e.ARRAY_2D,layers:[d]}),c=[],g=r.length,x=0,A=0;A<r.length;A++){c[A]=[];for(var T=r[A],E=0;E<T.length;E++){var S=parseInt(T[E],10);isNaN(S)||S===-1?c[A][E]=l?null:new o(d,-1,E,A,u,h):c[A][E]=new o(d,S,E,A,u,h)}x===0&&(x=T.length)}return v.width=d.width=x,v.height=d.height=g,v.widthInPixels=d.widthInPixels=x*u,v.heightInPixels=d.heightInPixels=g*h,d.data=c,v};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(571),f=t(261),a=function(n){return{x:n.x,y:n.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],s=function(n,r,u){r===void 0&&(r=0),u===void 0&&(u=0);var h=e(n,o);if(h.x+=r,h.y+=u,n.gid){var l=f(n.gid);h.gid=l.gid,h.flippedHorizontal=l.flippedHorizontal,h.flippedVertical=l.flippedVertical,h.flippedAntiDiagonal=l.flippedAntiDiagonal}else n.polyline?h.polyline=n.polyline.map(a):n.polygon?h.polygon=n.polygon.map(a):n.ellipse?h.ellipse=n.ellipse:n.text?h.text=n.text:n.point?h.point=!0:h.rectangle=!0;return h};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,e=1073741824,f=536870912,a=function(o){var s=Boolean(o&t),n=Boolean(o&e),r=Boolean(o&f);o=o&~(t|e|f);var u=0,h=!1;return s&&n&&r?(u=Math.PI/2,h=!0):s&&n&&!r?(u=Math.PI,h=!1):s&&!n&&r?(u=Math.PI/2,h=!1):s&&!n&&!r?(u=0,h=!0):!s&&n&&r?(u=3*Math.PI/2,h=!1):!s&&n&&!r?(u=Math.PI,h=!0):!s&&!n&&r?(u=3*Math.PI/2,h=!0):!s&&!n&&!r&&(u=0,h=!1),{gid:o,flippedHorizontal:s,flippedVertical:n,flippedAntiDiagonal:r,rotation:u,flipped:h}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(121),a=t(564),o=t(580),s=function(n,r,u,h,l,d,v,c){u===void 0&&(u=32),h===void 0&&(h=32),l===void 0&&(l=10),d===void 0&&(d=10),c===void 0&&(c=!1);var g=null;if(Array.isArray(v)){var x=r!==void 0?r:"map";g=a(x,e.ARRAY_2D,v,u,h,c)}else if(r!==void 0){var A=n.cache.tilemap.get(r);A?g=a(r,A.format,A.data,u,h,c):console.warn("No map data found for key "+r)}return g===null&&(g=new f({tileWidth:u,tileHeight:h,width:l,height:d})),new o(n,g)};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=function(a){var o=e(a,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s){return!!s.getActive&&typeof s.getActive=="function"}function e(s){return!!s.getStart&&typeof s.getStart=="function"}function f(s){return!!s.getEnd&&typeof s.getEnd=="function"}function a(s){return e(s)||f(s)||t(s)}var o=function(s,n){var r,u=function(S,C,P){return P},h=function(S,C,P){return P},l=null,d=typeof n;if(d==="number")u=function(){return n};else if(d==="string"){var v=n[0],c=parseFloat(n.substr(2));switch(v){case"+":u=function(S,C,P){return P+c};break;case"-":u=function(S,C,P){return P-c};break;case"*":u=function(S,C,P){return P*c};break;case"/":u=function(S,C,P){return P/c};break;default:u=function(){return parseFloat(n)}}}else if(d==="function")u=n;else if(d==="object")if(a(n))t(n)&&(l=n.getActive),f(n)&&(u=n.getEnd),e(n)&&(h=n.getStart);else if(n.hasOwnProperty("value"))r=o(s,n.value);else{var g=n.hasOwnProperty("to"),x=n.hasOwnProperty("from"),A=n.hasOwnProperty("start");if(g&&(x||A)){if(r=o(s,n.to),A){var T=o(s,n.start);r.getActive=T.getEnd}if(x){var E=o(s,n.from);r.getStart=E.getEnd}}}return r||(r={getActive:l,getEnd:u,getStart:h}),r};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(267),o=t(16),s=t(5),n=t(100),r=t(14),u=new e({Extends:f,initialize:function(l,d,v){f.call(this),this.parent=l,this.parentIsTimeline=l.hasOwnProperty("isTimeline"),this.data=d,this.totalData=d.length,this.targets=v,this.totalTargets=v.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=n.PENDING_ADD,this._pausedState=n.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(h){return h===void 0&&(h=0),this.data[h].current},setTimeScale:function(h){return this.timeScale=h,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===n.ACTIVE},isPaused:function(){return this.state===n.PAUSED},hasTarget:function(h){return this.targets.indexOf(h)!==-1},updateTo:function(h,l,d){d===void 0&&(d=!1);for(var v=0;v<this.totalData;v++){var c=this.data[v];c.key===h&&(c.end=l,d&&(c.start=c.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===n.ACTIVE?this.seek(0):this.state===n.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===n.PENDING_ADD?this:this.play()},calcDuration:function(){for(var h=0,l=r.MAX_SAFE_INTEGER,d=this.data,v=0;v<this.totalData;v++){var c=d[v];c.t1=c.duration+c.hold,c.yoyo&&(c.t1+=c.duration),c.t2=c.t1+c.repeatDelay,c.totalDuration=c.delay+c.t1,c.repeat===-1?c.totalDuration+=c.t2*999999999999:c.repeat>0&&(c.totalDuration+=c.t2*c.repeat),c.totalDuration>h&&(h=c.totalDuration),c.delay<l&&(l=c.delay)}this.duration=Math.max(h,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=l},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=n.PENDING_ADD,this._pausedState=n.INIT,!1;for(var h=this.data,l=this.totalTargets,d=0;d<this.totalData;d++){var v=h[d],c=v.target,g=v.gen,x=v.key,A=v.index;v.delay=g.delay(c,x,0,A,l,this),v.duration=Math.max(g.duration(c,x,0,A,l,this),.001),v.hold=g.hold(c,x,0,A,l,this),v.repeat=g.repeat(c,x,0,A,l,this),v.repeatDelay=g.repeatDelay(c,x,0,A,l,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=n.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(a.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=n.LOOP_DELAY):(this.state=n.ACTIVE,this.dispatchTweenEvent(a.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=n.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=n.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===n.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=n.PAUSED,this)},play:function(h){h===void 0&&(h=!1);var l=this.state;return l===n.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=n.ACTIVE,this):l===n.ACTIVE||l===n.PENDING_ADD&&this._pausedState===n.PENDING_ADD?this:!this.parentIsTimeline&&(l===n.PENDING_REMOVE||l===n.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(h),this.calculatedOffset===0?this.state=n.ACTIVE:(this.countdown=this.calculatedOffset,this.state=n.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(h),this.state=n.ACTIVE,this.makeActive()),this)},resetTweenData:function(h){for(var l=this.data,d=this.totalData,v=this.totalTargets,c=0;c<d;c++){var g=l[c],x=g.target,A=g.key,T=g.index;g.progress=0,g.elapsed=0,g.repeatCounter=g.repeat===-1?999999999999:g.repeat,h?(g.start=g.getStartValue(x,A,g.start,T,v,this),g.end=g.getEndValue(x,A,g.end,T,v,this),g.current=g.start,g.state=n.PLAYING_FORWARD):g.state=n.PENDING_RENDER,g.delay>0&&(g.elapsed=g.delay,g.state=n.DELAY),g.getActiveValue&&(x[A]=g.getActiveValue(g.target,g.key,g.start))}},resume:function(){return this.state===n.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(h,l){l===void 0&&(l=16.6),this.state===n.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var d=this.data,v=this.totalTargets,c=0;c<this.totalData;c++){var g=d[c],x=g.target,A=g.gen,T=g.key,E=g.index;g.progress=0,g.elapsed=0,g.repeatCounter=g.repeat===-1?999999999999:g.repeat,g.delay=A.delay(x,T,0,E,v,this),g.duration=Math.max(A.duration(x,T,0,E,v,this),.001),g.hold=A.hold(x,T,0,E,v,this),g.repeat=A.repeat(x,T,0,E,v,this),g.repeatDelay=A.repeatDelay(x,T,0,E,v,this),g.current=g.start,g.state=n.PLAYING_FORWARD,this.updateTweenData(this,g,0,E,v),g.delay>0&&(g.elapsed=g.delay,g.state=n.DELAY)}this.calcDuration();var S=!1;this.state===n.PAUSED&&(S=!0,this.state=n.ACTIVE),this.isSeeking=!0;do this.update(0,l);while(this.totalProgress<h);return this.isSeeking=!1,S&&(this.state=n.PAUSED),this},setCallback:function(h,l,d,v){return this.callbacks[h]={func:l,scope:v,params:d},this},complete:function(h){return h===void 0&&(h=0),h?(this.state=n.COMPLETE_DELAY,this.countdown=h):(this.state=n.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(h){return this.state===n.ACTIVE&&h!==void 0&&this.seek(h),this.state!==n.REMOVED&&((this.state===n.PAUSED||this.state===n.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(a.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=n.PENDING_REMOVE),this},update:function(h,l){if(this.state===n.PAUSED)return!1;switch(this.useFrames&&(l=1*this.parent.timeScale),l*=this.timeScale,this.elapsed+=l,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=l,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case n.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=l,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(a.TWEEN_START,this.callbacks.onStart)));for(var d=!1,v=0;v<this.totalData;v++){var c=this.data[v];this.updateTweenData(this,c,l)&&(d=!0)}d||this.nextState();break;case n.LOOP_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=n.ACTIVE,this.dispatchTweenEvent(a.TWEEN_LOOP,this.callbacks.onLoop));break;case n.OFFSET_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=n.ACTIVE);break;case n.COMPLETE_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=n.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===n.PENDING_REMOVE},dispatchTweenDataEvent:function(h,l,d){this.isSeeking||(this.emit(h,this,d.key,d.target,d.current,d.previous),l&&(l.params[1]=d.target,l.func.apply(l.scope,l.params)))},dispatchTweenEvent:function(h,l){this.isSeeking||(this.emit(h,this,this.targets),l&&(l.params[1]=this.targets,l.func.apply(l.scope,l.params)))},setStateFromEnd:function(h,l,d){return l.yoyo?(l.elapsed=d,l.progress=d/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),this.dispatchTweenDataEvent(a.TWEEN_YOYO,h.callbacks.onYoyo,l),l.start=l.getStartValue(l.target,l.key,l.start,l.index,h.totalTargets,h),n.PLAYING_BACKWARD):l.repeatCounter>0?(l.repeatCounter--,l.elapsed=d,l.progress=d/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),l.start=l.getStartValue(l.target,l.key,l.start,l.index,h.totalTargets,h),l.end=l.getEndValue(l.target,l.key,l.start,l.index,h.totalTargets,h),l.repeatDelay>0?(l.elapsed=l.repeatDelay-d,l.current=l.start,l.target[l.key]=l.current,n.REPEAT_DELAY):(this.dispatchTweenDataEvent(a.TWEEN_REPEAT,h.callbacks.onRepeat,l),n.PLAYING_FORWARD)):n.COMPLETE},setStateFromStart:function(h,l,d){return l.repeatCounter>0?(l.repeatCounter--,l.elapsed=d,l.progress=d/l.duration,l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),l.end=l.getEndValue(l.target,l.key,l.start,l.index,h.totalTargets,h),l.repeatDelay>0?(l.elapsed=l.repeatDelay-d,l.current=l.start,l.target[l.key]=l.current,n.REPEAT_DELAY):(this.dispatchTweenDataEvent(a.TWEEN_REPEAT,h.callbacks.onRepeat,l),n.PLAYING_FORWARD)):n.COMPLETE},updateTweenData:function(h,l,d){var v=l.target;switch(l.state){case n.PLAYING_FORWARD:case n.PLAYING_BACKWARD:if(!v){l.state=n.COMPLETE;break}var c=l.elapsed,g=l.duration,x=0;c+=d,c>g&&(x=c-g,c=g);var A=l.state===n.PLAYING_FORWARD,T=c/g;if(l.elapsed=c,l.progress=T,l.previous=l.current,T===1)A?(l.current=l.end,v[l.key]=l.end,l.hold>0?(l.elapsed=l.hold-x,l.state=n.HOLD_DELAY):l.state=this.setStateFromEnd(h,l,x)):(l.current=l.start,v[l.key]=l.start,l.state=this.setStateFromStart(h,l,x));else{var E=A?l.ease(T):l.ease(1-T);l.current=l.start+(l.end-l.start)*E,v[l.key]=l.current}this.dispatchTweenDataEvent(a.TWEEN_UPDATE,h.callbacks.onUpdate,l);break;case n.DELAY:l.elapsed-=d,l.elapsed<=0&&(l.elapsed=Math.abs(l.elapsed),l.state=n.PENDING_RENDER);break;case n.REPEAT_DELAY:l.elapsed-=d,l.elapsed<=0&&(l.elapsed=Math.abs(l.elapsed),l.state=n.PLAYING_FORWARD,this.dispatchTweenDataEvent(a.TWEEN_REPEAT,h.callbacks.onRepeat,l));break;case n.HOLD_DELAY:l.elapsed-=d,l.elapsed<=0&&(l.state=this.setStateFromEnd(h,l,Math.abs(l.elapsed)));break;case n.PENDING_RENDER:v?(l.start=l.getStartValue(v,l.key,v[l.key],l.index,h.totalTargets,h),l.end=l.getEndValue(v,l.key,l.start,l.index,h.totalTargets,h),l.current=l.start,v[l.key]=l.start,l.state=n.PLAYING_FORWARD):l.state=n.COMPLETE;break}return l.state!==n.COMPLETE}});u.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],s.register("tween",function(h){return this.scene.sys.tweens.add(h)}),o.register("tween",function(h){return this.scene.sys.tweens.create(h)}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n,r,u,h,l,d,v,c,g,x){return{target:e,index:f,key:a,getActiveValue:n,getEndValue:o,getStartValue:s,ease:r,duration:0,totalDuration:0,delay:0,yoyo:l,hold:0,repeat:0,repeatDelay:0,flipX:g,flipY:x,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:u,duration:h,hold:d,repeat:v,repeatDelay:c},state:0}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),f=function(a){return e(a,-Math.PI,Math.PI)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),f=function(a){return e(a,-180,180)};i.exports=f},function(i,m,t){var e={};i.exports=e;var f=t(83),a=t(32);(function(){e.fromVertices=function(o){for(var s={},n=0;n<o.length;n++){var r=(n+1)%o.length,u=f.normalise({x:o[r].y-o[n].y,y:o[n].x-o[r].x}),h=u.y===0?1/0:u.x/u.y;h=h.toFixed(3).toString(),s[h]=u}return a.values(s)},e.rotate=function(o,s){if(s!==0)for(var n=Math.cos(s),r=Math.sin(s),u=0;u<o.length;u++){var h=o[u],l;l=h.x*n-h.y*r,h.y=h.x*r+h.y*n,h.x=l}}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(i,m,t){var e={};i.exports=e;var f=t(274),a=t(250),o=t(84);(function(){e.collisions=function(s,n){for(var r=[],u=n.pairs.table,h=n.metrics,l=0;l<s.length;l++){var d=s[l][0],v=s[l][1];if(!((d.isStatic||d.isSleeping)&&(v.isStatic||v.isSleeping))&&!!e.canCollide(d.collisionFilter,v.collisionFilter)&&(h.midphaseTests+=1,o.overlaps(d.bounds,v.bounds)))for(var c=d.parts.length>1?1:0;c<d.parts.length;c++)for(var g=d.parts[c],x=v.parts.length>1?1:0;x<v.parts.length;x++){var A=v.parts[x];if(g===d&&A===v||o.overlaps(g.bounds,A.bounds)){var T=a.id(g,A),E=u[T],S;E&&E.isActive?S=E.collision:S=null;var C=f.collides(g,A,S);h.narrowphaseTests+=1,C.reused&&(h.narrowReuseCount+=1),C.collided&&(r.push(C),h.narrowDetections+=1)}}}return r},e.canCollide=function(s,n){return s.group===n.group&&s.group!==0?s.group>0:(s.mask&n.category)!==0&&(n.mask&s.category)!==0}})()},function(i,m,t){var e={};i.exports=e;var f=t(64),a=t(83);(function(){e.collides=function(o,s,n){var r,u,h,l,d=!1;if(n){var v=o.parent,c=s.parent,g=v.speed*v.speed+v.angularSpeed*v.angularSpeed+c.speed*c.speed+c.angularSpeed*c.angularSpeed;d=n&&n.collided&&g<.2,l=n}else l={collided:!1,bodyA:o,bodyB:s};if(n&&d){var x=l.axisBody,A=x===o?s:o,T=[x.axes[n.axisNumber]];if(h=e._overlapAxes(x.vertices,A.vertices,T),l.reused=!0,h.overlap<=0)return l.collided=!1,l}else{if(r=e._overlapAxes(o.vertices,s.vertices,o.axes),r.overlap<=0||(u=e._overlapAxes(s.vertices,o.vertices,s.axes),u.overlap<=0))return l.collided=!1,l;r.overlap<u.overlap?(h=r,l.axisBody=o):(h=u,l.axisBody=s),l.axisNumber=h.axisNumber}l.bodyA=o.id<s.id?o:s,l.bodyB=o.id<s.id?s:o,l.collided=!0,l.depth=h.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,o=l.bodyA,s=l.bodyB,a.dot(h.axis,a.sub(s.position,o.position))<0?l.normal={x:h.axis.x,y:h.axis.y}:l.normal={x:-h.axis.x,y:-h.axis.y},l.tangent=a.perp(l.normal),l.penetration=l.penetration||{},l.penetration.x=l.normal.x*l.depth,l.penetration.y=l.normal.y*l.depth;var E=e._findSupports(o,s,l.normal),S=[];if(f.contains(o.vertices,E[0])&&S.push(E[0]),f.contains(o.vertices,E[1])&&S.push(E[1]),S.length<2){var C=e._findSupports(s,o,a.neg(l.normal));f.contains(s.vertices,C[0])&&S.push(C[0]),S.length<2&&f.contains(s.vertices,C[1])&&S.push(C[1])}return S.length<1&&(S=[E[0]]),l.supports=S,l},e._overlapAxes=function(o,s,n){for(var r=a._temp[0],u=a._temp[1],h={overlap:Number.MAX_VALUE},l,d,v=0;v<n.length;v++){if(d=n[v],e._projectToAxis(r,o,d),e._projectToAxis(u,s,d),l=Math.min(r.max-u.min,u.max-r.min),l<=0)return h.overlap=l,h;l<h.overlap&&(h.overlap=l,h.axis=d,h.axisNumber=v)}return h},e._projectToAxis=function(o,s,n){for(var r=a.dot(s[0],n),u=r,h=1;h<s.length;h+=1){var l=a.dot(s[h],n);l>u?u=l:l<r&&(r=l)}o.min=r,o.max=u},e._findSupports=function(o,s,n){for(var r=Number.MAX_VALUE,u=a._temp[0],h=s.vertices,l=o.position,d,v,c,g,x=0;x<h.length;x++)v=h[x],u.x=v.x-l.x,u.y=v.y-l.y,d=-a.dot(n,u),d<r&&(r=d,c=v);var A=c.index-1>=0?c.index-1:h.length-1;v=h[A],u.x=v.x-l.x,u.y=v.y-l.y,r=-a.dot(n,u),g=v;var T=(c.index+1)%h.length;return v=h[T],u.x=v.x-l.x,u.y=v.y-l.y,d=-a.dot(n,u),d<r&&(g=v),[c,g]}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(i,m,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=[];f[e.BOTTOM_CENTER]=t(277),f[e.BOTTOM_LEFT]=t(278),f[e.BOTTOM_RIGHT]=t(279),f[e.LEFT_BOTTOM]=t(280),f[e.LEFT_CENTER]=t(281),f[e.LEFT_TOP]=t(282),f[e.RIGHT_BOTTOM]=t(283),f[e.RIGHT_CENTER]=t(284),f[e.RIGHT_TOP]=t(285),f[e.TOP_CENTER]=t(286),f[e.TOP_LEFT]=t(287),f[e.TOP_RIGHT]=t(288);var a=function(o,s,n,r,u){return f[n](o,s,r,u)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(87),a=t(88),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,f(r)+u),o(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),a=t(53),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,f(r)-u),o(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(44),a=t(54),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,f(r)+u),o(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),a=t(55),o=t(54),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)-u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(43),a=t(90),o=t(54),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)-u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),f=t(45),a=t(54),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,e(r)-u),o(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(44),a=t(55),o=t(53),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)+u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(44),a=t(90),o=t(53),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)+u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),f=t(45),a=t(53),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,e(r)+u),o(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),f=t(45),a=t(55),o=t(88),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,e(r)+u),a(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),f=t(45),a=t(55),o=t(53),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,e(r)-u),a(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),f=t(45),a=t(55),o=t(54),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,e(r)+u),a(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=[];f[e.BOTTOM_CENTER]=t(290),f[e.BOTTOM_LEFT]=t(291),f[e.BOTTOM_RIGHT]=t(292),f[e.CENTER]=t(293),f[e.LEFT_CENTER]=t(295),f[e.RIGHT_CENTER]=t(296),f[e.TOP_CENTER]=t(297),f[e.TOP_LEFT]=t(298),f[e.TOP_RIGHT]=t(299),f[e.LEFT_BOTTOM]=f[e.BOTTOM_LEFT],f[e.LEFT_TOP]=f[e.TOP_LEFT],f[e.RIGHT_BOTTOM]=f[e.BOTTOM_RIGHT],f[e.RIGHT_TOP]=f[e.TOP_RIGHT];var a=function(o,s,n,r,u){return f[n](o,s,r,u)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(87),a=t(55),o=t(88),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)+u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),a=t(55),o=t(53),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)-u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(44),a=t(55),o=t(54),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)+u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(294),f=t(87),a=t(89),o=function(s,n,r,u){return r===void 0&&(r=0),u===void 0&&(u=0),e(s,f(n)+r,a(n)+u),s};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(88),f=t(90),a=function(o,s,n){return e(o,s),f(o,n)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(43),a=t(90),o=t(53),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)-u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(44),a=t(90),o=t(54),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),o(n,f(r)+u),a(n,e(r)+h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),f=t(45),a=t(88),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,e(r)+u),o(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),f=t(45),a=t(53),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,e(r)-u),o(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),f=t(45),a=t(54),o=t(52),s=function(n,r,u,h){return u===void 0&&(u=0),h===void 0&&(h=0),a(n,e(r)+u),o(n,f(r)-h),n};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(169),f=t(98),a=t(14),o=t(4),s=function(n,r,u){u===void 0&&(u=new o);var h=f(r,0,a.PI2);return e(n,h,u)};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(302),f=t(169),a=t(98),o=t(14),s=function(n,r,u,h){h===void 0&&(h=[]),!r&&u>0&&(r=e(n)/u);for(var l=0;l<r;l++){var d=a(l/r,0,o.PI2);h.push(f(n,d))}return h};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(Math.PI*e.radius)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=2,a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var s=e(o,0,1);this._alpha=s,s===0?this.renderFlags&=~f:this.renderFlags|=f}}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f={_blendMode:e.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=e[a]),a|=0,a>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(171),f=t(130),a=function(o,s,n,r){r===void 0&&(r=[]),!s&&n>0&&(s=f(o)/n);for(var u=0;u<s;u++){var h=u/s;r.push(e(o,h))}return r};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s){return s===void 0&&(s=new e),s.x=a.x1+(a.x2-a.x1)*o,s.y=a.y1+(a.y2-a.y1)*o,s};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=Math.cos(o),n=Math.sin(o),r=e.x-f,u=e.y-a;return e.x=r*s-u*n+f,e.y=r*n+u*s+a,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(310),f=t(311),a={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new e(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new f(this.scene,o)}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(22),a=t(91),o=new e({initialize:function(n,r){var u=n.sys.renderer;this.renderer=u,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),n.sys.game.events.on(f.CONTEXT_RESTORED,this.createMask,this),u&&u.on(a.RESIZE,this.createMask,this)},createMask:function(){var s=this.renderer;if(!(!s||!s.gl)){this.mainTexture&&this.clearMask();var n=s.width,r=s.height,u=(n&n-1)===0&&(r&r-1)===0,h=s.gl,l=u?h.REPEAT:h.CLAMP_TO_EDGE,d=h.LINEAR;this.mainTexture=s.createTexture2D(0,d,d,l,l,h.RGBA,null,n,r),this.maskTexture=s.createTexture2D(0,d,d,l,l,h.RGBA,null,n,r),this.mainFramebuffer=s.createFramebuffer(n,r,this.mainTexture,!0),this.maskFramebuffer=s.createFramebuffer(n,r,this.maskTexture,!0)}},clearMask:function(){var s=this.renderer;!s||!s.gl||!this.mainTexture||(s.deleteTexture(this.mainTexture),s.deleteTexture(this.maskTexture),s.deleteFramebuffer(this.mainFramebuffer),s.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(s){this.bitmapMask=s},preRenderWebGL:function(s,n,r){s.pipelines.BITMAPMASK_PIPELINE.beginMask(this,n,r)},postRenderWebGL:function(s,n){s.pipelines.BITMAPMASK_PIPELINE.endMask(this,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(a.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s){this.geometryMask=s,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(a){return this.geometryMask=a,this},setInvertAlpha:function(a){return a===void 0&&(a=!0),this.invertAlpha=a,this},preRenderWebGL:function(a,o,s){var n=a.gl;a.flush(),a.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),a.maskCount=0),a.currentCameraMask.mask!==this&&(a.currentMask.mask=this),a.maskStack.push({mask:this,camera:s}),this.applyStencil(a,s,!0),a.maskCount++},applyStencil:function(a,o,s){var n=a.gl,r=this.geometryMask,u=a.maskCount;n.colorMask(!1,!1,!1,!1),s?(n.stencilFunc(n.EQUAL,u,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,u+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),r.renderWebGL(a,r,o),a.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),s?this.invertAlpha?n.stencilFunc(n.NOTEQUAL,u+1,255):n.stencilFunc(n.EQUAL,u+1,255):this.invertAlpha?n.stencilFunc(n.NOTEQUAL,u,255):n.stencilFunc(n.EQUAL,u,255)},postRenderWebGL:function(a){var o=a.gl;a.maskStack.pop(),a.maskCount--,a.flush();var s=a.currentMask;if(a.maskStack.length===0)s.mask=null,o.disable(o.STENCIL_TEST);else{var n=a.maskStack[a.maskStack.length-1];n.mask.applyStencil(a,n.camera,!1),a.currentCameraMask.mask!==n.mask?(s.mask=n.mask,s.camera=n.camera):s.mask=null}},preRenderCanvas:function(a,o,s){var n=this.geometryMask;a.currentContext.save(),n.renderCanvas(a,n,s,null,null,!0),a.currentContext.clip()},postRenderCanvas:function(a){a.currentContext.restore()},destroy:function(){this.geometryMask=null}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,f){return f===void 0&&(f=e),this.scrollFactorX=e,this.scrollFactorY=f,this}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(25),a=t(177),o=t(269),s=t(270),n=t(3),r=4,u={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this._scaleX=h,this._scaleY=h,h===0?this.renderFlags&=~r:this.renderFlags|=r}},scaleX:{get:function(){return this._scaleX},set:function(h){this._scaleX=h,h===0?this.renderFlags&=~r:this.renderFlags|=r}},scaleY:{get:function(){return this._scaleY},set:function(h){this._scaleY=h,h===0?this.renderFlags&=~r:this.renderFlags|=r}},angle:{get:function(){return s(this._rotation*e.RAD_TO_DEG)},set:function(h){this.rotation=s(h)*e.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=o(h)}},setPosition:function(h,l,d,v){return h===void 0&&(h=0),l===void 0&&(l=h),d===void 0&&(d=0),v===void 0&&(v=0),this.x=h,this.y=l,this.z=d,this.w=v,this},copyPosition:function(h){return h.x!==void 0&&(this.x=h.x),h.y!==void 0&&(this.y=h.y),h.z!==void 0&&(this.z=h.z),h.w!==void 0&&(this.w=h.w),this},setRandomPosition:function(h,l,d,v){return h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=h+Math.random()*d,this.y=l+Math.random()*v,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,this},setScale:function(h,l){return h===void 0&&(h=1),l===void 0&&(l=h),this.scaleX=h,this.scaleY=l,this},setX:function(h){return h===void 0&&(h=0),this.x=h,this},setY:function(h){return h===void 0&&(h=0),this.y=h,this},setZ:function(h){return h===void 0&&(h=0),this.z=h,this},setW:function(h){return h===void 0&&(h=0),this.w=h,this},getLocalTransformMatrix:function(h){return h===void 0&&(h=new f),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(h,l){h===void 0&&(h=new f),l===void 0&&(l=new f);var d=this.parentContainer;if(!d)return this.getLocalTransformMatrix(h);for(h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);d;)l.applyITRS(d.x,d.y,d._rotation,d._scaleX,d._scaleY),l.multiply(h,h),d=d.parentContainer;return h},getLocalPoint:function(h,l,d,v){d||(d=new n),v||(v=this.scene.sys.cameras.main);var c=v.scrollX,g=v.scrollY,x=h+c*this.scrollFactorX-c,A=l+g*this.scrollFactorY-g;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(x,A,d):a(x,A,this.x,this.y,this.rotation,this.scaleX,this.scaleY,d),this._originComponent&&(d.x+=this._displayOriginX,d.y+=this._displayOriginY),d},getParentRotation:function(){for(var h=0,l=this.parentContainer;l;)h+=l.rotation,l=l.parentContainer;return h}};i.exports=u},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(f){f?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(f){return this.visible=f,this}};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),f=t(4),a=function(o,s,n,r){if(r===void 0&&(r=[]),!s&&!n)return r;s?n=Math.round(e(o)/s):s=e(o)/n;for(var u=o.x,h=o.y,l=0,d=0;d<n;d++)switch(r.push(new f(u,h)),l){case 0:u+=s,u>=o.right&&(l=1,h+=u-o.right,u=o.right);break;case 1:h+=s,h>=o.bottom&&(l=2,u-=h-o.bottom,h=o.bottom);break;case 2:u-=s,u<=o.left&&(l=3,h-=o.left-u,u=o.left);break;case 3:h-=s,h<=o.top&&(l=0,h=o.top);break}return r};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){f===void 0&&(f=1),a===void 0&&(a=[]);var o=Math.round(e.x1),s=Math.round(e.y1),n=Math.round(e.x2),r=Math.round(e.y2),u=Math.abs(n-o),h=Math.abs(r-s),l=o<n?1:-1,d=s<r?1:-1,v=u-h;a.push({x:o,y:s});for(var c=1;!(o===n&&s===r);){var g=v<<1;g>-h&&(v-=h,o+=l),g<u&&(v+=u,s+=d),c%f===0&&a.push({x:o,y:s}),c++}return a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f.length){if(f.length===1)return f[0]}else return NaN;var o=1,s,n;if(a){if(e<f[0][a])return f[0];for(;f[o][a]<e;)o++}else for(;f[o]<e;)o++;return o>f.length&&(o=f.length),a?(s=f[o-1][a],n=f[o][a],n-e<=e-s?f[o]:f[o-1]):(s=f[o-1],n=f[o],n-e<=e-s?n:s)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r,u){u===void 0&&(u=!1),this.textureKey=o,this.textureFrame=s,this.index=n,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=/\D/g;return e.sort(function(a,o){return parseInt(a.replace(f,""),10)-parseInt(o.replace(f,""),10)}),e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(185),f=t(0),a=t(102),o=t(9),s=t(132),n=t(22),r=t(2),u=t(6),h=t(186),l=t(322),d=new f({Extends:o,initialize:function(c){o.call(this),this.game=c,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",c.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(v,c,g){var x=this.anims,A=this.mixes,T=typeof v=="string"?v:v.key,E=typeof c=="string"?c:c.key;if(x.has(T)&&x.has(E)){var S=A.get(T);S||(S={}),S[E]=g,A.set(T,S)}return this},removeMix:function(v,c){var g=this.mixes,x=typeof v=="string"?v:v.key,A=g.get(x);if(A)if(c){var T=typeof c=="string"?c:c.key;A.hasOwnProperty(T)&&delete A[T]}else c||g.delete(x);return this},getMix:function(v,c){var g=this.mixes,x=typeof v=="string"?v:v.key,A=typeof c=="string"?c:c.key,T=g.get(x);return T&&T.hasOwnProperty(A)?T[A]:0},add:function(v,c){return this.anims.has(v)?(console.warn("Animation key exists: "+v),this):(c.key=v,this.anims.set(v,c),this.emit(s.ADD_ANIMATION,v,c),this)},exists:function(v){return this.anims.has(v)},createFromAseprite:function(v,c){var g=[],x=this.game.cache.json.get(v);if(!x)return g;var A=this,T=u(x,"meta",null),E=u(x,"frames",null);if(T&&E){var S=u(T,"frameTags",[]);S.forEach(function(C){var P=[],R=r(C,"name",null),M=r(C,"from",0),L=r(C,"to",0),F=r(C,"direction","forward");if(!!R&&(!c||c&&c.indexOf(R)>-1)){for(var I=[],w=Number.MAX_SAFE_INTEGER,U=M;U<=L;U++){var z=U.toString(),W=E[z];if(W){var H=r(W,"duration",Number.MAX_SAFE_INTEGER);H<w&&(w=H),I.push({frame:z,duration:H})}}I.forEach(function(N){P.push({key:v,frame:N.frame,duration:w-N.duration})});var D=w*P.length;F==="reverse"&&(P=P.reverse());var O={key:R,frames:P,duration:D,yoyo:F==="pingpong"},B=A.create(O);B&&g.push(B)}})}return g},create:function(v){var c=v.key,g=!1;return c&&(g=this.get(c),g||(g=new e(this,c,v),this.anims.set(c,g),this.emit(s.ADD_ANIMATION,c,g))),g},fromJSON:function(v,c){c===void 0&&(c=!1),c&&this.anims.clear(),typeof v=="string"&&(v=JSON.parse(v));var g=[];if(v.hasOwnProperty("anims")&&Array.isArray(v.anims)){for(var x=0;x<v.anims.length;x++)g.push(this.create(v.anims[x]));v.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=v.globalTimeScale)}else v.hasOwnProperty("key")&&v.type==="frame"&&g.push(this.create(v));return g},generateFrameNames:function(v,c){var g=u(c,"prefix",""),x=u(c,"start",0),A=u(c,"end",0),T=u(c,"suffix",""),E=u(c,"zeroPad",0),S=u(c,"outputArray",[]),C=u(c,"frames",!1),P=this.textureManager.get(v);if(!P)return S;var R;if(c)for(C||(C=l(x,A)),R=0;R<C.length;R++){var M=g+h(C[R],E,"0",1)+T;P.has(M)?S.push({key:v,frame:M}):console.warn("generateFrameNames: Frame missing: "+M+" from texture: "+v)}else for(C=P.getFrameNames(),R=0;R<C.length;R++)S.push({key:v,frame:C[R]});return S},generateFrameNumbers:function(v,c){var g=u(c,"start",0),x=u(c,"end",-1),A=u(c,"first",!1),T=u(c,"outputArray",[]),E=u(c,"frames",!1),S=this.textureManager.get(v);if(!S)return T;A&&S.has(A)&&T.push({key:v,frame:A}),E||(x===-1&&(x=S.frameTotal-2),E=l(g,x));for(var C=0;C<E.length;C++)S.has(E[C])?T.push({key:v,frame:E[C]}):console.warn("generateFrameNumbers: Frame "+C+" missing from texture: "+v);return T},get:function(v){return this.anims.get(v)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(s.PAUSE_ALL)),this},play:function(v,c){Array.isArray(c)||(c=[c]);for(var g=0;g<c.length;g++)c[g].anims.play(v);return this},staggerPlay:function(v,c,g,x){g===void 0&&(g=0),x===void 0&&(x=!0),Array.isArray(c)||(c=[c]);var A=c.length;x||A--;for(var T=0;T<c.length;T++){var E=g<0?Math.abs(g)*(A-T):g*T;c[T].anims.playAfterDelay(v,E)}return this},remove:function(v){var c=this.get(v);return c&&(this.emit(s.REMOVE_ANIMATION,v,c),this.anims.delete(v),this.removeMix(v)),c},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(s.RESUME_ALL)),this},toJSON:function(v){var c={anims:[],globalTimeScale:this.globalTimeScale};return v!==void 0&&v!==""?c.anims.push(this.anims.get(v).toJSON()):this.anims.each(function(g,x){c.anims.push(x.toJSON())}),c},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});i.exports=d},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=[],n,r=!1;if((a||o)&&(r=!0,a||(a=""),o||(o="")),f<e)for(n=e;n>=f;n--)r?s.push(a+n.toString()+o):s.push(n);else for(n=e;n<=f;n++)r?s.push(a+n.toString()+o):s.push(n);return s};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(102),a=t(9),o=t(324),s=new e({initialize:function(){this.entries=new f,this.events=new a},add:function(n,r){return this.entries.set(n,r),this.events.emit(o.ADD,this,n,r),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var r=this.get(n);return r&&(this.entries.delete(n),this.events.emit(o.REMOVE,this,n,r.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD:t(736),REMOVE:t(737)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(323),f=t(0),a=t(22),o=new f({initialize:function(n){this.game=n,this.binary=new e,this.bitmapFont=new e,this.json=new e,this.physics=new e,this.shader=new e,this.audio=new e,this.video=new e,this.text=new e,this.html=new e,this.obj=new e,this.tilemap=new e,this.xml=new e,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(s){return this.custom.hasOwnProperty(s)||(this.custom[s]=new e),this.custom[s]},destroy:function(){for(var s=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<s.length;n++)this[s[n]].destroy(),this[s[n]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),f=t(190),a=t(18),o=t(0),s=t(11),n=t(333),r=t(37),u=t(135),h=t(10),l=t(3),d=new o({Extends:e,Mixins:[s.Flip,s.Tint,s.Pipeline],initialize:function(c,g,x,A){e.call(this,c,g,x,A),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(v,c){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=c):this.deadzone=new h(0,0,v,c),this._follow){var g=this.width/2,x=this.height/2,A=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(A,T),this.scrollX=A-g,this.scrollY=T-x}f(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,c,g,x,A,T){return this.fadeEffect.start(!1,v,c,g,x,!0,A,T)},fadeOut:function(v,c,g,x,A,T){return this.fadeEffect.start(!0,v,c,g,x,!0,A,T)},fadeFrom:function(v,c,g,x,A,T,E){return this.fadeEffect.start(!1,v,c,g,x,A,T,E)},fade:function(v,c,g,x,A,T,E){return this.fadeEffect.start(!0,v,c,g,x,A,T,E)},flash:function(v,c,g,x,A,T,E){return this.flashEffect.start(v,c,g,x,A,T,E)},shake:function(v,c,g,x,A){return this.shakeEffect.start(v,c,g,x,A)},pan:function(v,c,g,x,A,T,E){return this.panEffect.start(v,c,g,x,A,T,E)},rotateTo:function(v,c,g,x,A,T,E){return this.rotateToEffect.start(v,c,g,x,A,T,E)},zoomTo:function(v,c,g,x,A,T){return this.zoomEffect.start(v,c,g,x,A,T)},preRender:function(){this.renderList.length=0;var v=this.width,c=this.height,g=v*.5,x=c*.5,A=this.zoom,T=this.matrix,E=v*this.originX,S=c*this.originY,C=this._follow,P=this.deadzone,R=this.scrollX,M=this.scrollY;P&&f(P,this.midPoint.x,this.midPoint.y);var L=!1;if(C&&!this.panEffect.isRunning){var F=C.x-this.followOffset.x,I=C.y-this.followOffset.y;P?(F<P.x?R=u(R,R-(P.x-F),this.lerp.x):F>P.right&&(R=u(R,R+(F-P.right),this.lerp.x)),I<P.y?M=u(M,M-(P.y-I),this.lerp.y):I>P.bottom&&(M=u(M,M+(I-P.bottom),this.lerp.y))):(R=u(R,F-E,this.lerp.x),M=u(M,I-S,this.lerp.y)),L=!0}this.useBounds&&(R=this.clampX(R),M=this.clampY(M)),this.roundPixels&&(E=Math.round(E),S=Math.round(S),R=Math.round(R),M=Math.round(M)),this.scrollX=R,this.scrollY=M;var w=R+g,U=M+x;this.midPoint.set(w,U);var z=v/A,W=c/A,H=w-z/2,D=U-W/2;this.roundPixels&&(H=Math.round(H),D=Math.round(D)),this.worldView.setTo(H,D,z,W),T.applyITRS(this.x+E,this.y+S,this.rotation,A,A),T.translate(-E,-S),this.shakeEffect.preRender(),L&&this.emit(r.FOLLOW_UPDATE,this,C)},setLerp:function(v,c){return v===void 0&&(v=1),c===void 0&&(c=v),this.lerp.set(v,c),this},setFollowOffset:function(v,c){return v===void 0&&(v=0),c===void 0&&(c=0),this.followOffset.set(v,c),this},startFollow:function(v,c,g,x,A,T){c===void 0&&(c=!1),g===void 0&&(g=1),x===void 0&&(x=g),A===void 0&&(A=0),T===void 0&&(T=A),this._follow=v,this.roundPixels=c,g=a(g,0,1),x=a(x,0,1),this.lerp.set(g,x),this.followOffset.set(A,T);var E=this.width/2,S=this.height/2,C=v.x-A,P=v.y-T;return this.midPoint.set(C,P),this.scrollX=C-E,this.scrollY=P-S,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,c){this.visible&&(this.rotateToEffect.update(v,c),this.panEffect.update(v,c),this.zoomEffect.update(v,c),this.shakeEffect.update(v,c),this.flashEffect.update(v,c),this.fadeEffect.update(v,c))},destroy:function(){this.resetFX(),e.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=function(a){var o=new e;a=a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,l,d,v){return l+l+d+d+v+v});var s=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(s){var n=parseInt(s[1],16),r=parseInt(s[2],16),u=parseInt(s[3],16);o.setTo(n,r,u)}return o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return o<<24|e<<16|f<<8|a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){o===void 0&&(o={h:0,s:0,v:0}),e/=255,f/=255,a/=255;var s=Math.min(e,f,a),n=Math.max(e,f,a),r=n-s,u=0,h=n===0?0:r/n,l=n;return n!==s&&(n===e?u=(f-a)/r+(f<a?6:0):n===f?u=(a-e)/r+2:n===a&&(u=(e-f)/r+4),u/=6),o.hasOwnProperty("_h")?(o._h=u,o._s=h,o._v=l):(o.h=u,o.s=h,o.v=l),o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=function(a){return new e(a.r,a.g,a.b,a.a)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=function(a){var o=new e,s=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a.toLowerCase());if(s){var n=parseInt(s[1],10),r=parseInt(s[2],10),u=parseInt(s[3],10),h=s[4]!==void 0?parseFloat(s[4]):1;o.setTo(n,r,u,h*255)}return o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(764),Out:t(765),InOut:t(766)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(767),Out:t(768),InOut:t(769)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(770),Out:t(771),InOut:t(772)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(773),Out:t(774),InOut:t(775)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(776),Out:t(777),InOut:t(778)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(779),Out:t(780),InOut:t(781)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=t(782)},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(783),Out:t(784),InOut:t(785)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(786),Out:t(787),InOut:t(788)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(789),Out:t(790),InOut:t(791)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:t(792),Out:t(793),InOut:t(794)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=t(795)},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(33),a=t(347),o=t(2),s=t(6),n=t(7),r=t(193),u=t(1),h=t(197),l=t(187),d=new e({initialize:function(c){c===void 0&&(c={});var g=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],x="#ffffff";this.width=s(c,"width",1024),this.height=s(c,"height",768),this.zoom=s(c,"zoom",1),this.parent=s(c,"parent",void 0),this.scaleMode=s(c,"scaleMode",0),this.expandParent=s(c,"expandParent",!0),this.autoRound=s(c,"autoRound",!1),this.autoCenter=s(c,"autoCenter",0),this.resizeInterval=s(c,"resizeInterval",500),this.fullscreenTarget=s(c,"fullscreenTarget",null),this.minWidth=s(c,"minWidth",0),this.maxWidth=s(c,"maxWidth",0),this.minHeight=s(c,"minHeight",0),this.maxHeight=s(c,"maxHeight",0);var A=s(c,"scale",null);A&&(this.width=s(A,"width",this.width),this.height=s(A,"height",this.height),this.zoom=s(A,"zoom",this.zoom),this.parent=s(A,"parent",this.parent),this.scaleMode=s(A,"mode",this.scaleMode),this.expandParent=s(A,"expandParent",this.expandParent),this.autoRound=s(A,"autoRound",this.autoRound),this.autoCenter=s(A,"autoCenter",this.autoCenter),this.resizeInterval=s(A,"resizeInterval",this.resizeInterval),this.fullscreenTarget=s(A,"fullscreenTarget",this.fullscreenTarget),this.minWidth=s(A,"min.width",this.minWidth),this.maxWidth=s(A,"max.width",this.maxWidth),this.minHeight=s(A,"min.height",this.minHeight),this.maxHeight=s(A,"max.height",this.maxHeight)),this.renderType=s(c,"type",f.AUTO),this.canvas=s(c,"canvas",null),this.context=s(c,"context",null),this.canvasStyle=s(c,"canvasStyle",null),this.customEnvironment=s(c,"customEnvironment",!1),this.sceneConfig=s(c,"scene",null),this.seed=s(c,"seed",[(Date.now()*Math.random()).toString()]),r.RND=new r.RandomDataGenerator(this.seed),this.gameTitle=s(c,"title",""),this.gameURL=s(c,"url","https://phaser.io"),this.gameVersion=s(c,"version",""),this.autoFocus=s(c,"autoFocus",!0),this.domCreateContainer=s(c,"dom.createContainer",!1),this.domBehindCanvas=s(c,"dom.behindCanvas",!1),this.domPointerEvents=s(c,"dom.pointerEvents","none"),this.inputKeyboard=s(c,"input.keyboard",!0),this.inputKeyboardEventTarget=s(c,"input.keyboard.target",window),this.inputKeyboardCapture=s(c,"input.keyboard.capture",[]),this.inputMouse=s(c,"input.mouse",!0),this.inputMouseEventTarget=s(c,"input.mouse.target",null),this.inputMousePreventDefaultDown=s(c,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=s(c,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=s(c,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=s(c,"input.mouse.preventDefaultWheel",!0),this.inputTouch=s(c,"input.touch",a.input.touch),this.inputTouchEventTarget=s(c,"input.touch.target",null),this.inputTouchCapture=s(c,"input.touch.capture",!0),this.inputActivePointers=s(c,"input.activePointers",1),this.inputSmoothFactor=s(c,"input.smoothFactor",0),this.inputWindowEvents=s(c,"input.windowEvents",!0),this.inputGamepad=s(c,"input.gamepad",!1),this.inputGamepadEventTarget=s(c,"input.gamepad.target",window),this.disableContextMenu=s(c,"disableContextMenu",!1),this.audio=s(c,"audio",{}),this.hideBanner=s(c,"banner",null)===!1,this.hidePhaser=s(c,"banner.hidePhaser",!1),this.bannerTextColor=s(c,"banner.text",x),this.bannerBackgroundColor=s(c,"banner.background",g),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=s(c,"fps",null);var T=s(c,"render",c);this.pipeline=s(T,"pipeline",null),this.antialias=s(T,"antialias",!0),this.antialiasGL=s(T,"antialiasGL",!0),this.mipmapFilter=s(T,"mipmapFilter","LINEAR"),this.desynchronized=s(T,"desynchronized",!1),this.roundPixels=s(T,"roundPixels",!1),this.pixelArt=s(T,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=s(T,"transparent",!1),this.clearBeforeRender=s(T,"clearBeforeRender",!0),this.preserveDrawingBuffer=s(T,"preserveDrawingBuffer",!1),this.premultipliedAlpha=s(T,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=s(T,"failIfMajorPerformanceCaveat",!1),this.powerPreference=s(T,"powerPreference","default"),this.batchSize=s(T,"batchSize",4096),this.maxTextures=s(T,"maxTextures",-1),this.maxLights=s(T,"maxLights",10);var E=s(c,"backgroundColor",0);this.backgroundColor=l(E),this.transparent&&(this.backgroundColor=l(0),this.backgroundColor.alpha=0),this.preBoot=s(c,"callbacks.preBoot",u),this.postBoot=s(c,"callbacks.postBoot",u),this.physics=s(c,"physics",{}),this.defaultPhysicsSystem=s(this.physics,"default",!1),this.loaderBaseURL=s(c,"loader.baseURL",""),this.loaderPath=s(c,"loader.path","");var S=a.os.android?6:32;this.loaderMaxParallelDownloads=s(c,"loader.maxParallelDownloads",S),this.loaderCrossOrigin=s(c,"loader.crossOrigin",void 0),this.loaderResponseType=s(c,"loader.responseType",""),this.loaderAsync=s(c,"loader.async",!0),this.loaderUser=s(c,"loader.user",""),this.loaderPassword=s(c,"loader.password",""),this.loaderTimeout=s(c,"loader.timeout",0),this.loaderWithCredentials=s(c,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var C=s(c,"plugins",null),P=h.DefaultScene;C&&(Array.isArray(C)?this.defaultPlugins=C:n(C)&&(this.installGlobalPlugins=o(C,"global",[]),this.installScenePlugins=o(C,"scene",[]),Array.isArray(C.default)?P=C.default:Array.isArray(C.defaultMerge)&&(P=P.concat(C.defaultMerge)))),this.defaultPlugins=P;var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=s(c,"images.default",R+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=s(c,"images.missing",R+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=s(c,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=f.WEBGL:window.FORCE_CANVAS&&(this.renderType=f.CANVAS))}});i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",u=new Image;return u.onload=function(){var h=new Image;h.onload=function(){var l=e.create(h,6,1),d=l.getContext("2d");if(d.globalCompositeOperation="multiply",d.drawImage(u,0,0),d.drawImage(h,2,0),!d.getImageData(2,0,1,1))return!1;var v=d.getImageData(2,0,1,1).data;e.remove(h),f.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},h.src=n+"/wCKxvRF"+r},u.src=n+"AP804Oa6"+r,!1}function o(){var n=e.create(this,2,1),r=n.getContext("2d");r.fillStyle="rgba(10, 20, 30, 0.5)",r.fillRect(0,0,1,1);var u=r.getImageData(0,0,1,1);if(u===null)return!1;r.putImageData(u,1,0);var h=r.getImageData(1,0,1,1);return h.data[0]===u.data[0]&&h.data[1]===u.data[1]&&h.data[2]===u.data[2]&&h.data[3]===u.data[3]}function s(){return typeof importScripts!="function"&&document!==void 0&&(f.supportNewBlendModes=a(),f.supportInverseAlpha=o()),f}i.exports=s()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return Math.atan2(o-f,a-e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.atan2(f.y-e.y,f.x-e.x)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};i.exports=t},function(i,m){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.x-f.x,o=e.y-f.y;return Math.sqrt(a*a+o*o)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=e-a,n=f-o;return s*s+n*n};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return a===void 0&&(a=1e-4),e>f-a};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return a===void 0&&(a=1e-4),e<f+a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(357),f=function(a,o){return e(a)/e(o)/e(a-o)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(e===0)return 1;for(var f=e;--e;)f*=e;return f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s,n){var r=1-s;return r*r*r*n}function e(s,n){var r=1-s;return 3*r*r*s*n}function f(s,n){return 3*(1-s)*s*s*n}function a(s,n){return s*s*s*n}var o=function(s,n,r,u,h){return t(s,n)+e(s,r)+f(s,u)+a(s,h)};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,s){var n=1-o;return n*n*s}function e(o,s){return 2*(1-o)*o*s}function f(o,s){return o*o*s}var a=function(o,s,n,r){return t(o,s)+e(o,n)+f(o,r)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),f=function(a,o,s){return o+(s-o)*e(a,0,1)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=Math.log(e)/.6931471805599453;return 1<<Math.ceil(f)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.x,o=e.y;return e.x=a*Math.cos(f)-o*Math.sin(f),e.y=a*Math.sin(f)+o*Math.cos(f),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0?Math.ceil(e):Math.floor(e)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new f(this)},set:function(a){return this.copy(a)},copy:function(a){var o=this.val,s=a.val;return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],this},fromMat4:function(a){var o=a.val,s=this.val;return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[4],s[4]=o[5],s[5]=o[6],s[6]=o[8],s[7]=o[9],s[8]=o[10],this},fromArray:function(a){var o=this.val;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],this},identity:function(){var a=this.val;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},transpose:function(){var a=this.val,o=a[1],s=a[2],n=a[5];return a[1]=a[3],a[2]=a[6],a[3]=o,a[5]=a[7],a[6]=s,a[7]=n,this},invert:function(){var a=this.val,o=a[0],s=a[1],n=a[2],r=a[3],u=a[4],h=a[5],l=a[6],d=a[7],v=a[8],c=v*u-h*d,g=-v*r+h*l,x=d*r-u*l,A=o*c+s*g+n*x;return A?(A=1/A,a[0]=c*A,a[1]=(-v*s+n*d)*A,a[2]=(h*s-n*u)*A,a[3]=g*A,a[4]=(v*o-n*l)*A,a[5]=(-h*o+n*r)*A,a[6]=x*A,a[7]=(-d*o+s*l)*A,a[8]=(u*o-s*r)*A,this):null},adjoint:function(){var a=this.val,o=a[0],s=a[1],n=a[2],r=a[3],u=a[4],h=a[5],l=a[6],d=a[7],v=a[8];return a[0]=u*v-h*d,a[1]=n*d-s*v,a[2]=s*h-n*u,a[3]=h*l-r*v,a[4]=o*v-n*l,a[5]=n*r-o*h,a[6]=r*d-u*l,a[7]=s*l-o*d,a[8]=o*u-s*r,this},determinant:function(){var a=this.val,o=a[0],s=a[1],n=a[2],r=a[3],u=a[4],h=a[5],l=a[6],d=a[7],v=a[8];return o*(v*u-h*d)+s*(-v*r+h*l)+n*(d*r-u*l)},multiply:function(a){var o=this.val,s=o[0],n=o[1],r=o[2],u=o[3],h=o[4],l=o[5],d=o[6],v=o[7],c=o[8],g=a.val,x=g[0],A=g[1],T=g[2],E=g[3],S=g[4],C=g[5],P=g[6],R=g[7],M=g[8];return o[0]=x*s+A*u+T*d,o[1]=x*n+A*h+T*v,o[2]=x*r+A*l+T*c,o[3]=E*s+S*u+C*d,o[4]=E*n+S*h+C*v,o[5]=E*r+S*l+C*c,o[6]=P*s+R*u+M*d,o[7]=P*n+R*h+M*v,o[8]=P*r+R*l+M*c,this},translate:function(a){var o=this.val,s=a.x,n=a.y;return o[6]=s*o[0]+n*o[3]+o[6],o[7]=s*o[1]+n*o[4]+o[7],o[8]=s*o[2]+n*o[5]+o[8],this},rotate:function(a){var o=this.val,s=o[0],n=o[1],r=o[2],u=o[3],h=o[4],l=o[5],d=Math.sin(a),v=Math.cos(a);return o[0]=v*s+d*u,o[1]=v*n+d*h,o[2]=v*r+d*l,o[3]=v*u-d*s,o[4]=v*h-d*n,o[5]=v*l-d*r,this},scale:function(a){var o=this.val,s=a.x,n=a.y;return o[0]=s*o[0],o[1]=s*o[1],o[2]=s*o[2],o[3]=n*o[3],o[4]=n*o[4],o[5]=n*o[5],this},fromQuat:function(a){var o=a.x,s=a.y,n=a.z,r=a.w,u=o+o,h=s+s,l=n+n,d=o*u,v=o*h,c=o*l,g=s*h,x=s*l,A=n*l,T=r*u,E=r*h,S=r*l,C=this.val;return C[0]=1-(g+A),C[3]=v+S,C[6]=c-E,C[1]=v-S,C[4]=1-(d+A),C[7]=x+T,C[2]=c+E,C[5]=x-T,C[8]=1-(d+g),this},normalFromMat4:function(a){var o=a.val,s=this.val,n=o[0],r=o[1],u=o[2],h=o[3],l=o[4],d=o[5],v=o[6],c=o[7],g=o[8],x=o[9],A=o[10],T=o[11],E=o[12],S=o[13],C=o[14],P=o[15],R=n*d-r*l,M=n*v-u*l,L=n*c-h*l,F=r*v-u*d,I=r*c-h*d,w=u*c-h*v,U=g*S-x*E,z=g*C-A*E,W=g*P-T*E,H=x*C-A*S,D=x*P-T*S,O=A*P-T*C,B=R*O-M*D+L*H+F*W-I*z+w*U;return B?(B=1/B,s[0]=(d*O-v*D+c*H)*B,s[1]=(v*W-l*O-c*z)*B,s[2]=(l*D-d*W+c*U)*B,s[3]=(u*D-r*O-h*H)*B,s[4]=(n*O-u*W+h*z)*B,s[5]=(r*W-n*D-h*U)*B,s[6]=(S*w-C*I+P*F)*B,s[7]=(C*L-E*w-P*M)*B,s[8]=(E*I-S*L+P*R)*B,this):null}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(364),a=t(1),o=t(39),s=1e-6,n=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),u=new o(1,0,0),h=new o(0,1,0),l=new o,d=new f,v=new e({initialize:function(g,x,A,T){this.onChangeCallback=a,this.set(g,x,A,T)},x:{get:function(){return this._x},set:function(c){this._x=c,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(c){this._y=c,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(c){this._z=c,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(c){this._w=c,this.onChangeCallback(this)}},copy:function(c){return this.set(c)},set:function(c,g,x,A,T){return T===void 0&&(T=!0),typeof c=="object"?(this._x=c.x||0,this._y=c.y||0,this._z=c.z||0,this._w=c.w||0):(this._x=c||0,this._y=g||0,this._z=x||0,this._w=A||0),T&&this.onChangeCallback(this),this},add:function(c){return this._x+=c.x,this._y+=c.y,this._z+=c.z,this._w+=c.w,this.onChangeCallback(this),this},subtract:function(c){return this._x-=c.x,this._y-=c.y,this._z-=c.z,this._w-=c.w,this.onChangeCallback(this),this},scale:function(c){return this._x*=c,this._y*=c,this._z*=c,this._w*=c,this.onChangeCallback(this),this},length:function(){var c=this.x,g=this.y,x=this.z,A=this.w;return Math.sqrt(c*c+g*g+x*x+A*A)},lengthSq:function(){var c=this.x,g=this.y,x=this.z,A=this.w;return c*c+g*g+x*x+A*A},normalize:function(){var c=this.x,g=this.y,x=this.z,A=this.w,T=c*c+g*g+x*x+A*A;return T>0&&(T=1/Math.sqrt(T),this._x=c*T,this._y=g*T,this._z=x*T,this._w=A*T),this.onChangeCallback(this),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,g){g===void 0&&(g=0);var x=this.x,A=this.y,T=this.z,E=this.w;return this.set(x+g*(c.x-x),A+g*(c.y-A),T+g*(c.z-T),E+g*(c.w-E))},rotationTo:function(c,g){var x=c.x*g.x+c.y*g.y+c.z*g.z;return x<-.999999?(l.copy(u).cross(c).length()<s&&l.copy(h).cross(c),l.normalize(),this.setAxisAngle(l,Math.PI)):x>.999999?this.set(0,0,0,1):(l.copy(c).cross(g),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+x,this.normalize())},setAxes:function(c,g,x){var A=d.val;return A[0]=g.x,A[3]=g.y,A[6]=g.z,A[1]=x.x,A[4]=x.y,A[7]=x.z,A[2]=-c.x,A[5]=-c.y,A[8]=-c.z,this.fromMat3(d).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(c,g){g=g*.5;var x=Math.sin(g);return this.set(x*c.x,x*c.y,x*c.z,Math.cos(g))},multiply:function(c){var g=this.x,x=this.y,A=this.z,T=this.w,E=c.x,S=c.y,C=c.z,P=c.w;return this.set(g*P+T*E+x*C-A*S,x*P+T*S+A*E-g*C,A*P+T*C+g*S-x*E,T*P-g*E-x*S-A*C)},slerp:function(c,g){var x=this.x,A=this.y,T=this.z,E=this.w,S=c.x,C=c.y,P=c.z,R=c.w,M=x*S+A*C+T*P+E*R;M<0&&(M=-M,S=-S,C=-C,P=-P,R=-R);var L=1-g,F=g;if(1-M>s){var I=Math.acos(M),w=Math.sin(I);L=Math.sin((1-g)*I)/w,F=Math.sin(g*I)/w}return this.set(L*x+F*S,L*A+F*C,L*T+F*P,L*E+F*R)},invert:function(){var c=this.x,g=this.y,x=this.z,A=this.w,T=c*c+g*g+x*x+A*A,E=T?1/T:0;return this.set(-c*E,-g*E,-x*E,A*E)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(c){c*=.5;var g=this.x,x=this.y,A=this.z,T=this.w,E=Math.sin(c),S=Math.cos(c);return this.set(g*S+T*E,x*S+A*E,A*S-x*E,T*S-g*E)},rotateY:function(c){c*=.5;var g=this.x,x=this.y,A=this.z,T=this.w,E=Math.sin(c),S=Math.cos(c);return this.set(g*S-A*E,x*S+T*E,A*S+g*E,T*S-x*E)},rotateZ:function(c){c*=.5;var g=this.x,x=this.y,A=this.z,T=this.w,E=Math.sin(c),S=Math.cos(c);return this.set(g*S+x*E,x*S-g*E,A*S+T*E,T*S-A*E)},calculateW:function(){var c=this.x,g=this.y,x=this.z;return this.w=-Math.sqrt(1-c*c-g*g-x*x),this},setFromEuler:function(c,g){var x=c.x/2,A=c.y/2,T=c.z/2,E=Math.cos(x),S=Math.cos(A),C=Math.cos(T),P=Math.sin(x),R=Math.sin(A),M=Math.sin(T);switch(c.order){case"XYZ":{this.set(P*S*C+E*R*M,E*R*C-P*S*M,E*S*M+P*R*C,E*S*C-P*R*M,g);break}case"YXZ":{this.set(P*S*C+E*R*M,E*R*C-P*S*M,E*S*M-P*R*C,E*S*C+P*R*M,g);break}case"ZXY":{this.set(P*S*C-E*R*M,E*R*C+P*S*M,E*S*M+P*R*C,E*S*C-P*R*M,g);break}case"ZYX":{this.set(P*S*C-E*R*M,E*R*C+P*S*M,E*S*M-P*R*C,E*S*C+P*R*M,g);break}case"YZX":{this.set(P*S*C+E*R*M,E*R*C+P*S*M,E*S*M-P*R*C,E*S*C-P*R*M,g);break}case"XZY":{this.set(P*S*C-E*R*M,E*R*C-P*S*M,E*S*M+P*R*C,E*S*C+P*R*M,g);break}}return this},setFromRotationMatrix:function(c){var g=c.val,x=g[0],A=g[4],T=g[8],E=g[1],S=g[5],C=g[9],P=g[2],R=g[6],M=g[10],L=x+S+M,F;return L>0?(F=.5/Math.sqrt(L+1),this.set((R-C)*F,(T-P)*F,(E-A)*F,.25/F)):x>S&&x>M?(F=2*Math.sqrt(1+x-S-M),this.set(.25*F,(A+E)/F,(T+P)/F,(R-C)/F)):S>M?(F=2*Math.sqrt(1+S-x-M),this.set((A+E)/F,.25*F,(C+R)/F,(T-P)/F)):(F=2*Math.sqrt(1+M-x-S),this.set((T+P)/F,(C+R)/F,.25*F,(E-A)/F)),this},fromMat3:function(c){var g=c.val,x=g[0]+g[4]+g[8],A;if(x>0)A=Math.sqrt(x+1),this.w=.5*A,A=.5/A,this._x=(g[7]-g[5])*A,this._y=(g[2]-g[6])*A,this._z=(g[3]-g[1])*A;else{var T=0;g[4]>g[0]&&(T=1),g[8]>g[T*3+T]&&(T=2);var E=n[T],S=n[E];A=Math.sqrt(g[T*3+T]-g[E*3+E]-g[S*3+S]+1),r[T]=.5*A,A=.5/A,r[E]=(g[E*3+T]+g[T*3+E])*A,r[S]=(g[S*3+T]+g[T*3+S])*A,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(g[S*3+E]-g[E*3+S])*A}return this.onChangeCallback(this),this}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(367),f=t(31),a=t(33),o=t(191),s=function(n){var r=n.config;if((r.customEnvironment||r.canvas)&&r.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==a.HEADLESS)if(r.renderType===a.CANVAS||r.renderType!==a.CANVAS&&!o.webGL)if(o.canvas)r.renderType=a.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else r.renderType=a.WEBGL;r.antialias||f.disableSmoothing();var u=n.scale.baseSize,h=u.width,l=u.height;if(r.canvas?(n.canvas=r.canvas,n.canvas.width=h,n.canvas.height=l):n.canvas=f.create(n,h,l,r.renderType),r.canvasStyle&&(n.canvas.style=r.canvasStyle),r.antialias||e.setCrisp(n.canvas),r.renderType!==a.HEADLESS){var d,v;d=t(368),v=t(371),r.renderType===a.WEBGL?n.renderer=new v(n):(n.renderer=new d(n),n.context=n.renderer.gameContext)}};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(e){var f=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return f.forEach(function(a){e.style["image-rendering"]=a}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(37),f=t(369),a=t(0),o=t(33),s=t(9),n=t(91),r=t(370),u=t(104),h=t(106),l=t(25),d=new a({Extends:s,initialize:function(c){s.call(this);var g=c.config;this.config={clearBeforeRender:g.clearBeforeRender,backgroundColor:g.backgroundColor,antialias:g.antialias,roundPixels:g.roundPixels},this.game=c,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=c.canvas;var x={alpha:c.config.transparent,desynchronized:c.config.desynchronized};this.gameContext=g.context?g.context:this.gameCanvas.getContext("2d",x),this.currentContext=this.gameContext,this.antialias=c.config.antialias,this.blendModes=r(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var v=this.game,c=v.scale.baseSize;this.width=c.width,this.height=c.height,this.isBooted=!0,v.scale.on(u.RESIZE,this.onResize,this),this.resize(c.width,c.height)},onResize:function(v,c){(c.width!==this.width||c.height!==this.height)&&this.resize(c.width,c.height)},resize:function(v,c){this.width=v,this.height=c,this.emit(n.RESIZE,v,c)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(v){return this.currentContext.globalCompositeOperation=v,this},setContext:function(v){return this.currentContext=v||this.gameContext,this},setAlpha:function(v){return this.currentContext.globalAlpha=v,this},preRender:function(){var v=this.gameContext,c=this.config,g=this.width,x=this.height;v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),c.clearBeforeRender&&(v.clearRect(0,0,g,x),c.transparent||(v.fillStyle=c.backgroundColor.rgba,v.fillRect(0,0,g,x))),v.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(v,c,g){var x=c.length;this.emit(n.RENDER,v,g);var A=g.x,T=g.y,E=g.width,S=g.height,C=g.renderToTexture?g.context:v.sys.context;C.save(),this.game.scene.customViewports&&(C.beginPath(),C.rect(A,T,E,S),C.clip()),this.currentContext=C;var P=g.mask;P&&P.preRenderCanvas(this,null,g._maskCamera),g.transparent||(C.fillStyle=g.backgroundColor.rgba,C.fillRect(A,T,E,S)),C.globalAlpha=g.alpha,C.globalCompositeOperation="source-over",this.drawCount+=x,g.renderToTexture&&g.emit(e.PRE_RENDER,g),g.matrix.copyToContext(C);for(var R=0;R<x;R++){var M=c[R];M.mask&&M.mask.preRenderCanvas(this,M,g),M.renderCanvas(this,M,g),M.mask&&M.mask.postRenderCanvas(this,M,g)}C.setTransform(1,0,0,1,0,0),C.globalCompositeOperation="source-over",C.globalAlpha=1,g.flashEffect.postRenderCanvas(C),g.fadeEffect.postRenderCanvas(C),g.dirty=!1,P&&P.postRenderCanvas(this),C.restore(),g.renderToTexture&&(g.emit(e.POST_RENDER,g),g.renderToGame&&v.sys.context.drawImage(g.canvas,A,T))},postRender:function(){var v=this.gameContext;v.restore(),this.emit(n.POST_RENDER);var c=this.snapshotState;c.callback&&(f(this.gameCanvas,c),c.callback=null)},snapshotCanvas:function(v,c,g,x,A,T,E,S,C){g===void 0&&(g=!1),this.snapshotArea(x,A,T,E,c,S,C);var P=this.snapshotState;return P.getPixel=g,f(this.canvas,P),P.callback=null,this},snapshot:function(v,c,g){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,v,c,g)},snapshotArea:function(v,c,g,x,A,T,E){var S=this.snapshotState;return S.callback=A,S.type=T,S.encoder=E,S.getPixel=!1,S.x=v,S.y=c,S.width=Math.min(g,this.gameCanvas.width),S.height=Math.min(x,this.gameCanvas.height),this},snapshotPixel:function(v,c,g){return this.snapshotArea(v,c,1,1,g),this.snapshotState.getPixel=!0,this},batchSprite:function(v,c,g,x){var A=g.alpha*v.alpha;if(A!==0){var T=this.currentContext,E=this._tempMatrix1,S=this._tempMatrix2,C=c.canvasData,P=C.x,R=C.y,M=c.cutWidth,L=c.cutHeight,F=c.customPivot,I=c.source.resolution,w=v.displayOriginX,U=v.displayOriginY,z=-w+c.x,W=-U+c.y;if(v.isCropped){var H=v._crop;(H.flipX!==v.flipX||H.flipY!==v.flipY)&&c.updateCropUVs(H,v.flipX,v.flipY),M=H.cw,L=H.ch,P=H.cx,R=H.cy,z=-w+H.x,W=-U+H.y,v.flipX&&(z>=0?z=-(z+M):z<0&&(z=Math.abs(z)-M)),v.flipY&&(W>=0?W=-(W+L):W<0&&(W=Math.abs(W)-L))}var D=1,O=1;v.flipX&&(F||(z+=-c.realWidth+w*2),D=-1),v.flipY&&(F||(W+=-c.realHeight+U*2),O=-1),S.applyITRS(v.x,v.y,v.rotation,v.scaleX*D,v.scaleY*O),E.copyFrom(g.matrix),x?(E.multiplyWithOffset(x,-g.scrollX*v.scrollFactorX,-g.scrollY*v.scrollFactorY),S.e=v.x,S.f=v.y):(S.e-=g.scrollX*v.scrollFactorX,S.f-=g.scrollY*v.scrollFactorY),E.multiply(S),T.save(),E.setToContext(T),T.globalCompositeOperation=this.blendModes[v.blendMode],T.globalAlpha=A,T.imageSmoothingEnabled=!(!this.antialias||c.source.scaleMode),v.mask&&v.mask.preRenderCanvas(this,v,g),T.drawImage(c.source.image,P,R,M,L,z,W,M/I,L/I),v.mask&&v.mask.postRenderCanvas(this,v,g),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(38),a=t(2),o=function(s,n){var r=a(n,"callback"),u=a(n,"type","image/png"),h=a(n,"encoder",.92),l=Math.abs(Math.round(a(n,"x",0))),d=Math.abs(Math.round(a(n,"y",0))),v=a(n,"width",s.width),c=a(n,"height",s.height),g=a(n,"getPixel",!1);if(g){var x=s.getContext("2d"),A=x.getImageData(l,d,1,1),T=A.data;r.call(null,new f(T[0],T[1],T[2],T[3]/255))}else if(l!==0||d!==0||v!==s.width||c!==s.height){var E=e.createWebGL(this,v,c),S=E.getContext("2d");S.drawImage(s,l,d,v,c,0,0,v,c);var C=new Image;C.onerror=function(){r.call(null),e.remove(E)},C.onload=function(){r.call(null,C),e.remove(E)},C.src=E.toDataURL(u,h)}else{var P=new Image;P.onerror=function(){r.call(null)},P.onload=function(){r.call(null,P)},P.src=s.toDataURL(u,h)}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(348),a=function(){var o=[],s=f.supportNewBlendModes,n="source-over";return o[e.NORMAL]=n,o[e.ADD]="lighter",o[e.MULTIPLY]=s?"multiply":n,o[e.SCREEN]=s?"screen":n,o[e.OVERLAY]=s?"overlay":n,o[e.DARKEN]=s?"darken":n,o[e.LIGHTEN]=s?"lighten":n,o[e.COLOR_DODGE]=s?"color-dodge":n,o[e.COLOR_BURN]=s?"color-burn":n,o[e.HARD_LIGHT]=s?"hard-light":n,o[e.SOFT_LIGHT]=s?"soft-light":n,o[e.DIFFERENCE]=s?"difference":n,o[e.EXCLUSION]=s?"exclusion":n,o[e.HUE]=s?"hue":n,o[e.SATURATION]=s?"saturation":n,o[e.COLOR]=s?"color":n,o[e.LUMINOSITY]=s?"luminosity":n,o[e.ERASE]="destination-out",o[e.SOURCE_IN]="source-in",o[e.SOURCE_OUT]="source-out",o[e.SOURCE_ATOP]="source-atop",o[e.DESTINATION_OVER]="destination-over",o[e.DESTINATION_IN]="destination-in",o[e.DESTINATION_OUT]="destination-out",o[e.DESTINATION_ATOP]="destination-atop",o[e.LIGHTER]="lighter",o[e.COPY]="copy",o[e.XOR]="xor",o};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),f=t(37),a=t(0),o=t(33),s=t(9),n=t(91),r=t(22),u=t(138),h=t(69),l=t(1),d=t(372),v=t(141),c=t(104),g=t(106),x=t(12),A=t(383),T=new a({Extends:s,initialize:function(S){s.call(this);var C=S.config,P={alpha:C.transparent,desynchronized:C.desynchronized,depth:!1,antialias:C.antialiasGL,premultipliedAlpha:C.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:C.failIfMajorPerformanceCaveat,powerPreference:C.powerPreference,preserveDrawingBuffer:C.preserveDrawingBuffer};this.config={clearBeforeRender:C.clearBeforeRender,antialias:C.antialias,backgroundColor:C.backgroundColor,contextCreation:P,roundPixels:C.roundPixels,maxTextures:C.maxTextures,maxTextureSize:C.maxTextureSize,batchSize:C.batchSize,maxLights:C.maxLights,mipmapFilter:C.mipmapFilter},this.game=S,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=S.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(E){var S,C=this.game,P=this.canvas,R=E.backgroundColor;if(C.config.context?S=C.config.context:S=P.getContext("webgl",E.contextCreation)||P.getContext("experimental-webgl",E.contextCreation),!S||S.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=S;var M=this;this.contextLostHandler=function(B){M.contextLost=!0,M.game.events.emit(r.CONTEXT_LOST,M),B.preventDefault()},this.contextRestoredHandler=function(){M.contextLost=!1,M.init(M.config),M.game.events.emit(r.CONTEXT_RESTORED,M)},P.addEventListener("webglcontextlost",this.contextLostHandler,!1),P.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),C.context=S;for(var L=0;L<=27;L++)this.blendModes.push({func:[S.ONE,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_ADD});this.blendModes[1].func=[S.ONE,S.DST_ALPHA],this.blendModes[2].func=[S.DST_COLOR,S.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[S.ONE,S.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[S.ZERO,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=S.BYTE,this.glFormats[1]=S.SHORT,this.glFormats[2]=S.UNSIGNED_BYTE,this.glFormats[3]=S.UNSIGNED_SHORT,this.glFormats[4]=S.FLOAT,this.glFuncMap={mat2:{func:S.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:S.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:S.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:S.uniform1f,length:1},"1fv":{func:S.uniform1fv,length:1},"1i":{func:S.uniform1i,length:1},"1iv":{func:S.uniform1iv,length:1},"2f":{func:S.uniform2f,length:2},"2fv":{func:S.uniform2fv,length:1},"2i":{func:S.uniform2i,length:2},"2iv":{func:S.uniform2iv,length:1},"3f":{func:S.uniform3f,length:3},"3fv":{func:S.uniform3fv,length:1},"3i":{func:S.uniform3i,length:3},"3iv":{func:S.uniform3iv,length:1},"4f":{func:S.uniform4f,length:4},"4fv":{func:S.uniform4fv,length:1},"4i":{func:S.uniform4i,length:4},"4iv":{func:S.uniform4iv,length:1}};var F=S.getSupportedExtensions();(!E.maxTextures||E.maxTextures===-1)&&(E.maxTextures=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS)),E.maxTextureSize||(E.maxTextureSize=S.getParameter(S.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",w="WEBKIT_"+I;this.compression.ETC1=S.getExtension(I+"etc1")||S.getExtension(w+"etc1"),this.compression.PVRTC=S.getExtension(I+"pvrtc")||S.getExtension(w+"pvrtc"),this.compression.S3TC=S.getExtension(I+"s3tc")||S.getExtension(w+"s3tc"),this.supportedExtensions=F;var U="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(U)>-1?S.getExtension(U):null;var z="OES_vertex_array_object";this.vaoExtension=F.indexOf(z)>-1?S.getExtension(z):null,S.disable(S.DEPTH_TEST),S.disable(S.CULL_FACE),S.enable(S.BLEND),S.clearColor(R.redGL,R.greenGL,R.blueGL,R.alphaGL),this.mipmapFilter=S[E.mipmapFilter],this.maxTextures=x.checkShaderMax(S,E.maxTextures),this.textureIndexes=[];var W=this.tempTextures;if(Array.isArray(W))for(var H=0;L<this.maxTextures;H++)S.deleteTexture(W[H]);else W=new Array(this.maxTextures);for(var D=0;D<this.maxTextures;D++){var O=S.createTexture();S.activeTexture(S.TEXTURE0+D),S.bindTexture(S.TEXTURE_2D,O),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),W[D]=O,this.textureIndexes.push(D)}return this.tempTextures=W,this.currentActiveTexture=1,this.startActiveTexture++,S.activeTexture(S.TEXTURE1),this.pipelines=new d(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new h().identity(),C.textures.once(g.READY,this.boot,this),this},boot:function(){var E=this.game,S=this.pipelines,C=E.scale.baseSize;this.width=C.width,this.height=C.height,this.isBooted=!0,this.renderTarget=new v(this,this.width,this.height,1,0,!0,!0),S.boot(E.config.pipeline),this.blankTexture=E.textures.getFrame("__DEFAULT"),this.whiteTexture=E.textures.getFrame("__WHITE");var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,null),P.enable(P.SCISSOR_TEST),E.scale.on(c.RESIZE,this.onResize,this),this.resize(C.width,C.height)},onResize:function(E,S){(S.width!==this.width||S.height!==this.height)&&this.resize(S.width,S.height)},beginCapture:function(E,S){E===void 0&&(E=this.width),S===void 0&&(S=this.height),this.renderTarget.bind(!0,E,S),this.setProjectionMatrix(E,S),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(E,S){var C=this.gl;return this.width=E,this.height=S,this.setProjectionMatrix(E,S),C.viewport(0,0,E,S),this.drawingBufferHeight=C.drawingBufferHeight,C.scissor(0,C.drawingBufferHeight-S,E,S),this.defaultScissor[2]=E,this.defaultScissor[3]=S,this.emit(n.RESIZE,E,S),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(E,S){return(E!==this.projectionWidth||S!==this.projectionHeight)&&(this.projectionWidth=E,this.projectionHeight=S,this.projectionMatrix.ortho(0,E,S,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(E){return this.supportedExtensions?this.supportedExtensions.indexOf(E):!1},getExtension:function(E){return this.hasExtension(E)?(E in this.extensions||(this.extensions[E]=this.gl.getExtension(E)),this.extensions[E]):null},flush:function(){this.pipelines.flush()},pushScissor:function(E,S,C,P,R){R===void 0&&(R=this.drawingBufferHeight);var M=this.scissorStack,L=[E,S,C,P];return M.push(L),this.setScissor(E,S,C,P,R),this.currentScissor=L,L},setScissor:function(E,S,C,P,R){R===void 0&&(R=this.drawingBufferHeight);var M=this.gl,L=this.currentScissor,F=C>0&&P>0;if(L&&F){var I=L[0],w=L[1],U=L[2],z=L[3];F=I!==E||w!==S||U!==C||z!==P}F&&(this.flush(),M.scissor(E,R-S-P,C,P))},resetScissor:function(){var E=this.gl;E.enable(E.SCISSOR_TEST);var S=this.currentScissor;if(S){var C=S[0],P=S[1],R=S[2],M=S[3];R>0&&M>0&&E.scissor(C,this.drawingBufferHeight-P-M,R,M)}},popScissor:function(){var E=this.scissorStack;E.pop();var S=E[E.length-1];S&&this.setScissor(S[0],S[1],S[2],S[3]),this.currentScissor=S},hasActiveStencilMask:function(){var E=this.currentMask.mask,S=this.currentCameraMask.mask;return E&&E.isStencil||S&&S.isStencil},resetViewport:function(){var E=this.gl;E.viewport(0,0,this.width,this.height),this.drawingBufferHeight=E.drawingBufferHeight},setBlendMode:function(E,S){S===void 0&&(S=!1);var C=this.gl,P=this.blendModes[E];return S||E!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==E?(this.flush(),C.enable(C.BLEND),C.blendEquation(P.equation),P.func.length>2?C.blendFuncSeparate(P.func[0],P.func[1],P.func[2],P.func[3]):C.blendFunc(P.func[0],P.func[1]),this.currentBlendMode=E,!0):!1},addBlendMode:function(E,S){var C=this.blendModes.push({func:E,equation:S});return C-1},updateBlendMode:function(E,S,C){return this.blendModes[E]&&(this.blendModes[E].func=S,C&&(this.blendModes[E].equation=C)),this},removeBlendMode:function(E){return E>17&&this.blendModes[E]&&this.blendModes.splice(E,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(E){if(this.pipelines.forceZero())return this.setTextureZero(E.glTexture,!0),0;var S=this.gl,C=this.currentActiveTexture;return E.glIndexCounter<this.startActiveTexture&&(E.glIndexCounter=this.startActiveTexture,C<this.maxTextures?(E.glIndex=C,S.activeTexture(S.TEXTURE0+C),S.bindTexture(S.TEXTURE_2D,E.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,E.glIndexCounter=this.startActiveTexture,E.glIndex=1,S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,E.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,E.glIndex},isNewNormalMap:function(E,S){return this.textureZero!==E||this.normalTexture!==S},setTextureZero:function(E,S){if(this.textureZero!==E){S&&this.flush();var C=this.gl;C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,E),this.textureZero=E}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(E){if(this.normalTexture!==E){var S=this.gl;S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,E),this.normalTexture=E,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var E=this.gl,S=this.tempTextures,C=0;C<S.length;C++)E.activeTexture(E.TEXTURE0+C),E.bindTexture(E.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(E){if(E===void 0&&(E=!1),!this.isTextureClean){this.flush();var S=this.gl,C=this.tempTextures;if(E){for(var P=0;P<C.length;P++)S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,C[P]);S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,C[1]),this.isTextureClean=!0}else S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,C[0]),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,C[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(E){if(this.pipelines.forceZero())return this.setTextureZero(E,!0),0;var S=this.gl,C=this.currentActiveTexture;return E.glIndexCounter<this.startActiveTexture&&(E.glIndexCounter=this.startActiveTexture,C<this.maxTextures?(E.glIndex=C,S.activeTexture(S.TEXTURE0+C),S.bindTexture(S.TEXTURE_2D,E),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,E.glIndexCounter=this.startActiveTexture,E.glIndex=1,S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,E),this.currentActiveTexture=2)),this.isTextureClean=!1,E.glIndex},pushFramebuffer:function(E,S,C,P){return E===this.currentFramebuffer?this:(this.fboStack.push(E),this.setFramebuffer(E,S,C,P))},setFramebuffer:function(E,S,C,P){if(S===void 0&&(S=!1),C===void 0&&(C=!1),P===void 0&&(P=!0),E===this.currentFramebuffer)return this;var R=this.gl,M=this.width,L=this.height;return E&&E.renderTexture&&P?(M=E.renderTexture.width,L=E.renderTexture.height):this.flush(),R.bindFramebuffer(R.FRAMEBUFFER,E),P&&R.viewport(0,0,M,L),S&&(E?(this.drawingBufferHeight=L,this.pushScissor(0,0,M,L)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=E,C&&this.resetTextures(),this},popFramebuffer:function(E,S,C){E===void 0&&(E=!1),S===void 0&&(S=!1),C===void 0&&(C=!0);var P=this.fboStack;P.pop();var R=P[P.length-1];return R||(R=null),this.setFramebuffer(R,E,S,C),R},setProgram:function(E){return E!==this.currentProgram?(this.flush(),this.gl.useProgram(E),this.currentProgram=E,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(E,S,C,P){var R=this.gl,M=R.NEAREST,L=R.NEAREST,F=R.CLAMP_TO_EDGE,I=null;S=E?E.width:S,C=E?E.height:C;var w=u(S,C);return w&&(F=R.REPEAT),P===o.ScaleModes.LINEAR&&this.config.antialias&&(M=w?this.mipmapFilter:R.LINEAR,L=R.LINEAR),!E&&typeof S=="number"&&typeof C=="number"?I=this.createTexture2D(0,M,L,F,F,R.RGBA,null,S,C):I=this.createTexture2D(0,M,L,F,F,R.RGBA,E),I},createTexture2D:function(E,S,C,P,R,M,L,F,I,w,U,z){w=w==null?!0:w,U===void 0&&(U=!1),z===void 0&&(z=!1);var W=this.gl,H=W.createTexture();W.activeTexture(W.TEXTURE0);var D=W.getParameter(W.TEXTURE_BINDING_2D);return W.bindTexture(W.TEXTURE_2D,H),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,S),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,C),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,R),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,P),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,z),L==null?W.texImage2D(W.TEXTURE_2D,E,M,F,I,0,M,W.UNSIGNED_BYTE,null):(U||(F=L.width,I=L.height),W.texImage2D(W.TEXTURE_2D,E,M,M,W.UNSIGNED_BYTE,L)),u(F,I)&&W.generateMipmap(W.TEXTURE_2D),D&&W.bindTexture(W.TEXTURE_2D,D),H.isAlphaPremultiplied=w,H.isRenderTexture=!1,H.width=F,H.height=I,H.glIndex=0,H.glIndexCounter=-1,H},createFramebuffer:function(E,S,C,P){var R=this.gl,M=R.createFramebuffer(),L=0;if(this.setFramebuffer(M),P){var F=R.createRenderbuffer();R.bindRenderbuffer(R.RENDERBUFFER,F),R.renderbufferStorage(R.RENDERBUFFER,R.DEPTH_STENCIL,E,S),R.framebufferRenderbuffer(R.FRAMEBUFFER,R.DEPTH_STENCIL_ATTACHMENT,R.RENDERBUFFER,F)}if(C.isRenderTexture=!0,C.isAlphaPremultiplied=!1,R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,C,0),L=R.checkFramebufferStatus(R.FRAMEBUFFER),L!==R.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[L])}return M.renderTexture=C,this.setFramebuffer(null),this.resetTextures(),M},createProgram:function(E,S){var C=this.gl,P=C.createProgram(),R=C.createShader(C.VERTEX_SHADER),M=C.createShader(C.FRAGMENT_SHADER);if(C.shaderSource(R,E),C.shaderSource(M,S),C.compileShader(R),C.compileShader(M),!C.getShaderParameter(R,C.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+C.getShaderInfoLog(R));if(!C.getShaderParameter(M,C.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+C.getShaderInfoLog(M));if(C.attachShader(P,R),C.attachShader(P,M),C.linkProgram(P),!C.getProgramParameter(P,C.LINK_STATUS))throw new Error(`Link Program failed:
`+C.getProgramInfoLog(P));return C.useProgram(P),P},createVertexBuffer:function(E,S){var C=this.gl,P=C.createBuffer();return C.bindBuffer(C.ARRAY_BUFFER,P),C.bufferData(C.ARRAY_BUFFER,E,S),C.bindBuffer(C.ARRAY_BUFFER,null),P},createIndexBuffer:function(E,S){var C=this.gl,P=C.createBuffer();return C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,P),C.bufferData(C.ELEMENT_ARRAY_BUFFER,E,S),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,null),P},deleteTexture:function(E,S){return S&&this.resetTextures(!0),E&&this.gl.deleteTexture(E),this},deleteFramebuffer:function(E){return E&&(this.gl.deleteFramebuffer(E),e(this.fboStack,E),this.currentFramebuffer===E&&(this.currentFramebuffer=null)),this},deleteProgram:function(E){return E&&this.gl.deleteProgram(E),this},deleteBuffer:function(E){return this.gl.deleteBuffer(E),this},preRenderCamera:function(E){var S=E.x,C=E.y,P=E.width,R=E.height,M=E.backgroundColor;if(E.emit(f.PRE_RENDER,E),this.pipelines.preBatchCamera(E),this.pushScissor(S,C,P,R),E.mask&&(this.currentCameraMask.mask=E.mask,this.currentCameraMask.camera=E._maskCamera,E.mask.preRenderWebGL(this,E,E._maskCamera)),M.alphaGL>0){var L=this.pipelines.setMulti();L.drawFillRect(S,C,P,R,x.getTintFromFloats(M.blueGL,M.greenGL,M.redGL,1),M.alphaGL)}},getCurrentStencilMask:function(){var E=null,S=this.maskStack,C=this.currentCameraMask;return S.length>0?E=S[S.length-1]:C.mask&&C.mask.isStencil&&(E=C),E},postRenderCamera:function(E){var S=E.flashEffect,C=E.fadeEffect;if(S.isRunning||C.isRunning||C.isComplete){var P=this.pipelines.setMulti();S.postRenderWebGL(P,x.getTintFromFloats),C.postRenderWebGL(P,x.getTintFromFloats)}E.dirty=!1,this.popScissor(),E.mask&&(this.currentCameraMask.mask=null,E.mask.postRenderWebGL(this,E._maskCamera)),this.pipelines.postBatchCamera(E),E.emit(f.POST_RENDER,E)},preRender:function(){if(!this.contextLost){var E=this.gl;if(E.bindFramebuffer(E.FRAMEBUFFER,null),this.config.clearBeforeRender){var S=this.config.backgroundColor;E.clearColor(S.redGL,S.greenGL,S.blueGL,S.alphaGL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)}E.enable(E.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&E.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(n.PRE_RENDER)}},render:function(E,S,C){if(!this.contextLost){var P=S.length;if(this.emit(n.RENDER,E,C),this.preRenderCamera(C),P===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(C);return}this.currentType="";for(var R=this.currentMask,M=0;M<P;M++){this.finalType=M===P-1;var L=S[M],F=L.mask;R=this.currentMask,R.mask&&R.mask!==F&&R.mask.postRenderWebGL(this,R.camera),F&&R.mask!==F&&F.preRenderWebGL(this,L,C),L.blendMode!==this.currentBlendMode&&this.setBlendMode(L.blendMode);var I=L.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=S[M+1].type===this.currentType,L.renderWebGL(this,L,C),this.newType=!1}R=this.currentMask,R.mask&&R.mask.postRenderWebGL(this,R.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(C)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var E=this.snapshotState;E.callback&&(A(this.canvas,E),E.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(E,S,C){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,E,S,C)},snapshotArea:function(E,S,C,P,R,M,L){var F=this.snapshotState;return F.callback=R,F.type=M,F.encoder=L,F.getPixel=!1,F.x=E,F.y=S,F.width=Math.min(C,this.gl.drawingBufferWidth),F.height=Math.min(P,this.gl.drawingBufferHeight),this},snapshotPixel:function(E,S,C){return this.snapshotArea(E,S,1,1,C),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(E,S,C,P,R,M,L,F,I,w,U){R===void 0&&(R=!1),M===void 0&&(M=0),L===void 0&&(L=0),F===void 0&&(F=S),I===void 0&&(I=C);var z=this.currentFramebuffer;this.snapshotArea(M,L,F,I,P,w,U);var W=this.snapshotState;return W.getPixel=R,W.isFramebuffer=!0,W.bufferWidth=S,W.bufferHeight=C,this.setFramebuffer(E),A(this.canvas,W),this.setFramebuffer(z),W.callback=null,W.isFramebuffer=!1,this},canvasToTexture:function(E,S,C,P){return C===void 0&&(C=!1),P===void 0&&(P=!1),S?this.updateCanvasTexture(E,S,P):this.createCanvasTexture(E,C,P)},createCanvasTexture:function(E,S,C){S===void 0&&(S=!1),C===void 0&&(C=!1);var P=this.gl,R=P.NEAREST,M=P.NEAREST,L=E.width,F=E.height,I=P.CLAMP_TO_EDGE,w=u(L,F);return!S&&w&&(I=P.REPEAT),this.config.antialias&&(R=w?this.mipmapFilter:P.LINEAR,M=P.LINEAR),this.createTexture2D(0,R,M,I,I,P.RGBA,E,L,F,!0,!1,C)},updateCanvasTexture:function(E,S,C){C===void 0&&(C=!1);var P=this.gl,R=E.width,M=E.height;if(R>0&&M>0){P.activeTexture(P.TEXTURE0);var L=P.getParameter(P.TEXTURE_BINDING_2D);P.bindTexture(P.TEXTURE_2D,S),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,C),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,E),S.width=R,S.height=M,L&&P.bindTexture(P.TEXTURE_2D,L)}return S},createVideoTexture:function(E,S,C){S===void 0&&(S=!1),C===void 0&&(C=!1);var P=this.gl,R=P.NEAREST,M=P.NEAREST,L=E.videoWidth,F=E.videoHeight,I=P.CLAMP_TO_EDGE,w=u(L,F);return!S&&w&&(I=P.REPEAT),this.config.antialias&&(R=w?this.mipmapFilter:P.LINEAR,M=P.LINEAR),this.createTexture2D(0,R,M,I,I,P.RGBA,E,L,F,!0,!0,C)},updateVideoTexture:function(E,S,C){C===void 0&&(C=!1);var P=this.gl,R=E.videoWidth,M=E.videoHeight;if(R>0&&M>0){P.activeTexture(P.TEXTURE0);var L=P.getParameter(P.TEXTURE_BINDING_2D);P.bindTexture(P.TEXTURE_2D,S),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,C),P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,E),S.width=R,S.height=M,L&&P.bindTexture(P.TEXTURE_2D,L)}return S},setTextureFilter:function(E,S){var C=this.gl,P=[C.LINEAR,C.NEAREST][S];C.activeTexture(C.TEXTURE0);var R=C.getParameter(C.TEXTURE_BINDING_2D);return C.bindTexture(C.TEXTURE_2D,E),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,P),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,P),R&&C.bindTexture(C.TEXTURE_2D,R),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var E=this.gl,S=this.tempTextures,C=0;C<S.length;C++)E.deleteTexture(S[C]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});i.exports=T},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(92),a=t(102),o=t(373),s=t(376),n=t(377),r=t(108),u=t(378),h=t(379),l=t(380),d=t(381),v=new e({initialize:function(g){this.game=g.game,this.renderer=g,this.classes=new a([[f.UTILITY_PIPELINE,d],[f.MULTI_PIPELINE,r],[f.BITMAPMASK_PIPELINE,o],[f.SINGLE_PIPELINE,l],[f.ROPE_PIPELINE,h],[f.LIGHT_PIPELINE,n],[f.POINTLIGHT_PIPELINE,u],[f.GRAPHICS_PIPELINE,s]]),this.postPipelineClasses=new a,this.pipelines=new a,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(c){var g,x,A=this,T=this.game;if(this.classes.each(function(S,C){g=A.add(S,new C({game:T})),S===f.UTILITY_PIPELINE&&(A.UTILITY_PIPELINE=g,A.fullFrame1=g.fullFrame1,A.fullFrame2=g.fullFrame2,A.halfFrame1=g.halfFrame1,A.halfFrame2=g.halfFrame2)}),this.MULTI_PIPELINE=this.get(f.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(f.BITMAPMASK_PIPELINE),c)for(x in c){var E=c[x];g=new E(T),g.isPostFX?this.postPipelineClasses.set(x,E):this.has(x)||(this.classes.set(x,E),this.add(x,g))}},add:function(c,g){if(g.isPostFX){console.warn(c+" is a Post Pipeline. Use `addPostPipeline` instead");return}var x=this.pipelines,A=this.renderer;return x.has(c)?console.warn("Pipeline exists: "+c):(g.name=c,g.manager=this,x.set(c,g)),g.hasBooted||g.boot(),A.width!==0&&A.height!==0&&g.resize(A.width,A.height),g},addPostPipeline:function(c,g){this.postPipelineClasses.has(c)||this.postPipelineClasses.set(c,g)},flush:function(){this.current&&this.current.flush()},has:function(c){var g=this.pipelines;return typeof c=="string"?g.has(c):!!g.contains(c)},get:function(c){var g=this.pipelines;if(typeof c=="string")return g.get(c);if(g.contains(c))return c},getPostPipeline:function(c,g){var x=this.postPipelineClasses,A;if(typeof c=="string"?A=x.get(c):typeof c=="function"?x.contains(c)&&(A=c):typeof c=="object"&&(A=x.get(c.name)),A){var T=new A(this.game);return g&&(T.gameObject=g),T}},remove:function(c,g,x){g===void 0&&(g=!0),x===void 0&&(x=!0),this.pipelines.delete(c),g&&this.classes.delete(c),x&&this.postPipelineClasses.delete(c)},set:function(c,g,x){if(!c.isPostFX)return this.isCurrent(c,x)||(this.flush(),this.current&&this.current.unbind(),this.current=c,c.bind(x)),c.updateProjectionMatrix(),c.onBind(g),c},preBatch:function(c){if(c.hasPostPipeline){this.flush();for(var g=c.postPipelines,x=g.length-1;x>=0;x--){var A=g[x];A.active&&A.preBatch(c)}}},postBatch:function(c){if(c.hasPostPipeline){this.flush();for(var g=c.postPipelines,x=0;x<g.length;x++){var A=g[x];A.active&&A.postBatch(c)}}},preBatchCamera:function(c){if(c.hasPostPipeline){this.flush();for(var g=c.postPipelines,x=g.length-1;x>=0;x--){var A=g[x];A.active&&A.preBatch(c)}}},postBatchCamera:function(c){if(c.hasPostPipeline){this.flush();for(var g=c.postPipelines,x=0;x<g.length;x++){var A=g[x];A.active&&A.postBatch(c)}}},isCurrent:function(c,g){var x=this.renderer,A=this.current;return A&&!g&&(g=A.currentShader),!(A!==c||g.program!==x.currentProgram)},copyFrame:function(c,g,x,A,T){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(c,g,x,A,T),this},copyToGame:function(c){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(c),this},drawFrame:function(c,g,x,A){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(c,g,x,A),this},blendFrames:function(c,g,x,A,T){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(c,g,x,A,T),this},blendFramesAdditive:function(c,g,x,A,T){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(c,g,x,A,T),this},clearFrame:function(c,g){return this.UTILITY_PIPELINE.clearFrame(c,g),this},blitFrame:function(c,g,x,A,T,E){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(c,g,x,A,T,E),this},copyFrameRect:function(c,g,x,A,T,E,S,C){return this.UTILITY_PIPELINE.copyFrameRect(c,g,x,A,T,E,S,C),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(c){return this.UTILITY_PIPELINE.bind(c)},rebind:function(c){c===void 0&&this.previous&&(c=this.previous);var g=this.renderer,x=g.gl;x.disable(x.DEPTH_TEST),x.disable(x.CULL_FACE),g.hasActiveStencilMask()?x.clear(x.DEPTH_BUFFER_BIT):(x.disable(x.STENCIL_TEST),x.clear(x.DEPTH_BUFFER_BIT|x.STENCIL_BUFFER_BIT)),x.viewport(0,0,g.width,g.height),g.currentProgram=null,g.setBlendMode(0,!0);var A=this.pipelines.entries;for(var T in A)A[T].glReset=!0;c&&(this.current=c,c.rebind()),g.resetTextures()},clear:function(){var c=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,c.currentProgram=null,c.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=t(866),o=t(867),s=t(107),n=t(58),r=new e({Extends:n,initialize:function(h){h.fragShader=f(h,"fragShader",a),h.vertShader=f(h,"vertShader",o),h.batchSize=f(h,"batchSize",1),h.vertices=f(h,"vertices",[-1,1,-1,-7,7,1]),h.attributes=f(h,"attributes",[{name:"inPosition",size:2,type:s.FLOAT}]),n.call(this,h)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,h){n.prototype.resize.call(this,u,h),this.set2f("uResolution",u,h)},beginMask:function(u,h,l){var d=this.gl;if(u.bitmapMask&&d){var v=this.renderer;v.flush(),v.pushFramebuffer(u.mainFramebuffer),d.disable(d.STENCIL_TEST),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),v.currentCameraMask.mask!==u&&(v.currentMask.mask=u,v.currentMask.camera=l)}},endMask:function(u,h){var l=this.gl,d=this.renderer,v=u.bitmapMask;if(v&&l){d.flush(),d.pushFramebuffer(u.maskFramebuffer),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),d.setBlendMode(0,!0),v.renderWebGL(d,v,h),d.flush(),d.popFramebuffer(),d.popFramebuffer();var c=d.getCurrentStencilMask();c?(l.enable(l.STENCIL_TEST),c.mask.applyStencil(d,c.camera,!0)):d.currentMask.mask=null,d.pipelines.set(this),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,u.maskTexture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.mainTexture),this.set1i("uInvertMaskAlpha",u.invertAlpha),l.drawArrays(this.topology,0,3),d.resetTextures()}}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=t(107),o=new e({initialize:function(n,r,u,h,l){this.pipeline=n,this.name=r,this.renderer=n.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(u,h),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(l),this.createUniforms()},createAttributes:function(s){var n=0,r=0,u=[];this.vertexComponentCount=0;for(var h=0;h<s.length;h++){var l=s[h],d=l.name,v=f(l,"size",1),c=f(l,"type",a.FLOAT),g=c.enum,x=c.size,A=!!l.normalized;u.push({name:d,size:v,type:g,normalized:A,offset:r,enabled:!1,location:-1}),x===4?n+=v:n++,r+=v*x}this.vertexSize=r,this.vertexComponentCount=n,this.attributes=u},bind:function(s,n){return s===void 0&&(s=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),s&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(s){s===void 0&&(s=!1);for(var n=this.gl,r=this.vertexSize,u=this.attributes,h=this.program,l=0;l<u.length;l++){var d=u[l],v=d.size,c=d.type,g=d.offset,x=d.enabled,A=d.location,T=!!d.normalized;if(s){var E=n.getAttribLocation(h,d.name);E>=0?(n.enableVertexAttribArray(E),n.vertexAttribPointer(E,v,c,T,r,g),d.enabled=!0,d.location=E):E!==-1&&n.disableVertexAttribArray(E)}else x?n.vertexAttribPointer(A,v,c,T,r,g):!x&&A>-1&&(n.disableVertexAttribArray(A),d.location=-1)}return this},createUniforms:function(){var s=this.gl,n=this.program,r=this.uniforms,u,h,l,d=s.getProgramParameter(n,s.ACTIVE_UNIFORMS);for(u=0;u<d;u++){var v=s.getActiveUniform(n,u);if(v){h=v.name,l=s.getUniformLocation(n,h),l!==null&&(r[h]={name:h,location:l,value1:null,value2:null,value3:null,value4:null});var c=h.indexOf("[");c>0&&(h=h.substr(0,c),r.hasOwnProperty(h)||(l=s.getUniformLocation(n,h),l!==null&&(r[h]={name:h,location:l,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(s){return this.uniforms.hasOwnProperty(s)},resetUniform:function(s){var n=this.uniforms[s];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(s,n,r,u){var h=this.uniforms[n];return h?((u||h.value1!==r)&&(h.value1=r,this.renderer.setProgram(this.program),s.call(this.gl,h.location,r),this.pipeline.currentShader=this),this):this},setUniform2:function(s,n,r,u,h){var l=this.uniforms[n];return l?((h||l.value1!==r||l.value2!==u)&&(l.value1=r,l.value2=u,this.renderer.setProgram(this.program),s.call(this.gl,l.location,r,u),this.pipeline.currentShader=this),this):this},setUniform3:function(s,n,r,u,h,l){var d=this.uniforms[n];return d?((l||d.value1!==r||d.value2!==u||d.value3!==h)&&(d.value1=r,d.value2=u,d.value3=h,this.renderer.setProgram(this.program),s.call(this.gl,d.location,r,u,h),this.pipeline.currentShader=this),this):this},setUniform4:function(s,n,r,u,h,l,d){var v=this.uniforms[n];return v?((d||v.value1!==r||v.value2!==u||v.value3!==h||v.value4!==l)&&(v.value1=r,v.value2=u,v.value3=h,v.value4=l,this.renderer.setProgram(this.program),s.call(this.gl,v.location,r,u,h,l),this.pipeline.currentShader=this),this):this},set1f:function(s,n){return this.setUniform1(this.gl.uniform1f,s,n)},set2f:function(s,n,r){return this.setUniform2(this.gl.uniform2f,s,n,r)},set3f:function(s,n,r,u){return this.setUniform3(this.gl.uniform3f,s,n,r,u)},set4f:function(s,n,r,u,h){return this.setUniform4(this.gl.uniform4f,s,n,r,u,h)},set1fv:function(s,n){return this.setUniform1(this.gl.uniform1fv,s,n,!0)},set2fv:function(s,n){return this.setUniform1(this.gl.uniform2fv,s,n,!0)},set3fv:function(s,n){return this.setUniform1(this.gl.uniform3fv,s,n,!0)},set4fv:function(s,n){return this.setUniform1(this.gl.uniform4fv,s,n,!0)},set1iv:function(s,n){return this.setUniform1(this.gl.uniform1iv,s,n,!0)},set2iv:function(s,n){return this.setUniform1(this.gl.uniform2iv,s,n,!0)},set3iv:function(s,n){return this.setUniform1(this.gl.uniform3iv,s,n,!0)},set4iv:function(s,n){return this.setUniform1(this.gl.uniform4iv,s,n,!0)},set1i:function(s,n){return this.setUniform1(this.gl.uniform1i,s,n)},set2i:function(s,n,r){return this.setUniform2(this.gl.uniform2i,s,n,r)},set3i:function(s,n,r,u){return this.setUniform3(this.gl.uniform3i,s,n,r,u)},set4i:function(s,n,r,u,h){return this.setUniform4(this.gl.uniform4i,s,n,r,u,h)},setMatrix2fv:function(s,n,r){return this.setUniform2(this.gl.uniformMatrix2fv,s,n,r,!0)},setMatrix3fv:function(s,n,r){return this.setUniform2(this.gl.uniformMatrix3fv,s,n,r,!0)},setMatrix4fv:function(s,n,r){return this.setUniform2(this.gl.uniformMatrix4fv,s,n,r,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(59),a=t(2),o=t(875),s=t(876),n=t(25),r=t(107),u=t(58),h=new e({Extends:u,initialize:function(d){d.fragShader=a(d,"fragShader",o),d.vertShader=a(d,"vertShader",s),d.attributes=a(d,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),u.call(this,d),this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(l,d,v,c,g,x){this.renderer.pipelines.set(this);var A=this.calcMatrix;x&&x.multiply(g,A);var T=l+v,E=d+c,S=A.getX(l,d),C=A.getY(l,d),P=A.getX(l,E),R=A.getY(l,E),M=A.getX(T,E),L=A.getY(T,E),F=A.getX(T,d),I=A.getY(T,d),w=this.fillTint;this.batchQuad(S,C,P,R,M,L,F,I,w.TL,w.TR,w.BL,w.BR)},batchFillTriangle:function(l,d,v,c,g,x,A,T){this.renderer.pipelines.set(this);var E=this.calcMatrix;T&&T.multiply(A,E);var S=E.getX(l,d),C=E.getY(l,d),P=E.getX(v,c),R=E.getY(v,c),M=E.getX(g,x),L=E.getY(g,x),F=this.fillTint;this.batchTri(S,C,P,R,M,L,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(l,d,v,c,g,x,A,T,E){var S=this.tempTriangle;S[0].x=l,S[0].y=d,S[0].width=A,S[1].x=v,S[1].y=c,S[1].width=A,S[2].x=g,S[2].y=x,S[2].width=A,S[3].x=l,S[3].y=d,S[3].width=A,this.batchStrokePath(S,A,!1,T,E)},batchFillPath:function(l,d,v){this.renderer.pipelines.set(this);var c=this.calcMatrix;v&&v.multiply(d,c);for(var g=l.length,x=this.polygonCache,A,T,E=this.fillTint.TL,S=this.fillTint.TR,C=this.fillTint.BL,P=0;P<g;++P)T=l[P],x.push(T.x,T.y);A=f(x),g=A.length;for(var R=0;R<g;R+=3){var M=A[R+0]*2,L=A[R+1]*2,F=A[R+2]*2,I=x[M+0],w=x[M+1],U=x[L+0],z=x[L+1],W=x[F+0],H=x[F+1],D=c.getX(I,w),O=c.getY(I,w),B=c.getX(U,z),N=c.getY(U,z),G=c.getX(W,H),V=c.getY(W,H);this.batchTri(D,O,B,N,G,V,E,S,C)}x.length=0},batchStrokePath:function(l,d,v,c,g){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=l.length-1,A=0;A<x;A++){var T=l[A],E=l[A+1];this.batchLine(T.x,T.y,E.x,E.y,T.width/2,E.width/2,d,A,!v&&A===x-1,c,g)}},batchLine:function(l,d,v,c,g,x,A,T,E,S,C){this.renderer.pipelines.set(this);var P=this.calcMatrix;C&&C.multiply(S,P);var R=v-l,M=c-d,L=Math.sqrt(R*R+M*M),F=g*(c-d)/L,I=g*(l-v)/L,w=x*(c-d)/L,U=x*(l-v)/L,z=v-w,W=c-U,H=l-F,D=d-I,O=v+w,B=c+U,N=l+F,G=d+I,V=P.getX(z,W),Y=P.getY(z,W),X=P.getX(H,D),b=P.getY(H,D),Q=P.getX(O,B),K=P.getY(O,B),$=P.getX(N,G),Z=P.getY(N,G),k=this.strokeTint,J=k.TL,tt=k.TR,ut=k.BL,rt=k.BR;if(this.batchQuad($,Z,X,b,V,Y,Q,K,J,tt,ut,rt),!(A<=2)){var it=this.prevQuad,j=this.firstQuad;T>0&&it[4]?this.batchQuad($,Z,X,b,it[0],it[1],it[2],it[3],J,tt,ut,rt):(j[0]=$,j[1]=Z,j[2]=X,j[3]=b,j[4]=1),E&&j[4]?this.batchQuad(V,Y,Q,K,j[0],j[1],j[2],j[3],J,tt,ut,rt):(it[0]=V,it[1]=Y,it[2]=Q,it[3]=K,it[4]=1)}},batchVert:function(l,d,v){var c=this.vertexViewF32,g=this.vertexViewU32,x=this.vertexCount*this.currentShader.vertexComponentCount-1;c[++x]=l,c[++x]=d,g[++x]=v,this.vertexCount++},batchQuad:function(l,d,v,c,g,x,A,T,E,S,C,P){var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0),this.batchVert(l,d,E),this.batchVert(v,c,C),this.batchVert(g,x,P),this.batchVert(l,d,E),this.batchVert(g,x,P),this.batchVert(A,T,S),R},batchTri:function(l,d,v,c,g,x,A,T,E){var S=!1;return this.shouldFlush(3)&&(this.flush(),S=!0),this.batchVert(l,d,A),this.batchVert(v,c,T),this.batchVert(g,x,E),S},destroy:function(){return u.prototype.destroy.call(this),this.polygonCache=null,this}});i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=t(877),o=t(108),s=t(3),n=t(58),r=10,u=new s,h=new e({Extends:o,initialize:function(d){r=d.game.renderer.config.maxLights;for(var v=f(d,"fragShader",a),c=[],g=1;g<=r;g++)c.push({name:"lights"+g,fragShader:v.replace("%LIGHT_COUNT%",g.toString())});d.shaders=c,o.call(this,d),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){n.prototype.boot.call(this);var l=this.gl,d=l.createTexture();l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,d),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:d};for(var v=0;v<this.shaders.length;v++)this["lightShader"+(v+1)]=this.shaders[v]},onRender:function(l,d){var v=l.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var c=v.getLights(d),g=c.length;if(g!==0){this.lightsActive=!0,this.setShader(this["lightShader"+g],!0);var x,A=this.renderer,T=A.height,E=d.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",d.x,d.y,d.rotation,d.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),x=0;x<g;x++){var S=c[x].light,C=S.color,P="uLights["+x+"].";E.transformPoint(S.x,S.y,u),this.set2f(P+"position",u.x-d.scrollX*S.scrollFactorX*d.zoom,T-(u.y-d.scrollY*S.scrollFactorY*d.zoom)),this.set3f(P+"color",C.r,C.g,C.b),this.set1f(P+"intensity",S.intensity),this.set1f(P+"radius",S.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var d=this.inverseRotationMatrix;if(l){var v=-l,c=Math.cos(v),g=Math.sin(v);d[1]=g,d[3]=-g,d[0]=d[4]=c}else d[0]=d[4]=1,d[1]=d[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,d),this.currentNormalMapRotation=l}},setTexture2D:function(l,d){var v=this.renderer;l===void 0&&(l=v.tempTextures[0]);var c=this.getNormalMap(d);v.isNewNormalMap(l,c)&&(this.flush(),v.setTextureZero(l),v.setNormalMap(c));var g=d?d.rotation:0;return this.setNormalMapRotation(g),this.currentUnit=0,0},setGameObject:function(l,d){d===void 0&&(d=l.frame);var v=this.renderer,c=d.glTexture,g=this.getNormalMap(l);return v.isNewNormalMap()&&(this.flush(),v.setTextureZero(c),v.setNormalMap(g)),this.setNormalMapRotation(l.rotation),this.currentUnit=0,0},getNormalMap:function(l){var d;return l?l.displayTexture?d=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?d=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(Array.isArray(l.tileset)?d=l.tileset[0].image.dataSource[0]:d=l.tileset.image.dataSource[0]):d=this.defaultNormalMap,d||(d=this.defaultNormalMap),d.glTexture},batchSprite:function(l,d,v){this.lightsActive&&o.prototype.batchSprite.call(this,l,d,v)},batchTexture:function(l,d,v,c,g,x,A,T,E,S,C,P,R,M,L,F,I,w,U,z,W,H,D,O,B,N,G,V,Y,X,b,Q){this.lightsActive&&o.prototype.batchTexture.call(this,l,d,v,c,g,x,A,T,E,S,C,P,R,M,L,F,I,w,U,z,W,H,D,O,B,N,G,V,Y,X,b,Q)},batchTextureFrame:function(l,d,v,c,g,x,A){this.lightsActive&&o.prototype.batchTextureFrame.call(this,l,d,v,c,g,x,A)}});h.LIGHT_COUNT=r,i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=t(880),o=t(881),s=t(58),n=new e({Extends:s,initialize:function(u){u.vertShader=f(u,"vertShader",o),u.fragShader=f(u,"fragShader",a),u.attributes=f(u,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),s.call(this,u)},onRender:function(r,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(r,u,h,l,d,v,c,g,x,A,T,E){var S=r.color,C=r.intensity,P=r.radius,R=r.attenuation,M=S.r*C,L=S.g*C,F=S.b*C,I=u.alpha*r.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(h,l,T,E,P,R,M,L,F,I),this.batchLightVert(d,v,T,E,P,R,M,L,F,I),this.batchLightVert(c,g,T,E,P,R,M,L,F,I),this.batchLightVert(h,l,T,E,P,R,M,L,F,I),this.batchLightVert(c,g,T,E,P,R,M,L,F,I),this.batchLightVert(x,A,T,E,P,R,M,L,F,I)},batchLightVert:function(r,u,h,l,d,v,c,g,x,A){var T=this.vertexViewF32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++E]=r,T[++E]=u,T[++E]=h,T[++E]=l,T[++E]=d,T[++E]=v,T[++E]=c,T[++E]=g,T[++E]=x,T[++E]=A,this.vertexCount++}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=t(108),o=new e({Extends:a,initialize:function(n){n.topology=5,n.batchSize=f(n,"batchSize",256),a.call(this,n)}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=t(108),o=t(882),s=t(883),n=t(58),r=new e({Extends:a,initialize:function(h){h.fragShader=f(h,"fragShader",o),h.vertShader=f(h,"vertShader",s),h.forceZero=!0,a.call(this,h)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0)}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(884),f=t(35),a=t(0),o=t(198),s=t(885),n=t(886),r=t(2),u=t(887),h=t(382),l=t(58),d=new a({Extends:l,initialize:function(c){c.renderTarget=r(c,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),c.vertShader=r(c,"vertShader",h),c.shaders=r(c,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:e},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:s}]),c.attributes=r(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),c.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],c.batchSize=1,l.call(this,c),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var v=this.shaders,c=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=c[0],this.fullFrame2=c[1],this.halfFrame1=c[2],this.halfFrame2=c[3]},copyFrame:function(v,c,g,x,A){g===void 0&&(g=1),x===void 0&&(x=!0),A===void 0&&(A=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",g),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,v.texture),c?(T.viewport(0,0,c.width,c.height),T.bindFramebuffer(T.FRAMEBUFFER,c.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,c.texture,0)):T.viewport(0,0,v.width,v.height),x&&(A?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(v,c,g,x,A,T){g===void 0&&(g=1),x===void 0&&(x=!0),A===void 0&&(A=!0),T===void 0&&(T=!1);var E=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",g),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture),v.height>c.height)E.viewport(0,0,v.width,v.height),this.setTargetUVs(v,c);else{var S=c.height-v.height;E.viewport(0,S,v.width,v.height)}if(E.bindFramebuffer(E.FRAMEBUFFER,c.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,c.texture,0),x&&(A?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),T){var C=this.renderer.currentBlendMode;this.renderer.setBlendMode(f.ERASE)}E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),T&&this.renderer.setBlendMode(C),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,c,g,x,A,T,E,S){E===void 0&&(E=!0),S===void 0&&(S=!0);var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,v.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,v.texture,0),E&&(S?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,c.texture),C.copyTexSubImage2D(C.TEXTURE_2D,0,0,0,g,x,A,T),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},copyToGame:function(v){var c=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,v.texture),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(v,c,g,x){g===void 0&&(g=!0),x===void 0&&(x=this.colorMatrix);var A=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",x.getData()),this.set1f("uAlpha",x.alpha),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,v.texture),c?(A.viewport(0,0,c.width,c.height),A.bindFramebuffer(A.FRAMEBUFFER,c.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,c.texture,0)):A.viewport(0,0,v.width,v.height),g?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFrames:function(v,c,g,x,A,T){x===void 0&&(x=1),A===void 0&&(A=!0),T===void 0&&(T=this.linearShader);var E=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",x),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,c.texture),g?(E.bindFramebuffer(E.FRAMEBUFFER,g.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,g.texture,0),E.viewport(0,0,g.width,g.height)):E.viewport(0,0,v.width,v.height),A?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFramesAdditive:function(v,c,g,x,A){this.blendFrames(v,c,g,x,A,this.addShader)},clearFrame:function(v,c){c===void 0&&(c=!0);var g=this.gl;g.viewport(0,0,v.width,v.height),g.bindFramebuffer(g.FRAMEBUFFER,v.framebuffer),c?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT);var x=this.renderer.currentFramebuffer;g.bindFramebuffer(g.FRAMEBUFFER,x)},setUVs:function(v,c,g,x,A,T,E,S){var C=this.vertexViewF32;C[2]=v,C[3]=c,C[6]=g,C[7]=x,C[10]=A,C[11]=T,C[14]=v,C[15]=c,C[18]=A,C[19]=T,C[22]=E,C[23]=S},setTargetUVs:function(v,c){var g=c.height/v.height;g>.5?g=.5-(g-.5):g=.5+(.5-g),this.setUVs(0,g,0,1+g,1,1+g,1,g)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});i.exports=d},function(i,m){i.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(38),a=t(2),o=function(s,n){var r=s.getContext("experimental-webgl"),u=a(n,"callback"),h=a(n,"type","image/png"),l=a(n,"encoder",.92),d=a(n,"x",0),v=a(n,"y",0),c=a(n,"getPixel",!1),g=a(n,"isFramebuffer",!1),x=g?a(n,"bufferWidth",1):r.drawingBufferWidth,A=g?a(n,"bufferHeight",1):r.drawingBufferHeight;if(c){var T=new Uint8Array(4),E=g?v:A-v;r.readPixels(d,E,1,1,r.RGBA,r.UNSIGNED_BYTE,T),u.call(null,new f(T[0],T[1],T[2],T[3]/255))}else{var S=a(n,"width",x),C=a(n,"height",A),P=S*C*4,R=new Uint8Array(P);r.readPixels(d,A-v-C,S,C,r.RGBA,r.UNSIGNED_BYTE,R);for(var M=e.createWebGL(this,S,C),L=M.getContext("2d"),F=L.getImageData(0,0,S,C),I=F.data,w=0;w<C;w++)for(var U=0;U<S;U++){var z=((C-w-1)*S+U)*4,W=(w*S+U)*4;I[W+0]=R[z+0],I[W+1]=R[z+1],I[W+2]=R[z+2],I[W+3]=R[z+3]}L.putImageData(F,0,0);var H=new Image;H.onerror=function(){u.call(null),e.remove(M)},H.onload=function(){u.call(null,H),e.remove(M)},H.src=M.toDataURL(h,l)}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),f=function(a){var o=a.config;if(!o.hideBanner){var s="WebGL";o.renderType===e.CANVAS?s="Canvas":o.renderType===e.HEADLESS&&(s="Headless");var n=o.audio,r=a.device.audio,u;if(r.webAudio&&!n.disableWebAudio?u="Web Audio":n.noAudio||!r.webAudio&&!r.audioData?u="No Audio":u="HTML5 Audio",a.device.browser.ie)window.console&&console.log("Phaser v"+e.VERSION+" / https://phaser.io");else{var h="",l=[h];if(Array.isArray(o.bannerBackgroundColor)){var d;o.bannerBackgroundColor.forEach(function(c){h=h.concat("%c "),l.push("background: "+c),d=c}),l[l.length-1]="color: "+o.bannerTextColor+"; background: "+d}else h=h.concat("%c "),l.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);l.push("background: transparent"),o.gameTitle&&(h=h.concat(o.gameTitle),o.gameVersion&&(h=h.concat(" v"+o.gameVersion)),o.hidePhaser||(h=h.concat(" / ")));var v="";o.hidePhaser||(h=h.concat("Phaser v"+e.VERSION+v+" ("+s+" | "+u+")")),h=h.concat(" %c "+o.gameURL),l[0]=h,console.log.apply(console,l)}}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(6),a=t(1),o=t(386),s=new e({initialize:function(r,u){this.game=r,this.raf=new o,this.started=!1,this.running=!1,this.minFps=f(u,"min",5),this.targetFps=f(u,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=f(u,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=f(u,"deltaHistory",10),this.panicMax=f(u,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=f(u,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=Math.min(this._target,this.deltaHistory[r]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var n=window.performance.now();this.now=n;var r=n-this.lastTime;r<0&&(r=0),this.rawDelta=r;var u=this.deltaIndex,h=this.deltaHistory,l=this.deltaSmoothingMax,d=r,v=r;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,d=Math.min(d,this._target)),d>this._min&&(d=h[u],d=Math.min(d,this._min)),h[u]=d,this.deltaIndex++,this.deltaIndex>l&&(this.deltaIndex=0),v=0;for(var c=0;c<l;c++)v+=h[c];v/=l}this.delta=v,this.time+=this.rawDelta,n>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0),this.framesThisSecond++;var g=v/this._target;this.callback(n,v,g),this.lastTime=n,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){this.running||(n&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=a,this.raf=null,this.game=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1),a=new e({initialize:function(){this.isRunning=!1,this.callback=f,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var s=this;this.step=function n(){var r=window.performance.now();s.lastTime=s.tick,s.tick=r,s.callback(r),s.timeOutID=window.requestAnimationFrame(n)},this.stepTimeout=function n(){var r=Date.now(),u=Math.min(Math.max(s.target*2+s.tick-r,0),s.target);s.lastTime=s.tick,s.tick=r,s.callback(r),s.timeOutID=window.setTimeout(n,u)}},start:function(o,s,n){this.isRunning||(this.callback=o,this.isSetTimeOut=s,this.target=n,this.isRunning=!0,this.timeOutID=s?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=f}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(22),f=function(a){var o,s=a.events;if(document.hidden!==void 0)o="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(u){document[u+"Hidden"]!==void 0&&(document.hidden=function(){return document[u+"Hidden"]},o=u+"visibilitychange")})}var r=function(u){document.hidden||u.type==="pause"?s.emit(e.HIDDEN):s.emit(e.VISIBLE)};o&&document.addEventListener(o,r,!1),window.onblur=function(){s.emit(e.BLUR)},window.onfocus=function(){s.emit(e.FOCUS)},window.focus&&a.config.autoFocus&&window.focus()};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(389),f=t(31),a=t(6),o=function(s){var n=a(s,"data",[]),r=a(s,"canvas",null),u=a(s,"palette",e),h=a(s,"pixelWidth",1),l=a(s,"pixelHeight",h),d=a(s,"resizeCanvas",!0),v=a(s,"clearCanvas",!0),c=a(s,"preRender",null),g=a(s,"postRender",null),x=Math.floor(Math.abs(n[0].length*h)),A=Math.floor(Math.abs(n.length*l));r||(r=f.create2D(this,x,A),d=!1,v=!1),d&&(r.width=x,r.height=A);var T=r.getContext("2d");v&&T.clearRect(0,0,x,A),c&&c(r,T);for(var E=0;E<n.length;E++)for(var S=n[E],C=0;C<S.length;C++){var P=S[C];P!=="."&&P!==" "&&(T.fillStyle=u[P],T.fillRect(C*h,E*l,h,l))}return g&&g(r,T),r};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(358),a=t(94),o=t(3),s=new e({Extends:a,initialize:function(r,u,h,l){a.call(this,"CubicBezierCurve"),Array.isArray(r)&&(l=new o(r[6],r[7]),h=new o(r[4],r[5]),u=new o(r[2],r[3]),r=new o(r[0],r[1])),this.p0=r,this.p1=u,this.p2=h,this.p3=l},getStartPoint:function(n){return n===void 0&&(n=new o),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,r){r===void 0&&(r=new o);var u=this.p0,h=this.p1,l=this.p2,d=this.p3;return r.set(f(n,u.x,h.x,l.x,d.x),f(n,u.y,h.y,l.y,d.y))},draw:function(n,r){r===void 0&&(r=32);var u=this.getPoints(r);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var h=1;h<u.length;h++)n.lineTo(u[h].x,u[h].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});s.fromJSON=function(n){var r=n.points,u=new o(r[0],r[1]),h=new o(r[2],r[3]),l=new o(r[4],r[5]),d=new o(r[6],r[7]);return new s(u,h,l,d)},i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(94),a=t(36),o=t(6),s=t(196),n=t(3),r=new e({Extends:f,initialize:function(h,l,d,v,c,g,x,A){if(typeof h=="object"){var T=h;h=o(T,"x",0),l=o(T,"y",0),d=o(T,"xRadius",0),v=o(T,"yRadius",d),c=o(T,"startAngle",0),g=o(T,"endAngle",360),x=o(T,"clockwise",!1),A=o(T,"rotation",0)}else v===void 0&&(v=d),c===void 0&&(c=0),g===void 0&&(g=360),x===void 0&&(x=!1),A===void 0&&(A=0);f.call(this,"EllipseCurve"),this.p0=new n(h,l),this._xRadius=d,this._yRadius=v,this._startAngle=a(c),this._endAngle=a(g),this._clockwise=x,this._rotation=a(A)},getStartPoint:function(u){return u===void 0&&(u=new n),this.getPoint(0,u)},getResolution:function(u){return u*2},getPoint:function(u,h){h===void 0&&(h=new n);for(var l=Math.PI*2,d=this._endAngle-this._startAngle,v=Math.abs(d)<Number.EPSILON;d<0;)d+=l;for(;d>l;)d-=l;d<Number.EPSILON&&(v?d=0:d=l),this._clockwise&&!v&&(d===l?d=-l:d=d-l);var c=this._startAngle+u*d,g=this.p0.x+this._xRadius*Math.cos(c),x=this.p0.y+this._yRadius*Math.sin(c);if(this._rotation!==0){var A=Math.cos(this._rotation),T=Math.sin(this._rotation),E=g-this.p0.x,S=x-this.p0.y;g=E*A-S*T+this.p0.x,x=E*T+S*A+this.p0.y}return h.set(g,x)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return s(this._startAngle)},set:function(u){this._startAngle=a(u)}},endAngle:{get:function(){return s(this._endAngle)},set:function(u){this._endAngle=a(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return s(this._rotation)},set:function(u){this._rotation=a(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:s(this._startAngle),endAngle:s(this._endAngle),clockwise:this._clockwise,rotation:s(this._rotation)}}});r.fromJSON=function(u){return new r(u)},i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(94),a=t(199),o=t(10),s=t(3),n=new e({Extends:f,initialize:function(u,h){f.call(this,"LineCurve"),Array.isArray(u)&&(h=new s(u[2],u[3]),u=new s(u[0],u[1])),this.p0=u,this.p1=h,this.arcLengthDivisions=1},getBounds:function(r){return r===void 0&&(r=new o),a([this.p0,this.p1],r)},getStartPoint:function(r){return r===void 0&&(r=new s),r.copy(this.p0)},getResolution:function(r){return r===void 0&&(r=1),r},getPoint:function(r,u){return u===void 0&&(u=new s),r===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(r).add(this.p0),u)},getPointAt:function(r,u){return this.getPoint(r,u)},getTangent:function(r,u){return u===void 0&&(u=new s),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(r,u,h){var l;if(u){var d=this.getLengths(h),v=d[d.length-1],c=Math.min(u,v);l=c/v}else l=r;return l},draw:function(r){return r.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(r){var u=r.points,h=new s(u[0],u[1]),l=new s(u[2],u[3]);return new n(h,l)},i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(3),a=new e({initialize:function(s,n){this.active=!1,this.p0=new f(s,n)},getPoint:function(o,s){return s===void 0&&(s=new f),s.copy(this.p0)},getPointAt:function(o,s){return this.getPoint(o,s)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(94),a=t(359),o=t(3),s=new e({Extends:f,initialize:function(r,u,h){f.call(this,"QuadraticBezier"),Array.isArray(r)&&(h=new o(r[4],r[5]),u=new o(r[2],r[3]),r=new o(r[0],r[1])),this.p0=r,this.p1=u,this.p2=h},getStartPoint:function(n){return n===void 0&&(n=new o),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,r){r===void 0&&(r=new o);var u=this.p0,h=this.p1,l=this.p2;return r.set(a(n,u.x,h.x,l.x),a(n,u.y,h.y,l.y))},draw:function(n,r){r===void 0&&(r=32);var u=this.getPoints(r);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var h=1;h<u.length;h++)n.lineTo(u[h].x,u[h].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});s.fromJSON=function(n){var r=n.points,u=new o(r[0],r[1]),h=new o(r[2],r[3]),l=new o(r[4],r[5]);return new s(u,h,l)},i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),f=t(0),a=t(94),o=t(3),s=new f({Extends:a,initialize:function(r){r===void 0&&(r=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(n){for(var r=0;r<n.length;r++){var u=new o;typeof n[r]=="number"?(u.x=n[r],u.y=n[r+1],r++):Array.isArray(n[r])?(u.x=n[r][0],u.y=n[r][1]):(u.x=n[r].x,u.y=n[r].y),this.points.push(u)}return this},addPoint:function(n,r){var u=new o(n,r);return this.points.push(u),u},getStartPoint:function(n){return n===void 0&&(n=new o),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,r){r===void 0&&(r=new o);var u=this.points,h=(u.length-1)*n,l=Math.floor(h),d=h-l,v=u[l===0?l:l-1],c=u[l],g=u[l>u.length-2?u.length-1:l+1],x=u[l>u.length-3?u.length-1:l+2];return r.set(e(d,v.x,c.x,g.x,x.x),e(d,v.y,c.y,g.y,x.y))},toJSON:function(){for(var n=[],r=0;r<this.points.length;r++)n.push(this.points[r].x),n.push(this.points[r].y);return{type:this.type,points:n}}});s.fromJSON=function(n){return new s(n.points)},i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r){(!s||s==="")&&(s=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),r===void 0&&(r=null),this.key=o,this.fragmentSrc=s,this.vertexSrc=n,this.uniforms=r}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38);e.ColorSpectrum=t(909),e.ColorToRGBA=t(910),e.ComponentToHex=t(398),e.GetColor=t(103),e.GetColor32=t(328),e.HexStringToColor=t(327),e.HSLToColor=t(911),e.HSVColorWheel=t(912),e.HSVToRGB=t(188),e.HueToComponent=t(399),e.IntegerToColor=t(189),e.IntegerToRGB=t(330),e.Interpolate=t(913),e.ObjectToColor=t(331),e.RandomRGB=t(914),e.RGBStringToColor=t(332),e.RGBToHSV=t(329),e.RGBToString=t(915),e.ValueToColor=t(187),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.toString(16);return f.length===1?"0"+f:f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return a<0&&(a+=1),a>1&&(a-=1),a<.16666666666666666?e+(f-e)*6*a:a<.5?f:a<.6666666666666666?e+(f-e)*(.6666666666666666-a)*6:e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),f=function(a){if(document.readyState==="complete"||document.readyState==="interactive"){a();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),a()};document.body?e.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!e)return window.innerHeight;var f=Math.abs(window.orientation),a={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),a.w=f===90?o.offsetHeight:window.innerWidth,a.h=f===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?a.h:a.w};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),f=function(a,o){var s=window.screen,n=s?s.orientation||s.mozOrientation||s.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return e.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return e.ORIENTATION.LANDSCAPE}else return o>a?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f;return e!==""&&(typeof e=="string"?f=document.getElementById(e):e&&e.nodeType===1&&(f=e)),f||(f=document.body),f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f="";try{if(window.DOMParser){var a=new DOMParser;f=a.parseFromString(e,"text/xml")}else f=new ActiveXObject("Microsoft.XMLDOM"),f.loadXML(e)}catch{f=null}return!f||!f.documentElement||f.getElementsByTagName("parsererror").length?null:f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(203),a=t(9),o=t(51),s=t(22),n=t(410),r=t(411),u=t(412),h=t(413),l=t(25),d=t(177),v=new e({initialize:function(g,x){this.game=g,this.scaleManager,this.canvas,this.config=x,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=x.inputKeyboard?new n(this):null,this.mouse=x.inputMouse?new r(this):null,this.touch=x.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=x.inputActivePointers,x.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var A=0;A<=this.pointersTotal;A++){var T=new u(this,A);T.smoothFactor=x.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=x.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],g.events.once(s.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(s.PRE_RENDER,this.preRender,this),this.game.events.once(s.DESTROY,this.destroy,this)},setCanvasOver:function(c){this.isOver=!0,this.events.emit(o.GAME_OVER,c)},setCanvasOut:function(c){this.isOver=!1,this.events.emit(o.GAME_OUT,c)},preRender:function(){var c=this.game.loop.now,g=this.game.loop.delta,x=this.game.scene.getScenes(!0,!0);this.time=c,this.events.emit(o.MANAGER_UPDATE);for(var A=0;A<x.length;A++){var T=x[A];if(T.sys.input&&T.sys.input.updatePoll(c,g)&&this.globalTopOnly)return}},setDefaultCursor:function(c){this.defaultCursor=c,this.canvas.style.cursor!==c&&(this.canvas.style.cursor=c)},setCursor:function(c){c.cursor&&(this.canvas.style.cursor=c.cursor)},resetCursor:function(c){c.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(c){c===void 0&&(c=1);var g=[];this.pointersTotal+c>10&&(c=10-this.pointersTotal);for(var x=0;x<c;x++){var A=this.pointers.length,T=new u(this,A);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,g.push(T)}return g},updateInputPlugins:function(c,g){var x=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var A=0;A<x.length;A++){var T=x[A];if(T.sys.input){var E=T.sys.input.update(c,g);if(E&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(c){for(var g=this.pointers,x=[],A=0;A<c.changedTouches.length;A++)for(var T=c.changedTouches[A],E=1;E<this.pointersTotal;E++){var S=g[E];if(!S.active){S.touchstart(T,c),this.activePointer=S,x.push(S);break}}this.updateInputPlugins(f.TOUCH_START,x)},onTouchMove:function(c){for(var g=this.pointers,x=[],A=0;A<c.changedTouches.length;A++)for(var T=c.changedTouches[A],E=1;E<this.pointersTotal;E++){var S=g[E];if(S.active&&S.identifier===T.identifier){S.touchmove(T,c),this.activePointer=S,x.push(S);break}}this.updateInputPlugins(f.TOUCH_MOVE,x)},onTouchEnd:function(c){for(var g=this.pointers,x=[],A=0;A<c.changedTouches.length;A++)for(var T=c.changedTouches[A],E=1;E<this.pointersTotal;E++){var S=g[E];if(S.active&&S.identifier===T.identifier){S.touchend(T,c),x.push(S);break}}this.updateInputPlugins(f.TOUCH_END,x)},onTouchCancel:function(c){for(var g=this.pointers,x=[],A=0;A<c.changedTouches.length;A++)for(var T=c.changedTouches[A],E=1;E<this.pointersTotal;E++){var S=g[E];if(S.active&&S.identifier===T.identifier){S.touchcancel(T,c),x.push(S);break}}this.updateInputPlugins(f.TOUCH_CANCEL,x)},onMouseDown:function(c){var g=this.mousePointer;g.down(c),g.updateMotion(),this.activePointer=g,this.updateInputPlugins(f.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(c){var g=this.mousePointer;g.move(c),g.updateMotion(),this.activePointer=g,this.updateInputPlugins(f.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(c){var g=this.mousePointer;g.up(c),g.updateMotion(),this.activePointer=g,this.updateInputPlugins(f.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(c){var g=this.mousePointer;g.wheel(c),this.activePointer=g,this.updateInputPlugins(f.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(c){var g=this.mouse.locked;this.mousePointer.locked=g,this.events.emit(o.POINTERLOCK_CHANGE,c,g)},inputCandidate:function(c,g){var x=c.input;if(!x||!x.enabled||!x.alwaysEnabled&&!c.willRender(g))return!1;var A=!0,T=c.parentContainer;if(T)do{if(!T.willRender(g)){A=!1;break}T=T.parentContainer}while(T);return A},hitTest:function(c,g,x,A){A===void 0&&(A=this._tempHitTest);var T=this._tempPoint,E=x.scrollX,S=x.scrollY;A.length=0;var C=c.x,P=c.y;x.getWorldPoint(C,P,T),c.worldX=T.x,c.worldY=T.y;for(var R={x:0,y:0},M=this._tempMatrix,L=this._tempMatrix2,F=0;F<g.length;F++){var I=g[F];if(!!this.inputCandidate(I,x)){var w=T.x+E*I.scrollFactorX-E,U=T.y+S*I.scrollFactorY-S;I.parentContainer?(I.getWorldTransformMatrix(M,L),M.applyInverse(w,U,R)):d(w,U,I.x,I.y,I.rotation,I.scaleX,I.scaleY,R),this.pointWithinHitArea(I,R.x,R.y)&&A.push(I)}}return A},pointWithinHitArea:function(c,g,x){g+=c.displayOriginX,x+=c.displayOriginY;var A=c.input;return A&&A.hitAreaCallback(A.hitArea,g,x,c)?(A.localX=g,A.localY=x,!0):!1},pointWithinInteractiveObject:function(c,g,x){return c.hitArea?(g+=c.gameObject.displayOriginX,x+=c.gameObject.displayOriginY,c.localX=g,c.localY=x,c.hitAreaCallback(c.hitArea,g,x,c)):!1},transformPointer:function(c,g,x,A){var T=c.position,E=c.prevPosition;E.x=T.x,E.y=T.y;var S=this.scaleManager.transformX(g),C=this.scaleManager.transformY(x),P=c.smoothFactor;!A||P===0?(T.x=S,T.y=C):(T.x=S*P+E.x*(1-P),T.y=C*P+E.y*(1-P))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(s.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var c=0;c<this.pointers.length;c++)this.pointers[c].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),f=t(0),a=t(22),o=t(51),s=t(143),n=t(1),r=new f({initialize:function(h){this.manager=h,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,h.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(o.MANAGER_PROCESS);var d=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!d&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(o.MANAGER_PROCESS);var d=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!d&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var h=this.target;h&&(h.addEventListener("keydown",this.onKeyDown,!1),h.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var h=this.captures,l=0;l<u.length;l++){var d=u[l];typeof d=="string"&&(d=s[d.trim().toUpperCase()]),h.indexOf(d)===-1&&h.push(d)}this.preventDefault=h.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var h=this.captures,l=0;l<u.length;l++){var d=u[l];typeof d=="string"&&(d=s[d.toUpperCase()]),e(h,d)}this.preventDefault=h.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(191),a=t(51),o=t(1),s=new e({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,r.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(f.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){f.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(!!n){var r=this,u=this.manager,h=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseMove(v),r.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){l&&window.focus(),!v.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseDown(v),r.preventDefaultDown&&v.target===h&&v.preventDefault())},this.onMouseDownWindow=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&v.target!==h&&u.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&(u.onMouseUp(v),r.preventDefaultUp&&v.target===h&&v.preventDefault())},this.onMouseUpWindow=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&v.target!==h&&u.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&u.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&u.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&r.enabled&&u&&u.enabled&&u.onMouseWheel(v),r.preventDefaultWheel&&v.target===h&&v.preventDefault()};var d={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,d),n.addEventListener("mouseout",this.onMouseOut,d),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,d),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,d),window.top.addEventListener("mouseup",this.onMouseUpWindow,d)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,d),window.addEventListener("mouseup",this.onMouseUpWindow,d),this.isTop=!1}f.pointerLock&&(this.pointerLockChange=function(v){var c=r.target;r.locked=document.pointerLockElement===c||document.mozPointerLockElement===c||document.webkitPointerLockElement===c,u.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),f.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(349),f=t(0),a=t(50),o=t(124),s=t(360),n=t(3),r=t(105),u=new f({initialize:function(l,d){this.manager=l,this.id=d,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=d===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(h){var l=h.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(h,l){return h.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var h=this.position.x,l=this.position.y,d=this.midPoint.x,v=this.midPoint.y;if(!(h===d&&l===v)){var c=s(this.motionFactor,d,h),g=s(this.motionFactor,v,l);o(c,h,.1)&&(c=h),o(g,l,.1)&&(g=l),this.midPoint.set(c,g);var x=h-c,A=l-g;this.velocity.set(x,A),this.angle=e(c,g,h,l),this.distance=Math.sqrt(x*x+A*A)}},up:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=h.timeStamp,this.wasTouch=!1)},down:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),r.macOS&&h.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=h.timeStamp),this.wasTouch=!1},move:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.locked&&(this.movementX=h.movementX||h.mozMovementX||h.webkitMovementX||0,this.movementY=h.movementY||h.mozMovementY||h.webkitMovementY||0),this.moveTime=h.timeStamp,this.wasTouch=!1},wheel:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.deltaX=h.deltaX,this.deltaY=h.deltaY,this.deltaZ=h.deltaZ,this.wasTouch=!1},touchstart:function(h,l){h.pointerId&&(this.pointerId=h.pointerId),this.identifier=h.identifier,this.target=h.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(h,l){this.event=l,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(h,l){this.buttons=0,this.event=l,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(h,l){this.buttons=0,this.event=l,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?e(this.downX,this.downY,this.x,this.y):e(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(h,l){h===void 0&&(h=10),l===void 0&&(l=[]);for(var d=this.prevPosition.x,v=this.prevPosition.y,c=this.position.x,g=this.position.y,x=0;x<h;x++){var A=1/h*x;l[x]={x:s(A,d,c),y:s(A,v,g)}}return l},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},time:{get:function(){return this.event?this.event.timeStamp:0}}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(51),a=t(1),o=new e({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.onTouchOver=a,this.onTouchOut=a,n.events.once(f.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputTouch,this.target=s.inputTouchEventTarget,this.capture=s.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},startListeners:function(){var s=this,n=this.manager.canvas,r=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(d){r&&window.focus(),!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onTouchStart(d),s.capture&&d.cancelable&&d.target===n&&d.preventDefault())},this.onTouchStartWindow=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&d.target!==n&&s.manager.onTouchStart(d)},this.onTouchMove=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onTouchMove(d),s.capture&&d.cancelable&&d.preventDefault())},this.onTouchEnd=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onTouchEnd(d),s.capture&&d.cancelable&&d.target===n&&d.preventDefault())},this.onTouchEndWindow=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&d.target!==n&&s.manager.onTouchEnd(d)},this.onTouchCancel=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&(s.manager.onTouchCancel(d),s.capture&&d.preventDefault())},this.onTouchCancelWindow=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&s.manager.onTouchCancel(d)},this.onTouchOver=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&s.manager.setCanvasOver(d)},this.onTouchOut=function(d){!d.defaultPrevented&&s.enabled&&s.manager&&s.manager.enabled&&s.manager.setCanvasOut(d)};var u=this.target;if(!!u){var h={passive:!0},l={passive:!1};u.addEventListener("touchstart",this.onTouchStart,this.capture?l:h),u.addEventListener("touchmove",this.onTouchMove,this.capture?l:h),u.addEventListener("touchend",this.onTouchEnd,this.capture?l:h),u.addEventListener("touchcancel",this.onTouchCancel,this.capture?l:h),u.addEventListener("touchover",this.onTouchOver,this.capture?l:h),u.addEventListener("touchout",this.onTouchOut,this.capture?l:h),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,l),window.addEventListener("touchend",this.onTouchEndWindow,l),window.addEventListener("touchcancel",this.onTouchCancelWindow,l)),this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("touchstart",this.onTouchStart),s.removeEventListener("touchmove",this.onTouchMove),s.removeEventListener("touchend",this.onTouchEnd),s.removeEventListener("touchcancel",this.onTouchCancel),s.removeEventListener("touchover",this.onTouchOver),s.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(22),a=t(9),o=t(8),s=t(16),n=t(5),r=t(2),u=t(24),h=t(93),l=new e({Extends:a,initialize:function(v){a.call(this),this.game=v,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],v.isBooted?this.boot():v.events.once(f.BOOT,this.boot,this)},boot:function(){var d,v,c,g,x,A,T,E=this.game.config,S=E.installGlobalPlugins;for(S=S.concat(this._pendingGlobal),d=0;d<S.length;d++)v=S[d],c=r(v,"key",null),g=r(v,"plugin",null),x=r(v,"start",!1),A=r(v,"mapping",null),T=r(v,"data",null),c&&(g?this.install(c,g,x,A,T):console.warn("Missing `plugin` for key: "+c));for(S=E.installScenePlugins,S=S.concat(this._pendingScene),d=0;d<S.length;d++)v=S[d],c=r(v,"key",null),g=r(v,"plugin",null),A=r(v,"mapping",null),c&&(g?this.installScenePlugin(c,g,A):console.warn("Missing `plugin` for key: "+c));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(f.DESTROY,this.destroy,this)},addToScene:function(d,v,c){var g,x,A,T=this.game,E=d.scene,S=d.settings.map,C=d.settings.isBooted;for(g=0;g<v.length;g++)x=v[g],T[x]?(d[x]=T[x],S.hasOwnProperty(x)&&(E[S[x]]=d[x])):x==="game"&&S.hasOwnProperty(x)&&(E[S[x]]=T);for(var P=0;P<c.length;P++)for(A=c[P],g=0;g<A.length;g++)if(x=A[g],!!u.hasCore(x)){var R=u.getCore(x),M=R.mapping,L=new R.plugin(E,this,M);d[M]=L,R.custom?E[M]=L:S.hasOwnProperty(M)&&(E[S[M]]=L),C&&L.boot()}for(A=this.plugins,g=0;g<A.length;g++){var F=A[g];F.mapping&&(E[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var d=this.game.config.defaultPlugins;return d=d.concat(this.scenePlugins),d},installScenePlugin:function(d,v,c,g,x){if(x===void 0&&(x=!1),typeof v!="function"){console.warn("Invalid Scene Plugin: "+d);return}if(!u.hasCore(d))u.register(d,v,c,!0),this.scenePlugins.push(d);else if(!x&&u.hasCore(d)){console.warn("Scene Plugin key in use: "+d);return}if(g){var A=new v(g,this,d);g.sys[d]=A,c&&c!==""&&(g[c]=A),A.boot()}},install:function(d,v,c,g,x){if(c===void 0&&(c=!1),g===void 0&&(g=null),x===void 0&&(x=null),typeof v!="function")return console.warn("Invalid Plugin: "+d),null;if(u.hasCustom(d))return console.warn("Plugin key in use: "+d),null;if(g!==null&&(c=!0),!this.game.isBooted)this._pendingGlobal.push({key:d,plugin:v,start:c,mapping:g,data:x});else if(u.registerCustom(d,v,g,x),c)return this.start(d);return null},getIndex:function(d){for(var v=this.plugins,c=0;c<v.length;c++){var g=v[c];if(g.key===d)return c}return-1},getEntry:function(d){var v=this.getIndex(d);if(v!==-1)return this.plugins[v]},isActive:function(d){var v=this.getEntry(d);return v&&v.active},start:function(d,v){v===void 0&&(v=d);var c=this.getEntry(v);return c&&!c.active?(c.active=!0,c.plugin.start()):c||(c=this.createEntry(d,v)),c?c.plugin:null},createEntry:function(d,v){var c=u.getCustom(d);if(c){var g=new c.plugin(this);c={key:v,plugin:g,active:!0,mapping:c.mapping,data:c.data},this.plugins.push(c),g.init(c.data),g.start()}return c},stop:function(d){var v=this.getEntry(d);return v&&v.active&&(v.active=!1,v.plugin.stop()),this},get:function(d,v){v===void 0&&(v=!0);var c=this.getEntry(d);if(c)return c.plugin;var g=this.getClass(d);return g&&v?(c=this.createEntry(d,d),c?c.plugin:null):g||null},getClass:function(d){return u.getCustomClass(d)},removeGlobalPlugin:function(d){var v=this.getEntry(d);v&&h(this.plugins,v),u.removeCustom(d)},removeScenePlugin:function(d){h(this.scenePlugins,d),u.remove(d)},registerGameObject:function(d,v,c){return v&&n.register(d,v),c&&s.register(d,c),this},removeGameObject:function(d,v,c){return v===void 0&&(v=!0),c===void 0&&(c=!0),v&&n.remove(d),c&&s.remove(d),this},registerFileType:function(d,v,c){o.register(d,v),c&&c.sys.load&&(c.sys.load[d]=v)},destroy:function(){for(var d=0;d<this.plugins.length;d++)this.plugins[d].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),f=t(0),a=t(9),o=t(104),s=t(22),n=t(401),r=t(407),u=t(402),h=t(1),l=t(10),d=t(416),v=t(76),c=t(3),g=new f({Extends:a,initialize:function(A){a.call(this),this.game=A,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new d,this.gameSize=new d,this.baseSize=new d,this.displaySize=new d,this.scaleMode=e.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new c(1,1),this.autoRound=!1,this.autoCenter=e.CENTER.NO_CENTER,this.orientation=e.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(s.BOOT,this.boot,this)},boot:function(){var x=this.game;this.canvas=x.canvas,this.fullscreen=x.device.fullscreen,this.scaleMode!==e.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===e.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),x.events.on(s.PRE_STEP,this.step,this),x.events.once(s.READY,this.refresh,this),x.events.once(s.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(x){this.getParent(x),this.getParentBounds();var A=x.width,T=x.height,E=x.scaleMode,S=x.zoom,C=x.autoRound;if(typeof A=="string"){var P=this.parentSize.width;P===0&&(P=window.innerWidth);var R=parseInt(A,10)/100;A=Math.floor(P*R)}if(typeof T=="string"){var M=this.parentSize.height;M===0&&(M=window.innerHeight);var L=parseInt(T,10)/100;T=Math.floor(M*L)}this.scaleMode=E,this.autoRound=C,this.autoCenter=x.autoCenter,this.resizeInterval=x.resizeInterval,C&&(A=Math.floor(A),T=Math.floor(T)),this.gameSize.setSize(A,T),S===e.ZOOM.MAX_ZOOM&&(S=this.getMaxZoom()),this.zoom=S,S!==1&&(this._resetZoom=!0),this.baseSize.setSize(A,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),x.minWidth>0&&this.displaySize.setMin(x.minWidth*S,x.minHeight*S),x.maxWidth>0&&this.displaySize.setMax(x.maxWidth*S,x.maxHeight*S),this.displaySize.setSize(A,T),this.orientation=u(A,T)},getParent:function(x){var A=x.parent;if(A!==null){if(this.parent=r(A),this.parentIsWindow=this.parent===document.body,x.expandParent&&x.scaleMode!==e.SCALE_MODE.NONE){var T=this.parent.getBoundingClientRect();(this.parentIsWindow||T.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",T=this.parent.getBoundingClientRect(),!this.parentIsWindow&&T.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}x.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=r(x.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var x=this.parentSize,A=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(A.height=n(!0));var T=A.width,E=A.height;return x.width!==T||x.height!==E?(x.setSize(T,E),!0):!1},lockOrientation:function(x){var A=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return A?A.call(screen,x):!1},setParentSize:function(x,A){return this.parentSize.setSize(x,A),this.refresh()},setGameSize:function(x,A){var T=this.autoRound;T&&(x=Math.floor(x),A=Math.floor(A));var E=this.width,S=this.height;return this.gameSize.resize(x,A),this.baseSize.resize(x,A),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(x/A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(E,S)},resize:function(x,A){var T=this.zoom,E=this.autoRound;E&&(x=Math.floor(x),A=Math.floor(A));var S=this.width,C=this.height;this.gameSize.resize(x,A),this.baseSize.resize(x,A),E&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(x*T,A*T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var P=this.canvas.style,R=x*T,M=A*T;return E&&(R=Math.floor(R),M=Math.floor(M)),(R!==x||M!==A)&&(P.width=R+"px",P.height=M+"px"),this.refresh(S,C)},setZoom:function(x){return this.zoom=x,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(x,A){x===void 0&&(x=this.width),A===void 0&&(A=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var T=this.game.domContainer;if(T){this.baseSize.setCSS(T);var E=this.canvas.style,S=T.style;S.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",S.marginLeft=E.marginLeft,S.marginTop=E.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,x,A),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var x=u(this.width,this.height);x!==this.orientation&&(this.orientation=x,this.emit(o.ORIENTATION_CHANGE,x))}},updateScale:function(){var x=this.canvas.style,A=this.gameSize.width,T=this.gameSize.height,E,S,C=this.zoom,P=this.autoRound;this.scaleMode===e.SCALE_MODE.NONE?(this.displaySize.setSize(A*C,T*C),E=this.displaySize.width,S=this.displaySize.height,P&&(E=Math.floor(E),S=Math.floor(S)),this._resetZoom&&(x.width=E+"px",x.height=S+"px",this._resetZoom=!1)):this.scaleMode===e.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),E=this.displaySize.width,S=this.displaySize.height,P&&(E=Math.floor(E),S=Math.floor(S)),this.canvas.width=E,this.canvas.height=S):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),E=this.displaySize.width,S=this.displaySize.height,P&&(E=Math.floor(E),S=Math.floor(S)),x.width=E+"px",x.height=S+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var x=v(this.parentSize.width,this.gameSize.width,0,!0),A=v(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(x,A),1)},updateCenter:function(){var x=this.autoCenter;if(x!==e.CENTER.NO_CENTER){var A=this.canvas,T=A.style,E=A.getBoundingClientRect(),S=E.width,C=E.height,P=Math.floor((this.parentSize.width-S)/2),R=Math.floor((this.parentSize.height-C)/2);x===e.CENTER.CENTER_HORIZONTALLY?R=0:x===e.CENTER.CENTER_VERTICALLY&&(P=0),T.marginLeft=P+"px",T.marginTop=R+"px"}},updateBounds:function(){var x=this.canvasBounds,A=this.canvas.getBoundingClientRect();x.x=A.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),x.y=A.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),x.width=A.width,x.height=A.height},transformX:function(x){return(x-this.canvasBounds.left)*this.displayScale.x},transformY:function(x){return(x-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(x){x===void 0&&(x={navigationUI:"hide"});var A=this.fullscreen;if(!A.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!A.active){var T=this.getFullscreenTarget();A.keyboard?T[A.request](Element.ALLOW_KEYBOARD_INPUT):T[A.request](x)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(x){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,x)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var x=document.createElement("div");x.style.margin="0",x.style.padding="0",x.style.width="100%",x.style.height="100%",this.fullscreenTarget=x,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var A=this.canvas.parentNode;A.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var x=this.fullscreenTarget;if(x&&x.parentNode){var A=x.parentNode;A.insertBefore(this.canvas,x),A.removeChild(x)}}},stopFullscreen:function(){var x=this.fullscreen;if(!x.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;x.active&&document[x.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(x){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(x)},startListeners:function(){var x=this,A=this.listeners;if(A.orientationChange=function(){x.updateBounds(),x._checkOrientation=!0,x.dirty=!0},A.windowResize=function(){x.updateBounds(),x.dirty=!0},window.addEventListener("orientationchange",A.orientationChange,!1),window.addEventListener("resize",A.windowResize,!1),this.fullscreen.available){A.fullScreenChange=function(E){return x.onFullScreenChange(E)},A.fullScreenError=function(E){return x.onFullScreenError(E)};var T=["webkit","moz",""];T.forEach(function(E){document.addEventListener(E+"fullscreenchange",A.fullScreenChange,!1),document.addEventListener(E+"fullscreenerror",A.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.addEventListener("MSFullscreenError",A.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(x,A){!this.parent||(this._lastCheck+=A,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var x=this.listeners;window.removeEventListener("orientationchange",x.orientationChange,!1),window.removeEventListener("resize",x.windowResize,!1);var A=["webkit","moz",""];A.forEach(function(T){document.removeEventListener(T+"fullscreenchange",x.fullScreenChange,!1),document.removeEventListener(T+"fullscreenerror",x.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",x.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",x.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===e.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===e.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});i.exports=g},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(76),o=t(3),s=new f({initialize:function(r,u,h,l){r===void 0&&(r=0),u===void 0&&(u=r),h===void 0&&(h=0),l===void 0&&(l=null),this._width=r,this._height=u,this._parent=l,this.aspectMode=h,this.aspectRatio=u===0?1:r/u,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.snapTo.set(n,r),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.minWidth=e(n,0,this.maxWidth),this.minHeight=e(r,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,r){return n===void 0&&(n=Number.MAX_VALUE),r===void 0&&(r=n),this.maxWidth=e(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=e(r,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,r){switch(n===void 0&&(n=0),r===void 0&&(r=n),this.aspectMode){case s.NONE:this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(a(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case s.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case s.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(r,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case s.FIT:this.constrain(n,r,!0);break;case s.ENVELOP:this.constrain(n,r,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,r){return this._width=this.getNewWidth(a(n,this.snapTo.x)),this._height=this.getNewHeight(a(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,r){return r===void 0&&(r=!0),n=e(n,this.minWidth,this.maxWidth),r&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,r){return r===void 0&&(r=!0),n=e(n,this.minHeight,this.maxHeight),r&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,r,u){n===void 0&&(n=0),r===void 0&&(r=n),u===void 0&&(u=!0),n=this.getNewWidth(n),r=this.getNewHeight(r);var h=this.snapTo,l=r===0?1:n/r;return u&&this.aspectRatio>l||!u&&this.aspectRatio<l?(n=a(n,h.x),r=n/this.aspectRatio,h.y>0&&(r=a(r,h.y),n=r*this.aspectRatio)):(u&&this.aspectRatio<l||!u&&this.aspectRatio>l)&&(r=a(r,h.y),n=r*this.aspectRatio,h.x>0&&(n=a(n,h.x),r=n*(1/this.aspectRatio))),this._width=n,this._height=r,this},fitTo:function(n,r){return this.constrain(n,r,!0)},envelop:function(n,r){return this.constrain(n,r,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});s.NONE=0,s.WIDTH_CONTROLS_HEIGHT=1,s.HEIGHT_CONTROLS_WIDTH=2,s.FIT=3,s.ENVELOP=4,i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(144),a=t(20),o=t(22),s=t(6),n=t(95),r=t(1),u=t(418),h=t(204),l=new e({initialize:function(v,c){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,c){Array.isArray(c)||(c=[c]);for(var g=0;g<c.length;g++)this._pending.push({key:"default",scene:c[g],autoStart:g===0,data:{}})}v.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var d,v,c,g;for(d=0;d<this._pending.length;d++){v=this._pending[d],c=v.key,g=v.scene;var x;g instanceof u?x=this.createSceneFromInstance(c,g):typeof g=="object"?x=this.createSceneFromObject(c,g):typeof g=="function"&&(x=this.createSceneFromFunction(c,g)),c=x.sys.settings.key,this.keys[c]=x,this.scenes.push(x),this._data[c]&&(x.sys.settings.data=this._data[c].data,this._data[c].autoStart&&(v.autoStart=!0)),(v.autoStart||x.sys.settings.active)&&this._start.push(c)}for(this._pending.length=0,this._data={},this.isBooted=!0,d=0;d<this._start.length;d++)v=this._start[d],this.start(v);this._start.length=0}},processQueue:function(){var d=this._pending.length,v=this._queue.length;if(!(d===0&&v===0)){var c,g;if(d){for(c=0;c<d;c++)g=this._pending[c],this.add(g.key,g.scene,g.autoStart,g.data);for(c=0;c<this._start.length;c++)g=this._start[c],this.start(g);this._start.length=0,this._pending.length=0;return}for(c=0;c<this._queue.length;c++)g=this._queue[c],this[g.op](g.keyA,g.keyB);this._queue.length=0}},add:function(d,v,c,g){if(c===void 0&&(c=!1),g===void 0&&(g={}),this.isProcessing||!this.isBooted)return this._pending.push({key:d,scene:v,autoStart:c,data:g}),this.isBooted||(this._data[d]={data:g}),null;d=this.getKey(d,v);var x;return v instanceof u?x=this.createSceneFromInstance(d,v):typeof v=="object"?(v.key=d,x=this.createSceneFromObject(d,v)):typeof v=="function"&&(x=this.createSceneFromFunction(d,v)),x.sys.settings.data=g,d=x.sys.settings.key,this.keys[d]=x,this.scenes.push(x),(c||x.sys.settings.active)&&(this._pending.length?this._start.push(d):this.start(d)),x},remove:function(d){if(this.isProcessing)this._queue.push({op:"remove",keyA:d,keyB:null});else{var v=this.getScene(d);if(!v||v.sys.isTransitioning())return this;var c=this.scenes.indexOf(v),g=v.sys.settings.key;c>-1&&(delete this.keys[g],this.scenes.splice(c,1),this._start.indexOf(g)>-1&&(c=this._start.indexOf(g),this._start.splice(c,1)),v.sys.destroy())}return this},bootScene:function(d){var v=d.sys,c=v.settings;v.sceneUpdate=r,d.init&&(d.init.call(d,c.data),c.status=f.INIT,c.isTransition&&v.events.emit(a.TRANSITION_INIT,c.transitionFrom,c.transitionDuration));var g;v.load&&(g=v.load,g.reset()),g&&d.preload?(d.preload.call(d),g.list.size===0?this.create(d):(c.status=f.LOADING,g.once(n.COMPLETE,this.loadComplete,this),g.start())):this.create(d)},loadComplete:function(d){this.create(d.scene)},payloadComplete:function(d){this.bootScene(d.scene)},update:function(d,v){this.processQueue(),this.isProcessing=!0;for(var c=this.scenes.length-1;c>=0;c--){var g=this.scenes[c].sys;g.settings.status>f.START&&g.settings.status<=f.RUNNING&&g.step(d,v)}},render:function(d){for(var v=0;v<this.scenes.length;v++){var c=this.scenes[v].sys;c.settings.visible&&c.settings.status>=f.LOADING&&c.settings.status<f.SLEEPING&&c.render(d)}this.isProcessing=!1},create:function(d){var v=d.sys,c=v.settings;d.create&&(c.status=f.CREATING,d.create.call(d,c.data),c.status===f.DESTROYED)||(c.isTransition&&v.events.emit(a.TRANSITION_START,c.transitionFrom,c.transitionDuration),d.update&&(v.sceneUpdate=d.update),c.status=f.RUNNING,v.events.emit(a.CREATE,d))},createSceneFromFunction:function(d,v){var c=new v;if(c instanceof u){var g=c.sys.settings.key;if(g!==""&&(d=g),this.keys.hasOwnProperty(d))throw new Error("Cannot add a Scene with duplicate key: "+d);return this.createSceneFromInstance(d,c)}else return c.sys=new h(c),c.sys.settings.key=d,c.sys.init(this.game),c},createSceneFromInstance:function(d,v){var c=v.sys.settings.key;return c===""&&(v.sys.settings.key=d),v.sys.init(this.game),v},createSceneFromObject:function(d,v){var c=new u(v),g=c.sys.settings.key;g!==""?d=g:c.sys.settings.key=d,c.sys.init(this.game);for(var x=["init","preload","create","update","render"],A=0;A<x.length;A++){var T=s(v,x[A],null);T&&(c[x[A]]=T)}if(v.hasOwnProperty("extend")){for(var E in v.extend)if(!!v.extend.hasOwnProperty(E)){var S=v.extend[E];E==="data"&&c.hasOwnProperty("data")&&typeof S=="object"?c.data.merge(S):E!=="sys"&&(c[E]=S)}}return c},getKey:function(d,v){if(d||(d="default"),typeof v=="function")return d;if(v instanceof u?d=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(d=v.key),this.keys.hasOwnProperty(d))throw new Error("Cannot add a Scene with duplicate key: "+d);return d},getScenes:function(d,v){d===void 0&&(d=!0),v===void 0&&(v=!1);for(var c=[],g=this.scenes,x=0;x<g.length;x++){var A=g[x];A&&(!d||d&&A.sys.isActive())&&c.push(A)}return v?c.reverse():c},getScene:function(d){if(typeof d=="string"){if(this.keys[d])return this.keys[d]}else for(var v=0;v<this.scenes.length;v++)if(d===this.scenes[v])return d;return null},isActive:function(d){var v=this.getScene(d);return v?v.sys.isActive():null},isPaused:function(d){var v=this.getScene(d);return v?v.sys.isPaused():null},isVisible:function(d){var v=this.getScene(d);return v?v.sys.isVisible():null},isSleeping:function(d){var v=this.getScene(d);return v?v.sys.isSleeping():null},pause:function(d,v){var c=this.getScene(d);return c&&c.sys.pause(v),this},resume:function(d,v){var c=this.getScene(d);return c&&c.sys.resume(v),this},sleep:function(d,v){var c=this.getScene(d);return c&&!c.sys.isTransitioning()&&c.sys.sleep(v),this},wake:function(d,v){var c=this.getScene(d);return c&&c.sys.wake(v),this},run:function(d,v){var c=this.getScene(d);if(!c){for(var g=0;g<this._pending.length;g++)if(this._pending[g].key===d){this.queueOp("start",d,v);break}return this}c.sys.isSleeping()?c.sys.wake(v):c.sys.isPaused()?c.sys.resume(v):this.start(d,v)},start:function(d,v){if(!this.isBooted)return this._data[d]={autoStart:!0,data:v},this;var c=this.getScene(d);if(c){var g=c.sys;if(g.isActive()||g.isPaused())g.shutdown(),g.sceneUpdate=r,g.start(v);else{g.sceneUpdate=r,g.start(v);var x;if(g.load&&(x=g.load),x&&g.settings.hasOwnProperty("pack")&&(x.reset(),x.addPack({payload:g.settings.pack})))return g.settings.status=f.LOADING,x.once(n.COMPLETE,this.payloadComplete,this),x.start(),this}this.bootScene(c)}return this},stop:function(d,v){var c=this.getScene(d);return c&&!c.sys.isTransitioning()&&c.sys.shutdown(v),this},switch:function(d,v){var c=this.getScene(d),g=this.getScene(v);return c&&g&&c!==g&&(this.sleep(d),this.isSleeping(v)?this.wake(v):this.start(v)),this},getAt:function(d){return this.scenes[d]},getIndex:function(d){var v=this.getScene(d);return this.scenes.indexOf(v)},bringToTop:function(d){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:d,keyB:null});else{var v=this.getIndex(d);if(v!==-1&&v<this.scenes.length){var c=this.getScene(d);this.scenes.splice(v,1),this.scenes.push(c)}}return this},sendToBack:function(d){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:d,keyB:null});else{var v=this.getIndex(d);if(v!==-1&&v>0){var c=this.getScene(d);this.scenes.splice(v,1),this.scenes.unshift(c)}}return this},moveDown:function(d){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:d,keyB:null});else{var v=this.getIndex(d);if(v>0){var c=v-1,g=this.getScene(d),x=this.getAt(c);this.scenes[v]=x,this.scenes[c]=g}}return this},moveUp:function(d){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:d,keyB:null});else{var v=this.getIndex(d);if(v<this.scenes.length-1){var c=v+1,g=this.getScene(d),x=this.getAt(c);this.scenes[v]=x,this.scenes[c]=g}}return this},moveAbove:function(d,v){if(d===v)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:d,keyB:v});else{var c=this.getIndex(d),g=this.getIndex(v);if(c!==-1&&g!==-1){var x=this.getAt(g);this.scenes.splice(g,1),this.scenes.splice(c+1,0,x)}}return this},moveBelow:function(d,v){if(d===v)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:d,keyB:v});else{var c=this.getIndex(d),g=this.getIndex(v);if(c!==-1&&g!==-1){var x=this.getAt(g);this.scenes.splice(g,1),c===0?this.scenes.unshift(x):this.scenes.splice(c,0,x)}}return this},queueOp:function(d,v,c){return this._queue.push({op:d,keyA:v,keyB:c}),this},swapPosition:function(d,v){if(d===v)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:d,keyB:v});else{var c=this.getIndex(d),g=this.getIndex(v);if(c!==g&&c!==-1&&g!==-1){var x=this.getAt(c);this.scenes[c]=this.scenes[g],this.scenes[g]=x}}return this},dump:function(){for(var d=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],c=0;c<this.scenes.length;c++){var g=this.scenes[c].sys,x=g.settings.visible&&(g.settings.status===f.RUNNING||g.settings.status===f.PAUSED)?"[*] ":"[-] ";x+=g.settings.key+" ("+v[g.settings.status]+")",d.push(x)}console.log(d.join(`
`))},destroy:function(){for(var d=0;d<this.scenes.length;d++){var v=this.scenes[d].sys;v.destroy()}this.update=r,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(204),a=new e({initialize:function(s){this.sys=new f(this,s),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=t(205),a=function(o){var s=o.game.config.defaultPhysicsSystem,n=e(o.settings,"physics",!1);if(!(!s&&!n)){var r=[];if(s&&r.push(f(s+"Physics")),n)for(var u in n)u=f(u.concat("Physics")),r.indexOf(u)===-1&&r.push(u);return r}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(a){var o=a.plugins.getDefaultScenePlugins(),s=e(a.settings,"plugins",!1);return Array.isArray(s)?s:o||[]};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),f=t(6),a=t(127),o=t(978),s={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:e.PENDING,key:f(n,"key",""),active:f(n,"active",!1),visible:f(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:f(n,"pack",!1),cameras:f(n,"cameras",null),map:f(n,"map",a(o,f(n,"mapAdd",{}))),physics:f(n,"physics",{}),loader:f(n,"loader",{}),plugins:f(n,"plugins",!1),input:f(n,"input",{})}}};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(423),a=t(0),o=t(38),s=t(33),n=t(9),r=t(106),u=t(22),h=t(388),l=t(6),d=t(425),v=t(206),c=new a({Extends:n,initialize:function(x){n.call(this),this.game=x,this.name="TextureManager",this.list={},this._tempCanvas=e.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,x.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(r.LOAD,this.updatePending,this),this.on(r.ERROR,this.updatePending,this);var g=this.game.config;this.addBase64("__DEFAULT",g.defaultImage),this.addBase64("__MISSING",g.missingImage),this.addBase64("__WHITE",g.whiteImage),this.game.events.once(u.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(r.LOAD),this.off(r.ERROR),this.emit(r.READY))},checkKey:function(g){return this.exists(g)?(console.error("Texture key already in use: "+g),!1):!0},remove:function(g){if(typeof g=="string")if(this.exists(g))g=this.get(g);else return console.warn("No texture found matching key: "+g),this;return this.list.hasOwnProperty(g.key)&&(g.destroy(),this.emit(r.REMOVE,g.key)),this},removeKey:function(g){return this.list.hasOwnProperty(g)&&delete this.list[g],this},addBase64:function(g,x){if(this.checkKey(g)){var A=this,T=new Image;T.onerror=function(){A.emit(r.ERROR,g)},T.onload=function(){var E=A.create(g,T);d.Image(E,0),A.emit(r.ADD,g,E),A.emit(r.LOAD,g,E)},T.src=x}return this},getBase64:function(g,x,A,T){A===void 0&&(A="image/png"),T===void 0&&(T=.92);var E="",S=this.getFrame(g,x);if(S&&(S.source.isRenderTexture||S.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(S){var C=S.canvasData,P=e.create2D(this,C.width,C.height),R=P.getContext("2d");R.drawImage(S.source.image,C.x,C.y,C.width,C.height,0,0,C.width,C.height),E=P.toDataURL(A,T),e.remove(P)}return E},addImage:function(g,x,A){var T=null;return this.checkKey(g)&&(T=this.create(g,x),d.Image(T,0),A&&T.setDataSource(A),this.emit(r.ADD,g,T)),T},addGLTexture:function(g,x,A,T){var E=null;return this.checkKey(g)&&(A===void 0&&(A=x.width),T===void 0&&(T=x.height),E=this.create(g,x,A,T),E.add("__BASE",0,0,0,A,T),this.emit(r.ADD,g,E)),E},addRenderTexture:function(g,x){var A=null;return this.checkKey(g)&&(A=this.create(g,x),A.add("__BASE",0,0,0,x.width,x.height),this.emit(r.ADD,g,A)),A},generate:function(g,x){if(this.checkKey(g)){var A=e.create(this,1,1);return x.canvas=A,h(x),this.addCanvas(g,A)}else return null},createCanvas:function(g,x,A){if(x===void 0&&(x=256),A===void 0&&(A=256),this.checkKey(g)){var T=e.create(this,x,A,s.CANVAS,!0);return this.addCanvas(g,T)}return null},addCanvas:function(g,x,A){A===void 0&&(A=!1);var T=null;return A?T=new f(this,g,x,x.width,x.height):this.checkKey(g)&&(T=new f(this,g,x,x.width,x.height),this.list[g]=T,this.emit(r.ADD,g,T)),T},addAtlas:function(g,x,A,T){return Array.isArray(A.textures)||Array.isArray(A.frames)?this.addAtlasJSONArray(g,x,A,T):this.addAtlasJSONHash(g,x,A,T)},addAtlasJSONArray:function(g,x,A,T){var E=null;if(this.checkKey(g)){if(E=this.create(g,x),Array.isArray(A))for(var S=A.length===1,C=0;C<E.source.length;C++){var P=S?A[0]:A[C];d.JSONArray(E,C,P)}else d.JSONArray(E,0,A);T&&E.setDataSource(T),this.emit(r.ADD,g,E)}return E},addAtlasJSONHash:function(g,x,A,T){var E=null;if(this.checkKey(g)){if(E=this.create(g,x),Array.isArray(A))for(var S=0;S<A.length;S++)d.JSONHash(E,S,A[S]);else d.JSONHash(E,0,A);T&&E.setDataSource(T),this.emit(r.ADD,g,E)}return E},addAtlasXML:function(g,x,A,T){var E=null;return this.checkKey(g)&&(E=this.create(g,x),d.AtlasXML(E,0,A),T&&E.setDataSource(T),this.emit(r.ADD,g,E)),E},addUnityAtlas:function(g,x,A,T){var E=null;return this.checkKey(g)&&(E=this.create(g,x),d.UnityYAML(E,0,A),T&&E.setDataSource(T),this.emit(r.ADD,g,E)),E},addSpriteSheet:function(g,x,A){var T=null;if(this.checkKey(g)){T=this.create(g,x);var E=T.source[0].width,S=T.source[0].height;d.SpriteSheet(T,0,0,0,E,S,A),this.emit(r.ADD,g,T)}return T},addSpriteSheetFromAtlas:function(g,x){if(!this.checkKey(g))return null;var A=l(x,"atlas",null),T=l(x,"frame",null);if(!(!A||!T)){var E=this.get(A),S=E.get(T);if(S){var C=this.create(g,S.source.image);return S.trimmed?d.SpriteSheetFromAtlas(C,S,x):d.SpriteSheet(C,0,S.cutX,S.cutY,S.cutWidth,S.cutHeight,x),this.emit(r.ADD,g,C),C}}},create:function(g,x,A,T){var E=null;return this.checkKey(g)&&(E=new v(this,g,x,A,T),this.list[g]=E),E},exists:function(g){return this.list.hasOwnProperty(g)},get:function(g){return g===void 0&&(g="__DEFAULT"),this.list[g]?this.list[g]:g instanceof v?g:this.list.__MISSING},cloneFrame:function(g,x){if(this.list[g])return this.list[g].get(x).clone()},getFrame:function(g,x){if(this.list[g])return this.list[g].get(x)},getTextureKeys:function(){var g=[];for(var x in this.list)x!=="__DEFAULT"&&x!=="__MISSING"&&g.push(x);return g},getPixel:function(g,x,A,T){var E=this.getFrame(A,T);if(E){g-=E.x,x-=E.y;var S=E.data.cut;if(g+=S.x,x+=S.y,g>=S.x&&g<S.r&&x>=S.y&&x<S.b){var C=this._tempContext;C.clearRect(0,0,1,1),C.drawImage(E.source.image,g,x,1,1,0,0,1,1);var P=C.getImageData(0,0,1,1);return new o(P.data[0],P.data[1],P.data[2],P.data[3])}}return null},getPixelAlpha:function(g,x,A,T){var E=this.getFrame(A,T);if(E){g-=E.x,x-=E.y;var S=E.data.cut;if(g+=S.x,x+=S.y,g>=S.x&&g<S.r&&x>=S.y&&x<S.b){var C=this._tempContext;C.clearRect(0,0,1,1),C.drawImage(E.source.image,g,x,1,1,0,0,1,1);var P=C.getImageData(0,0,1,1);return P.data[3]}}return null},setTexture:function(g,x,A){return this.list[x]&&(g.texture=this.list[x],g.frame=g.texture.get(A)),g},renameTexture:function(g,x){var A=this.get(g);return A&&g!==x?(A.key=x,this.list[x]=A,delete this.list[g],!0):!1},each:function(g,x){for(var A=[null],T=1;T<arguments.length;T++)A.push(arguments[T]);for(var E in this.list)A[0]=this.list[E],g.apply(x,A)},destroy:function(){for(var g in this.list)this.list[g].destroy();this.list={},this.game=null,e.remove(this._tempCanvas)}});i.exports=c},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),a=t(38),o=t(33),s=t(138),n=t(206),r=new e({Extends:n,initialize:function(h,l,d,v,c){n.call(this,h,l,d,v,c),this.add("__BASE",0,0,0,v,c),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=v,this.height=c,this.imageData=this.context.getImageData(0,0,v,c),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(u,h,l){return this.context.drawImage(l,u,h),this.update()},drawFrame:function(u,h,l,d){l===void 0&&(l=0),d===void 0&&(d=0);var v=this.manager.getFrame(u,h);if(v){var c=v.canvasData,g=v.cutWidth,x=v.cutHeight,A=v.source.resolution;return this.context.drawImage(v.source.image,c.x,c.y,g,x,l,d,g/A,x/A),this.update()}else return this},setPixel:function(u,h,l,d,v,c){c===void 0&&(c=255),u=Math.abs(Math.floor(u)),h=Math.abs(Math.floor(h));var g=this.getIndex(u,h);if(g>-1){var x=this.context.getImageData(u,h,1,1);x.data[0]=l,x.data[1]=d,x.data[2]=v,x.data[3]=c,this.context.putImageData(x,u,h)}return this},putData:function(u,h,l,d,v,c,g){return d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=u.width),g===void 0&&(g=u.height),this.context.putImageData(u,h,l,d,v,c,g),this},getData:function(u,h,l,d){u=f(Math.floor(u),0,this.width-1),h=f(Math.floor(h),0,this.height-1),l=f(l,1,this.width-u),d=f(d,1,this.height-h);var v=this.context.getImageData(u,h,l,d);return v},getPixel:function(u,h,l){l||(l=new a);var d=this.getIndex(u,h);if(d>-1){var v=this.data,c=v[d+0],g=v[d+1],x=v[d+2],A=v[d+3];l.setTo(c,g,x,A)}return l},getPixels:function(u,h,l,d){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=this.width),d===void 0&&(d=l),u=Math.abs(Math.round(u)),h=Math.abs(Math.round(h));for(var v=f(u,0,this.width),c=f(u+l,0,this.width),g=f(h,0,this.height),x=f(h+d,0,this.height),A=new a,T=[],E=g;E<x;E++){for(var S=[],C=v;C<c;C++)A=this.getPixel(C,E,A),S.push({x:C,y:E,color:A.color,alpha:A.alphaGL});T.push(S)}return T},getIndex:function(u,h){return u=Math.abs(Math.round(u)),h=Math.abs(Math.round(h)),u<this.width&&h<this.height?(u+h*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,h,l,d){return u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=this.width),d===void 0&&(d=this.height),this.context.clearRect(u,h,l,d),this.update()},setSize:function(u,h){return h===void 0&&(h=u),(u!==this.width||h!==this.height)&&(this.canvas.width=u,this.canvas.height=h,this._source.width=u,this._source.height=h,this._source.isPowerOf2=s(u,h),this.frames.__BASE.setSize(u,h,0,0),this.width=u,this.height=h,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(0),a=t(138),o=t(168),s=new f({initialize:function(r,u,h,l,d){d===void 0&&(d=!1);var v=r.manager.game;this.renderer=v.renderer,this.texture=r,this.source=u,this.image=u,this.compressionAlgorithm=null,this.resolution=1,this.width=h||u.naturalWidth||u.videoWidth||u.width||0,this.height=l||u.naturalHeight||u.videoHeight||u.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=u instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&u instanceof HTMLVideoElement,this.isRenderTexture=u.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&u instanceof WebGLTexture,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=d,this.init(v)},init:function(n){var r=this.renderer;r&&(r.gl?this.isCanvas?this.glTexture=r.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=r.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=r.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=r.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),this.flipY=n,this},update:function(){var n=this.renderer.gl;n&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):n&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&e.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(427),f=t(430),a=t(432),o={create:function(s){var n=s.config.audio,r=s.device.audio;return n.noAudio||!r.webAudio&&!r.audioData?new f(s):r.webAudio&&!n.disableWebAudio?new a(s):new e(s)}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),f=t(0),a=t(70),o=t(429),s=new f({Extends:e,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,e.call(this,r)},add:function(n,r){var u=new o(this,n,r);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(l,d){for(var v=0;v<d.length;v++)if(d[v].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var r=!1,u=function(){r=!0},h=function(){if(r){r=!1;return}document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",h);var l=[];if(n.game.cache.audio.entries.each(function(v,c){for(var g=0;g<c.length;g++){var x=c[g];x.dataset.locked==="true"&&l.push(x)}return!0}),l.length!==0){var d=l[l.length-1];d.oncanplaythrough=function(){d.oncanplaythrough=null,l.forEach(function(v){v.dataset.locked="false"}),n.unlocked=!0},l.forEach(function(v){v.load()})}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(d){d.currentMarker===null&&d.duration===0&&(d.duration=d.tags[0].duration),d.totalDuration=d.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",h,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){e.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,r,u){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:r,value:u}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(r){r.updateMute()}),this.emit(a.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(r){r.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,n)}}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(a,o,s,n,r){if(n===void 0&&(n=0),r===void 0&&(r=a.length),e(a,n,r))for(var u=n;u<r;u++){var h=a[u];if(!o||o&&s===void 0&&h.hasOwnProperty(o)||o&&s!==void 0&&h[o]===s)return h}return null};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),f=t(0),a=t(70),o=t(18),s=new f({Extends:e,initialize:function(r,u,h){if(h===void 0&&(h={}),this.tags=r.game.cache.audio.get(u),!this.tags)throw new Error('There is no audio asset with key "'+u+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,e.call(this,r,u,h)},play:function(n,r){return this.manager.isLocked(this,"play",[n,r])||!e.prototype.play.call(this,n,r)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!e.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!e.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,r=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),r===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+r*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(r.dataset.used==="false")return r.dataset.used="true",this.audio=r,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&u.push(l)},this),u.sort(function(l,d){return l.loop===d.loop?d.seek/d.duration-l.seek/l.duration:l.loop?1:-1});var h=u[0];return this.audio=h.audio,h.reset(),h.audio=null,h.startTime=0,h.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(r){console.warn(r)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){e.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(!!this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var r=this.currentMarker?this.currentMarker.start:0,u=r+this.duration,h=this.audio.currentTime;if(this.currentConfig.loop)h>=u-this.manager.loopEndOffset?(this.audio.currentTime=r+Math.max(0,h-u),h=this.audio.currentTime):h<r&&(this.audio.currentTime+=r,h=this.audio.currentTime),h<this.previousTime&&this.emit(a.LOOPED,this);else if(h>=u){this.reset(),this.stopAndReleaseAudioTag(),this.emit(a.COMPLETE,this);return}this.previousTime=h}},destroy:function(){e.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){e.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(a.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(a.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,a.RATE,n)&&(this.calculateRate(),this.emit(a.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,a.DETUNE,n)&&(this.calculateRate(),this.emit(a.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(a.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(a.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(a.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),f=t(0),a=t(9),o=t(431),s=t(1),n=new f({Extends:a,initialize:function(u){a.call(this),this.game=u,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(r,u){var h=new o(this,r,u);return this.sounds.push(h),h},addAudioSprite:function(r,u){var h=this.add(r,u);return h.spritemap={},h},play:function(r,u){return!1},playAudioSprite:function(r,u,h){return!1},remove:function(r){return e.prototype.remove.call(this,r)},removeByKey:function(r){return e.prototype.removeByKey.call(this,r)},pauseAll:s,resumeAll:s,stopAll:s,update:s,setRate:s,setDetune:s,setMute:s,setVolume:s,forEachActiveSound:function(r,u){e.prototype.forEachActiveSound.call(this,r,u)},destroy:function(){e.prototype.destroy.call(this)}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),f=t(0),a=t(9),o=t(17),s=function(){return!1},n=function(){return null},r=function(){return this},u=new f({Extends:a,initialize:function(l,d,v){v===void 0&&(v={}),a.call(this),this.manager=l,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},v),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:s,updateMarker:s,removeMarker:n,play:s,pause:s,resume:s,stop:s,destroy:function(){e.prototype.destroy.call(this)},setMute:r,setVolume:r,setRate:r,setDetune:r,setSeek:r,setLoop:r,setPan:r});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(433),f=t(145),a=t(0),o=t(70),s=t(22),n=t(434),r=new a({Extends:f,initialize:function(h){this.context=this.createAudioContext(h),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),f.call(this,h),this.locked&&h.isBooted?this.unlock():h.events.once(s.BOOT,this.unlock,this)},createAudioContext:function(u){var h=u.config.audio;if(h.context)return h.context.resume(),h.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(u){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=u,this.masterMuteNode=u.createGain(),this.masterVolumeNode=u.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(u.destination),this.destination=this.masterMuteNode,this},add:function(u,h){var l=new n(this,u,h);return this.sounds.push(l),l},decodeAudio:function(u,h){var l;Array.isArray(u)?l=u:l=[{key:u,data:h}];for(var d=this.game.cache.audio,v=l.length,c=0;c<l.length;c++){var g=l[c],x=g.key,A=g.data;typeof A=="string"&&(A=e(A));var T=function(S,C){d.add(S,C),this.emit(o.DECODED,S),v--,v===0&&this.emit(o.DECODED_ALL)}.bind(this,x),E=function(S,C){console.error("Error decoding audio: "+S+" - ",C?C.message:""),v--,v===0&&this.emit(o.DECODED_ALL)}.bind(this,x);this.context.decodeAudioData(A,T,E)}},unlock:function(){var u=this,h=document.body,l=function d(){if(u.context&&h){var v=h.removeEventListener;u.context.resume().then(function(){v("touchstart",d),v("touchend",d),v("click",d),v("keydown",d),u.unlocked=!0},function(){v("touchstart",d),v("touchend",d),v("click",d),v("keydown",d)})}};h&&(h.addEventListener("touchstart",l,!1),h.addEventListener("touchend",l,!1),h.addEventListener("click",l,!1),h.addEventListener("keydown",l,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var u=this.context;(u.state==="suspended"||u.state==="interrupted")&&!this.locked&&u.resume()},update:function(u,h){f.prototype.update.call(this,u,h);var l=this.context;l&&l.state==="interrupted"&&l.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var u=this;this.context.close().then(function(){u.context=null})}f.prototype.destroy.call(this)},setMute:function(u){return this.mute=u,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(u){this.masterMuteNode.gain.setValueAtTime(u?0:1,0),this.emit(o.GLOBAL_MUTE,this,u)}},setVolume:function(u){return this.volume=u,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(u){this.masterVolumeNode.gain.setValueAtTime(u,0),this.emit(o.GLOBAL_VOLUME,this,u)}}});i.exports=r},function(i,m){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),f=0;f<t.length;f++)e[t.charCodeAt(f)]=f;var a=function(o){o=o.substr(o.indexOf(",")+1);var s=o.length,n=s*.75,r=0,u,h,l,d;o[s-1]==="="&&(n--,o[s-2]==="="&&n--);for(var v=new ArrayBuffer(n),c=new Uint8Array(v),g=0;g<s;g+=4)u=e[o.charCodeAt(g)],h=e[o.charCodeAt(g+1)],l=e[o.charCodeAt(g+2)],d=e[o.charCodeAt(g+3)],c[r++]=u<<2|h>>4,c[r++]=(h&15)<<4|l>>2,c[r++]=(l&3)<<6|d&63;return v};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),f=t(0),a=t(70),o=new f({Extends:e,initialize:function(n,r,u){if(u===void 0&&(u={}),this.audioBuffer=n.game.cache.audio.get(r),!this.audioBuffer)throw new Error('Audio key "'+r+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=n.context.createGain(),this.volumeNode=n.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),n.context.createStereoPanner?(this.pannerNode=n.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(n.destination)):this.volumeNode.connect(n.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,e.call(this,n,r,u)},play:function(s,n){return e.prototype.play.call(this,s,n)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(a.RESUME,this),!0)},stop:function(){return e.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0):!1},createAndStartBufferSource:function(){var s=this.currentConfig.seek,n=this.currentConfig.delay,r=this.manager.context.currentTime+n,u=(this.currentMarker?this.currentMarker.start:0)+s,h=this.duration-s;this.playTime=r-s,this.startTime=r,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,r),Math.max(0,u),Math.max(0,h)),this.resetConfig()},createAndStartLoopBufferSource:function(){var s=this.getLoopTime(),n=this.currentMarker?this.currentMarker.start:0,r=this.duration;this.loopTime=s,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,s),Math.max(0,n),Math.max(0,r))},createBufferSource:function(){var s=this,n=this.manager.context.createBufferSource();return n.buffer=this.audioBuffer,n.connect(this.muteNode),n.onended=function(r){r.target===s.source&&(s.currentConfig.loop?s.hasLooped=!0:s.hasEnded=!0)},n},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),e.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,e.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){e.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){e.prototype.calculateRate.call(this);var s=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,s),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,s)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var s=0,n=0;n<this.rateUpdates.length;n++){var r=0;n<this.rateUpdates.length-1?r=this.rateUpdates[n+1].time:r=this.manager.context.currentTime-this.playTime,s+=(r-this.rateUpdates[n].time)*this.rateUpdates[n].rate}return s},getLoopTime:function(){for(var s=0,n=0;n<this.rateUpdates.length-1;n++)s+=(this.rateUpdates[n+1].time-this.rateUpdates[n].time)*this.rateUpdates[n].rate;var r=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+r.time+(this.duration-s)/r.rate},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,this.calculateRate(),this.emit(a.RATE,this,s)}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,this.calculateRate(),this.emit(a.DETUNE,this,s)}},setDetune:function(s){return this.detune=s,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(s){this.currentConfig.mute=s,this.muteNode.gain.setValueAtTime(s?0:1,0),this.emit(a.MUTE,this,s)}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(s){this.currentConfig.volume=s,this.volumeNode.gain.setValueAtTime(s,0),this.emit(a.VOLUME,this,s)}},setVolume:function(s){return this.volume=s,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.currentConfig.seek=s,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),s&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,s)}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(s){this.currentConfig.pan=s,this.pannerNode&&this.pannerNode.pan.setValueAtTime(s,this.manager.context.currentTime),this.emit(a.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=e.length,a=e[0].length,o=new Array(a),s=0;s<a;s++){o[s]=new Array(f);for(var n=f-1;n>-1;n--)o[s][n]=e[n][s]}return o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,o,s){var n=a[o];a[o]=a[s],a[s]=n}function e(a,o){return a<o?-1:a>o?1:0}var f=function(a,o,s,n,r){for(s===void 0&&(s=0),n===void 0&&(n=a.length-1),r===void 0&&(r=e);n>s;){if(n-s>600){var u=n-s+1,h=o-s+1,l=Math.log(u),d=.5*Math.exp(2*l/3),v=.5*Math.sqrt(l*d*(u-d)/u)*(h-u/2<0?-1:1),c=Math.max(s,Math.floor(o-h*d/u+v)),g=Math.min(n,Math.floor(o+(u-h)*d/u+v));f(a,o,c,g,r)}var x=a[o],A=s,T=n;for(t(a,s,o),r(a[n],x)>0&&t(a,s,n);A<T;){for(t(a,A,T),A++,T--;r(a[A],x)<0;)A++;for(;r(a[T],x)>0;)T--}r(a[s],x)===0?t(a,s,T):(T++,t(a,T,n)),T<=o&&(s=T+1),o<=T&&(n=T-1)}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=t(131),a=function(s,n,r){for(var u=[],h=0;h<s.length;h++)for(var l=0;l<n.length;l++)for(var d=0;d<r;d++)u.push({a:s[h],b:n[l]});return u},o=function(s,n,r){var u=e(r,"max",0),h=e(r,"qty",1),l=e(r,"random",!1),d=e(r,"randomB",!1),v=e(r,"repeat",0),c=e(r,"yoyo",!1),g=[];if(d&&f(n),v===-1)if(u===0)v=0;else{var x=s.length*n.length*h;c&&(x*=2),v=Math.ceil(u/x)}for(var A=0;A<=v;A++){var T=a(s,n,h);l&&f(T),g=g.concat(T),c&&(T.reverse(),g=g.concat(T))}return u&&g.splice(u),g};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(13),f=function(a,o){var s=e(o,"anims",null);if(s===null)return a;if(typeof s=="string")a.anims.play(s);else if(typeof s=="object"){var n=a.anims,r=e(s,"key",void 0);if(r){var u=e(s,"startFrame",void 0),h=e(s,"delay",0),l=e(s,"repeat",0),d=e(s,"repeatDelay",0),v=e(s,"yoyo",!1),c=e(s,"play",!1),g=e(s,"delayedPlay",0),x={key:r,delay:h,repeat:l,repeatDelay:d,yoyo:v,startFrame:u};c?n.play(x):g>0?n.playAfterDelay(x,g):n.load(x)}}return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(109),a=new e({initialize:function(s,n,r,u,h){this.parent=s,this.x=n,this.y=r,this.frame=u,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof f&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,s,n){return this.x=o,this.y=s,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(o,s){return this.x=o,this.y=s,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,s){return this.flipX=o,this.flipY=s,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a,o,s){s===void 0&&(s=new e);var n=Math.min(a.x,o.x),r=Math.min(a.y,o.y),u=Math.max(a.right,o.right)-n,h=Math.max(a.bottom,o.bottom)-r;return s.setTo(n,r,u,h)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(1055),o=t(15),s=t(7),n=t(202),r=t(20),u=t(140),h=new e({Extends:o,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Origin,f.ScrollFactor,f.Transform,f.Visible,a],initialize:function(d,v,c,g,x,A){o.call(this,d,"DOMElement"),this.parent=d.sys.game.domContainer,this.cache=d.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,c),typeof g=="string"?g[0]==="#"?this.setElement(g.substr(1),x,A):this.createElement(g,x,A):g&&this.setElement(g,x,A),d.sys.events.on(r.SLEEP,this.handleSceneEvent,this),d.sys.events.on(r.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(l){var d=this.node,v=d.style;d&&(v.display=l.settings.visible?"block":"none")},setSkew:function(l,d){return l===void 0&&(l=0),d===void 0&&(d=l),this.skewX=l,this.skewY=d,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var d=0;d<l.length;d++)this.node.addEventListener(l[d],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var d=0;d<l.length;d++)this.node.removeEventListener(l[d],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,d,v){return this.setElement(document.createElement(l),d,v)},setElement:function(l,d,v){this.removeElement();var c;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),c=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(c=l),!c)return this;if(this.node=c,d&&s(d))for(var g in d)c.style[g]=d[g];else typeof d=="string"&&(c.style=d);return c.style.zIndex="0",c.style.display="inline",c.style.position="absolute",c.phaser=this,this.parent&&this.parent.appendChild(c),v&&(c.innerText=v),this.updateSize()},createFromCache:function(l,d){var v=this.cache.get(l);return v&&this.createFromHTML(v,d),this},createFromHTML:function(l,d){d===void 0&&(d="div"),this.removeElement();var v=document.createElement(d);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),v.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var l=this.node,d=l.getBoundingClientRect();return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=d.width||0,this.displayHeight=d.height||0,this},getChildByProperty:function(l,d){if(this.node){for(var v=this.node.querySelectorAll("*"),c=0;c<v.length;c++)if(v[c][l]===d)return v[c]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preUpdate:function(){var l=this.parentContainer,d=this.node;d&&l&&!l.willRender()&&(d.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(r.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(r.WAKE,this.handleSceneEvent,this)}});i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1056),f=t(15),a=t(25),o=new a,s=new a,n=new a,r=function(u,h,l,d){if(!!h.node){var v=h.node.style,c=h.scene.sys.settings;if(!v||!c.visible||f.RENDER_MASK!==h.renderFlags||h.cameraFilter!==0&&h.cameraFilter&l.id||h.parentContainer&&!h.parentContainer.willRender()){v.display="none";return}var g=h.parentContainer,x=l.alpha*h.alpha;g&&(x*=g.alpha);var A=o,T=s,E=n,S=0,C=0,P="0%",R="0%";d?(S=h.width*h.scaleX*h.originX,C=h.height*h.scaleY*h.originY,T.applyITRS(h.x-S,h.y-C,h.rotation,h.scaleX,h.scaleY),A.copyFrom(l.matrix),A.multiplyWithOffset(d,-l.scrollX*h.scrollFactorX,-l.scrollY*h.scrollFactorY),T.e=h.x-S,T.f=h.y-C,A.multiply(T,E)):(S=h.width*h.originX,C=h.height*h.originY,T.applyITRS(h.x-S,h.y-C,h.rotation,h.scaleX,h.scaleY),A.copyFrom(l.matrix),P=100*h.originX+"%",R=100*h.originY+"%",T.e-=l.scrollX*h.scrollFactorX,T.f-=l.scrollY*h.scrollFactorY,A.multiply(T,E)),h.transformOnly||(v.display="block",v.opacity=x,v.zIndex=h._depth,v.pointerEvents=h.pointerEvents,v.mixBlendMode=e[h._blendMode]),v.transform=E.getCSSMatrix()+" skew("+h.skewX+"rad, "+h.skewY+"rad) rotate3d("+h.rotate3d.x+","+h.rotate3d.y+","+h.rotate3d.z+","+h.rotate3d.w+h.rotate3dAngle+")",v.transformOrigin=P+" "+R}};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(1060),s=new e({Extends:a,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.Origin,f.ScrollFactor,f.Size,f.Texture,f.Tint,f.Transform,f.Visible,o],initialize:function(r){a.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(218),f=t(98),a=t(14),o=t(4),s=function(n,r,u){u===void 0&&(u=new o);var h=f(r,0,a.PI2);return e(n,h,u)};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(447),f=t(218),a=t(98),o=t(14),s=function(n,r,u,h){h===void 0&&(h=[]),!r&&u>0&&(r=e(n)/u);for(var l=0;l<r;l++){var d=a(l/r,0,o.PI2);h.push(f(n,d))}return h};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.width/2,a=e.height/2,o=Math.pow(f-a,2)/Math.pow(f+a,2);return Math.PI*(f+a)*(1+3*o/(10+Math.sqrt(4-3*o)))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),f=t(30),a=function(o,s,n,r,u,h){var l=s.commandBuffer,d=l.length,v=u||o.currentContext;if(!(d===0||!f(o,v,s,n,r))){n.addToRenderList(s);var c=1,g=1,x=0,A=0,T=1,E=0,S=0,C=0;v.beginPath();for(var P=0;P<d;++P){var R=l[P];switch(R){case e.ARC:v.arc(l[P+1],l[P+2],l[P+3],l[P+4],l[P+5],l[P+6]),P+=7;break;case e.LINE_STYLE:T=l[P+1],x=l[P+2],c=l[P+3],E=(x&16711680)>>>16,S=(x&65280)>>>8,C=x&255,v.strokeStyle="rgba("+E+","+S+","+C+","+c+")",v.lineWidth=T,P+=3;break;case e.FILL_STYLE:A=l[P+1],g=l[P+2],E=(A&16711680)>>>16,S=(A&65280)>>>8,C=A&255,v.fillStyle="rgba("+E+","+S+","+C+","+g+")",P+=2;break;case e.BEGIN_PATH:v.beginPath();break;case e.CLOSE_PATH:v.closePath();break;case e.FILL_PATH:h||v.fill();break;case e.STROKE_PATH:h||v.stroke();break;case e.FILL_RECT:h?v.rect(l[P+1],l[P+2],l[P+3],l[P+4]):v.fillRect(l[P+1],l[P+2],l[P+3],l[P+4]),P+=4;break;case e.FILL_TRIANGLE:v.beginPath(),v.moveTo(l[P+1],l[P+2]),v.lineTo(l[P+3],l[P+4]),v.lineTo(l[P+5],l[P+6]),v.closePath(),h||v.fill(),P+=6;break;case e.STROKE_TRIANGLE:v.beginPath(),v.moveTo(l[P+1],l[P+2]),v.lineTo(l[P+3],l[P+4]),v.lineTo(l[P+5],l[P+6]),v.closePath(),h||v.stroke(),P+=6;break;case e.LINE_TO:v.lineTo(l[P+1],l[P+2]),P+=2;break;case e.MOVE_TO:v.moveTo(l[P+1],l[P+2]),P+=2;break;case e.LINE_FX_TO:v.lineTo(l[P+1],l[P+2]),P+=5;break;case e.MOVE_FX_TO:v.moveTo(l[P+1],l[P+2]),P+=5;break;case e.SAVE:v.save();break;case e.RESTORE:v.restore();break;case e.TRANSLATE:v.translate(l[P+1],l[P+2]),P+=2;break;case e.SCALE:v.scale(l[P+1],l[P+2]),P+=2;break;case e.ROTATE:v.rotate(l[P+1]),P+=1;break;case e.GRADIENT_FILL_STYLE:P+=5;break;case e.GRADIENT_LINE_STYLE:P+=6;break}}v.restore()}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(137),a=t(80),o=t(2),s=t(68),n=new e({initialize:function(u,h,l,d){d===void 0&&(d=!1),this.propertyKey=h,this.propertyValue=l,this.defaultValue=l,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=d,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(u)},loadConfig:function(r,u){r===void 0&&(r={}),u&&(this.propertyKey=u),this.propertyValue=o(r,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(r){return this.propertyValue=r,this.setMethods()},setMethods:function(){var r=this.propertyValue,u=typeof r;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,u==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(r))this.onEmit=this.randomStaticValueEmit;else if(u==="function")this.emitOnly?this.onEmit=r:this.onUpdate=r;else if(u==="object"&&this.hasBoth(r,"start","end")){this.start=r.start,this.end=r.end;var h=this.has(r,"random");if(h&&(this.onEmit=this.randomRangedValueEmit),this.has(r,"steps"))this.steps=r.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var l=this.has(r,"ease")?r.ease:"Linear";this.ease=a(l,r.easeParams),h||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(u==="object"&&this.hasBoth(r,"min","max"))this.start=r.min,this.end=r.max,this.onEmit=this.randomRangedValueEmit;else if(u==="object"&&this.has(r,"random")){var d=r.random;Array.isArray(d)&&(this.start=d[0],this.end=d[1]),this.onEmit=this.randomRangedValueEmit}else u==="object"&&this.hasEither(r,"onEmit","onUpdate")&&(this.has(r,"onEmit")&&(this.onEmit=r.onEmit),this.has(r,"onUpdate")&&(this.onUpdate=r.onUpdate));return this},has:function(r,u){return r.hasOwnProperty(u)},hasBoth:function(r,u,h){return r.hasOwnProperty(u)&&r.hasOwnProperty(h)},hasEither:function(r,u,h){return r.hasOwnProperty(u)||r.hasOwnProperty(h)},defaultEmit:function(r,u,h){return h},defaultUpdate:function(r,u,h,l){return l},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var r=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[r]},randomRangedValueEmit:function(r,u){var h=f(this.start,this.end);return r&&r.data[u]&&(r.data[u].min=h),h},steppedEmit:function(){var r=this.counter,u=this.counter+(this.end-this.start)/this.steps;return this.counter=s(u,this.start,this.end),r},easedValueEmit:function(r,u){if(r&&r.data[u]){var h=r.data[u];h.min=this.start,h.max=this.end}return this.start},easeValueUpdate:function(r,u,h){var l=r.data[u];return(l.max-l.min)*this.ease(h)+l.min}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=new e({initialize:function(s,n,r,u,h){if(typeof s=="object"){var l=s;s=f(l,"x",0),n=f(l,"y",0),r=f(l,"power",0),u=f(l,"epsilon",100),h=f(l,"gravity",50)}else s===void 0&&(s=0),n===void 0&&(n=0),r===void 0&&(r=0),u===void 0&&(u=100),h===void 0&&(h=50);this.x=s,this.y=n,this.active=!0,this._gravity=h,this._power=0,this._epsilon=0,this.power=r,this.epsilon=u},update:function(o,s){var n=this.x-o.x,r=this.y-o.y,u=n*n+r*r;if(u!==0){var h=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var l=this._power*s/(u*h)*100;o.velocityX+=n*l,o.velocityY+=r*l}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var s=this.power;this._gravity=o,this.power=s}}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(36),a=t(50),o=new e({initialize:function(n){this.emitter=n,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(s,n){var r=this.emitter;this.frame=r.getFrame(),r.emitZone&&r.emitZone.getPoint(this),s===void 0?this.x+=r.x.onEmit(this,"x"):this.x+=s,n===void 0?this.y+=r.y.onEmit(this,"y"):this.y+=n,this.life=r.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var u=r.speedX.onEmit(this,"speedX"),h=r.speedY?r.speedY.onEmit(this,"speedY"):u;if(r.radial){var l=f(r.angle.onEmit(this,"angle"));this.velocityX=Math.cos(l)*Math.abs(u),this.velocityY=Math.sin(l)*Math.abs(h)}else if(r.moveTo){var d=r.moveToX.onEmit(this,"moveToX"),v=r.moveToY?r.moveToY.onEmit(this,"moveToY"):d,c=Math.atan2(v-this.y,d-this.x),g=a(this.x,this.y,d,v)/(this.life/1e3);this.velocityX=Math.cos(c)*g,this.velocityY=Math.sin(c)*g}else this.velocityX=u,this.velocityY=h;r.acceleration&&(this.accelerationX=r.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=r.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=r.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=r.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=r.delay.onEmit(this,"delay"),this.scaleX=r.scaleX.onEmit(this,"scaleX"),this.scaleY=r.scaleY?r.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=r.rotate.onEmit(this,"rotate"),this.rotation=f(this.angle),this.bounce=r.bounce.onEmit(this,"bounce"),this.alpha=r.alpha.onEmit(this,"alpha"),this.tint=r.tint.onEmit(this,"tint")},computeVelocity:function(s,n,r,u){var h=this.velocityX,l=this.velocityY,d=this.accelerationX,v=this.accelerationY,c=this.maxVelocityX,g=this.maxVelocityY;h+=s.gravityX*r,l+=s.gravityY*r,d&&(h+=d*r),v&&(l+=v*r),h>c?h=c:h<-c&&(h=-c),l>g?l=g:l<-g&&(l=-g),this.velocityX=h,this.velocityY=l;for(var x=0;x<u.length;x++)u[x].update(this,n,r)},checkBounds:function(s){var n=s.bounds,r=-this.bounce;this.x<n.x&&s.collideLeft?(this.x=n.x,this.velocityX*=r):this.x>n.right&&s.collideRight&&(this.x=n.right,this.velocityX*=r),this.y<n.y&&s.collideTop?(this.y=n.y,this.velocityY*=r):this.y>n.bottom&&s.collideBottom&&(this.y=n.bottom,this.velocityY*=r)},update:function(s,n,r){if(this.delayCurrent>0)return this.delayCurrent-=s,!1;var u=this.emitter,h=1-this.lifeCurrent/this.life;return this.lifeT=h,this.computeVelocity(u,s,n,r),this.x+=this.velocityX*n,this.y+=this.velocityY*n,u.bounds&&this.checkBounds(u),u.deathZone&&u.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=u.scaleX.onUpdate(this,"scaleX",h,this.scaleX),u.scaleY?this.scaleY=u.scaleY.onUpdate(this,"scaleY",h,this.scaleY):this.scaleY=this.scaleX,this.angle=u.rotate.onUpdate(this,"rotate",h,this.angle),this.rotation=f(this.angle),this.alpha=u.alpha.onUpdate(this,"alpha",h,this.alpha),this.tint=u.tint.onUpdate(this,"tint",h,this.tint),this.lifeCurrent-=s,this.lifeCurrent<=0)}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(0),a=t(11),o=t(453),s=t(454),n=t(449),r=t(2),u=t(210),h=t(455),l=t(126),d=t(451),v=t(456),c=t(10),g=t(79),x=t(3),A=t(68),T=new f({Mixins:[a.BlendMode,a.Mask,a.ScrollFactor,a.Visible],initialize:function(S,C){this.manager=S,this.texture=S.texture,this.frames=[S.defaultFrame],this.defaultFrame=S.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=d,this.x=new n(C,"x",0,!0),this.y=new n(C,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new n(C,"accelerationX",0,!0),this.accelerationY=new n(C,"accelerationY",0,!0),this.maxVelocityX=new n(C,"maxVelocityX",1e4,!0),this.maxVelocityY=new n(C,"maxVelocityY",1e4,!0),this.speedX=new n(C,"speedX",0,!0),this.speedY=new n(C,"speedY",0,!0),this.moveTo=!1,this.moveToX=new n(C,"moveToX",0,!0),this.moveToY=new n(C,"moveToY",0,!0),this.bounce=new n(C,"bounce",0,!0),this.scaleX=new n(C,"scaleX",1),this.scaleY=new n(C,"scaleY",1),this.tint=new n(C,"tint",16777215),this.alpha=new n(C,"alpha",1),this.lifespan=new n(C,"lifespan",1e3,!0),this.angle=new n(C,"angle",{min:0,max:360},!0),this.rotate=new n(C,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new n(C,"quantity",1,!0),this.delay=new n(C,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=e.NORMAL,this.follow=null,this.followOffset=new x,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,C&&this.fromJSON(C)},fromJSON:function(E){if(!E)return this;var S=0,C="";for(S=0;S<this.configFastMap.length;S++)C=this.configFastMap[S],l(E,C)&&(this[C]=r(E,C));for(S=0;S<this.configOpMap.length;S++)C=this.configOpMap[S],l(E,C)&&this[C].loadConfig(E);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,l(E,"speed")&&(this.speedX.loadConfig(E,"speed"),this.speedY=null),(h(E,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),l(E,"scale")&&(this.scaleX.loadConfig(E,"scale"),this.scaleY=null),l(E,"callbackScope")){var P=r(E,"callbackScope",null);this.emitCallbackScope=P,this.deathCallbackScope=P}return l(E,"emitZone")&&this.setEmitZone(E.emitZone),l(E,"deathZone")&&this.setDeathZone(E.deathZone),l(E,"bounds")&&this.setBounds(E.bounds),l(E,"followOffset")&&this.followOffset.setFromObject(r(E,"followOffset",0)),l(E,"frame")&&this.setFrame(E.frame),l(E,"reserve")&&this.reserve(E.reserve),this},toJSON:function(E){E===void 0&&(E={});var S=0,C="";for(S=0;S<this.configFastMap.length;S++)C=this.configFastMap[S],E[C]=this[C];for(S=0;S<this.configOpMap.length;S++)C=this.configOpMap[S],this[C]&&(E[C]=this[C].toJSON());return this.speedY||(delete E.speedX,E.speed=this.speedX.toJSON()),this.scaleY||(delete E.scaleX,E.scale=this.scaleX.toJSON()),E},startFollow:function(E,S,C,P){return S===void 0&&(S=0),C===void 0&&(C=0),P===void 0&&(P=!1),this.follow=E,this.followOffset.set(S,C),this.trackVisible=P,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return u(this.frames);var E=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=A(this.currentFrame+1,0,this._frameLength)),E},setFrame:function(E,S,C){S===void 0&&(S=!0),C===void 0&&(C=1),this.randomFrame=S,this.frameQuantity=C,this.currentFrame=0,this._frameCounter=0;var P=typeof E;if(Array.isArray(E)||P==="string"||P==="number")this.manager.setEmitterFrames(E,this);else if(P==="object"){var R=E;E=r(R,"frames",null),E&&this.manager.setEmitterFrames(E,this);var M=r(R,"cycle",!1);this.randomFrame=!M,this.frameQuantity=r(R,"quantity",C)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(E){return E===void 0&&(E=!0),this.radial=E,this},setPosition:function(E,S){return this.x.onChange(E),this.y.onChange(S),this},setBounds:function(E,S,C,P){if(typeof E=="object"){var R=E;E=R.x,S=R.y,C=l(R,"w")?R.w:R.width,P=l(R,"h")?R.h:R.height}return this.bounds?this.bounds.setTo(E,S,C,P):this.bounds=new c(E,S,C,P),this},setSpeedX:function(E){return this.speedX.onChange(E),this.radial=!1,this},setSpeedY:function(E){return this.speedY&&(this.speedY.onChange(E),this.radial=!1),this},setSpeed:function(E){return this.speedX.onChange(E),this.speedY=null,this.radial=!0,this},setScaleX:function(E){return this.scaleX.onChange(E),this},setScaleY:function(E){return this.scaleY.onChange(E),this},setScale:function(E){return this.scaleX.onChange(E),this.scaleY=null,this},setGravityX:function(E){return this.gravityX=E,this},setGravityY:function(E){return this.gravityY=E,this},setGravity:function(E,S){return this.gravityX=E,this.gravityY=S,this},setAlpha:function(E){return this.alpha.onChange(E),this},setTint:function(E){return this.tint.onChange(E),this},setEmitterAngle:function(E){return this.angle.onChange(E),this},setAngle:function(E){return this.angle.onChange(E),this},setLifespan:function(E){return this.lifespan.onChange(E),this},setQuantity:function(E){return this.quantity.onChange(E),this},setFrequency:function(E,S){return this.frequency=E,this._counter=0,S&&this.quantity.onChange(S),this},setEmitZone:function(E){if(E===void 0)this.emitZone=null;else{var S=r(E,"type","random"),C=r(E,"source",null);switch(S){case"random":this.emitZone=new v(C);break;case"edge":var P=r(E,"quantity",1),R=r(E,"stepRate",0),M=r(E,"yoyo",!1),L=r(E,"seamless",!0);this.emitZone=new s(C,P,R,M,L);break}}return this},setDeathZone:function(E){if(E===void 0)this.deathZone=null;else{var S=r(E,"type","onEnter"),C=r(E,"source",null);if(C&&typeof C.contains=="function"){var P=S==="onEnter";this.deathZone=new o(C,P)}}return this},reserve:function(E){for(var S=this.dead,C=0;C<E;C++)S.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(E,S){return E===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof E=="function"&&(this.emitCallback=E,S&&(this.emitCallbackScope=S)),this},onParticleDeath:function(E,S){return E===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof E=="function"&&(this.deathCallback=E,S&&(this.deathCallbackScope=S)),this},killAll:function(){for(var E=this.dead,S=this.alive;S.length>0;)E.push(S.pop());return this},forEachAlive:function(E,S){for(var C=this.alive,P=C.length,R=0;R<P;++R)E.call(S,C[R],this);return this},forEachDead:function(E,S){for(var C=this.dead,P=C.length,R=0;R<P;++R)E.call(S,C[R],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return g(this.alive,this.depthSortCallback),this},flow:function(E,S){return S===void 0&&(S=1),this.frequency=E,this.quantity.onChange(S),this.start()},explode:function(E,S,C){return this.frequency=-1,this.emitParticle(E,S,C)},emitParticleAt:function(E,S,C){return this.emitParticle(C,E,S)},emitParticle:function(E,S,C){if(!this.atLimit()){E===void 0&&(E=this.quantity.onEmit());for(var P=this.dead,R=this.follow?this.follow.x+this.followOffset.x:S,M=this.follow?this.follow.y+this.followOffset.y:C,L=0;L<E;L++){var F=P.pop();if(F||(F=new this.particleClass(this)),F.fire(R,M),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(E,S){S*=this.timeScale;var C=S/1e3;this.trackVisible&&(this.visible=this.follow.visible);var P=this.manager.getProcessors(),R=this.alive,M=this.dead,L=0,F=[],I=R.length;for(L=0;L<I;L++){var w=R[L];w.update(S,C,P)&&F.push({index:L,particle:w})}if(I=F.length,I>0){var U=this.deathCallback,z=this.deathCallbackScope;for(L=I-1;L>=0;L--){var W=F[L];R.splice(W.index,1),M.push(W.particle),U&&U.call(z,W.particle),W.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=S,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(E,S){return E.y-S.y}});i.exports=T},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s){this.source=o,this.killOnEnter=s},willKill:function(a){var o=this.source.contains(a.x,a.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r,u){r===void 0&&(r=!1),u===void 0&&(u=!0),this.source=o,this.points=[],this.quantity=s,this.stepRate=n,this.yoyo=r,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],o=this.points[this.points.length-1];a.x===o.x&&a.y===o.y&&this.points.pop()}var s=this._length;return this._length=this.points.length,this._length<s&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(a){return this.source=a,this.updateSource()},getPoint:function(a){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(a.x=o.x,a.y=o.y)}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var a=0;a<f.length;a++)if(e.hasOwnProperty(f[a]))return!0;return!1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(3),a=new e({initialize:function(s){this.source=s,this._tempVec=new f},getPoint:function(o){var s=this._tempVec;this.source.getRandomPoint(s),o.x=s.x,o.y=s.y}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(73),o=new e({Extends:a,Mixins:[f.PathFollower],initialize:function(n,r,u,h,l,d){a.call(this,n,u,h,l,d),this.path=r},preUpdate:function(s,n){this.anims.update(s,n),this.pathUpdate(s)}});i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=e.canvas,s=e.context,n=e.style,r=[],u=0,h=a.length;n.maxLines>0&&n.maxLines<a.length&&(h=n.maxLines),n.syncFont(o,s);for(var l=0;l<h;l++){var d=n.strokeThickness;d+=s.measureText(a[l]).width,n.wordWrap&&(d-=s.measureText(" ").width),r[l]=Math.ceil(d),u=Math.max(u,r[l])}var v=f.fontSize+n.strokeThickness,c=v*h,g=e.lineSpacing;return h>1&&(c+=g*(h-1)),{width:u,height:c,lines:h,lineWidths:r,lineSpacing:g,lineHeight:v}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(13),a=t(6),o=t(460),s={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new e({initialize:function(u,h){this.parent=u,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(h,!1,!0);var l=a(h,"metrics",!1);l?this.metrics={ascent:a(l,"ascent",0),descent:a(l,"descent",0),fontSize:a(l,"fontSize",0)}:this.metrics=o(this)},setStyle:function(r,u,h){u===void 0&&(u=!0),h===void 0&&(h=!1),r&&r.hasOwnProperty("fontSize")&&typeof r.fontSize=="number"&&(r.fontSize=r.fontSize.toString()+"px");for(var l in s){var d=h?s[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=a(r,s[l][0],d):this[l]=f(r,s[l][0],d)}var v=a(r,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=a(r,"fill",null);return c!==null&&(this.color=c),u?this.update(!0):this.parent},syncFont:function(r,u){u.font=this._font},syncStyle:function(r,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(r,u){u?(r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur):(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowColor=0,r.shadowBlur=0)},update:function(r){return r&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(r,u){u===void 0&&(u=!0);var h=r,l="",d="";if(typeof r!="string")h=a(r,"fontFamily","Courier"),l=a(r,"fontSize","16px"),d=a(r,"fontStyle","");else{var v=r.split(" "),c=0;d=v.length>2?v[c++]:"",l=v[c++]||"16px",h=v[c++]||"Courier"}return(h!==this.fontFamily||l!==this.fontSize||d!==this.fontStyle)&&(this.fontFamily=h,this.fontSize=l,this.fontStyle=d,u&&this.update(!0)),this.parent},setFontFamily:function(r){return this.fontFamily!==r&&(this.fontFamily=r,this.update(!0)),this.parent},setFontStyle:function(r){return this.fontStyle!==r&&(this.fontStyle=r,this.update(!0)),this.parent},setFontSize:function(r){return typeof r=="number"&&(r=r.toString()+"px"),this.fontSize!==r&&(this.fontSize=r,this.update(!0)),this.parent},setTestString:function(r){return this.testString=r,this.update(!0)},setFixedSize:function(r,u){return this.fixedWidth=r,this.fixedHeight=u,r&&(this.parent.width=r),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(r){return this.backgroundColor=r,this.update(!1)},setFill:function(r){return this.color=r,this.update(!1)},setColor:function(r){return this.color=r,this.update(!1)},setResolution:function(r){return this.resolution=r,this.update(!1)},setStroke:function(r,u){return u===void 0&&(u=this.strokeThickness),r===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==r||this.strokeThickness!==u)&&(this.stroke=r,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(r,u,h,l,d,v){return r===void 0&&(r=0),u===void 0&&(u=0),h===void 0&&(h="#000"),l===void 0&&(l=0),d===void 0&&(d=!1),v===void 0&&(v=!0),this.shadowOffsetX=r,this.shadowOffsetY=u,this.shadowColor=h,this.shadowBlur=l,this.shadowStroke=d,this.shadowFill=v,this.update(!1)},setShadowOffset:function(r,u){return r===void 0&&(r=0),u===void 0&&(u=r),this.shadowOffsetX=r,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(r){return r===void 0&&(r="#000"),this.shadowColor=r,this.update(!1)},setShadowBlur:function(r){return r===void 0&&(r=0),this.shadowBlur=r,this.update(!1)},setShadowStroke:function(r){return this.shadowStroke=r,this.update(!1)},setShadowFill:function(r){return this.shadowFill=r,this.update(!1)},setWordWrapWidth:function(r,u){return u===void 0&&(u=!1),this.wordWrapWidth=r,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(r,u){return u===void 0&&(u=null),this.wordWrapCallback=r,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(r){return r===void 0&&(r="left"),this.align=r,this.update(!1)},setMaxLines:function(r){return r===void 0&&(r=0),this.maxLines=r,this.update(!1)},getTextMetrics:function(){var r=this.metrics;return{ascent:r.ascent,descent:r.descent,fontSize:r.fontSize}},toJSON:function(){var r={};for(var u in s)r[u]=this[u];return r.metrics=this.getTextMetrics(),r},destroy:function(){this.parent=void 0}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=function(a){var o=e.create(this),s=o.getContext("2d");a.syncFont(o,s);var n=s.measureText(a.testString);if("actualBoundingBoxAscent"in n){var r=n.actualBoundingBoxAscent,u=n.actualBoundingBoxDescent;return e.remove(o),{ascent:r,descent:u,fontSize:r+u}}var h=Math.ceil(n.width*a.baselineX),l=h,d=2*l;l=l*a.baselineY|0,o.width=h,o.height=d,s.fillStyle="#f00",s.fillRect(0,0,h,d),s.font=a._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a.testString,0,l);var v={ascent:0,descent:0,fontSize:0},c=s.getImageData(0,0,h,d);if(!c)return v.ascent=l,v.descent=l+6,v.fontSize=v.ascent+v.descent,e.remove(o),v;var g=c.data,x=g.length,A=h*4,T,E,S=0,C=!1;for(T=0;T<l;T++){for(E=0;E<A;E+=4)if(g[S+E]!==255){C=!0;break}if(!C)S+=A;else break}for(v.ascent=l-T,S=x-A,C=!1,T=d;T>l;T--){for(E=0;E<A;E+=4)if(g[S+E]!==255){C=!0;break}if(!C)S-=A;else break}return v.descent=T-l,v.fontSize=v.ascent+v.descent,e.remove(o),v};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1097),f=t(0),a=t(36),o=t(59),s=t(65),n=t(14),r=t(34),u=new f({Extends:r,Mixins:[e],initialize:function(l,d,v,c,g,x,A,T,E){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=128),g===void 0&&(g=0),x===void 0&&(x=360),A===void 0&&(A=!1),r.call(this,l,"Arc",new s(0,0,c)),this._startAngle=g,this._endAngle=x,this._anticlockwise=A,this._iterations=.01,this.setPosition(d,v);var S=this.geom.radius*2;this.setSize(S,S),T!==void 0&&this.setFillStyle(T,E),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(h){this._iterations=h,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(h){this.geom.radius=h;var l=h*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(h){this._startAngle=h,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(h){this._endAngle=h,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(h){this._anticlockwise=h,this.updateData()}},setRadius:function(h){return this.radius=h,this},setIterations:function(h){return h===void 0&&(h=.01),this.iterations=h,this},setStartAngle:function(h,l){return this._startAngle=h,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(h,l){return this._endAngle=h,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var h=this._iterations,l=h,d=this.geom.radius,v=a(this._startAngle),c=a(this._endAngle),g=this._anticlockwise,x=d,A=d;c-=v,g?c<-n.PI2?c=-n.PI2:c>0&&(c=-n.PI2+c%n.PI2):c>n.PI2?c=n.PI2:c<0&&(c=n.PI2+c%n.PI2);for(var T=[x+Math.cos(v)*d,A+Math.sin(v)*d],E;l<1;)E=c*l+v,T.push(x+Math.cos(E)*d,A+Math.sin(E)*d),l+=h;return E=c+v,T.push(x+Math.cos(E)*d,A+Math.sin(E)*d),T.push(x+Math.cos(v)*d,A+Math.sin(v)*d),this.pathIndexes=o(T),this.pathData=T,this}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1100),a=t(59),o=t(10),s=t(34),n=new e({Extends:s,Mixins:[f],initialize:function(u,h,l,d,v,c){h===void 0&&(h=0),l===void 0&&(l=0),s.call(this,u,"Curve",d),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(h,l),v!==void 0&&this.setFillStyle(v,c),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){var r=this._curveBounds,u=this._smoothness;this.geom.getBounds(r,u),this.setSize(r.width,r.height),this.updateDisplayOrigin();for(var h=[],l=this.geom.getPoints(u),d=0;d<l.length;d++)h.push(l[d].x,l[d].y);return h.push(l[0].x,l[0].y),this.pathIndexes=a(h),this.pathData=h,this}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(59),a=t(1103),o=t(111),s=t(34),n=new e({Extends:s,Mixins:[a],initialize:function(u,h,l,d,v,c,g){h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=128),v===void 0&&(v=128),s.call(this,u,"Ellipse",new o(d/2,v/2,d,v)),this._smoothness=64,this.setPosition(h,l),this.width=d,this.height=v,c!==void 0&&this.setFillStyle(c,g),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSize:function(r,u){return this.width=r,this.height=u,this.geom.setPosition(r/2,u/2),this.geom.setSize(r,u),this.updateData()},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){for(var r=[],u=this.geom.getPoints(this._smoothness),h=0;h<u.length;h++)r.push(u[h].x,u[h].y);return r.push(u[0].x,u[0].y),this.pathIndexes=f(r),this.pathData=r,this}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(34),a=t(1106),o=new e({Extends:f,Mixins:[a],initialize:function(n,r,u,h,l,d,v,c,g,x,A){r===void 0&&(r=0),u===void 0&&(u=0),h===void 0&&(h=128),l===void 0&&(l=128),d===void 0&&(d=32),v===void 0&&(v=32),f.call(this,n,"Grid",null),this.cellWidth=d,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(r,u),this.setSize(h,l),this.setFillStyle(c,g),x!==void 0&&this.setOutlineStyle(x,A),this.updateDisplayOrigin()},setFillStyle:function(s,n){return n===void 0&&(n=1),s===void 0?this.showCells=!1:(this.fillColor=s,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(s,n){return n===void 0&&(n=1),s===void 0?this.showAltCells=!1:(this.altFillColor=s,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(s,n){return n===void 0&&(n=1),s===void 0?this.showOutline=!1:(this.outlineFillColor=s,this.outlineFillAlpha=n,this.showOutline=!0),this}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1109),f=t(0),a=t(34),o=new f({Extends:a,Mixins:[e],initialize:function(n,r,u,h,l,d,v,c){r===void 0&&(r=0),u===void 0&&(u=0),h===void 0&&(h=48),l===void 0&&(l=32),d===void 0&&(d=15658734),v===void 0&&(v=10066329),c===void 0&&(c=13421772),a.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=d,this.fillLeft=v,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,u),this.setSize(h,l),this.updateDisplayOrigin()},setProjection:function(s){return this.projection=s,this},setFaces:function(s,n,r){return s===void 0&&(s=!0),n===void 0&&(n=!0),r===void 0&&(r=!0),this.showTop=s,this.showLeft=n,this.showRight=r,this},setFillStyle:function(s,n,r){return this.fillTop=s,this.fillLeft=n,this.fillRight=r,this.isFilled=!0,this}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1112),a=t(34),o=new e({Extends:a,Mixins:[f],initialize:function(n,r,u,h,l,d,v,c,g){r===void 0&&(r=0),u===void 0&&(u=0),h===void 0&&(h=48),l===void 0&&(l=32),d===void 0&&(d=!1),v===void 0&&(v=15658734),c===void 0&&(c=10066329),g===void 0&&(g=13421772),a.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=c,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=d,this.isFilled=!0,this.setPosition(r,u),this.setSize(h,l),this.updateDisplayOrigin()},setProjection:function(s){return this.projection=s,this},setReversed:function(s){return this.isReversed=s,this},setFaces:function(s,n,r){return s===void 0&&(s=!0),n===void 0&&(n=!0),r===void 0&&(r=!0),this.showTop=s,this.showLeft=n,this.showRight=r,this},setFillStyle:function(s,n,r){return this.fillTop=s,this.fillLeft=n,this.fillRight=r,this.isFilled=!0,this}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(34),a=t(47),o=t(1115),s=new e({Extends:f,Mixins:[o],initialize:function(r,u,h,l,d,v,c,g,x){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=128),c===void 0&&(c=0),f.call(this,r,"Line",new a(l,d,v,c));var A=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(u,h),this.setSize(A,T),g!==void 0&&this.setStrokeStyle(1,g,x),this.updateDisplayOrigin()},setLineWidth:function(n,r){return r===void 0&&(r=n),this._startWidth=n,this._endWidth=r,this.lineWidth=n,this},setTo:function(n,r,u,h){return this.geom.setTo(n,r,u,h),this}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1118),f=t(0),a=t(59),o=t(469),s=t(227),n=t(34),r=t(472),u=new f({Extends:n,Mixins:[e],initialize:function(l,d,v,c,g,x){d===void 0&&(d=0),v===void 0&&(v=0),n.call(this,l,"Polygon",new s(c));var A=o(this.geom);this.setPosition(d,v),this.setSize(A.width,A.height),g!==void 0&&this.setFillStyle(g,x),this.updateDisplayOrigin(),this.updateData()},smooth:function(h){h===void 0&&(h=1);for(var l=0;l<h;l++)r(this.geom);return this.updateData()},updateData:function(){for(var h=[],l=this.geom.points,d=0;d<l.length;d++)h.push(l[d].x,l[d].y);return h.push(l[0].x,l[0].y),this.pathIndexes=a(h),this.pathData=h,this}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a,o){o===void 0&&(o=new e);for(var s=1/0,n=1/0,r=-s,u=-n,h,l=0;l<a.points.length;l++)h=a.points[l],s=Math.min(s,h.x),n=Math.min(n,h.y),r=Math.max(r,h.x),u=Math.max(u,h.y);return o.x=s,o.y=n,o.width=r-s,o.height=u-n,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(47),a=t(471),o=function(s,n,r,u){u===void 0&&(u=[]);var h=s.points,l=a(s);!n&&r>0&&(n=l/r);for(var d=0;d<n;d++)for(var v=l*(d/n),c=0,g=0;g<h.length;g++){var x=h[g],A=h[(g+1)%h.length],T=new f(x.x,x.y,A.x,A.y),E=e(T);if(v<c||v>c+E){c+=E;continue}var S=T.getPoint((v-c)/E);u.push(S);break}return u};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(47),a=function(o){for(var s=o.points,n=0,r=0;r<s.length;r++){var u=s[r],h=s[(r+1)%s.length],l=new f(u.x,u.y,h.x,h.y);n+=e(l)}return n};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(f,a){return f[0]=a[0],f[1]=a[1],f},e=function(f){var a,o=[],s=f.points;for(a=0;a<s.length;a++)o.push([s[a].x,s[a].y]);var n=[];for(o.length>0&&n.push(t([0,0],o[0])),a=0;a<o.length-1;a++){var r=o[a],u=o[a+1],h=r[0],l=r[1],d=u[0],v=u[1];n.push([.85*h+.15*d,.85*l+.15*v]),n.push([.15*h+.85*d,.15*l+.85*v])}return o.length>1&&n.push(t([0,0],o[o.length-1])),f.setTo(n)};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(10),a=t(34),o=t(1121),s=new e({Extends:a,Mixins:[o],initialize:function(r,u,h,l,d,v,c){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=128),d===void 0&&(d=128),a.call(this,r,"Rectangle",new f(0,0,l,d)),this.setPosition(u,h),this.setSize(l,d),v!==void 0&&this.setFillStyle(v,c),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,r){return this.width=n,this.height=r,this.geom.setSize(n,r),this.updateData(),this},updateData:function(){var n=[],r=this.geom,u=this._tempLine;return r.getLineA(u),n.push(u.x1,u.y1,u.x2,u.y2),r.getLineB(u),n.push(u.x2,u.y2),r.getLineC(u),n.push(u.x2,u.y2),r.getLineD(u),n.push(u.x2,u.y2),this.pathData=n,this}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1124),f=t(0),a=t(59),o=t(34),s=new f({Extends:o,Mixins:[e],initialize:function(r,u,h,l,d,v,c,g){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=5),d===void 0&&(d=32),v===void 0&&(v=64),o.call(this,r,"Star",null),this._points=l,this._innerRadius=d,this._outerRadius=v,this.setPosition(u,h),this.setSize(v*2,v*2),c!==void 0&&this.setFillStyle(c,g),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],r=this._points,u=this._innerRadius,h=this._outerRadius,l=Math.PI/2*3,d=Math.PI/r,v=h,c=h;n.push(v,c+-h);for(var g=0;g<r;g++)n.push(v+Math.cos(l)*h,c+Math.sin(l)*h),l+=d,n.push(v+Math.cos(l)*u,c+Math.sin(l)*u),l+=d;return n.push(v,c+-h),this.pathIndexes=a(n),this.pathData=n,this}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(34),a=t(82),o=t(1127),s=new e({Extends:f,Mixins:[o],initialize:function(r,u,h,l,d,v,c,g,x,A,T){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=128),v===void 0&&(v=64),c===void 0&&(c=0),g===void 0&&(g=128),x===void 0&&(x=128),f.call(this,r,"Triangle",new a(l,d,v,c,g,x));var E=this.geom.right-this.geom.left,S=this.geom.bottom-this.geom.top;this.setPosition(u,h),this.setSize(E,S),A!==void 0&&this.setFillStyle(A,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,r,u,h,l,d){return this.geom.setTo(n,r,u,h,l,d),this.updateData()},updateData:function(){var n=[],r=this.geom,u=this._tempLine;return r.getLineA(u),n.push(u.x1,u.y1,u.x2,u.y2),r.getLineB(u),n.push(u.x2,u.y2),r.getLineC(u),n.push(u.x2,u.y2),this.pathData=n,this}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(67),a=function(o,s,n){n===void 0&&(n=new e);var r=o.getLineA(),u=o.getLineB(),h=o.getLineC();if(s<=0||s>=1)return n.x=r.x1,n.y=r.y1,n;var l=f(r),d=f(u),v=f(h),c=l+d+v,g=c*s,x=0;return g<l?(x=g/l,n.x=r.x1+(r.x2-r.x1)*x,n.y=r.y1+(r.y2-r.y1)*x):g>l+d?(g-=l+d,x=g/v,n.x=h.x1+(h.x2-h.x1)*x,n.y=h.y1+(h.y2-h.y1)*x):(g-=l,x=g/d,n.x=u.x1+(u.x2-u.x1)*x,n.y=u.y1+(u.y2-u.y1)*x),n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(4),a=function(o,s,n,r){r===void 0&&(r=[]);var u=o.getLineA(),h=o.getLineB(),l=o.getLineC(),d=e(u),v=e(h),c=e(l),g=d+v+c;!s&&n>0&&(s=g/n);for(var x=0;x<s;x++){var A=g*(x/s),T=0,E=new f;A<d?(T=A/d,E.x=u.x1+(u.x2-u.x1)*T,E.y=u.y1+(u.y2-u.y1)*T):A>d+v?(A-=d+v,T=A/c,E.x=l.x1+(l.x2-l.x1)*T,E.y=l.y1+(l.y2-l.y1)*T):(A-=d,T=A/v,E.x=h.x1+(h.x2-h.x1)*T,E.y=h.y1+(h.y2-h.y1)*T),r.push(E)}return r};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(f))return e[f]=a,!0;if(f.indexOf(".")!==-1){for(var o=f.split("."),s=e,n=e,r=0;r<o.length;r++)if(s.hasOwnProperty(o[r]))n=s,s=s[o[r]];else return!1;return n[o[o.length-1]]=a,!0}return!1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),f=t(117),a=function(o,s,n,r,u,h,l){if(r===void 0&&(r=!1),h===void 0&&(h=16777215),l===void 0&&(l=1),o.length!==s.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var d={faces:[],vertices:[]},v,c,g,x,A,T,E,S,C,P,R,M=r?3:2,L=Array.isArray(h),F=Array.isArray(l);if(Array.isArray(n)&&n.length>0)for(v=0;v<n.length;v++){var I=n[v],w=n[v]*2,U=n[v]*M;c=o[U],g=o[U+1],x=r?o[U+2]:0,A=s[w],T=s[w+1],E=L?h[I]:h,S=F?l[I]:l,C=0,P=0,R=0,u&&(C=u[U],P=u[U+1],R=r?u[U+2]:0),d.vertices.push(new f(c,g,x,A,T,E,S,C,P,R))}else{var z=0,W=0;for(v=0;v<o.length;v+=M)c=o[v],g=o[v+1],x=r?o[v+2]:0,A=s[z],T=s[z+1],E=L?h[W]:h,S=F?l[W]:l,C=0,P=0,R=0,u&&(C=u[v],P=u[v+1],R=r?u[v+2]:0),d.vertices.push(new f(c,g,x,A,T,E,S,C,P,R)),z+=2,W++}for(v=0;v<d.vertices.length;v+=3){var H=d.vertices[v],D=d.vertices[v+1],O=d.vertices[v+2];d.faces.push(new e(H,D,O))}return d};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),f=t(69),a=t(39),o=t(117),s=new a,n=new a,r=new f,u=function(h,l,d,v,c,g,x,A,T,E){d===void 0&&(d=1),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),x===void 0&&(x=0),A===void 0&&(A=0),T===void 0&&(T=0),E===void 0&&(E=!0);var S={faces:[],verts:[]},C=h.materials;s.set(v,c,g),n.set(x,A,T),r.fromRotationXYTranslation(n,s,E);for(var P=0;P<h.models.length;P++)for(var R=h.models[P],M=R.vertices,L=R.textureCoords,F=R.faces,I=0;I<F.length;I++){var w=F[I],U=w.vertices[0],z=w.vertices[1],W=w.vertices[2],H=M[U.vertexIndex],D=M[z.vertexIndex],O=M[W.vertexIndex],B=U.textureCoordsIndex,N=z.textureCoordsIndex,G=W.textureCoordsIndex,V=B===-1?{u:0,v:1}:L[B],Y=N===-1?{u:0,v:0}:L[N],X=G===-1?{u:1,v:1}:L[G],b=16777215;w.material!==""&&C[w.material]&&(b=C[w.material]);var Q=new o(H.x*d,H.y*d,H.z*d,V.u,V.v,b).transformMat4(r),K=new o(D.x*d,D.y*d,D.z*d,Y.u,Y.v,b).transformMat4(r),$=new o(O.x*d,O.y*d,O.z*d,X.u,X.v,b).transformMat4(r);S.verts.push(Q,K,$),S.faces.push(new e(Q,K,$))}return l&&(l.faces=l.faces.concat(S.faces),l.vertices=l.vertices.concat(S.verts)),S};i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=t(0),a=t(11),o=t(200),s=t(12),n=new f({Extends:e,Mixins:[a.ScrollFactor,a.Visible],initialize:function(u,h,l,d,v,c,g){e.call(this,u,h,l),this.color=new o(d,v,c),this.intensity=g,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(r){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&r.id)},setColor:function(r){var u=s.getFloatsFromUintRGB(r);return this.color.set(u[0],u[1],u[2]),this},setIntensity:function(r){return this.intensity=r,this},setRadius:function(r){return this.radius=r,this}});n.RENDER_MASK=15,i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(151),f=t(0),a=t(50),o=t(481),s=t(150),n=t(200),r=t(74),u=t(79),h=t(12),l=new f({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(d,v,c,g,x,A){return this.systems.displayList.add(new s(this.scene,d,v,c,g,x,A))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(d){for(var v=this.lights,c=d.worldView,g=[],x=0;x<v.length;x++){var A=v[x];A.willRender(d)&&e(A,c)&&g.push({light:A,distance:a(A.x,A.y,c.centerX,c.centerY)})}return g.length>this.maxLights&&(u(g,this.sortByDistance),g=g.slice(0,this.maxLights)),this.visibleLights=g.length,g},sortByDistance:function(d,v){return d.distance>=v.distance},setAmbientColor:function(d){var v=h.getFloatsFromUintRGB(d);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(d,v,c,g,x){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=128),g===void 0&&(g=16777215),x===void 0&&(x=1);var A=h.getFloatsFromUintRGB(g),T=new o(d,v,c,A[0],A[1],A[2],x);return this.lights.push(T),T},removeLight:function(d){var v=this.lights.indexOf(d);return v>=0&&r(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(56),f=t(17),a={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(i,m,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=function(a,o,s){var n=a.x1,r=a.y1,u=a.x2,h=a.y2,l=o.x1,d=o.y1,v=o.x2,c=o.y2,g=u-n,x=h-r,A=v-l,T=c-d,E=T*g-A*x;if(g===0||E===0)return!1;var S=(g*(d-r)+x*(n-l))/(A*x-T*g),C=(l+A*S-n)/g;return C<0||S<0||S>1?null:(s===void 0&&(s=new e),s.set(n+g*C,r+x*C,C))};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=t(485),a=t(47),o=new a,s=new e,n=function(r,u,h){h===void 0&&(h=new e);var l=!1;h.set(),s.set();for(var d=u[0],v=1;v<u.length;v++){var c=u[v];o.setTo(d.x,d.y,c.x,c.y),d=c,f(r,o,s)&&(!l||s.z<h.z)&&(h.copy(s),l=!0)}return l?h:null};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=t(140),a=t(486),o=new e,s=function(n,r,u){u===void 0&&(u=new f),Array.isArray(r)||(r=[r]);var h=!1;u.set(),o.set();for(var l=0;l<r.length;l++)a(n,r[l].points,o)&&(!h||o.z<u.z)&&(u.set(o.x,o.y,o.z,l),h=!0);return h?u:null};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.x1,o=e.y1,s=e.x2,n=e.y2,r=f.x,u=f.y,h=f.right,l=f.bottom,d=0;if(a>=r&&a<=h&&o>=u&&o<=l||s>=r&&s<=h&&n>=u&&n<=l)return!0;if(a<r&&s>=r){if(d=o+(n-o)*(r-a)/(s-a),d>u&&d<=l)return!0}else if(a>h&&s<=h&&(d=o+(n-o)*(h-a)/(s-a),d>=u&&d<=l))return!0;if(o<u&&n>=u){if(d=a+(s-a)*(u-o)/(n-o),d>=r&&d<=h)return!0}else if(o>l&&n<=l&&(d=a+(s-a)*(l-o)/(n-o),d>=r&&d<=h))return!0;return!1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),f=t(57),a=t(235),o=t(490),s=function(n,r){if(r.left>n.right||r.right<n.left||r.top>n.bottom||r.bottom<n.top)return!1;var u=r.getLineA(),h=r.getLineB(),l=r.getLineC();if(f(n,u.x1,u.y1)||f(n,u.x2,u.y2)||f(n,h.x1,h.y1)||f(n,h.x2,h.y2)||f(n,l.x1,l.y1)||f(n,l.x2,l.y2))return!0;var d=n.getLineA(),v=n.getLineB(),c=n.getLineC(),g=n.getLineD();if(e(u,d)||e(u,v)||e(u,c)||e(u,g)||e(h,d)||e(h,v)||e(h,c)||e(h,g)||e(l,d)||e(l,v)||e(l,c)||e(l,g))return!0;var x=o(n),A=a(r,x,!0);return A.length>0};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=[]),f.push({x:e.x,y:e.y}),f.push({x:e.right,y:e.y}),f.push({x:e.right,y:e.bottom}),f.push({x:e.x,y:e.bottom}),f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(233),f=t(115),a=function(o,s){return o.left>s.right||o.right<s.left||o.top>s.bottom||o.bottom<s.top?!1:!!(f(o,s.x,s.y)||e(o.getLineA(),s)||e(o.getLineB(),s)||e(o.getLineC(),s))};i.exports=a},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(493),a=t(96),o=function(s,n,r){if(r===void 0&&(r=[]),f(s,n))for(var u=s.getLineA(),h=s.getLineB(),l=s.getLineC(),d=[new e,new e,new e],v=[a(u,n,d[0]),a(h,n,d[1]),a(l,n,d[2])],c=0;c<3;c++)v[c]&&r.push(d[c]);return r};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),f=function(a,o){return!!(a.contains(o.x1,o.y1)||a.contains(o.x2,o.y2)||e(a.getLineA(),o)||e(a.getLineB(),o)||e(a.getLineC(),o))};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(235),f=t(495),a=t(96),o=function(s,n){if(s.left>n.right||s.right<n.left||s.top>n.bottom||s.bottom<n.top)return!1;var r=s.getLineA(),u=s.getLineB(),h=s.getLineC(),l=n.getLineA(),d=n.getLineB(),v=n.getLineC();if(a(r,l)||a(r,d)||a(r,v)||a(u,l)||a(u,d)||a(u,v)||a(h,l)||a(h,d)||a(h,v))return!0;var c=f(s),g=e(n,c,!0);return g.length>0||(c=f(n),g=e(s,c,!0),g.length>0)};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=[]),f.push({x:e.x1,y:e.y1}),f.push({x:e.x2,y:e.y2}),f.push({x:e.x3,y:e.y3}),f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){a===void 0&&(a=1);var o=f.x1,s=f.y1,n=f.x2,r=f.y2,u=e.x,h=e.y,l=(n-o)*(n-o)+(r-s)*(r-s);if(l===0)return!1;var d=((u-o)*(n-o)+(h-s)*(r-s))/l;if(d<0)return Math.sqrt((o-u)*(o-u)+(s-h)*(s-h))<=a;if(d>=0&&d<=1){var v=((s-h)*(n-o)-(o-u)*(r-s))/l;return Math.abs(v)*Math.sqrt(l)<=a}else return Math.sqrt((n-u)*(n-u)+(r-h)*(r-h))<=a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(68),a=t(97),o=function(s){var n=a(s)-e.TAU;return f(n,-Math.PI,Math.PI)};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,e="untitled",f="",a="";function o(x){var A=x.indexOf("#");return A>-1?x.substring(0,A):x}function s(x){return x.models.length===0&&x.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),f="",x.models[x.models.length-1]}function n(x,A){var T=x.length>=2?x[1]:e;A.models.push({faces:[],name:T,textureCoords:[],vertexNormals:[],vertices:[]}),f=""}function r(x){x.length===2&&(f=x[1])}function u(x,A){var T=x.length,E=T>=2?parseFloat(x[1]):0,S=T>=3?parseFloat(x[2]):0,C=T>=4?parseFloat(x[3]):0;s(A).vertices.push({x:E,y:S,z:C})}function h(x,A){var T=x.length,E=T>=2?parseFloat(x[1]):0,S=T>=3?parseFloat(x[2]):0,C=T>=4?parseFloat(x[3]):0;isNaN(E)&&(E=0),isNaN(S)&&(S=0),isNaN(C)&&(C=0),t&&(S=1-S),s(A).textureCoords.push({u:E,v:S,w:C})}function l(x,A){var T=x.length,E=T>=2?parseFloat(x[1]):0,S=T>=3?parseFloat(x[2]):0,C=T>=4?parseFloat(x[3]):0;s(A).vertexNormals.push({x:E,y:S,z:C})}function d(x,A){var T=x.length-1;if(!(T<3)){for(var E={group:f,material:a,vertices:[]},S=0;S<T;S++){var C=x[S+1],P=C.split("/"),R=P.length;if(!(R<1||R>3)){var M=0,L=0,F=0;M=parseInt(P[0],10),R>1&&P[1]!==""&&(L=parseInt(P[1],10)),R>2&&(F=parseInt(P[2],10)),M!==0&&(M<0&&(M=s(A).vertices.length+1+M),L-=1,M-=1,F-=1,E.vertices.push({textureCoordsIndex:L,vertexIndex:M,vertexNormalIndex:F}))}}s(A).faces.push(E)}}function v(x,A){x.length>=2&&A.materialLibraries.push(x[1])}function c(x){x.length>=2&&(a=x[1])}var g=function(x,A){A===void 0&&(A=!0),t=A;var T={materials:{},materialLibraries:[],models:[]};f="",a="";for(var E=x.split(`
`),S=0;S<E.length;S++){var C=o(E[S]),P=C.replace(/\s\s+/g," ").trim().split(" ");switch(P[0].toLowerCase()){case"o":n(P,T);break;case"g":r(P);break;case"v":u(P,T);break;case"vt":h(P,T);break;case"vn":l(P,T);break;case"f":d(P,T);break;case"mtllib":v(P,T);break;case"usemtl":c(P);break}}return T};i.exports=g},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),f=function(a){for(var o={},s=a.split(`
`),n="",r=0;r<s.length;r++){var u=s[r].trim();if(!(u.indexOf("#")===0||u==="")){var h=u.replace(/\s\s+/g," ").trim().split(" ");switch(h[0].toLowerCase()){case"newmtl":{n=h[1];break}case"kd":{var l=Math.floor(h[1]*255),d=h.length>=2?Math.floor(h[2]*255):l,v=h.length>=3?Math.floor(h[3]*255):l;o[n]=e(l,d,v);break}}}}return o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x*e.x+e.y*e.y};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10);e.Area=t(1267),e.Ceil=t(1268),e.CeilAll=t(1269),e.CenterOn=t(190),e.Clone=t(1270),e.Contains=t(57),e.ContainsPoint=t(1271),e.ContainsRect=t(503),e.CopyFrom=t(1272),e.Decompose=t(490),e.Equals=t(1273),e.FitInside=t(1274),e.FitOutside=t(1275),e.Floor=t(1276),e.FloorAll=t(1277),e.FromPoints=t(199),e.FromXY=t(1278),e.GetAspectRatio=t(237),e.GetCenter=t(1279),e.GetPoint=t(171),e.GetPoints=t(306),e.GetSize=t(1280),e.Inflate=t(1281),e.Intersection=t(1282),e.MarchingAnts=t(316),e.MergePoints=t(1283),e.MergeRect=t(1284),e.MergeXY=t(1285),e.Offset=t(1286),e.OffsetPoint=t(1287),e.Overlaps=t(1288),e.Perimeter=t(130),e.PerimeterPoint=t(1289),e.Random=t(174),e.RandomOutside=t(1290),e.SameDimensions=t(1291),e.Scale=t(1292),e.Union=t(441),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.width*f.height>e.width*e.height?!1:f.x>e.x&&f.x<e.right&&f.right>e.x&&f.right<e.right&&f.y>e.y&&f.y<e.bottom&&f.bottom>e.y&&f.bottom<e.bottom};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){return o===void 0&&(o=new e),o.x=(a.x1+a.x2+a.x3)/3,o.y=(a.y1+a.y2+a.y3)/3,o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.x1+=f,e.y1+=a,e.x2+=f,e.y2+=a,e.x3+=f,e.y3+=a,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);function f(o,s,n,r){var u=o-n,h=s-r,l=u*u+h*h;return Math.sqrt(l)}var a=function(o,s){s===void 0&&(s=new e);var n=o.x1,r=o.y1,u=o.x2,h=o.y2,l=o.x3,d=o.y3,v=f(l,d,u,h),c=f(n,r,l,d),g=f(u,h,n,r),x=v+c+g;return s.x=(n*v+u*c+l*g)/x,s.y=(r*v+h*c+d*g)/x,s};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return function(a,o,s,n){var r=e.getPixelAlpha(o,s,n.texture.key,n.frame.name);return r&&r>=f}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:f,hitAreaCallback:a,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s){this.pad=o,this.events=o.events,this.index=s,this.value=0,this.threshold=.1},update:function(a){this.value=a},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(239),a=new e({initialize:function(s,n){this.pad=s,this.events=s.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var s=this.pad,n=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(f.BUTTON_DOWN,s,this,o),this.pad.emit(f.GAMEPAD_BUTTON_DOWN,n,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(f.BUTTON_UP,s,this,o),this.pad.emit(f.GAMEPAD_BUTTON_UP,n,o,this))},destroy:function(){this.pad=null,this.events=null}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(509),f=t(510),a=t(0),o=t(9),s=t(3),n=new a({Extends:o,initialize:function(u,h){o.call(this),this.manager=u,this.pad=h,this.id=h.id,this.index=h.index;for(var l=[],d=0;d<h.buttons.length;d++)l.push(new f(this,d));this.buttons=l;var v=[];for(d=0;d<h.axes.length;d++)v.push(new e(this,d));this.axes=v,this.vibration=h.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:c,this._LCRight=l[15]?l[15]:c,this._LCTop=l[12]?l[12]:c,this._LCBottom=l[13]?l[13]:c,this._RCLeft=l[2]?l[2]:c,this._RCRight=l[1]?l[1]:c,this._RCTop=l[3]?l[3]:c,this._RCBottom=l[0]?l[0]:c,this._FBLeftTop=l[4]?l[4]:c,this._FBLeftBottom=l[6]?l[6]:c,this._FBRightTop=l[5]?l[5]:c,this._FBRightBottom=l[7]?l[7]:c;var g={value:0};this._HAxisLeft=v[0]?v[0]:g,this._VAxisLeft=v[1]?v[1]:g,this._HAxisRight=v[2]?v[2]:g,this._VAxisRight=v[3]?v[3]:g,this.leftStick=new s,this.rightStick=new s,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(r){return this.axes[r].getValue()},setAxisThreshold:function(r){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=r},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(r){return this.buttons[r].value},isButtonDown:function(r){return this.buttons[r].pressed},update:function(r){if(!(r.timestamp<this._created)){var u,h=this.buttons,l=r.buttons,d=h.length;for(u=0;u<d;u++)h[u].update(l[u].value);var v=this.axes,c=r.axes;for(d=v.length,u=0;u<d;u++)v[u].update(c[u]);d>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),d>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var r;for(r=0;r<this.buttons.length;r++)this.buttons[r].destroy();for(r=0;r<this.axes.length;r++)this.axes[r].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(154),o=new e({Extends:f,initialize:function(n,r){f.call(this),this.plugin=n,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(s){return this.emitOnRepeat=s,this},onDown:function(s){this.originalEvent=s,this.enabled&&(this.altKey=s.altKey,this.ctrlKey=s.ctrlKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.location=s.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,s):(this.isDown=!0,this.isUp=!1,this.timeDown=s.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,s)))},onUp:function(s){this.originalEvent=s,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=s.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,s))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(154),a=t(2),o=t(514),s=t(516),n=new e({initialize:function(u,h,l){if(l===void 0&&(l={}),h.length<2)return!1;this.manager=u,this.enabled=!0,this.keyCodes=[];for(var d=0;d<h.length;d++){var v=h[d];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(l,"resetOnWrongKey",!0),this.maxKeyDelay=a(l,"maxKeyDelay",0),this.resetOnMatch=a(l,"resetOnMatch",!1),this.deleteOnMatch=a(l,"deleteOnMatch",!1);var c=this,g=function(x){if(!(c.matched||!c.enabled)){var A=o(x,c);A&&(c.manager.emit(f.COMBO_MATCH,c,x),c.resetOnMatch?s(c):c.deleteOnMatch&&c.destroy())}};this.onKeyDown=g,this.manager.on(f.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(f.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(515),f=function(a,o){if(o.matched)return!0;var s=!1,n=!1;if(a.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var r=o.timeLastMatched+o.maxKeyDelay;a.timeStamp<=r&&(n=!0,s=e(a,o))}else n=!0,s=e(a,o);return!n&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),s&&(o.timeLastMatched=a.timeStamp,o.matched=!0,o.timeMatched=a.timeStamp),s};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.timeLastMatched=e.timeStamp,f.index++,f.index===f.size?!0:(f.current=f.keyCodes[f.index],!1)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(240),f=function(a,o){var s=e(o,a.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",a.src,s.async,s.user,s.password),n.responseType=a.xhrSettings.responseType,n.timeout=s.timeout,s.headers)for(var r in s.headers)n.setRequestHeader(r,s.headers[r]);return s.header&&s.headerValue&&n.setRequestHeader(s.header,s.headerValue),s.requestedWith&&n.setRequestHeader("X-Requested-With",s.requestedWith),s.overrideMimeType&&n.overrideMimeType(s.overrideMimeType),s.withCredentials&&(n.withCredentials=!0),n.onload=a.onLoad.bind(a,n),n.onerror=a.onError.bind(a,n),n.onprogress=a.onProgress.bind(a),n.send(),n};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(519),r=t(7),u=new e({Extends:a,initialize:function(l,d,v,c,g){if(r(d)){var x=d;d=s(x,"key"),c=s(x,"xhrSettings"),g=s(x,"context",g)}var A={type:"audio",cache:l.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:d,url:v.url,xhrSettings:c,config:{context:g}};a.call(this,l,A)},onProcess:function(){this.state=f.FILE_PROCESSING;var h=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){h.data=l,h.onProcessComplete()},function(l){console.error("Error decoding audio: "+h.key+" - ",l?l.message:null),h.onProcessError()}),this.config.context=null}});u.create=function(h,l,d,v,c){var g=h.systems.game,x=g.config.audio,A=g.device.audio;r(l)&&(d=s(l,"url",[]),v=s(l,"config",{}));var T=u.getAudioURL(g,d);return T?A.webAudio&&!x.disableWebAudio?new u(h,l,T,c,g.sound.context):new n(h,l,T,v):null},u.getAudioURL=function(h,l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++){var v=s(l[d],"url",l[d]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var c=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(c=s(l[d],"type",c?c[1]:"").toLowerCase(),h.device.audio[c])return{url:v,type:c}}return null},o.register("audio",function(h,l,d,v){var c=this.systems.game,g=c.config.audio,x=c.device.audio;if(g.noAudio||!x.webAudio&&!x.audioData)return this;var A;if(Array.isArray(h))for(var T=0;T<h.length;T++)A=u.create(this,h[T]),A&&this.addFile(A);else A=u.create(this,h,l,d,v),A&&this.addFile(A);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(95),a=t(23),o=t(2),s=t(155),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v){if(n(l)){var c=l;l=o(c,"key"),v=o(c,"config",v)}var g={type:"audio",cache:h.cacheManager.audio,extension:d.type,key:l,url:d.url,config:v};a.call(this,h,g),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var h=this.data[u];h.oncanplaythrough=null,h.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var h=u.target;h.oncanplaythrough=null,h.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var h=0;h<u;h++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+h).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(h=0;h<this.data.length;h++)l=this.data[h],l.src=s(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v){var c="js";if(n(l)){var g=l;l=s(g,"key"),d=s(g,"url"),v=s(g,"xhrSettings"),c=s(g,"extension",c)}var x={type:"script",cache:!1,extension:c,responseType:"text",key:l,url:d,xhrSettings:v};a.call(this,h,x)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(u,h,l){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,h,l));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(522),f=t(157),a=t(0),o=t(62),s=t(524),n=t(525),r=new a({initialize:function(h){this.world=h,this.scene=h.scene,this.sys=h.scene.sys},collider:function(u,h,l,d,v){return this.world.addCollider(u,h,l,d,v)},overlap:function(u,h,l,d,v){return this.world.addOverlap(u,h,l,d,v)},existing:function(u,h){var l=h?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(u,l),u},staticImage:function(u,h,l,d){var v=new e(this.scene,u,h,l,d);return this.sys.displayList.add(v),this.world.enableBody(v,o.STATIC_BODY),v},image:function(u,h,l,d){var v=new e(this.scene,u,h,l,d);return this.sys.displayList.add(v),this.world.enableBody(v,o.DYNAMIC_BODY),v},staticSprite:function(u,h,l,d){var v=new f(this.scene,u,h,l,d);return this.sys.displayList.add(v),this.sys.updateList.add(v),this.world.enableBody(v,o.STATIC_BODY),v},sprite:function(u,h,l,d){var v=new f(this.scene,u,h,l,d);return this.sys.displayList.add(v),this.sys.updateList.add(v),this.world.enableBody(v,o.DYNAMIC_BODY),v},staticGroup:function(u,h){return this.sys.updateList.add(new n(this.world,this.world.scene,u,h))},group:function(u,h){return this.sys.updateList.add(new s(this.world,this.world.scene,u,h))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(243),a=t(125),o=new e({Extends:a,Mixins:[f.Acceleration,f.Angular,f.Bounce,f.Debug,f.Drag,f.Enable,f.Friction,f.Gravity,f.Immovable,f.Mass,f.Pushable,f.Size,f.Velocity],initialize:function(n,r,u,h,l){a.call(this,n,r,u,h,l),this.body=null}});i.exports=o},function(i,m,t){var e=t(244),f=t(65),a=t(231),o=t(151),s=function(n,r,u,h,l,d){var v=e(n,r-h,u-h,2*h,2*h,l,d);if(v.length===0)return v;for(var c=new f(r,u,h),g=new f,x=[],A=0;A<v.length;A++){var T=v[A];T.isCircle?(g.setTo(T.center.x,T.center.y,T.halfWidth),a(c,g)&&x.push(T)):o(c,T)&&x.push(T)}return x};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),f=t(0),a=t(62),o=t(2),s=t(113),n=t(7),r=new f({Extends:s,initialize:function(h,l,d,v){if(!d&&!v)v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(n(d))v=d,d=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(d)&&n(d[0])){v=d[0];var c=this;d.forEach(function(g){g.internalCreateCallback=c.createCallbackHandler,g.internalRemoveCallback=c.removeCallbackHandler}),d=null}else v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=h,v.classType=o(v,"classType",e),this.physicsType=a.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(v,"collideWorldBounds",!1),setBoundsRectangle:o(v,"customBoundsRectangle",null),setAccelerationX:o(v,"accelerationX",0),setAccelerationY:o(v,"accelerationY",0),setAllowDrag:o(v,"allowDrag",!0),setAllowGravity:o(v,"allowGravity",!0),setAllowRotation:o(v,"allowRotation",!0),setBounceX:o(v,"bounceX",0),setBounceY:o(v,"bounceY",0),setDragX:o(v,"dragX",0),setDragY:o(v,"dragY",0),setEnable:o(v,"enable",!0),setGravityX:o(v,"gravityX",0),setGravityY:o(v,"gravityY",0),setFrictionX:o(v,"frictionX",0),setFrictionY:o(v,"frictionY",0),setMaxVelocityX:o(v,"maxVelocityX",1e4),setMaxVelocityY:o(v,"maxVelocityY",1e4),setVelocityX:o(v,"velocityX",0),setVelocityY:o(v,"velocityY",0),setAngularVelocity:o(v,"angularVelocity",0),setAngularAcceleration:o(v,"angularAcceleration",0),setAngularDrag:o(v,"angularDrag",0),setMass:o(v,"mass",1),setImmovable:o(v,"immovable",!1)},s.call(this,l,d,v),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,a.DYNAMIC_BODY);var h=u.body;for(var l in this.defaults)h[l](this.defaults[l])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,h,l){l===void 0&&(l=0);for(var d=this.getChildren(),v=0;v<d.length;v++)d[v].body.velocity.set(u+v*l,h+v*l);return this},setVelocityX:function(u,h){h===void 0&&(h=0);for(var l=this.getChildren(),d=0;d<l.length;d++)l[d].body.velocity.x=u+d*h;return this},setVelocityY:function(u,h){h===void 0&&(h=0);for(var l=this.getChildren(),d=0;d<l.length;d++)l[d].body.velocity.y=u+d*h;return this}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),f=t(0),a=t(62),o=t(2),s=t(113),n=t(7),r=new f({Extends:s,initialize:function(h,l,d,v){!d&&!v?v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:e}:n(d)?(v=d,d=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=o(v,"classType",e)):Array.isArray(d)&&n(d[0])?(v=d,d=null,v.forEach(function(c){c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=o(c,"classType",e)})):v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=h,this.physicsType=a.STATIC_BODY,s.call(this,l,d,v),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,a.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,h=0;h<u.length;h++)u[h].body.reset();return this}});i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(350),f=t(527),a=t(18),o=t(0),s=t(528),n=t(62),r=t(50),u=t(9),h=t(245),l=t(124),d=t(354),v=t(355),c=t(246),g=t(247),x=t(529),A=t(6),T=t(14),E=t(211),S=t(530),C=t(10),P=t(531),R=t(532),M=t(537),L=t(538),F=t(149),I=t(539),w=t(248),U=t(25),z=t(3),W=t(68),H=new o({Extends:u,initialize:function(O,B){u.call(this),this.scene=O,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new E,this.gravity=new z(A(B,"gravity.x",0),A(B,"gravity.y",0)),this.bounds=new C(A(B,"x",0),A(B,"y",0),A(B,"width",O.sys.scale.width),A(B,"height",O.sys.scale.height)),this.checkCollision={up:A(B,"checkCollision.up",!0),down:A(B,"checkCollision.down",!0),left:A(B,"checkCollision.left",!0),right:A(B,"checkCollision.right",!0)},this.fps=A(B,"fps",60),this.fixedStep=A(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=A(B,"timeScale",1),this.OVERLAP_BIAS=A(B,"overlapBias",4),this.TILE_BIAS=A(B,"tileBias",16),this.forceX=A(B,"forceX",!1),this.isPaused=A(B,"isPaused",!1),this._total=0,this.drawDebug=A(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:A(B,"debugShowBody",!0),debugShowStaticBody:A(B,"debugShowStaticBody",!0),debugShowVelocity:A(B,"debugShowVelocity",!0),bodyDebugColor:A(B,"debugBodyColor",16711935),staticBodyDebugColor:A(B,"debugStaticBodyColor",255),velocityDebugColor:A(B,"debugVelocityColor",65280)},this.maxEntries=A(B,"maxEntries",16),this.useTree=A(B,"useTree",!0),this.tree=new P(this.maxEntries),this.staticTree=new P(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.drawDebug&&this.createDebugGraphic()},enable:function(D,O){O===void 0&&(O=n.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var B=0;B<D.length;B++){var N=D[B];if(N.isParent)for(var G=N.getChildren(),V=0;V<G.length;V++){var Y=G[V];Y.isParent?this.enable(Y,O):this.enableBody(Y,O)}else this.enableBody(N,O)}},enableBody:function(D,O){return O===void 0&&(O=n.DYNAMIC_BODY),D.body||(O===n.DYNAMIC_BODY?D.body=new f(this,D):O===n.STATIC_BODY&&(D.body=new I(this,D))),this.add(D.body),D},add:function(D){return D.physicsType===n.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===n.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var O=0;O<D.length;O++){var B=D[O];if(B.isParent)for(var N=B.getChildren(),G=0;G<N.length;G++){var V=N[G];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(B.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===n.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,O,B,N,G,V,Y,X){return this.bounds.setTo(D,O,B,N),G!==void 0&&this.setBoundsCollision(G,V,Y,X),this},setBoundsCollision:function(D,O,B,N){return D===void 0&&(D=!0),O===void 0&&(O=!0),B===void 0&&(B=!0),N===void 0&&(N=!0),this.checkCollision.left=D,this.checkCollision.right=O,this.checkCollision.up=B,this.checkCollision.down=N,this},pause:function(){return this.isPaused=!0,this.emit(h.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(h.RESUME),this},addCollider:function(D,O,B,N,G){B===void 0&&(B=null),N===void 0&&(N=null),G===void 0&&(G=B);var V=new s(this,!1,D,O,B,N,G);return this.colliders.add(V),V},addOverlap:function(D,O,B,N,G){B===void 0&&(B=null),N===void 0&&(N=null),G===void 0&&(G=B);var V=new s(this,!0,D,O,B,N,G);return this.colliders.add(V),V},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,O){if(!(this.isPaused||this.bodies.size===0)){var B,N=this._frameTime,G=this._frameTimeMS*this.timeScale;this._elapsed+=O;var V,Y=this.bodies.entries,X=this._elapsed>=G;for(this.fixedStep||(N=O*.001,X=!0,this._elapsed=0),B=0;B<Y.length;B++)V=Y[B],V.enable&&V.preUpdate(X,N);if(X){this._elapsed-=G,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Y));var b=this.colliders.update();for(B=0;B<b.length;B++){var Q=b[B];Q.active&&Q.update()}this.emit(h.WORLD_STEP,N)}for(;this._elapsed>=G;)this._elapsed-=G,this.step(N)}},step:function(D){var O,B,N=this.bodies.entries,G=N.length;for(O=0;O<G;O++)B=N[O],B.enable&&B.update(D);this.useTree&&(this.tree.clear(),this.tree.load(N));var V=this.colliders.update();for(O=0;O<V.length;O++){var Y=V[O];Y.active&&Y.update()}this.emit(h.WORLD_STEP,D),this.stepsLastFrame++},postUpdate:function(){var D,O,B=this.bodies.entries,N=B.length,G=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<N;D++)O=B[D],O.enable&&O.postUpdate();if(this.drawDebug){var Y=this.debugGraphic;for(Y.clear(),D=0;D<N;D++)O=B[D],O.willDrawDebug()&&O.drawDebug(Y);for(B=V.entries,N=B.length,D=0;D<N;D++)O=B[D],O.willDrawDebug()&&O.drawDebug(Y)}var X=this.pendingDestroy;if(X.size>0){var b=this.tree,Q=this.staticTree;for(B=X.entries,N=B.length,D=0;D<N;D++)O=B[D],O.physicsType===n.DYNAMIC_BODY?(b.remove(O),G.delete(O)):O.physicsType===n.STATIC_BODY&&(Q.remove(O),V.delete(O)),O.world=void 0,O.gameObject=void 0;X.clear()}},updateMotion:function(D,O){D.allowRotation&&this.computeAngularVelocity(D,O),this.computeVelocity(D,O)},computeAngularVelocity:function(D,O){var B=D.angularVelocity,N=D.angularAcceleration,G=D.angularDrag,V=D.maxAngular;N?B+=N*O:D.allowDrag&&G&&(G*=O,d(B-G,0,.1)?B-=G:v(B+G,0,.1)?B+=G:B=0),B=a(B,-V,V);var Y=B-D.angularVelocity;D.angularVelocity+=Y,D.rotation+=D.angularVelocity*O},computeVelocity:function(D,O){var B=D.velocity.x,N=D.acceleration.x,G=D.drag.x,V=D.maxVelocity.x,Y=D.velocity.y,X=D.acceleration.y,b=D.drag.y,Q=D.maxVelocity.y,K=D.speed,$=D.maxSpeed,Z=D.allowDrag,k=D.useDamping;D.allowGravity&&(B+=(this.gravity.x+D.gravity.x)*O,Y+=(this.gravity.y+D.gravity.y)*O),N?B+=N*O:Z&&G&&(k?(G=Math.pow(G,O),B*=G,K=Math.sqrt(B*B+Y*Y),l(K,0,.001)&&(B=0)):(G*=O,d(B-G,0,.01)?B-=G:v(B+G,0,.01)?B+=G:B=0)),X?Y+=X*O:Z&&b&&(k?(b=Math.pow(b,O),Y*=b,K=Math.sqrt(B*B+Y*Y),l(K,0,.001)&&(Y=0)):(b*=O,d(Y-b,0,.01)?Y-=b:v(Y+b,0,.01)?Y+=b:Y=0)),B=a(B,-V,V),Y=a(Y,-Q,Q),D.velocity.set(B,Y),$>-1&&K>$&&(D.velocity.normalize().scale($),K=$),D.speed=K},separate:function(D,O,B,N,G,V){if(!V&&!D.enable||!O.enable||D.checkCollision.none||O.checkCollision.none||!this.intersects(D,O)||B&&B.call(N,D.gameObject,O.gameObject)===!1)return!1;if(D.isCircle&&O.isCircle)return this.separateCircle(D,O,G);if(D.isCircle!==O.isCircle){var Y=D.isCircle?O:D,X=D.isCircle?D:O,b={x:Y.x,y:Y.y,right:Y.right,bottom:Y.bottom},Q=X.center;if((Q.y<b.y||Q.y>b.bottom)&&(Q.x<b.x||Q.x>b.right))return this.separateCircle(D,O,G)}var K=!1,$=!1;G?(K=M(D,O,G,this.OVERLAP_BIAS),$=L(D,O,G,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(K=M(D,O,G,this.OVERLAP_BIAS),this.intersects(D,O)&&($=L(D,O,G,this.OVERLAP_BIAS))):($=L(D,O,G,this.OVERLAP_BIAS),this.intersects(D,O)&&(K=M(D,O,G,this.OVERLAP_BIAS)));var Z=K||$;return Z&&(G?(D.onOverlap||O.onOverlap)&&this.emit(h.OVERLAP,D.gameObject,O.gameObject,D,O):(D.onCollide||O.onCollide)&&this.emit(h.COLLIDE,D.gameObject,O.gameObject,D,O)),Z},separateCircle:function(D,O,B,N){c(D,O,!1,N),g(D,O,!1,N);var G=0;if(D.isCircle!==O.isCircle){var V={x:O.isCircle?D.position.x:O.position.x,y:O.isCircle?D.position.y:O.position.y,right:O.isCircle?D.right:O.right,bottom:O.isCircle?D.bottom:O.bottom},Y={x:D.isCircle?D.center.x:O.center.x,y:D.isCircle?D.center.y:O.center.y,radius:D.isCircle?D.halfWidth:O.halfWidth};Y.y<V.y?Y.x<V.x?G=r(Y.x,Y.y,V.x,V.y)-Y.radius:Y.x>V.right&&(G=r(Y.x,Y.y,V.right,V.y)-Y.radius):Y.y>V.bottom&&(Y.x<V.x?G=r(Y.x,Y.y,V.x,V.bottom)-Y.radius:Y.x>V.right&&(G=r(Y.x,Y.y,V.right,V.bottom)-Y.radius)),G*=-1}else G=D.halfWidth+O.halfWidth-r(D.center.x,D.center.y,O.center.x,O.center.y);if(D.overlapR=G,O.overlapR=G,B||G===0||D.immovable&&O.immovable||D.customSeparateX||O.customSeparateX)return G!==0&&(D.onOverlap||O.onOverlap)&&this.emit(h.OVERLAP,D.gameObject,O.gameObject,D,O),G!==0;var X=D.center.x-O.center.x,b=D.center.y-O.center.y,Q=Math.sqrt(Math.pow(X,2)+Math.pow(b,2)),K=(O.center.x-D.center.x)/Q||0,$=(O.center.y-D.center.y)/Q||0,Z=2*(D.velocity.x*K+D.velocity.y*$-O.velocity.x*K-O.velocity.y*$)/(D.mass+O.mass);(D.immovable||O.immovable)&&(Z*=2),D.immovable||(D.velocity.x=D.velocity.x-Z/D.mass*K,D.velocity.y=D.velocity.y-Z/D.mass*$),O.immovable||(O.velocity.x=O.velocity.x+Z/O.mass*K,O.velocity.y=O.velocity.y+Z/O.mass*$),!D.immovable&&!O.immovable&&(G/=2);var k=e(D.center,O.center),J=(G+T.EPSILON)*Math.cos(k),tt=(G+T.EPSILON)*Math.sin(k);return D.immovable||(D.x-=J,D.y-=tt,D.updateCenter()),O.immovable||(O.x+=J,O.y+=tt,O.updateCenter()),D.velocity.x*=D.bounce.x,D.velocity.y*=D.bounce.y,O.velocity.x*=O.bounce.x,O.velocity.y*=O.bounce.y,(D.onCollide||O.onCollide)&&this.emit(h.COLLIDE,D.gameObject,O.gameObject,D,O),!0},intersects:function(D,O){return D===O?!1:!D.isCircle&&!O.isCircle?!(D.right<=O.position.x||D.bottom<=O.position.y||D.position.x>=O.right||D.position.y>=O.bottom):D.isCircle?O.isCircle?r(D.center.x,D.center.y,O.center.x,O.center.y)<=D.halfWidth+O.halfWidth:this.circleBodyIntersects(D,O):this.circleBodyIntersects(O,D)},circleBodyIntersects:function(D,O){var B=a(D.center.x,O.left,O.right),N=a(D.center.y,O.top,O.bottom),G=(D.center.x-B)*(D.center.x-B),V=(D.center.y-N)*(D.center.y-N);return G+V<=D.halfWidth*D.halfWidth},overlap:function(D,O,B,N,G){return B===void 0&&(B=null),N===void 0&&(N=null),G===void 0&&(G=B),this.collideObjects(D,O,B,N,G,!0)},collide:function(D,O,B,N,G){return B===void 0&&(B=null),N===void 0&&(N=null),G===void 0&&(G=B),this.collideObjects(D,O,B,N,G,!1)},collideObjects:function(D,O,B,N,G,V){var Y,X;D.isParent&&D.physicsType===void 0&&(D=D.children.entries),O&&O.isParent&&O.physicsType===void 0&&(O=O.children.entries);var b=Array.isArray(D),Q=Array.isArray(O);if(this._total=0,!b&&!Q)this.collideHandler(D,O,B,N,G,V);else if(!b&&Q)for(Y=0;Y<O.length;Y++)this.collideHandler(D,O[Y],B,N,G,V);else if(b&&!Q)if(O)for(Y=0;Y<D.length;Y++)this.collideHandler(D[Y],O,B,N,G,V);else for(Y=0;Y<D.length;Y++){var K=D[Y];for(X=Y+1;X<D.length;X++)Y!==X&&this.collideHandler(K,D[X],B,N,G,V)}else for(Y=0;Y<D.length;Y++)for(X=0;X<O.length;X++)this.collideHandler(D[Y],O[X],B,N,G,V);return this._total>0},collideHandler:function(D,O,B,N,G,V){if(O===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,B,N,G,V);if(!D||!O)return!1;if(D.body){if(O.body)return this.collideSpriteVsSprite(D,O,B,N,G,V);if(O.isParent)return this.collideSpriteVsGroup(D,O,B,N,G,V);if(O.isTilemap)return this.collideSpriteVsTilemapLayer(D,O,B,N,G,V)}else if(D.isParent){if(O.body)return this.collideSpriteVsGroup(O,D,B,N,G,V);if(O.isParent)return this.collideGroupVsGroup(D,O,B,N,G,V);if(O.isTilemap)return this.collideGroupVsTilemapLayer(D,O,B,N,G,V)}else if(D.isTilemap){if(O.body)return this.collideSpriteVsTilemapLayer(O,D,B,N,G,V);if(O.isParent)return this.collideGroupVsTilemapLayer(O,D,B,N,G,V)}},collideSpriteVsSprite:function(D,O,B,N,G,V){return!D.body||!O.body?!1:(this.separate(D.body,O.body,N,G,V)&&(B&&B.call(G,D,O),this._total++),!0)},collideSpriteVsGroup:function(D,O,B,N,G,V){var Y=D.body;if(!(O.length===0||!Y||!Y.enable||Y.checkCollision.none)){var X,b,Q;if(this.useTree||O.physicsType===n.STATIC_BODY){var K=this.treeMinMax;K.minX=Y.left,K.minY=Y.top,K.maxX=Y.right,K.maxY=Y.bottom;var $=O.physicsType===n.DYNAMIC_BODY?this.tree.search(K):this.staticTree.search(K);for(b=$.length,X=0;X<b;X++)Q=$[X],!(Y===Q||!Q.enable||Q.checkCollision.none||!O.contains(Q.gameObject))&&this.separate(Y,Q,N,G,V,!0)&&(B&&B.call(G,Y.gameObject,Q.gameObject),this._total++)}else{var Z=O.getChildren(),k=O.children.entries.indexOf(D);for(b=Z.length,X=0;X<b;X++)Q=Z[X].body,!(!Q||X===k||!Q.enable)&&this.separate(Y,Q,N,G,V)&&(B&&B.call(G,Y.gameObject,Q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,O,B,N,G,V){var Y=D.getChildren();if(Y.length===0)return!1;for(var X=!1,b=0;b<Y.length;b++)Y[b].body&&this.collideSpriteVsTilemapLayer(Y[b],O,B,N,G,V)&&(X=!0);return X},collideTiles:function(D,O,B,N,G){return!D.body.enable||O.length===0?!1:this.collideSpriteVsTilesHandler(D,O,B,N,G,!1,!1)},overlapTiles:function(D,O,B,N,G){return!D.body.enable||O.length===0?!1:this.collideSpriteVsTilesHandler(D,O,B,N,G,!0,!1)},collideSpriteVsTilemapLayer:function(D,O,B,N,G,V){var Y=D.body;if(!Y.enable||Y.checkCollision.none)return!1;var X=Y.position.x,b=Y.position.y,Q=Y.width,K=Y.height,$=O.layer;if($.tileWidth>$.baseTileWidth){var Z=($.tileWidth-$.baseTileWidth)*O.scaleX;X-=Z,Q+=Z}if($.tileHeight>$.baseTileHeight){var k=($.tileHeight-$.baseTileHeight)*O.scaleY;K+=k}var J=x(X,b,Q,K,null,O.scene.cameras.main,O.layer);return J.length===0?!1:this.collideSpriteVsTilesHandler(D,J,B,N,G,V,!0)},collideSpriteVsTilesHandler:function(D,O,B,N,G,V,Y){for(var X=D.body,b,Q={left:0,right:0,top:0,bottom:0},K,$=!1,Z=0;Z<O.length;Z++){b=O[Z],K=b.tilemapLayer;var k=K.tileToWorldXY(b.x,b.y);Q.left=k.x,Q.top=k.y,b.baseHeight!==b.height&&(Q.top-=(b.height-b.baseHeight)*K.scaleY),Q.right=Q.left+b.width*K.scaleX,Q.bottom=Q.top+b.height*K.scaleY,w(Q,X)&&(!N||N.call(G,D,b))&&S(b,D)&&(V||R(Z,X,b,Q,K,this.TILE_BIAS,Y))&&(this._total++,$=!0,B&&B.call(G,D,b),V&&X.onOverlap?this.emit(h.TILE_OVERLAP,D,b,X):X.onCollide&&this.emit(h.TILE_COLLIDE,D,b,X))}return $},collideGroupVsGroup:function(D,O,B,N,G,V){if(!(D.length===0||O.length===0))for(var Y=D.getChildren(),X=0;X<Y.length;X++)this.collideSpriteVsGroup(Y[X],O,B,N,G,V)},wrap:function(D,O){D.body?this.wrapObject(D,O):D.getChildren?this.wrapArray(D.getChildren(),O):Array.isArray(D)?this.wrapArray(D,O):this.wrapObject(D,O)},wrapArray:function(D,O){for(var B=0;B<D.length;B++)this.wrapObject(D[B],O)},wrapObject:function(D,O){O===void 0&&(O=0),D.x=W(D.x,this.bounds.left-O,this.bounds.right+O),D.y=W(D.y,this.bounds.top-O,this.bounds.bottom+O)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});i.exports=H},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(62),a=t(245),o=t(196),s=t(10),n=t(57),r=t(3),u=new e({initialize:function(l,d){var v=d.displayWidth?d.displayWidth:64,c=d.displayHeight?d.displayHeight:64;this.world=l,this.gameObject=d,this.transform={x:d.x,y:d.y,rotation:d.angle,scaleX:d.scaleX,scaleY:d.scaleY,displayOriginX:d.displayOriginX,displayOriginY:d.displayOriginY},this.debugShowBody=l.defaults.debugShowBody,this.debugShowVelocity=l.defaults.debugShowVelocity,this.debugBodyColor=l.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(d.x-d.scaleX*d.displayOriginX,d.y-d.scaleY*d.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=d.angle,this.preRotation=d.angle,this.width=v,this.height=c,this.sourceWidth=v,this.sourceHeight=c,d.frame&&(this.sourceWidth=d.frame.realWidth,this.sourceHeight=d.frame.realHeight),this.halfWidth=Math.abs(v/2),this.halfHeight=Math.abs(c/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new r,this.newVelocity=new r,this.deltaMax=new r,this.acceleration=new r,this.allowDrag=!0,this.drag=new r,this.allowGravity=!0,this.gravity=new r,this.bounce=new r,this.worldBounce=null,this.customBoundsRectangle=l.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new r(1e4,1e4),this.maxSpeed=-1,this.friction=new r(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=f.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=f.DYNAMIC_BODY,this._sx=d.scaleX,this._sy=d.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new s},updateBounds:function(){var h=this.gameObject,l=this.transform;if(h.parentContainer){var d=h.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);l.x=d.tx,l.y=d.ty,l.rotation=o(d.rotation),l.scaleX=d.scaleX,l.scaleY=d.scaleY,l.displayOriginX=h.displayOriginX,l.displayOriginY=h.displayOriginY}else l.x=h.x,l.y=h.y,l.rotation=h.angle,l.scaleX=h.scaleX,l.scaleY=h.scaleY,l.displayOriginX=h.displayOriginX,l.displayOriginY=h.displayOriginY;var v=!1;if(this.syncBounds){var c=h.getBounds(this._bounds);this.width=c.width,this.height=c.height,v=!0}else{var g=Math.abs(l.scaleX),x=Math.abs(l.scaleY);(this._sx!==g||this._sy!==x)&&(this.width=this.sourceWidth*g,this.height=this.sourceHeight*x,this._sx=g,this._sy=x,v=!0)}v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var h=this.transform;this.position.x=h.x+h.scaleX*(this.offset.x-h.displayOriginX),this.position.y=h.y+h.scaleY*(this.offset.y-h.displayOriginY),this.updateCenter()},resetFlags:function(h){h===void 0&&(h=!1);var l=this.wasTouching,d=this.touching,v=this.blocked;h?(l.none=!0,l.up=!1,l.down=!1,l.left=!1,l.right=!1):(l.none=d.none,l.up=d.up,l.down=d.down,l.left=d.left,l.right=d.right),d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1,v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(h,l){h&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),h&&this.update(l)},update:function(h){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,h);var l=this.velocity.x,d=this.velocity.y;this.newVelocity.set(l*h,d*h),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(d,l),this.speed=Math.sqrt(l*l+d*d),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(a.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var h=this.position.x-this.prevFrame.x,l=this.position.y-this.prevFrame.y;if(this.moves){var d=this.deltaMax.x,v=this.deltaMax.y;d!==0&&h!==0&&(h<0&&h<-d?h=-d:h>0&&h>d&&(h=d)),v!==0&&l!==0&&(l<0&&l<-v?l=-v:l>0&&l>v&&(l=v)),this.gameObject.x+=h,this.gameObject.y+=l}h<0?this.facing=f.FACING_LEFT:h>0&&(this.facing=f.FACING_RIGHT),l<0?this.facing=f.FACING_UP:l>0&&(this.facing=f.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=h,this._ty=l},setBoundsRectangle:function(h){return this.customBoundsRectangle=h||this.world.bounds,this},checkWorldBounds:function(){var h=this.position,l=this.customBoundsRectangle,d=this.world.checkCollision,v=this.worldBounce?-this.worldBounce.x:-this.bounce.x,c=this.worldBounce?-this.worldBounce.y:-this.bounce.y,g=!1;return h.x<l.x&&d.left?(h.x=l.x,this.velocity.x*=v,this.blocked.left=!0,g=!0):this.right>l.right&&d.right&&(h.x=l.right-this.width,this.velocity.x*=v,this.blocked.right=!0,g=!0),h.y<l.y&&d.up?(h.y=l.y,this.velocity.y*=c,this.blocked.up=!0,g=!0):this.bottom>l.bottom&&d.down&&(h.y=l.bottom-this.height,this.velocity.y*=c,this.blocked.down=!0,g=!0),g&&(this.blocked.none=!1,this.updateCenter()),g},setOffset:function(h,l){return l===void 0&&(l=h),this.offset.set(h,l),this},setSize:function(h,l,d){d===void 0&&(d=!0);var v=this.gameObject;if(!h&&v.frame&&(h=v.frame.realWidth),!l&&v.frame&&(l=v.frame.realHeight),this.sourceWidth=h,this.sourceHeight=l,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),d&&v.getCenter){var c=(v.width-h)/2,g=(v.height-l)/2;this.offset.set(c,g)}return this.isCircle=!1,this.radius=0,this},setCircle:function(h,l,d){return l===void 0&&(l=this.offset.x),d===void 0&&(d=this.offset.y),h>0?(this.isCircle=!0,this.radius=h,this.sourceWidth=h*2,this.sourceHeight=h*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,d),this.updateCenter()):this.isCircle=!1,this},reset:function(h,l){this.stop();var d=this.gameObject;d.setPosition(h,l),d.getTopLeft?d.getTopLeft(this.position):this.position.set(h,l),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=d.angle,this.preRotation=d.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(h){return h.x=this.x,h.y=this.y,h.right=this.right,h.bottom=this.bottom,h},hitTest:function(h,l){if(!this.isCircle)return n(this,h,l);if(this.radius>0&&h>=this.left&&h<=this.right&&l>=this.top&&l<=this.bottom){var d=(this.center.x-h)*(this.center.x-h),v=(this.center.y-l)*(this.center.y-l);return d+v<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(h){var l=this.position,d=l.x+this.halfWidth,v=l.y+this.halfHeight;this.debugShowBody&&(h.lineStyle(h.defaultStrokeWidth,this.debugBodyColor),this.isCircle?h.strokeCircle(d,v,this.width/2):(this.checkCollision.up&&h.lineBetween(l.x,l.y,l.x+this.width,l.y),this.checkCollision.right&&h.lineBetween(l.x+this.width,l.y,l.x+this.width,l.y+this.height),this.checkCollision.down&&h.lineBetween(l.x,l.y+this.height,l.x+this.width,l.y+this.height),this.checkCollision.left&&h.lineBetween(l.x,l.y,l.x,l.y+this.height))),this.debugShowVelocity&&(h.lineStyle(h.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),h.lineBetween(d,v,d+this.velocity.x/2,v+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(h,l,d,v){h===void 0&&(h=!0),this.collideWorldBounds=h;var c=l!==void 0,g=d!==void 0;return(c||g)&&(this.worldBounce||(this.worldBounce=new r),c&&(this.worldBounce.x=l),g&&(this.worldBounce.y=d)),v!==void 0&&(this.onWorldBounds=v),this},setVelocity:function(h,l){return this.velocity.set(h,l),h=this.velocity.x,l=this.velocity.y,this.speed=Math.sqrt(h*h+l*l),this},setVelocityX:function(h){this.velocity.x=h;var l=h,d=this.velocity.y;return this.speed=Math.sqrt(l*l+d*d),this},setVelocityY:function(h){this.velocity.y=h;var l=this.velocity.x,d=h;return this.speed=Math.sqrt(l*l+d*d),this},setMaxVelocity:function(h,l){return this.maxVelocity.set(h,l),this},setMaxVelocityX:function(h){return this.maxVelocity.x=h,this},setMaxVelocityY:function(h){return this.maxVelocity.y=h,this},setMaxSpeed:function(h){return this.maxSpeed=h,this},setBounce:function(h,l){return this.bounce.set(h,l),this},setBounceX:function(h){return this.bounce.x=h,this},setBounceY:function(h){return this.bounce.y=h,this},setAcceleration:function(h,l){return this.acceleration.set(h,l),this},setAccelerationX:function(h){return this.acceleration.x=h,this},setAccelerationY:function(h){return this.acceleration.y=h,this},setAllowDrag:function(h){return h===void 0&&(h=!0),this.allowDrag=h,this},setAllowGravity:function(h){return h===void 0&&(h=!0),this.allowGravity=h,this},setAllowRotation:function(h){return h===void 0&&(h=!0),this.allowRotation=h,this},setDrag:function(h,l){return this.drag.set(h,l),this},setDamping:function(h){return this.useDamping=h,this},setDragX:function(h){return this.drag.x=h,this},setDragY:function(h){return this.drag.y=h,this},setGravity:function(h,l){return this.gravity.set(h,l),this},setGravityX:function(h){return this.gravity.x=h,this},setGravityY:function(h){return this.gravity.y=h,this},setFriction:function(h,l){return this.friction.set(h,l),this},setFrictionX:function(h){return this.friction.x=h,this},setFrictionY:function(h){return this.friction.y=h,this},setAngularVelocity:function(h){return this.angularVelocity=h,this},setAngularAcceleration:function(h){return this.angularAcceleration=h,this},setAngularDrag:function(h){return this.angularDrag=h,this},setMass:function(h){return this.mass=h,this},setImmovable:function(h){return h===void 0&&(h=!0),this.immovable=h,this},setEnable:function(h){return h===void 0&&(h=!0),this.enable=h,this},processX:function(h,l,d,v){this.x+=h,this.updateCenter(),l!==null&&(this.velocity.x=l);var c=this.blocked;d&&(c.left=!0),v&&(c.right=!0)},processY:function(h,l,d,v){this.y+=h,this.updateCenter(),l!==null&&(this.velocity.y=l);var c=this.blocked;d&&(c.up=!0),v&&(c.down=!0)},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r,u,h,l){this.world=o,this.name="",this.active=!0,this.overlapOnly=s,this.object1=n,this.object2=r,this.collideCallback=u,this.processCallback=h,this.callbackContext=l},setName:function(a){return this.name=a,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(3),a=new f,o=new f,s=function(n,r,u,h,l,d,v){var c=v.tilemapLayer.tilemap._convert.WorldToTileXY;c(n,r,!0,a,d,v);var g=a.x,x=a.y;c(n+u,r+h,!1,o,d,v);var A=Math.ceil(o.x),T=Math.ceil(o.y);return e(g,x,A-g,T-x,l,v)};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,f,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,f,e):!0};i.exports=t},function(i,m,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(436);function f(T){if(!(this instanceof f))return new f(T);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}f.prototype={all:function(){return this._all(this.data,[])},search:function(T){var E=this.data,S=[],C=this.toBBox;if(!g(T,E))return S;for(var P=[],R,M,L,F;E;){for(R=0,M=E.children.length;R<M;R++)L=E.children[R],F=E.leaf?C(L):L,g(T,F)&&(E.leaf?S.push(L):c(T,F)?this._all(L,S):P.push(L));E=P.pop()}return S},collides:function(T){var E=this.data,S=this.toBBox;if(!g(T,E))return!1;for(var C=[],P,R,M,L;E;){for(P=0,R=E.children.length;P<R;P++)if(M=E.children[P],L=E.leaf?S(M):M,g(T,L)){if(E.leaf||c(T,L))return!0;C.push(M)}E=C.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var E=0,S=T.length;E<S;E++)this.insert(T[E]);return this}var C=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=C;else if(this.data.height===C.height)this._splitRoot(this.data,C);else{if(this.data.height<C.height){var P=this.data;this.data=C,C=P}this._insert(C,this.data.height-C.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(T,E){if(!T)return this;for(var S=this.data,C=this.toBBox(T),P=[],R=[],M,L,F,I;S||P.length;){if(S||(S=P.pop(),L=P[P.length-1],M=R.pop(),I=!0),S.leaf&&(F=a(T,S.children,E),F!==-1))return S.children.splice(F,1),P.push(S),this._condense(P),this;!I&&!S.leaf&&c(S,C)?(P.push(S),R.push(M),M=0,L=S,S=S.children[0]):L?(M++,S=L.children[M],I=!1):S=null}return this},toBBox:function(T){return T},compareMinX:r,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,E){for(var S=[];T;)T.leaf?E.push.apply(E,T.children):S.push.apply(S,T.children),T=S.pop();return E},_build:function(T,E,S,C){var P=S-E+1,R=this._maxEntries,M;if(P<=R)return M=x(T.slice(E,S+1)),o(M,this.toBBox),M;C||(C=Math.ceil(Math.log(P)/Math.log(R)),R=Math.ceil(P/Math.pow(R,C-1))),M=x([]),M.leaf=!1,M.height=C;var L=Math.ceil(P/R),F=L*Math.ceil(Math.sqrt(R)),I,w,U,z;for(A(T,E,S,F,this.compareMinX),I=E;I<=S;I+=F)for(U=Math.min(I+F-1,S),A(T,I,U,L,this.compareMinY),w=I;w<=U;w+=L)z=Math.min(w+L-1,U),M.children.push(this._build(T,w,z,C-1));return o(M,this.toBBox),M},_chooseSubtree:function(T,E,S,C){for(var P,R,M,L,F,I,w,U;C.push(E),!(E.leaf||C.length-1===S);){for(w=U=1/0,P=0,R=E.children.length;P<R;P++)M=E.children[P],F=h(M),I=d(T,M)-F,I<U?(U=I,w=F<w?F:w,L=M):I===U&&F<w&&(w=F,L=M);E=L||E.children[0]}return E},_insert:function(T,E,S){var C=this.toBBox,P=S?T:C(T),R=[],M=this._chooseSubtree(P,this.data,E,R);for(M.children.push(T),n(M,P);E>=0&&R[E].children.length>this._maxEntries;)this._split(R,E),E--;this._adjustParentBBoxes(P,R,E)},_split:function(T,E){var S=T[E],C=S.children.length,P=this._minEntries;this._chooseSplitAxis(S,P,C);var R=this._chooseSplitIndex(S,P,C),M=x(S.children.splice(R,S.children.length-R));M.height=S.height,M.leaf=S.leaf,o(S,this.toBBox),o(M,this.toBBox),E?T[E-1].children.push(M):this._splitRoot(S,M)},_splitRoot:function(T,E){this.data=x([T,E]),this.data.height=T.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(T,E,S){var C,P,R,M,L,F,I,w;for(F=I=1/0,C=E;C<=S-E;C++)P=s(T,0,C,this.toBBox),R=s(T,C,S,this.toBBox),M=v(P,R),L=h(P)+h(R),M<F?(F=M,w=C,I=L<I?L:I):M===F&&L<I&&(I=L,w=C);return w},_chooseSplitAxis:function(T,E,S){var C=T.leaf?this.compareMinX:r,P=T.leaf?this.compareMinY:u,R=this._allDistMargin(T,E,S,C),M=this._allDistMargin(T,E,S,P);R<M&&T.children.sort(C)},_allDistMargin:function(T,E,S,C){T.children.sort(C);var P=this.toBBox,R=s(T,0,E,P),M=s(T,S-E,S,P),L=l(R)+l(M),F,I;for(F=E;F<S-E;F++)I=T.children[F],n(R,T.leaf?P(I):I),L+=l(R);for(F=S-E-1;F>=E;F--)I=T.children[F],n(M,T.leaf?P(I):I),L+=l(M);return L},_adjustParentBBoxes:function(T,E,S){for(var C=S;C>=0;C--)n(E[C],T)},_condense:function(T){for(var E=T.length-1,S;E>=0;E--)T[E].children.length===0?E>0?(S=T[E-1].children,S.splice(S.indexOf(T[E]),1)):this.clear():o(T[E],this.toBBox)},compareMinX:function(T,E){return T.left-E.left},compareMinY:function(T,E){return T.top-E.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function a(T,E,S){if(!S)return E.indexOf(T);for(var C=0;C<E.length;C++)if(S(T,E[C]))return C;return-1}function o(T,E){s(T,0,T.children.length,E,T)}function s(T,E,S,C,P){P||(P=x(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var R=E,M;R<S;R++)M=T.children[R],n(P,T.leaf?C(M):M);return P}function n(T,E){return T.minX=Math.min(T.minX,E.minX),T.minY=Math.min(T.minY,E.minY),T.maxX=Math.max(T.maxX,E.maxX),T.maxY=Math.max(T.maxY,E.maxY),T}function r(T,E){return T.minX-E.minX}function u(T,E){return T.minY-E.minY}function h(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function l(T){return T.maxX-T.minX+(T.maxY-T.minY)}function d(T,E){return(Math.max(E.maxX,T.maxX)-Math.min(E.minX,T.minX))*(Math.max(E.maxY,T.maxY)-Math.min(E.minY,T.minY))}function v(T,E){var S=Math.max(T.minX,E.minX),C=Math.max(T.minY,E.minY),P=Math.min(T.maxX,E.maxX),R=Math.min(T.maxY,E.maxY);return Math.max(0,P-S)*Math.max(0,R-C)}function c(T,E){return T.minX<=E.minX&&T.minY<=E.minY&&E.maxX<=T.maxX&&E.maxY<=T.maxY}function g(T,E){return E.minX<=T.maxX&&E.minY<=T.maxY&&E.maxX>=T.minX&&E.maxY>=T.minY}function x(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(T,E,S,C,P){for(var R=[E,S],M;R.length;)S=R.pop(),E=R.pop(),!(S-E<=C)&&(M=E+Math.ceil((S-E)/C/2)*C,e(T,M,E,S,P),R.push(E,M,M,S))}i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(533),f=t(535),a=t(248),o=function(s,n,r,u,h,l,d){var v=u.left,c=u.top,g=u.right,x=u.bottom,A=r.faceLeft||r.faceRight,T=r.faceTop||r.faceBottom;if(d||(A=!0,T=!0),!A&&!T)return!1;var E=0,S=0,C=0,P=1;if(n.deltaAbsX()>n.deltaAbsY()?C=-1:n.deltaAbsX()<n.deltaAbsY()&&(P=-1),n.deltaX()!==0&&n.deltaY()!==0&&A&&T&&(C=Math.min(Math.abs(n.position.x-g),Math.abs(n.right-v)),P=Math.min(Math.abs(n.position.y-x),Math.abs(n.bottom-c))),C<P){if(A&&(E=e(n,r,v,g,l,d),E!==0&&!a(u,n)))return!0;T&&(S=f(n,r,c,x,l,d))}else{if(T&&(S=f(n,r,c,x,l,d),S!==0&&!a(u,n)))return!0;A&&(E=e(n,r,v,g,l,d))}return E!==0||S!==0};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(534),f=function(a,o,s,n,r,u){var h=0,l=o.faceLeft,d=o.faceRight,v=o.collideLeft,c=o.collideRight;return u||(l=!0,d=!0,v=!0,c=!0),a.deltaX()<0&&c&&a.checkCollision.left?d&&a.x<n&&(h=a.x-n,h<-r&&(h=0)):a.deltaX()>0&&v&&a.checkCollision.right&&l&&a.right>s&&(h=a.right-s,h>r&&(h=0)),h!==0&&(a.customSeparateX?a.overlapX=h:e(a,h)),h};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f<0?(e.blocked.none=!1,e.blocked.left=!0):f>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=f,e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(536),f=function(a,o,s,n,r,u){var h=0,l=o.faceTop,d=o.faceBottom,v=o.collideUp,c=o.collideDown;return u||(l=!0,d=!0,v=!0,c=!0),a.deltaY()<0&&c&&a.checkCollision.up?d&&a.y<n&&(h=a.y-n,h<-r&&(h=0)):a.deltaY()>0&&v&&a.checkCollision.down&&l&&a.bottom>s&&(h=a.bottom-s,h>r&&(h=0)),h!==0&&(a.customSeparateY?a.overlapY=h:e(a,h)),h};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f<0?(e.blocked.none=!1,e.blocked.up=!0):f>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=f,e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(246),f=t(1389),a=function(o,s,n,r){var u=e(o,s,n,r),h=o.immovable,l=s.immovable;if(n||u===0||h&&l||o.customSeparateX||s.customSeparateX)return u!==0||o.embedded&&s.embedded;var d=f.Set(o,s,u);return!h&&!l?d>0?!0:f.Check():(h?f.RunImmovableBody1(d):l&&f.RunImmovableBody2(d),!0)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(247),f=t(1390),a=function(o,s,n,r){var u=e(o,s,n,r),h=o.immovable,l=s.immovable;if(n||u===0||h&&l||o.customSeparateY||s.customSeparateY)return u!==0||o.embedded&&s.embedded;var d=f.Set(o,s,u);return!h&&!l?d>0?!0:f.Check():(h?f.RunImmovableBody1(d):l&&f.RunImmovableBody2(d),!0)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=t(0),a=t(62),o=t(57),s=t(3),n=new f({initialize:function(u,h){var l=h.displayWidth?h.displayWidth:64,d=h.displayHeight?h.displayHeight:64;this.world=u,this.gameObject=h,this.debugShowBody=u.defaults.debugShowStaticBody,this.debugBodyColor=u.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(h.x-l*h.originX,h.y-d*h.originY),this.width=l,this.height=d,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=s.ZERO,this.allowGravity=!1,this.gravity=s.ZERO,this.bounce=s.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=a.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(r,u){return r&&r!==this.gameObject&&(this.gameObject.body=null,r.body=this,this.gameObject=r),u&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var r=this.gameObject;return r.getTopLeft(this.position),this.width=r.displayWidth,this.height=r.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(r,u){return u===void 0&&(u=r),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(r,u),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(r,u,h){h===void 0&&(h=!0);var l=this.gameObject;if(!r&&l.frame&&(r=l.frame.realWidth),!u&&l.frame&&(u=l.frame.realHeight),this.world.staticTree.remove(this),this.width=r,this.height=u,this.halfWidth=Math.floor(r/2),this.halfHeight=Math.floor(u/2),h&&l.getCenter){var d=l.displayWidth/2,v=l.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(d-this.halfWidth,v-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(r,u,h){return u===void 0&&(u=this.offset.x),h===void 0&&(h=this.offset.y),r>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=r,this.width=r*2,this.height=r*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,h),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(r,u){var h=this.gameObject;r===void 0&&(r=h.x),u===void 0&&(u=h.y),this.world.staticTree.remove(this),h.setPosition(r,u),h.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(r){return r.x=this.x,r.y=this.y,r.right=this.right,r.bottom=this.bottom,r},hitTest:function(r,u){return this.isCircle?e(this,r,u):o(this,r,u)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(r){var u=this.position,h=u.x+this.halfWidth,l=u.y+this.halfHeight;this.debugShowBody&&(r.lineStyle(r.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?r.strokeCircle(h,l,this.width/2):r.strokeRect(u.x,u.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(r){return r<=0&&(r=.1),this.mass=r,this},x:{get:function(){return this.position.x},set:function(r){this.world.staticTree.remove(this),this.position.x=r,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(r){this.world.staticTree.remove(this),this.position.y=r,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});i.exports=n},function(i,m,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(0),f=new e({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=new e,a=function(o,s,n,r){var u=n.tilemapLayer,h=u.cullPaddingX,l=u.cullPaddingY,d=u.tilemap.tileToWorldXY(o,s,f,r,u);return d.x>r.worldView.x+u.scaleX*n.tileWidth*(-h-.5)&&d.x<r.worldView.right+u.scaleX*n.tileWidth*(h-.5)&&d.y>r.worldView.y+u.scaleY*n.tileHeight*(-l-1)&&d.y<r.worldView.bottom+u.scaleY*n.tileHeight*(l-.5)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u,h){for(var l=e(s,n,r,u,null,h),d=0;d<l.length;d++)l[d]&&l[d].index===a&&(l[d].index=o)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(139),a=t(76),o=new e,s=function(n,r){var u=n.tilemapLayer.tilemap,h=n.tilemapLayer,l=Math.floor(u.tileWidth*h.scaleX),d=Math.floor(u.tileHeight*h.scaleY),v=a(r.worldView.x-h.x,l,0,!0)-h.cullPaddingX,c=f(r.worldView.right-h.x,l,0,!0)+h.cullPaddingX,g=a(r.worldView.y-h.y,d,0,!0)-h.cullPaddingY,x=f(r.worldView.bottom-h.y,d,0,!0)+h.cullPaddingY;return o.setTo(v,g,c-v,x-g)};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(543),f=t(159),a=function(o,s,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var u=o.tilemapLayer,h=e(o,s);return(u.skipCull||u.scrollFactorX!==1||u.scrollFactorY!==1)&&(h.left=0,h.right=o.width,h.top=0,h.bottom=o.height),f(o,h,r,n),n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(546),f=t(159),a=function(o,s,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var u=o.tilemapLayer;if(!u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1){var h=e(o,s);f(o,h,r,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),f=t(76),a=function(o,s){var n=o.tilemapLayer.tilemap,r=o.tilemapLayer,u=Math.floor(n.tileWidth*r.scaleX),h=Math.floor(n.tileHeight*r.scaleY),l=o.hexSideLength,d=(h-l)/2+l,v=f(s.worldView.x-r.x,u,0,!0)-r.cullPaddingX,c=e(s.worldView.right-r.x,u,0,!0)+r.cullPaddingX,g=f(s.worldView.y-r.y,d,0,!0)-r.cullPaddingY,x=e(s.worldView.bottom-r.y,d,0,!0)+r.cullPaddingY;return{left:v,right:c,top:g,bottom:x}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(541),f=function(a,o,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var r=a.tilemapLayer,u=a.data,h=a.width,l=a.height,d=0,v=h,c=0,g=l;if(!r.skipCull){var x,A,T;if(n===0){for(A=c;A<g;A++)for(x=d;u[A]&&x<v;x++)if(e(x,A,a,o)){if(T=u[A][x],!T||T.index===-1||!T.visible||T.alpha===0)continue;s.push(T)}}else if(n===1){for(A=c;A<g;A++)for(x=v;u[A]&&x>=d;x--)if(e(x,A,a,o)){if(T=u[A][x],!T||T.index===-1||!T.visible||T.alpha===0)continue;s.push(T)}}else if(n===2){for(A=g;A>=c;A--)for(x=d;u[A]&&x<v;x++)if(e(x,A,a,o)){if(T=u[A][x],!T||T.index===-1||!T.visible||T.alpha===0)continue;s.push(T)}}else if(n===3){for(A=g;A>=c;A--)for(x=v;u[A]&&x>=d;x--)if(e(x,A,a,o)){if(T=u[A][x],!T||T.index===-1||!T.visible||T.alpha===0)continue;s.push(T)}}}return r.tilesDrawn=s.length,r.tilesTotal=h*l,s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(549),f=t(159),a=function(o,s,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var u=o.tilemapLayer;if(!u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1){var h=e(o,s);f(o,h,r,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),f=t(76),a=function(o,s){var n=o.tilemapLayer.tilemap,r=o.tilemapLayer,u=Math.floor(n.tileWidth*r.scaleX),h=Math.floor(n.tileHeight*r.scaleY),l=f(s.worldView.x-r.x,u,0,!0)-r.cullPaddingX,d=e(s.worldView.right-r.x,u,0,!0)+r.cullPaddingX,v=f(s.worldView.y-r.y,h/2,0,!0)-r.cullPaddingY,c=e(s.worldView.bottom-r.y,h/2,0,!0)+r.cullPaddingY;return{left:l,right:d,top:v,bottom:c}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r){s||(s=new e);var u=r.baseTileWidth,h=r.baseTileHeight,l=r.tilemapLayer,d=0,v=0;l&&(n||(n=l.scene.cameras.main),d=l.x+n.scrollX*(1-l.scrollFactorX),u*=l.scaleX,v=l.y+n.scrollY*(1-l.scrollFactorY),h*=l.scaleY);var c=r.hexSideLength,g=(h-c)/2+c,x=d+a*u+o%2*(u/2),A=v+o*g;return s.set(x,A)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r){s||(s=new e);var u=r.baseTileWidth,h=r.baseTileHeight,l=r.tilemapLayer,d=0,v=0;l&&(n||(n=l.scene.cameras.main),d=l.x+n.scrollX*(1-l.scrollFactorX),u*=l.scaleX,v=l.y+n.scrollY*(1-l.scrollFactorY),h*=l.scaleY);var c=d+(a-o)*(u/2),g=v+(a+o)*(h/2);return s.set(c,g)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r){s||(s=new e);var u=r.baseTileWidth,h=r.baseTileHeight,l=r.tilemapLayer,d=0,v=0;l&&(n||(n=l.scene.cameras.main),d=l.x+n.scrollX*(1-l.scrollFactorX),u*=l.scaleX,v=l.y+n.scrollY*(1-l.scrollFactorY),h*=l.scaleY);var c=d+a*u+o%2*(u/2),g=v+o*(h/2);return s.set(c,g)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(253),f=t(254),a=t(3),o=function(s,n,r,u,h){return r||(r=new a(0,0)),r.x=e(s,u,h),r.y=f(n,u,h),r};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=a.baseTileHeight,s=a.tilemapLayer,n=0;s&&(f===void 0&&(f=s.scene.cameras.main),n=s.y+f.scrollY*(1-s.scrollFactorY),o*=s.scaleY);var r=s.tilemap.hexSideLength,u=(o-r)/2+r;return n+e*u};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=a.baseTileHeight,s=a.tilemapLayer,n=0;return s&&(f===void 0&&(f=s.scene.cameras.main),n=s.y+f.scrollY*(1-s.scrollFactorY),o*=s.scaleY),n+e*(o/2)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r,u){n||(n=new e);var h=u.baseTileWidth,l=u.baseTileHeight,d=u.tilemapLayer;d&&(r||(r=d.scene.cameras.main),o=o-(d.y+r.scrollY*(1-d.scrollFactorY)),l*=d.scaleY,a=a-(d.x+r.scrollX*(1-d.scrollFactorX)),h*=d.scaleX);var v=u.hexSideLength,c=(l-v)/2+v,g=s?Math.floor(o/c):o/c,x=s?Math.floor((a-g%2*.5*h)/h):(a-g%2*.5*h)/h;return n.set(x,g)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r,u){n||(n=new e);var h=u.baseTileWidth,l=u.baseTileHeight,d=u.tilemapLayer;d&&(r||(r=d.scene.cameras.main),o=o-(d.y+r.scrollY*(1-d.scrollFactorY)),l*=d.scaleY,a=a-(d.x+r.scrollX*(1-d.scrollFactorX)),h*=d.scaleX);var v=s?Math.floor((a/(h/2)+o/(l/2))/2):(a/(h/2)+o/(l/2))/2,c=s?Math.floor((o/(l/2)-a/(h/2))/2):(o/(l/2)-a/(h/2))/2;return n.set(v,c)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r,u){n||(n=new e);var h=u.baseTileWidth,l=u.baseTileHeight,d=u.tilemapLayer;d&&(r||(r=d.scene.cameras.main),o=o-(d.y+r.scrollY*(1-d.scrollFactorY)),l*=d.scaleY,a=a-(d.x+r.scrollX*(1-d.scrollFactorX)),h*=d.scaleX);var v=s?Math.floor(o/(l/2)):o/(l/2),c=s?Math.floor((a+v%2*.5*h)/h):(a+v%2*.5*h)/h;return n.set(c,v)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(255),f=t(256),a=t(3),o=function(s,n,r,u,h,l){return r===void 0&&(r=!0),u||(u=new a(0,0)),u.x=e(s,r,h,l),u.y=f(n,r,h,l),u};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=o.baseTileHeight,n=o.tilemapLayer;n&&(a||(a=n.scene.cameras.main),e=e-(n.y+a.scrollY*(1-n.scrollFactorY)),s*=n.scaleY);var r=o.hexSideLength,u=(s-r)/2+r;return f?Math.floor(e/u):e/u};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=o.baseTileHeight,n=o.tilemapLayer;return n&&(a||(a=n.scene.cameras.main),e=e-(n.y+a.scrollY*(1-n.scrollFactorY)),s*=n.scaleY),f?Math.floor(e/(s/2)):e/(s/2)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),f=function(a,o,s){if(e(a,o,s)){var n=s.data[o][a];return n!==null&&n.index>-1}else return!1};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),f=t(119),a=t(252),o=function(s,n,r,u,h){if(r===void 0&&(r=!0),u===void 0&&(u=!0),!f(s,n,h))return null;var l=h.data[n][s];if(l)h.data[n][s]=r?null:new e(h,-1,s,n,h.tileWidth,h.tileHeight);else return null;return u&&l&&l.collides&&a(s,n,h),l};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(259),a=t(565),o=t(566),s=t(577),n=function(r,u,h,l,d,v){var c;switch(u){case e.ARRAY_2D:c=f(r,h,l,d,v);break;case e.CSV:c=a(r,h,l,d,v);break;case e.TILED_JSON:c=o(r,h,v);break;case e.WELTMEISTER:c=s(r,h,v);break;default:console.warn("Unrecognized tilemap data format: "+u),c=null}return c};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(259),a=function(o,s,n,r,u){var h=s.trim().split(`
`).map(function(d){return d.split(",")}),l=f(o,h,n,r,u);return l.format=e.CSV,l};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(567),f=t(568),a=t(29),o=t(40),s=t(258),n=t(121),r=t(569),u=t(570),h=t(573),l=t(575),d=function(v,c,g){var x=new n({width:c.width,height:c.height,name:v,tileWidth:c.tilewidth,tileHeight:c.tileheight,orientation:s(c.orientation),format:o.TILED_JSON,version:c.version,properties:c.properties,renderOrder:c.renderorder,infinite:c.infinite});x.orientation===a.HEXAGONAL&&(x.hexSideLength=c.hexsidelength),x.layers=h(c,g),x.images=r(c);var A=l(c);return x.tilesets=A.tilesets,x.imageCollections=A.imageCollections,x.objects=u(c),x.tiles=f(x),e(x),x};i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=function(a){for(var o,s,n,r,u,h=0;h<a.layers.length;h++){o=a.layers[h],r=null;for(var l=0;l<o.data.length;l++){u=o.data[l];for(var d=0;d<u.length;d++)s=u[d],!(s===null||s.index<0)&&(n=a.tiles[s.index][2],r=a.tilesets[n],s.width=r.tileWidth,s.height=r.tileHeight,r.tileProperties&&r.tileProperties[s.index-r.firstgid]&&(s.properties=e(s.properties,r.tileProperties[s.index-r.firstgid])))}}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),f=function(a){var o,s,n=[];for(o=0;o<a.imageCollections.length;o++)for(var r=a.imageCollections[o],u=r.images,h=0;h<u.length;h++){var l=u[h];s=new e(l.image,l.gid,r.imageWidth,r.imageHeight,0,0),s.updateTileData(r.imageWidth,r.imageHeight),a.tilesets.push(s)}for(o=0;o<a.tilesets.length;o++){s=a.tilesets[o];for(var d=s.tileMargin,v=s.tileMargin,c=0,g=0,x=0,A=s.firstgid;A<s.firstgid+s.total&&(n[A]=[d,v,o],d+=s.tileWidth+s.tileSpacing,c++,!(c===s.total||(g++,g===s.columns&&(d=s.tileMargin,v+=s.tileHeight+s.tileSpacing,g=0,x++,x===s.rows))));A++);}return n};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=t(161),a=function(o){for(var s=[],n=[],r=f(o);r.i<r.layers.length||n.length>0;){if(r.i>=r.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=n.pop();continue}var u=r.layers[r.i];if(r.i++,u.type!=="imagelayer"){if(u.type==="group"){var h=f(o,u,r);n.push(r),r=h}continue}var l=e(u,"offsetx",0)+e(u,"startx",0),d=e(u,"offsety",0)+e(u,"starty",0);s.push({name:r.name+u.name,image:u.image,x:r.x+l+u.x,y:r.y+d+u.y,alpha:r.opacity*u.opacity,visible:r.visible&&u.visible,properties:e(u,"properties",{})})}return s};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=t(260),a=t(572),o=t(161),s=function(n){for(var r=[],u=[],h=o(n);h.i<h.layers.length||u.length>0;){if(h.i>=h.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=u.pop();continue}var l=h.layers[h.i];if(h.i++,l.opacity*=h.opacity,l.visible=h.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var d=o(n,l,h);u.push(h),h=d}continue}l.name=h.name+l.name;for(var v=h.x+e(l,"startx",0)+e(l,"offsetx",0),c=h.y+e(l,"starty",0)+e(l,"offsety",0),g=[],x=0;x<l.objects.length;x++){var A=f(l.objects[x],v,c);g.push(A)}var T=new a(l);T.objects=g,r.push(T)}return r};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(126),f=function(a,o){for(var s={},n=0;n<o.length;n++){var r=o[n];e(a,r)&&(s[r]=a[r])}return s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=new e({initialize:function(s){s===void 0&&(s={}),this.name=f(s,"name","object layer"),this.opacity=f(s,"opacity",1),this.properties=f(s,"properties",{}),this.propertyTypes=f(s,"propertytypes",{}),this.type=f(s,"type","objectgroup"),this.visible=f(s,"visible",!0),this.objects=f(s,"objects",[])}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(574),f=t(29),a=t(161),o=t(258),s=t(2),n=t(120),r=t(261),u=t(85),h=function(l,d){for(var v=s(l,"infinite",!1),c=[],g=[],x=a(l);x.i<x.layers.length||g.length>0;){if(x.i>=x.layers.length){if(g.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}x=g.pop();continue}var A=x.layers[x.i];if(x.i++,A.type!=="tilelayer"){if(A.type==="group"){var T=a(l,A,x);g.push(x),x=T}continue}if(A.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+A.name+"'");continue}else if(A.encoding&&A.encoding==="base64"){if(A.chunks)for(var E=0;E<A.chunks.length;E++)A.chunks[E].data=e(A.chunks[E].data);A.data&&(A.data=e(A.data)),delete A.encoding}var S,C,P,R,M=[],L=0;if(v){var F=s(A,"startx",0)+A.x,I=s(A,"starty",0)+A.y;S=new n({name:x.name+A.name,x:x.x+s(A,"offsetx",0)+F*l.tilewidth,y:x.y+s(A,"offsety",0)+I*l.tileheight,width:A.width,height:A.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:x.opacity*A.opacity,visible:x.visible&&A.visible,properties:s(A,"properties",[]),orientation:o(l.orientation)}),S.orientation===f.HEXAGONAL&&(S.hexSideLength=l.hexsidelength);for(var w=0;w<A.height;w++){M.push([null]);for(var U=0;U<A.width;U++)M[w][U]=null}for(w=0,X=A.chunks.length;w<X;w++)for(var z=A.chunks[w],W=z.x-F,H=z.y-I,D=0,O=0,B=z.data.length;O<B;O++){var N=L+W,G=D+H;C=r(z.data[O]),C.gid>0?(P=new u(S,C.gid,N,G,l.tilewidth,l.tileheight),P.rotation=C.rotation,P.flipX=C.flipped,M[G][N]=P):(R=d?null:new u(S,-1,N,G,l.tilewidth,l.tileheight),M[G][N]=R),L++,L===z.width&&(D++,L=0)}}else{S=new n({name:x.name+A.name,x:x.x+s(A,"offsetx",0)+A.x,y:x.y+s(A,"offsety",0)+A.y,width:A.width,height:A.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:x.opacity*A.opacity,visible:x.visible&&A.visible,properties:s(A,"properties",[]),orientation:o(l.orientation)}),S.orientation===f.HEXAGONAL&&(S.hexSideLength=l.hexsidelength);for(var V=[],Y=0,X=A.data.length;Y<X;Y++)C=r(A.data[Y]),C.gid>0?(P=new u(S,C.gid,L,M.length,l.tilewidth,l.tileheight),P.rotation=C.rotation,P.flipX=C.flipped,V.push(P)):(R=d?null:new u(S,-1,L,M.length,l.tilewidth,l.tileheight),V.push(R)),L++,L===A.width&&(M.push(V),L=0,V=[])}S.data=M,c.push(S)}return c};i.exports=h},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=window.atob(e),a=f.length,o=new Array(a/4),s=0;s<a;s+=4)o[s/4]=(f.charCodeAt(s)|f.charCodeAt(s+1)<<8|f.charCodeAt(s+2)<<16|f.charCodeAt(s+3)<<24)>>>0;return o};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),f=t(576),a=t(260),o=t(1453),s=function(n){for(var r=[],u=[],h=null,l,d=0;d<n.tilesets.length;d++){var v=n.tilesets[d];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var c=new e(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing);if(n.version>1){var g=void 0,x=void 0;if(Array.isArray(v.tiles)){g=g||{},x=x||{};for(var A=0;A<v.tiles.length;A++){var T=v.tiles[A];if(T.properties){var E={};T.properties.forEach(function(w){E[w.name]=w.value}),x[T.id]=E}if(T.objectgroup&&((g[T.id]||(g[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var S=T.objectgroup.objects.map(function(w){return a(w)});g[T.id].objectgroup.objects=S}T.animation&&((g[T.id]||(g[T.id]={})).animation=T.animation),T.type&&((g[T.id]||(g[T.id]={})).type=T.type)}}Array.isArray(v.wangsets)&&(g=g||{},x=x||{},o(v.wangsets,g)),g&&(c.tileData=g,c.tileProperties=x)}else if(v.tileproperties&&(c.tileProperties=v.tileproperties),v.tiles){c.tileData=v.tiles;for(l in c.tileData){var C=c.tileData[l].objectgroup;if(C&&C.objects){var P=C.objects.map(function(w){return a(w)});c.tileData[l].objectgroup.objects=P}}}c.updateTileData(v.imagewidth,v.imageheight),r.push(c)}else{var R=new f(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),M=0;for(A=0;A<v.tiles.length;A++){T=v.tiles[A];var L=T.image,F=parseInt(T.id,10),I=v.firstgid+F;R.addImage(I,L),M=Math.max(F,M)}R.maxId=M,u.push(R)}h&&(h.lastgid=v.firstgid-1),h=v}return{tilesets:r,imageCollections:u}};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,s,n,r,u,h,l){(n===void 0||n<=0)&&(n=32),(r===void 0||r<=0)&&(r=32),u===void 0&&(u=0),h===void 0&&(h=0),this.name=o,this.firstgid=s|0,this.imageWidth=n|0,this.imageHeight=r|0,this.imageMargin=u|0,this.imageSpacing=h|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},addImage:function(a,o){return this.images.push({gid:a,image:o}),this.total++,this}});i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(121),a=t(578),o=t(579),s=function(n,r,u){if(r.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var h=0,l=0,d=0;d<r.layer.length;d++)r.layer[d].width>h&&(h=r.layer[d].width),r.layer[d].height>l&&(l=r.layer[d].height);var v=new f({width:h,height:l,name:n,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:e.WELTMEISTER});return v.layers=a(r,u),v.tilesets=o(r),v};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(120),f=t(85),a=function(o,s){for(var n=[],r=0;r<o.layer.length;r++){for(var u=o.layer[r],h=new e({name:u.name,width:u.width,height:u.height,tileWidth:u.tilesize,tileHeight:u.tilesize,visible:u.visible===1}),l=[],d=[],v=0;v<u.data.length;v++){for(var c=0;c<u.data[v].length;c++){var g=u.data[v][c]-1,x;g>-1?x=new f(h,g,c,v,u.tilesize,u.tilesize):x=s?null:new f(h,-1,c,v,u.tilesize,u.tilesize),l.push(x)}d.push(l),l=[]}h.data=d,n.push(h)}return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),f=function(a){for(var o=[],s=[],n=0;n<a.layer.length;n++){var r=a.layer[n],u=r.tilesetName;u!==""&&s.indexOf(u)===-1&&(s.push(u),o.push(new e(u,0,r.tilesize,r.tilesize,0,0)))}return o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(36),a=t(40),o=t(2),s=t(120),n=t(29),r=t(362),u=t(74),h=t(73),l=t(85),d=t(251),v=t(581),c=t(122),g=new e({initialize:function(A,T){this.scene=A,this.tileWidth=T.tileWidth,this.tileHeight=T.tileHeight,this.width=T.width,this.height=T.height,this.orientation=T.orientation,this.renderOrder=T.renderOrder,this.format=T.format,this.version=T.version,this.properties=T.properties,this.widthInPixels=T.widthInPixels,this.heightInPixels=T.heightInPixels,this.imageCollections=T.imageCollections,this.images=T.images,this.layers=T.layers,this.tilesets=T.tilesets,this.objects=T.objects,this.currentLayerIndex=0,this.hexSideLength=T.hexSideLength;var E=this.orientation;this._convert={WorldToTileXY:d.GetWorldToTileXYFunction(E),WorldToTileX:d.GetWorldToTileXFunction(E),WorldToTileY:d.GetWorldToTileYFunction(E),TileToWorldXY:d.GetTileToWorldXYFunction(E),TileToWorldX:d.GetTileToWorldXFunction(E),TileToWorldY:d.GetTileToWorldYFunction(E)}},createBlankDynamicLayer:function(x,A,T,E,S,C,P,R){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(x,A,T,E,S,C,P,R)},createDynamicLayer:function(x,A,T,E){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(x,A,T,E)},createStaticLayer:function(x,A,T,E){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(x,A,T,E)},setRenderOrder:function(x){var A=["right-down","left-down","right-up","left-up"];return typeof x=="number"&&(x=A[x]),A.indexOf(x)>-1&&(this.renderOrder=x),this},addTilesetImage:function(x,A,T,E,S,C,P){if(x===void 0)return null;if(A==null&&(A=x),!this.scene.sys.textures.exists(A))return console.warn("Invalid Tileset Image: "+A),null;var R=this.scene.sys.textures.get(A),M=this.getTilesetIndex(x);if(M===null&&this.format===a.TILED_JSON)return console.warn("No data found for Tileset: "+x),null;var L=this.tilesets[M];return L?(L.setTileSize(T,E),L.setSpacing(S,C),L.setImage(R),L):(T===void 0&&(T=this.tileWidth),E===void 0&&(E=this.tileHeight),S===void 0&&(S=0),C===void 0&&(C=0),P===void 0&&(P=0),L=new c(x,P,T,E,S,C),L.setImage(R),this.tilesets.push(L),L)},copy:function(x,A,T,E,S,C,P,R){return R=this.getLayer(R),R!==null?(d.Copy(x,A,T,E,S,C,P,R),this):null},createBlankLayer:function(x,A,T,E,S,C,P,R){T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S=this.width),C===void 0&&(C=this.height),P===void 0&&(P=this.tileWidth),R===void 0&&(R=this.tileHeight);var M=this.getLayerIndex(x);if(M!==null)return console.warn("Invalid Tilemap Layer ID: "+x),null;for(var L=new s({name:x,tileWidth:P,tileHeight:R,width:S,height:C,orientation:this.orientation}),F,I=0;I<C;I++){F=[];for(var w=0;w<S;w++)F.push(new l(L,-1,w,I,P,R,this.tileWidth,this.tileHeight));L.data.push(F)}this.layers.push(L),this.currentLayerIndex=this.layers.length-1;var U=new v(this.scene,this,this.currentLayerIndex,A,T,E);return U.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(U),U},createLayer:function(x,A,T,E){var S=this.getLayerIndex(x);if(S===null)return console.warn("Invalid Tilemap Layer ID: "+x),typeof x=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var C=this.layers[S];if(C.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+x),null;this.currentLayerIndex=S,T===void 0&&(T=C.x),E===void 0&&(E=C.y);var P=new v(this.scene,this,S,A,T,E);return P.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(P),P},createFromObjects:function(x,A){var T=[],E=this.getObjectLayer(x);if(!E)return console.warn("createFromObjects: Invalid objectLayerName given: "+x),T;Array.isArray(A)||(A=[A]);for(var S=E.objects,C=0;C<A.length;C++){for(var P=A[C],R=o(P,"id",null),M=o(P,"gid",null),L=o(P,"name",null),F,I=[],w=0;w<S.length;w++)F=S[w],(R===null&&M===null&&L===null||R!==null&&F.id===R||M!==null&&F.gid===M||L!==null&&F.name===L)&&I.push(F);for(var U=o(P,"classType",h),z=o(P,"scene",this.scene),W=o(P,"container",null),H=o(P,"key",null),D=o(P,"frame",null),O=0;O<I.length;O++){F=I[O];var B=new U(z);B.setName(F.name),B.setPosition(F.x,F.y),B.setTexture(H,D),F.width&&(B.displayWidth=F.width),F.height&&(B.displayHeight=F.height);var N={x:B.originX*F.width,y:(B.originY-1)*F.height};if(F.rotation){var G=f(F.rotation);r(N,G),B.rotation=G}if(B.x+=N.x,B.y+=N.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&B.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(B.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(Y){var X=Y.name;B[X]!==void 0?B[X]=Y.value:B.setData(X,Y.value)});else for(var V in F.properties)B[V]!==void 0?B[V]=F.properties[V]:B.setData(V,F.properties[V]);W?W.add(B):z.add.existing(B),T.push(B)}}return T},createFromTiles:function(x,A,T,E,S,C){return C=this.getLayer(C),C===null?null:d.CreateFromTiles(x,A,T,E,S,C)},fill:function(x,A,T,E,S,C,P){return C===void 0&&(C=!0),P=this.getLayer(P),P===null?null:(d.Fill(x,A,T,E,S,C,P),this)},filterObjects:function(x,A,T){if(typeof x=="string"){var E=x;if(x=this.getObjectLayer(x),!x)return console.warn("No object layer found with the name: "+E),null}return x.objects.filter(A,T)},filterTiles:function(x,A,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:d.FilterTiles(x,A,T,E,S,C,P,R)},findByIndex:function(x,A,T,E){return E=this.getLayer(E),E===null?null:d.FindByIndex(x,A,T,E)},findObject:function(x,A,T){if(typeof x=="string"){var E=x;if(x=this.getObjectLayer(x),!x)return console.warn("No object layer found with the name: "+E),null}return x.objects.find(A,T)||null},findTile:function(x,A,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:d.FindTile(x,A,T,E,S,C,P,R)},forEachTile:function(x,A,T,E,S,C,P,R){return R=this.getLayer(R),R===null?null:(d.ForEachTile(x,A,T,E,S,C,P,R),this)},getImageIndex:function(x){return this.getIndex(this.images,x)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(x){return x.name})},getIndex:function(x,A){for(var T=0;T<x.length;T++)if(x[T].name===A)return T;return null},getLayer:function(x){var A=this.getLayerIndex(x);return A!==null?this.layers[A]:null},getObjectLayer:function(x){var A=this.getIndex(this.objects,x);return A!==null?this.objects[A]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(x){return x.name})},getLayerIndex:function(x){return x===void 0?this.currentLayerIndex:typeof x=="string"?this.getLayerIndexByName(x):typeof x=="number"&&x<this.layers.length?x:x instanceof v?x.layerIndex:null},getLayerIndexByName:function(x){return this.getIndex(this.layers,x)},getTileAt:function(x,A,T,E){return E=this.getLayer(E),E===null?null:d.GetTileAt(x,A,T,E)},getTileAtWorldXY:function(x,A,T,E,S){return S=this.getLayer(S),S===null?null:d.GetTileAtWorldXY(x,A,T,E,S)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(x){return x.name})},getTilesWithin:function(x,A,T,E,S,C){return C=this.getLayer(C),C===null?null:d.GetTilesWithin(x,A,T,E,S,C)},getTilesWithinShape:function(x,A,T,E){return E=this.getLayer(E),E===null?null:d.GetTilesWithinShape(x,A,T,E)},getTilesWithinWorldXY:function(x,A,T,E,S,C,P){return P=this.getLayer(P),P===null?null:d.GetTilesWithinWorldXY(x,A,T,E,S,C,P)},getTileset:function(x){var A=this.getIndex(this.tilesets,x);return A!==null?this.tilesets[A]:null},getTilesetIndex:function(x){return this.getIndex(this.tilesets,x)},hasTileAt:function(x,A,T){return T=this.getLayer(T),T===null?null:d.HasTileAt(x,A,T)},hasTileAtWorldXY:function(x,A,T,E){return E=this.getLayer(E),E===null?null:d.HasTileAtWorldXY(x,A,T,E)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(x){this.setLayer(x)}},putTileAt:function(x,A,T,E,S){return E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:d.PutTileAt(x,A,T,E,S)},putTileAtWorldXY:function(x,A,T,E,S,C){return E===void 0&&(E=!0),C=this.getLayer(C),C===null?null:d.PutTileAtWorldXY(x,A,T,E,S,C)},putTilesAt:function(x,A,T,E,S){return E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(d.PutTilesAt(x,A,T,E,S),this)},randomize:function(x,A,T,E,S,C){return C=this.getLayer(C),C===null?null:(d.Randomize(x,A,T,E,S,C),this)},calculateFacesAt:function(x,A,T){return T=this.getLayer(T),T===null?null:(d.CalculateFacesAt(x,A,T),this)},calculateFacesWithin:function(x,A,T,E,S){return S=this.getLayer(S),S===null?null:(d.CalculateFacesWithin(x,A,T,E,S),this)},removeLayer:function(x){var A=this.getLayerIndex(x);if(A!==null){u(this.layers,A);for(var T=A;T<this.layers.length;T++)this.layers[T].tilemapLayer&&this.layers[T].tilemapLayer.layerIndex--;return this.currentLayerIndex===A&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(x){var A=this.getLayerIndex(x);return A!==null?(x=this.layers[A],x.destroy(),u(this.layers,A),this.currentLayerIndex===A&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var x=this.layers,A=0;A<x.length;A++)x[A].tilemapLayer&&x[A].tilemapLayer.destroy(!1);return x.length=0,this.currentLayerIndex=0,this},removeTile:function(x,A,T){A===void 0&&(A=-1),T===void 0&&(T=!0);var E=[];Array.isArray(x)||(x=[x]);for(var S=0;S<x.length;S++){var C=x[S];E.push(this.removeTileAt(C.x,C.y,!0,T,C.tilemapLayer)),A>-1&&this.putTileAt(A,C.x,C.y,T,C.tilemapLayer)}return E},removeTileAt:function(x,A,T,E,S){return T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:d.RemoveTileAt(x,A,T,E,S)},removeTileAtWorldXY:function(x,A,T,E,S,C){return T===void 0&&(T=!0),E===void 0&&(E=!0),C=this.getLayer(C),C===null?null:d.RemoveTileAtWorldXY(x,A,T,E,S,C)},renderDebug:function(x,A,T){return T=this.getLayer(T),T===null?null:(this.orientation===n.ORTHOGONAL&&d.RenderDebug(x,A,T),this)},renderDebugFull:function(x,A){for(var T=this.layers,E=0;E<T.length;E++)d.RenderDebug(x,A,T[E]);return this},replaceByIndex:function(x,A,T,E,S,C,P){return P=this.getLayer(P),P===null?null:(d.ReplaceByIndex(x,A,T,E,S,C,P),this)},setCollision:function(x,A,T,E,S){return A===void 0&&(A=!0),T===void 0&&(T=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(d.SetCollision(x,A,T,E,S),this)},setCollisionBetween:function(x,A,T,E,S){return T===void 0&&(T=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(d.SetCollisionBetween(x,A,T,E,S),this)},setCollisionByProperty:function(x,A,T,E){return A===void 0&&(A=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(d.SetCollisionByProperty(x,A,T,E),this)},setCollisionByExclusion:function(x,A,T,E){return A===void 0&&(A=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(d.SetCollisionByExclusion(x,A,T,E),this)},setCollisionFromCollisionGroup:function(x,A,T){return x===void 0&&(x=!0),A===void 0&&(A=!0),T=this.getLayer(T),T===null?null:(d.SetCollisionFromCollisionGroup(x,A,T),this)},setTileIndexCallback:function(x,A,T,E){return E=this.getLayer(E),E===null?null:(d.SetTileIndexCallback(x,A,T,E),this)},setTileLocationCallback:function(x,A,T,E,S,C,P){return P=this.getLayer(P),P===null?null:(d.SetTileLocationCallback(x,A,T,E,S,C,P),this)},setLayer:function(x){var A=this.getLayerIndex(x);return A!==null&&(this.currentLayerIndex=A),this},setBaseTileSize:function(x,A){this.tileWidth=x,this.tileHeight=A,this.widthInPixels=this.width*x,this.heightInPixels=this.height*A;for(var T=0;T<this.layers.length;T++){this.layers[T].baseTileWidth=x,this.layers[T].baseTileHeight=A;for(var E=this.layers[T].data,S=this.layers[T].width,C=this.layers[T].height,P=0;P<C;P++)for(var R=0;R<S;R++){var M=E[P][R];M!==null&&M.setSize(void 0,void 0,x,A)}}return this},setLayerTileSize:function(x,A,T){if(T=this.getLayer(T),T===null)return this;T.tileWidth=x,T.tileHeight=A;for(var E=T.data,S=T.width,C=T.height,P=0;P<C;P++)for(var R=0;R<S;R++){var M=E[P][R];M!==null&&M.setSize(x,A)}return this},shuffle:function(x,A,T,E,S){return S=this.getLayer(S),S===null?null:(d.Shuffle(x,A,T,E,S),this)},swapByIndex:function(x,A,T,E,S,C,P){return P=this.getLayer(P),P===null?null:(d.SwapByIndex(x,A,T,E,S,C,P),this)},tileToWorldX:function(x,A,T){return T=this.getLayer(T),T===null?null:this._convert.TileToWorldX(x,A,T)},tileToWorldY:function(x,A,T){return T=this.getLayer(T),T===null?null:this._convert.TileToWorldY(x,A,T)},tileToWorldXY:function(x,A,T,E,S){return S=this.getLayer(S),S===null?null:this._convert.TileToWorldXY(x,A,T,E,S)},weightedRandomize:function(x,A,T,E,S,C){return C=this.getLayer(C),C===null?null:(d.WeightedRandomize(A,T,E,S,x,C),this)},worldToTileX:function(x,A,T,E){return E=this.getLayer(E),E===null?null:this._convert.WorldToTileX(x,A,T,E)},worldToTileY:function(x,A,T,E){return E=this.getLayer(E),E===null?null:this._convert.WorldToTileY(x,A,T,E)},worldToTileXY:function(x,A,T,E,S,C){return C=this.getLayer(C),C===null?null:this._convert.WorldToTileXY(x,A,T,E,S,C)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});i.exports=g},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),a=t(15),o=t(251),s=t(1456),n=new e({Extends:a,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Depth,f.Flip,f.GetBounds,f.Origin,f.Pipeline,f.Transform,f.Visible,f.ScrollFactor,s],initialize:function(u,h,l,d,v,c){a.call(this,u,"TilemapLayer"),this.isTilemap=!0,this.tilemap=h,this.layerIndex=l,this.layer=h.layers[l],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(d),this.setAlpha(this.layer.alpha),this.setPosition(v,c),this.setOrigin(),this.setSize(h.tileWidth*this.layer.width,h.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(r){var u=[],h=[],l=this.tilemap;Array.isArray(r)||(r=[r]);for(var d=0;d<r.length;d++){var v=r[d];if(typeof v=="string"&&(v=l.getTileset(v)),v){h.push(v);for(var c=v.firstgid,g=0;g<v.total;g++)u[c+g]=v}}this.gidMap=u,this.tileset=h},setRenderOrder:function(r){var u=["right-down","left-down","right-up","left-up"];return typeof r=="string"&&(r=u.indexOf(r)),r>=0&&r<4&&(this._renderOrder=r),this},calculateFacesAt:function(r,u){return o.CalculateFacesAt(r,u,this.layer),this},calculateFacesWithin:function(r,u,h,l){return o.CalculateFacesWithin(r,u,h,l,this.layer),this},createFromTiles:function(r,u,h,l,d){return o.CreateFromTiles(r,u,h,l,d,this.layer)},cull:function(r){return this.cullCallback(this.layer,r,this.culledTiles,this._renderOrder)},copy:function(r,u,h,l,d,v,c){return o.Copy(r,u,h,l,d,v,c,this.layer),this},fill:function(r,u,h,l,d,v){return o.Fill(r,u,h,l,d,v,this.layer),this},filterTiles:function(r,u,h,l,d,v,c){return o.FilterTiles(r,u,h,l,d,v,c,this.layer)},findByIndex:function(r,u,h){return o.FindByIndex(r,u,h,this.layer)},findTile:function(r,u,h,l,d,v,c){return o.FindTile(r,u,h,l,d,v,c,this.layer)},forEachTile:function(r,u,h,l,d,v,c){return o.ForEachTile(r,u,h,l,d,v,c,this.layer),this},getTileAt:function(r,u,h){return o.GetTileAt(r,u,h,this.layer)},getTileAtWorldXY:function(r,u,h,l){return o.GetTileAtWorldXY(r,u,h,l,this.layer)},getTilesWithin:function(r,u,h,l,d){return o.GetTilesWithin(r,u,h,l,d,this.layer)},getTilesWithinShape:function(r,u,h){return o.GetTilesWithinShape(r,u,h,this.layer)},getTilesWithinWorldXY:function(r,u,h,l,d,v){return o.GetTilesWithinWorldXY(r,u,h,l,d,v,this.layer)},hasTileAt:function(r,u){return o.HasTileAt(r,u,this.layer)},hasTileAtWorldXY:function(r,u,h){return o.HasTileAtWorldXY(r,u,h,this.layer)},putTileAt:function(r,u,h,l){return o.PutTileAt(r,u,h,l,this.layer)},putTileAtWorldXY:function(r,u,h,l,d){return o.PutTileAtWorldXY(r,u,h,l,d,this.layer)},putTilesAt:function(r,u,h,l){return o.PutTilesAt(r,u,h,l,this.layer),this},randomize:function(r,u,h,l,d){return o.Randomize(r,u,h,l,d,this.layer),this},removeTileAt:function(r,u,h,l){return o.RemoveTileAt(r,u,h,l,this.layer)},removeTileAtWorldXY:function(r,u,h,l,d){return o.RemoveTileAtWorldXY(r,u,h,l,d,this.layer)},renderDebug:function(r,u){return o.RenderDebug(r,u,this.layer),this},replaceByIndex:function(r,u,h,l,d,v){return o.ReplaceByIndex(r,u,h,l,d,v,this.layer),this},setSkipCull:function(r){return r===void 0&&(r=!0),this.skipCull=r,this},setCullPadding:function(r,u){return r===void 0&&(r=1),u===void 0&&(u=1),this.cullPaddingX=r,this.cullPaddingY=u,this},setCollision:function(r,u,h,l){return o.SetCollision(r,u,h,this.layer,l),this},setCollisionBetween:function(r,u,h,l){return o.SetCollisionBetween(r,u,h,l,this.layer),this},setCollisionByProperty:function(r,u,h){return o.SetCollisionByProperty(r,u,h,this.layer),this},setCollisionByExclusion:function(r,u,h){return o.SetCollisionByExclusion(r,u,h,this.layer),this},setCollisionFromCollisionGroup:function(r,u){return o.SetCollisionFromCollisionGroup(r,u,this.layer),this},setTileIndexCallback:function(r,u,h){return o.SetTileIndexCallback(r,u,h,this.layer),this},setTileLocationCallback:function(r,u,h,l,d,v){return o.SetTileLocationCallback(r,u,h,l,d,v,this.layer),this},shuffle:function(r,u,h,l){return o.Shuffle(r,u,h,l,this.layer),this},swapByIndex:function(r,u,h,l,d,v){return o.SwapByIndex(r,u,h,l,d,v,this.layer),this},tileToWorldX:function(r,u){return this.tilemap.tileToWorldX(r,u,this)},tileToWorldY:function(r,u){return this.tilemap.tileToWorldY(r,u,this)},tileToWorldXY:function(r,u,h,l){return this.tilemap.tileToWorldXY(r,u,h,l,this)},weightedRandomize:function(r,u,h,l,d){return o.WeightedRandomize(u,h,l,d,r,this.layer),this},worldToTileX:function(r,u,h){return this.tilemap.worldToTileX(r,u,h,this)},worldToTileY:function(r,u,h){return this.tilemap.worldToTileY(r,u,h,this)},worldToTileXY:function(r,u,h,l,d){return this.tilemap.worldToTileXY(r,u,h,l,d,this)},destroy:function(r){r===void 0&&(r=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),r&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))}});i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),a=new e({initialize:function(s){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(s)},reset:function(o){return this.delay=f(o,"delay",0),this.repeat=f(o,"repeat",0),this.loop=f(o,"loop",!1),this.callback=f(o,"callback",void 0),this.callbackScope=f(o,"callbackScope",this.callback),this.args=f(o,"args",[]),this.timeScale=f(o,"timeScale",1),this.startAt=f(o,"startAt",0),this.paused=f(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,s=this.elapsed+this.delay*(this.repeat-this.repeatCount);return s/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1465),f=function(a){var o,s=[];if(a.hasOwnProperty("props"))for(o in a.props)o.substr(0,1)!=="_"&&s.push({key:o,value:a.props[o]});else for(o in a)e.indexOf(o)===-1&&o.substr(0,1)!=="_"&&s.push({key:o,value:a[o]});return s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=function(a){var o=e(a,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),f=t(13),a=t(99),o=t(80),s=t(162),n=t(6),r=t(264),u=t(266),h=t(268),l=function(d,v,c){c===void 0&&(c=e);var g=n(v,"from",0),x=n(v,"to",1),A=[{value:g}],T=s(v,"delay",c.delay),E=s(v,"duration",c.duration),S=n(v,"easeParams",c.easeParams),C=o(n(v,"ease",c.ease),S),P=s(v,"hold",c.hold),R=s(v,"repeat",c.repeat),M=s(v,"repeatDelay",c.repeatDelay),L=a(v,"yoyo",c.yoyo),F=[],I=r("value",x),w=h(A[0],0,"value",I.getEnd,I.getStart,I.getActive,C,T,E,L,P,R,M,!1,!1);w.start=g,w.current=g,w.to=x,F.push(w);var U=new u(d,F,A);U.offset=f(v,"offset",null),U.completeDelay=f(v,"completeDelay",0),U.loop=Math.round(f(v,"loop",0)),U.loopDelay=Math.round(f(v,"loopDelay",0)),U.paused=a(v,"paused",!1),U.useFrames=a(v,"useFrames",!1);for(var z=n(v,"callbackScope",U),W=[U,null],H=u.TYPES,D=0;D<H.length;D++){var O=H[D],B=n(v,O,!1);if(B){var N=n(v,O+"Scope",z),G=n(v,O+"Params",[]);U.setCallback(O,B,W.concat(G),N)}}return U};i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(80),f=t(6),a=t(14),o=function(s,n){n===void 0&&(n={});var r,u=f(n,"start",0),h=f(n,"ease",null),l=f(n,"grid",null),d=f(n,"from",0),v=d==="first",c=d==="center",g=d==="last",x=typeof d=="number",A=Array.isArray(s),T=parseFloat(A?s[0]:s),E=A?parseFloat(s[1]):0,S=Math.max(T,E);if(A&&(u+=T),l){var C=l[0],P=l[1],R=0,M=0,L=0,F=0,I=[];g?(R=C-1,M=P-1):x?(R=d%C,M=Math.floor(d/C)):c&&(R=(C-1)/2,M=(P-1)/2);for(var w=a.MIN_SAFE_INTEGER,U=0;U<P;U++){I[U]=[];for(var z=0;z<C;z++){L=R-z,F=M-U;var W=Math.sqrt(L*L+F*F);W>w&&(w=W),I[U][z]=W}}}var H=h?e(h):null;return l?r=function(D,O,B,N){var G=0,V=N%C,Y=Math.floor(N/C);V>=0&&V<C&&Y>=0&&Y<P&&(G=I[Y][V]);var X;if(A){var b=E-T;H?X=G/w*b*H(G/w):X=G/w*b}else H?X=G*T*H(G/w):X=G*T;return X+u}:r=function(D,O,B,N,G){G--;var V;v?V=N:c?V=Math.abs(G/2-N):g?V=G-N:x&&(V=Math.abs(d-N));var Y;if(A){var X;c?X=(E-T)/G*(V*2):X=(E-T)/G*V,H?Y=X*H(V/G):Y=X}else H?Y=G*S*H(V/G):Y=V*T;return Y+u},r};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=t(265),a=t(13),o=t(99),s=t(80),n=t(162),r=t(263),u=t(584),h=t(6),l=t(588),d=t(163),v=function(c,g){var x=new l(c);x.completeDelay=a(g,"completeDelay",0),x.loop=Math.round(a(g,"loop",0)),x.loopDelay=Math.round(a(g,"loopDelay",0)),x.paused=o(g,"paused",!1),x.useFrames=o(g,"useFrames",!1);var A=h(g,"callbackScope",x),T=[x],E=h(g,"onStart",!1);if(E){var S=h(g,"onStartScope",A),C=h(g,"onStartParams",[]);x.setCallback("onStart",E,T.concat(C),S)}var P=h(g,"onUpdate",!1);if(P){var R=h(g,"onUpdateScope",A),M=h(g,"onUpdateParams",[]);x.setCallback("onUpdate",P,T.concat(M),R)}var L=h(g,"onLoop",!1);if(L){var F=h(g,"onLoopScope",A),I=h(g,"onLoopParams",[]);x.setCallback("onLoop",L,T.concat(I),F)}var w=h(g,"onYoyo",!1);if(w){var U=h(g,"onYoyoScope",A),z=h(g,"onYoyoParams",[]);x.setCallback("onYoyo",w,T.concat(null,z),U)}var W=h(g,"onComplete",!1);if(W){var H=h(g,"onCompleteScope",A),D=h(g,"onCompleteParams",[]);x.setCallback("onComplete",W,T.concat(D),H)}var O=u(g);if(O.length===0)return x.paused=!0,x;var B=e(f);B.targets=r(g);var N=a(g,"totalDuration",0);N>0?B.duration=Math.floor(N/O.length):B.duration=n(g,"duration",B.duration),B.delay=n(g,"delay",B.delay),B.easeParams=h(g,"easeParams",B.easeParams),B.ease=s(h(g,"ease",B.ease),B.easeParams),B.hold=n(g,"hold",B.hold),B.repeat=n(g,"repeat",B.repeat),B.repeatDelay=n(g,"repeatDelay",B.repeatDelay),B.yoyo=o(g,"yoyo",B.yoyo),B.flipX=o(g,"flipX",B.flipX),B.flipY=o(g,"flipY",B.flipY);for(var G=0;G<O.length;G++)x.queue(d(x,O[G],B));return x};i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(267),o=t(163),s=t(100),n=new e({Extends:f,initialize:function(u){f.call(this),this.manager=u,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=s.PENDING_ADD,this._pausedState=s.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(r,u){this.emit(r,this),u&&u.func.apply(u.scope,u.params)},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},add:function(r){return this.queue(o(this,r))},queue:function(r){return this.isPlaying()||(r.parent=this,r.parentIsTimeline=!0,this.data.push(r),this.totalData=this.data.length),this},hasOffset:function(r){return r.offset!==null},isOffsetAbsolute:function(r){return typeof r=="number"},isOffsetRelative:function(r){var u=typeof r;if(u==="string"){var h=r[0];if(h==="-"||h==="+")return!0}return!1},getRelativeOffset:function(r,u){var h=r[0],l=parseFloat(r.substr(2)),d=u;switch(h){case"+":d+=l;break;case"-":d-=l;break}return Math.max(0,d)},calcDuration:function(){for(var r=0,u=0,h=0,l=0;l<this.totalData;l++){var d=this.data[l];d.init(),this.hasOffset(d)?this.isOffsetAbsolute(d.offset)?(d.calculatedOffset=d.offset,d.offset===0&&(h=0)):this.isOffsetRelative(d.offset)&&(d.calculatedOffset=this.getRelativeOffset(d.offset,r)):d.calculatedOffset=h,r=d.totalDuration+d.calculatedOffset,u+=d.totalDuration,h+=d.totalDuration}this.duration=u,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=s.PAUSED,!1):!0},resetTweens:function(r){for(var u=0;u<this.totalData;u++){var h=this.data[u];h.play(r)}},setCallback:function(r,u,h,l){return n.TYPES.indexOf(r)!==-1&&(this.callbacks[r]={func:u,scope:l,params:h}),this},makeActive:function(r){return this.manager.makeActive(r)},play:function(){if(this.state!==s.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=s.ACTIVE;this.dispatchTimelineEvent(a.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):(this.state=s.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=s.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=s.PENDING_REMOVE,this.dispatchTimelineEvent(a.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(r,u){if(this.state!==s.PAUSED){switch(this.useFrames&&(u=1*this.manager.timeScale),u*=this.timeScale,this.elapsed+=u,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:for(var h=this.totalData,l=0;l<this.totalData;l++){var d=this.data[l];d.update(r,u)&&h--}this.dispatchTimelineEvent(a.TIMELINE_UPDATE,this.callbacks.onUpdate),h===0&&this.nextState();break;case s.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=s.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_LOOP,this.callbacks.onLoop));break;case s.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=s.PENDING_REMOVE,this.dispatchTimelineEvent(a.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===s.PENDING_REMOVE}},stop:function(){this.state=s.PENDING_REMOVE},pause:function(){if(this.state!==s.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED,this.emit(a.TIMELINE_PAUSE,this),this},resume:function(){return this.state===s.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(a.TIMELINE_RESUME,this)),this},hasTarget:function(r){for(var u=0;u<this.data.length;u++)if(this.data[u].hasTarget(r))return!0;return!1},destroy:function(){for(var r=0;r<this.data.length;r++)this.data[r].stop()}});n.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],i.exports=n},function(i,m,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),a=t(32),o=t(2),s=t(64),n={parseBody:function(r,u,h,l){l===void 0&&(l={});for(var d=o(h,"fixtures",[]),v=[],c=0;c<d.length;c++)for(var g=this.parseFixture(d[c]),x=0;x<g.length;x++)v.push(g[x]);var A=a.clone(h,!0);a.extend(A,l,!0),delete A.fixtures,delete A.type;var T=f.create(A);return f.setParts(T,v),f.setPosition(T,{x:r,y:u}),T},parseFixture:function(r){var u=a.extend({},!1,r);delete u.circle,delete u.vertices;var h;if(r.circle){var l=o(r.circle,"x"),d=o(r.circle,"y"),v=o(r.circle,"radius");h=[e.circle(l,d,v,u)]}else r.vertices&&(h=this.parseVertices(r.vertices,u));return h},parseVertices:function(r,u){u===void 0&&(u={});for(var h=[],l=0;l<r.length;l++)s.clockwiseSort(r[l]),h.push(f.create(a.extend({position:s.centre(r[l]),vertices:r[l]},u)));return e.flagCoincidentParts(h)}};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),a={parseBody:function(o,s,n,r){r===void 0&&(r={});var u,h=n.vertices;if(h.length===1)r.vertices=h[0],u=f.create(r),e.flagCoincidentParts(u.parts);else{for(var l=[],d=0;d<h.length;d++){var v=f.create({vertices:h[d]});l.push(v)}e.flagCoincidentParts(l),r.parts=l,u=f.create(r)}return u.label=n.label,f.setPosition(u,{x:o,y:s}),u}};i.exports=a},function(i,m,t){var e={};i.exports=e;var f=t(118),a=t(128),o=t(32),s=t(41),n=t(86);(function(){e.stack=function(r,u,h,l,d,v,c){for(var g=f.create({label:"Stack"}),x=r,A=u,T,E=0,S=0;S<l;S++){for(var C=0,P=0;P<h;P++){var R=c(x,A,P,S,T,E);if(R){var M=R.bounds.max.y-R.bounds.min.y,L=R.bounds.max.x-R.bounds.min.x;M>C&&(C=M),s.translate(R,{x:L*.5,y:M*.5}),x=R.bounds.max.x+d,f.addBody(g,R),T=R,E+=1}else x+=d}A+=C+v,x=r}return g},e.chain=function(r,u,h,l,d,v){for(var c=r.bodies,g=1;g<c.length;g++){var x=c[g-1],A=c[g],T=x.bounds.max.y-x.bounds.min.y,E=x.bounds.max.x-x.bounds.min.x,S=A.bounds.max.y-A.bounds.min.y,C=A.bounds.max.x-A.bounds.min.x,P={bodyA:x,pointA:{x:E*u,y:T*h},bodyB:A,pointB:{x:C*l,y:S*d}},R=o.extend(P,v);f.addConstraint(r,a.create(R))}return r.label+=" Chain",r},e.mesh=function(r,u,h,l,d){var v=r.bodies,c,g,x,A,T;for(c=0;c<h;c++){for(g=1;g<u;g++)x=v[g-1+c*u],A=v[g+c*u],f.addConstraint(r,a.create(o.extend({bodyA:x,bodyB:A},d)));if(c>0)for(g=0;g<u;g++)x=v[g+(c-1)*u],A=v[g+c*u],f.addConstraint(r,a.create(o.extend({bodyA:x,bodyB:A},d))),l&&g>0&&(T=v[g-1+(c-1)*u],f.addConstraint(r,a.create(o.extend({bodyA:T,bodyB:A},d)))),l&&g<u-1&&(T=v[g+1+(c-1)*u],f.addConstraint(r,a.create(o.extend({bodyA:T,bodyB:A},d))))}return r.label+=" Mesh",r},e.pyramid=function(r,u,h,l,d,v,c){return e.stack(r,u,h,l,d,v,function(g,x,A,T,E,S){var C=Math.min(l,Math.ceil(h/2)),P=E?E.bounds.max.x-E.bounds.min.x:0;if(!(T>C)){T=C-T;var R=T,M=h-1-T;if(!(A<R||A>M)){S===1&&s.translate(E,{x:(A+(h%2===1?1:-1))*P,y:0});var L=E?A*P:0;return c(r+L+A*d,x,A,T,E,S)}}})},e.newtonsCradle=function(r,u,h,l,d){for(var v=f.create({label:"Newtons Cradle"}),c=0;c<h;c++){var g=1.9,x=n.circle(r+c*(l*g),u+d,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),A=a.create({pointA:{x:r+c*(l*g),y:u},bodyB:x});f.addBody(v,x),f.addConstraint(v,A)}return v},e.car=function(r,u,h,l,d){var v=s.nextGroup(!0),c=20,g=-h*.5+c,x=h*.5-c,A=0,T=f.create({label:"Car"}),E=n.rectangle(r,u,h,l,{collisionFilter:{group:v},chamfer:{radius:l*.5},density:2e-4}),S=n.circle(r+g,u+A,d,{collisionFilter:{group:v},friction:.8}),C=n.circle(r+x,u+A,d,{collisionFilter:{group:v},friction:.8}),P=a.create({bodyB:E,pointB:{x:g,y:A},bodyA:S,stiffness:1,length:0}),R=a.create({bodyB:E,pointB:{x,y:A},bodyA:C,stiffness:1,length:0});return f.addBody(T,E),f.addBody(T,S),f.addBody(T,C),f.addConstraint(T,P),f.addConstraint(T,R),T},e.softBody=function(r,u,h,l,d,v,c,g,x,A){x=o.extend({inertia:1/0},x),A=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},A);var T=e.stack(r,u,h,l,d,v,function(E,S){return n.circle(E,S,g,x)});return e.mesh(T,h,l,c,A),T.label="Soft Body",T}})()},function(i,m,t){var e={};i.exports=e,t(84);var f=t(32);(function(){e.pathToVertices=function(a,o){typeof window<"u"&&!("SVGPathSeg"in window)&&f.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var s,n,r,u,h,l,d,v,c,g,x=[],A,T,E=0,S=0,C=0;o=o||15;var P=function(M,L,F){var I=F%2===1&&F>1;if(!c||M!=c.x||L!=c.y){c&&I?(A=c.x,T=c.y):(A=0,T=0);var w={x:A+M,y:T+L};(I||!c)&&(c=w),x.push(w),S=A+M,C=T+L}},R=function(M){var L=M.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":S=M.x,C=M.y;break;case"H":S=M.x;break;case"V":C=M.y;break}P(S,C,M.pathSegType)}};for(e._svgPathToAbsolute(a),r=a.getTotalLength(),l=[],s=0;s<a.pathSegList.numberOfItems;s+=1)l.push(a.pathSegList.getItem(s));for(d=l.concat();E<r;){if(g=a.getPathSegAtLength(E),h=l[g],h!=v){for(;d.length&&d[0]!=h;)R(d.shift());v=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=a.getPointAtLength(E),P(u.x,u.y,0);break}E+=o}for(s=0,n=d.length;s<n;++s)R(d[s]);return x},e._svgPathToAbsolute=function(a){for(var o,s,n,r,u,h,l=a.pathSegList,d=0,v=0,c=l.numberOfItems,g=0;g<c;++g){var x=l.getItem(g),A=x.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in x&&(d=x.x),"y"in x&&(v=x.y);else switch("x1"in x&&(n=d+x.x1),"x2"in x&&(u=d+x.x2),"y1"in x&&(r=v+x.y1),"y2"in x&&(h=v+x.y2),"x"in x&&(d+=x.x),"y"in x&&(v+=x.y),A){case"m":l.replaceItem(a.createSVGPathSegMovetoAbs(d,v),g);break;case"l":l.replaceItem(a.createSVGPathSegLinetoAbs(d,v),g);break;case"h":l.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(d),g);break;case"v":l.replaceItem(a.createSVGPathSegLinetoVerticalAbs(v),g);break;case"c":l.replaceItem(a.createSVGPathSegCurvetoCubicAbs(d,v,n,r,u,h),g);break;case"s":l.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(d,v,u,h),g);break;case"q":l.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(d,v,n,r),g);break;case"t":l.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(d,v),g);break;case"a":l.replaceItem(a.createSVGPathSegArcAbs(d,v,x.r1,x.r2,x.angle,x.largeArcFlag,x.sweepFlag),g);break;case"z":case"Z":d=o,v=s;break}(A=="M"||A=="m")&&(o=d,s=v)}}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),a=t(0),o=t(249),s=t(9),n=t(2),r=t(126),u=t(64),h=new a({Extends:s,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(d,v,c){s.call(this),this.tile=v,this.world=d,v.physics.matterBody&&v.physics.matterBody.destroy(),v.physics.matterBody=this;var g=n(c,"body",null),x=n(c,"addToWorld",!0);if(g)this.setBody(g,x);else{var A=v.getCollisionGroup(),T=n(A,"objects",[]);T.length>0?this.setFromTileCollision(c):this.setFromTileRectangle(c)}},setFromTileRectangle:function(l){l===void 0&&(l={}),r(l,"isStatic")||(l.isStatic=!0),r(l,"addToWorld")||(l.addToWorld=!0);var d=this.tile.getBounds(),v=d.x+d.width/2,c=d.y+d.height/2,g=e.rectangle(v,c,d.width,d.height,l);return this.setBody(g,l.addToWorld),this},setFromTileCollision:function(l){l===void 0&&(l={}),r(l,"isStatic")||(l.isStatic=!0),r(l,"addToWorld")||(l.addToWorld=!0);for(var d=this.tile.tilemapLayer.scaleX,v=this.tile.tilemapLayer.scaleY,c=this.tile.getLeft(),g=this.tile.getTop(),x=this.tile.getCollisionGroup(),A=n(x,"objects",[]),T=[],E=0;E<A.length;E++){var S=A[E],C=c+S.x*d,P=g+S.y*v,R=S.width*d,M=S.height*v,L=null;if(S.rectangle)L=e.rectangle(C+R/2,P+M/2,R,M,l);else if(S.ellipse)L=e.circle(C+R/2,P+M/2,R/2,l);else if(S.polygon||S.polyline){var F=S.polygon?S.polygon:S.polyline,I=F.map(function(z){return{x:z.x*d,y:z.y*v}}),w=u.create(I),U=u.centre(w);C+=U.x,P+=U.y,L=e.fromVertices(C,P,w,l)}L&&T.push(L)}return T.length===1?this.setBody(T[0],l.addToWorld):T.length>1&&(l.parts=T,this.setBody(f.create(l),l.addToWorld)),this},setBody:function(l,d){return d===void 0&&(d=!0),this.body&&this.removeBody(),this.body=l,this.body.gameObject=this,d&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1399);e.Body=t(41),e.Composite=t(118),e.World=t(596),e.Detector=t(273),e.Grid=t(597),e.Pairs=t(598),e.Pair=t(250),e.Query=t(1400),e.Resolver=t(599),e.SAT=t(274),e.Constraint=t(128),e.Common=t(32),e.Engine=t(1401),e.Events=t(166),e.Sleeping=t(165),e.Plugin=t(595),e.Bodies=t(86),e.Composites=t(591),e.Axes=t(271),e.Bounds=t(84),e.Svg=t(592),e.Vector=t(83),e.Vertices=t(64),e.World.add=e.Composite.add,e.World.remove=e.Composite.remove,e.World.addComposite=e.Composite.addComposite,e.World.addBody=e.Composite.addBody,e.World.addConstraint=e.Composite.addConstraint,e.World.clear=e.Composite.clear,i.exports=e},function(i,m,t){var e={};i.exports=e;var f=t(32);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||f.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var o=e._registry[a.name],s=e.versionParse(a.version).number,n=e.versionParse(o.version).number;s>n?(f.warn("Plugin.register:",e.toString(o),"was upgraded to",e.toString(a)),e._registry[a.name]=a):s<n?f.warn("Plugin.register:",e.toString(o),"can not be downgraded to",e.toString(a)):a!==o&&f.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,o){return a.used.indexOf(o)>-1},e.isFor=function(a,o){var s=a.for&&e.dependencyParse(a.for);return!a.for||o.name===s.name&&e.versionSatisfies(o.version,s.range)},e.use=function(a,o){if(a.uses=(a.uses||[]).concat(o||[]),a.uses.length===0){f.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var s=e.dependencies(a),n=f.topologicalSort(s),r=[],u=0;u<n.length;u+=1)if(n[u]!==a.name){var h=e.resolve(n[u]);if(!h){r.push("\u274C "+n[u]);continue}e.isUsed(a,h.name)||(e.isFor(h,a)||(f.warn("Plugin.use:",e.toString(h),"is for",h.for,"but installed on",e.toString(a)+"."),h._warned=!0),h.install?h.install(a):(f.warn("Plugin.use:",e.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(r.push("\u{1F536} "+e.toString(h)),delete h._warned):r.push("\u2705 "+e.toString(h)),a.used.push(h.name))}r.length>0&&!h.silent&&f.info(r.join("  "))},e.dependencies=function(a,o){var s=e.dependencyParse(a),n=s.name;if(o=o||{},!(n in o)){a=e.resolve(a)||a,o[n]=f.map(a.uses||[],function(u){e.isPlugin(u)&&e.register(u);var h=e.dependencyParse(u),l=e.resolve(u);return l&&!e.versionSatisfies(l.version,h.range)?(f.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(h),"used by",e.toString(s)+"."),l._warned=!0,a._warned=!0):l||(f.warn("Plugin.dependencies:",e.toString(u),"used by",e.toString(s),"could not be resolved."),a._warned=!0),h.name});for(var r=0;r<o[n].length;r+=1)e.dependencies(o[n][r],o);return o}},e.dependencyParse=function(a){if(f.isString(a)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(a)||f.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(a)||f.warn("Plugin.versionParse:",a,"is not a valid version or range.");var s=a.split("-");a=s[0];var n=isNaN(Number(a[0])),r=n?a.substr(1):a,u=f.map(r.split("."),function(h){return Number(h)});return{isRange:n,version:r,range:a,operator:n?a[0]:"",parts:u,prerelease:s[1],number:u[0]*1e8+u[1]*1e4+u[2]}},e.versionSatisfies=function(a,o){o=o||"*";var s=e.versionParse(o),n=s.parts,r=e.versionParse(a),u=r.parts;if(s.isRange){if(s.operator==="*"||a==="*")return!0;if(s.operator==="~")return u[0]===n[0]&&u[1]===n[1]&&u[2]>=n[2];if(s.operator==="^")return n[0]>0?u[0]===n[0]&&r.number>=s.number:n[1]>0?u[1]===n[1]&&u[2]>=n[2]:u[2]===n[2]}return a===o||a==="*"}})()},function(i,m,t){var e={};i.exports=e;var f=t(118);t(128);var a=t(32);(function(){e.create=function(o){var s=f.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return a.extend(s,n,o)}})()},function(i,m,t){var e={};i.exports=e;var f=t(250),a=t(273),o=t(32);(function(){e.create=function(s){var n={controller:e,detector:a.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(n,s)},e.update=function(s,n,r,u){var h,l,d,v=r.world,c=s.buckets,g,x,A=!1,T=r.metrics;for(T.broadphaseTests=0,h=0;h<n.length;h++){var E=n[h];if(!(E.isSleeping&&!u)&&!(E.bounds.max.x<v.bounds.min.x||E.bounds.min.x>v.bounds.max.x||E.bounds.max.y<v.bounds.min.y||E.bounds.min.y>v.bounds.max.y)){var S=e._getRegion(s,E);if(!E.region||S.id!==E.region.id||u){T.broadphaseTests+=1,(!E.region||u)&&(E.region=S);var C=e._regionUnion(S,E.region);for(l=C.startCol;l<=C.endCol;l++)for(d=C.startRow;d<=C.endRow;d++){x=e._getBucketId(l,d),g=c[x];var P=l>=S.startCol&&l<=S.endCol&&d>=S.startRow&&d<=S.endRow,R=l>=E.region.startCol&&l<=E.region.endCol&&d>=E.region.startRow&&d<=E.region.endRow;!P&&R&&R&&g&&e._bucketRemoveBody(s,g,E),(E.region===S||P&&!R||u)&&(g||(g=e._createBucket(c,x)),e._bucketAddBody(s,g,E))}E.region=S,A=!0}}}A&&(s.pairsList=e._createActivePairsList(s))},e.clear=function(s){s.buckets={},s.pairs={},s.pairsList=[]},e._regionUnion=function(s,n){var r=Math.min(s.startCol,n.startCol),u=Math.max(s.endCol,n.endCol),h=Math.min(s.startRow,n.startRow),l=Math.max(s.endRow,n.endRow);return e._createRegion(r,u,h,l)},e._getRegion=function(s,n){var r=n.bounds,u=Math.floor(r.min.x/s.bucketWidth),h=Math.floor(r.max.x/s.bucketWidth),l=Math.floor(r.min.y/s.bucketHeight),d=Math.floor(r.max.y/s.bucketHeight);return e._createRegion(u,h,l,d)},e._createRegion=function(s,n,r,u){return{id:s+","+n+","+r+","+u,startCol:s,endCol:n,startRow:r,endRow:u}},e._getBucketId=function(s,n){return"C"+s+"R"+n},e._createBucket=function(s,n){var r=s[n]=[];return r},e._bucketAddBody=function(s,n,r){for(var u=0;u<n.length;u++){var h=n[u];if(!(r.id===h.id||r.isStatic&&h.isStatic)){var l=f.id(r,h),d=s.pairs[l];d?d[2]+=1:s.pairs[l]=[r,h,1]}}n.push(r)},e._bucketRemoveBody=function(s,n,r){n.splice(n.indexOf(r),1);for(var u=0;u<n.length;u++){var h=n[u],l=f.id(r,h),d=s.pairs[l];d&&(d[2]-=1)}},e._createActivePairsList=function(s){var n,r,u=[];n=o.keys(s.pairs);for(var h=0;h<n.length;h++)r=s.pairs[n[h]],r[2]>0?u.push(r):delete s.pairs[n[h]];return u}})()},function(i,m,t){var e={};i.exports=e;var f=t(250),a=t(32);(function(){e._pairMaxIdleLife=1e3,e.create=function(o){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},e.update=function(o,s,n){var r=o.list,u=o.table,h=o.collisionStart,l=o.collisionEnd,d=o.collisionActive,v,c,g,x;for(h.length=0,l.length=0,d.length=0,x=0;x<r.length;x++)r[x].confirmedActive=!1;for(x=0;x<s.length;x++)v=s[x],v.collided&&(c=f.id(v.bodyA,v.bodyB),g=u[c],g?(g.isActive?d.push(g):h.push(g),f.update(g,v,n),g.confirmedActive=!0):(g=f.create(v,n),u[c]=g,h.push(g),r.push(g)));for(x=0;x<r.length;x++)g=r[x],g.isActive&&!g.confirmedActive&&(f.setActive(g,!1,n),l.push(g))},e.removeOld=function(o,s){var n=o.list,r=o.table,u=[],h,l,d,v;for(v=0;v<n.length;v++){if(h=n[v],l=h.collision,l.bodyA.isSleeping||l.bodyB.isSleeping){h.timeUpdated=s;continue}s-h.timeUpdated>e._pairMaxIdleLife&&u.push(v)}for(v=0;v<u.length;v++)d=u[v]-v,h=n[d],delete r[h.id],n.splice(d,1)},e.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(i,m,t){var e={};i.exports=e;var f=t(64),a=t(83),o=t(32),s=t(84);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var r,u,h;for(r=0;r<n.length;r++)u=n[r],u.isActive&&(h=u.activeContacts.length,u.collision.parentA.totalContacts+=h,u.collision.parentB.totalContacts+=h)},e.solvePosition=function(n,r,u){var h,l,d,v,c,g,x,A,T,E,S,C,P,R,M,L,F=u*e._positionDampen;for(h=0;h<r.length;h++){var I=r[h];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(h=0;h<n.length;h++)v=n[h],!(!v.isActive||v.isSensor)&&(c=v.collision,g=c.parentA,x=c.parentB,A=c.normal,S=g.previousPositionImpulse,C=x.previousPositionImpulse,E=c.penetration,R=C.x-S.x+E.x,M=C.y-S.y+E.y,l=A.x,d=A.y,T=l*R+d*M,v.separation=T,L=(T-v.slop)*F,(g.isStatic||x.isStatic)&&(L*=2),g.isStatic||g.isSleeping||(P=L/g.totalContacts,g.positionImpulse.x+=l*P,g.positionImpulse.y+=d*P),x.isStatic||x.isSleeping||(P=L/x.totalContacts,x.positionImpulse.x-=l*P,x.positionImpulse.y-=d*P))},e.postSolvePosition=function(n){for(var r=0;r<n.length;r++){var u=n[r];if(u.totalContacts=0,u.positionImpulse.x!==0||u.positionImpulse.y!==0){for(var h=0;h<u.parts.length;h++){var l=u.parts[h];f.translate(l.vertices,u.positionImpulse),s.update(l.bounds,l.vertices,u.velocity),l.position.x+=u.positionImpulse.x,l.position.y+=u.positionImpulse.y}u.positionPrev.x+=u.positionImpulse.x,u.positionPrev.y+=u.positionImpulse.y,a.dot(u.positionImpulse,u.velocity)<0?(u.positionImpulse.x=0,u.positionImpulse.y=0):(u.positionImpulse.x*=e._positionWarming,u.positionImpulse.y*=e._positionWarming)}}},e.preSolveVelocity=function(n){var r,u,h,l,d,v,c,g,x,A,T,E,S,C,P=a._temp[0],R=a._temp[1];for(r=0;r<n.length;r++)if(h=n[r],!(!h.isActive||h.isSensor))for(l=h.activeContacts,d=h.collision,v=d.parentA,c=d.parentB,g=d.normal,x=d.tangent,u=0;u<l.length;u++)A=l[u],T=A.vertex,E=A.normalImpulse,S=A.tangentImpulse,(E!==0||S!==0)&&(P.x=g.x*E+x.x*S,P.y=g.y*E+x.y*S,v.isStatic||v.isSleeping||(C=a.sub(T,v.position,R),v.positionPrev.x+=P.x*v.inverseMass,v.positionPrev.y+=P.y*v.inverseMass,v.anglePrev+=a.cross(C,P)*v.inverseInertia),c.isStatic||c.isSleeping||(C=a.sub(T,c.position,R),c.positionPrev.x-=P.x*c.inverseMass,c.positionPrev.y-=P.y*c.inverseMass,c.anglePrev-=a.cross(C,P)*c.inverseInertia))},e.solveVelocity=function(n,r){for(var u=r*r,h=a._temp[0],l=a._temp[1],d=a._temp[2],v=a._temp[3],c=a._temp[4],g=a._temp[5],x=0;x<n.length;x++){var A=n[x];if(!(!A.isActive||A.isSensor)){var T=A.collision,E=T.parentA,S=T.parentB,C=T.normal,P=T.tangent,R=A.activeContacts,M=1/R.length;E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.angularVelocity=E.angle-E.anglePrev,S.angularVelocity=S.angle-S.anglePrev;for(var L=0;L<R.length;L++){var F=R[L],I=F.vertex,w=a.sub(I,E.position,l),U=a.sub(I,S.position,d),z=a.add(E.velocity,a.mult(a.perp(w),E.angularVelocity),v),W=a.add(S.velocity,a.mult(a.perp(U),S.angularVelocity),c),H=a.sub(z,W,g),D=a.dot(C,H),O=a.dot(P,H),B=Math.abs(O),N=o.sign(O),G=(1+A.restitution)*D,V=o.clamp(A.separation+D,0,1)*e._frictionNormalMultiplier,Y=O,X=1/0;B>A.friction*A.frictionStatic*V*u&&(X=B,Y=o.clamp(A.friction*N*u,-X,X));var b=a.cross(w,C),Q=a.cross(U,C),K=M/(E.inverseMass+S.inverseMass+E.inverseInertia*b*b+S.inverseInertia*Q*Q);if(G*=K,Y*=K,D<0&&D*D>e._restingThresh*u)F.normalImpulse=0;else{var $=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+G,0),G=F.normalImpulse-$}if(O*O>e._restingThreshTangent*u)F.tangentImpulse=0;else{var Z=F.tangentImpulse;F.tangentImpulse=o.clamp(F.tangentImpulse+Y,-X,X),Y=F.tangentImpulse-Z}h.x=C.x*G+P.x*Y,h.y=C.y*G+P.y*Y,E.isStatic||E.isSleeping||(E.positionPrev.x+=h.x*E.inverseMass,E.positionPrev.y+=h.y*E.inverseMass,E.anglePrev+=a.cross(w,h)*E.inverseInertia),S.isStatic||S.isSleeping||(S.positionPrev.x-=h.x*S.inverseMass,S.positionPrev.y-=h.y*S.inverseMass,S.anglePrev-=a.cross(U,h)*S.inverseInertia)}}}}})()},function(i,m){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}i.exports=t},function(i,m,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(276),f=function(a,o,s,n){for(var r=a[0],u=1;u<a.length;u++){var h=a[u];e(h,r,o,s,n),r=h}return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"angle",o,s,n,r)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){for(var o=0;o<e.length;o++){var s=e[o];f.call(a,s)}return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){a===void 0&&(a=0);for(var o=a;o<e.length;o++){var s=e[o],n=!0;for(var r in f)s[r]!==f[r]&&(n=!1);if(n)return s}return null};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){a===void 0&&(a=0);for(var o=a;o<e.length;o++){var s=e[o],n=!0;for(var r in f)s[r]!==f[r]&&(n=!1);if(n)return s}return null};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(289),f=t(123),a=t(2),o=t(1),s=t(129),n=new s({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),r=function(u,h){h===void 0&&(h={});var l=h.hasOwnProperty("width"),d=h.hasOwnProperty("height"),v=a(h,"width",-1),c=a(h,"height",-1),g=a(h,"cellWidth",1),x=a(h,"cellHeight",g),A=a(h,"position",f.TOP_LEFT),T=a(h,"x",0),E=a(h,"y",0),S=0,C=0,P=v*g,R=c*x;n.setPosition(T,E),n.setSize(g,x);for(var M=0;M<u.length;M++)if(e(u[M],n,A),l&&v===-1)n.x+=g;else if(d&&c===-1)n.y+=x;else if(d&&!l){if(C+=x,n.y+=x,C===R&&(C=0,S+=g,n.y=E,n.x+=g,S===P))break}else if(S+=g,n.x+=g,S===P&&(S=0,C+=x,n.x=T,n.y+=x,C===R))break;return u};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=2,a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,s,n,r){return o===void 0&&(o=1),s===void 0?this.alpha=o:(this._alphaTL=e(o,0,1),this._alphaTR=e(s,0,1),this._alphaBL=e(n,0,1),this._alphaBR=e(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var s=e(o,0,1);this._alpha=s,this._alphaTL=s,this._alphaTR=s,this._alphaBL=s,this._alphaBR=s,s===0?this.renderFlags&=~f:this.renderFlags|=f}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var s=e(o,0,1);this._alphaTL=s,s!==0&&(this.renderFlags|=f)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var s=e(o,0,1);this._alphaTR=s,s!==0&&(this.renderFlags|=f)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var s=e(o,0,1);this._alphaBL=s,s!==0&&(this.renderFlags|=f)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var s=e(o,0,1);this._alphaBR=s,s!==0&&(this.renderFlags|=f)}}};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,f){return this.width=e,this.height=f,this},setDisplaySize:function(e,f){return this.displayWidth=e,this.displayHeight=f,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(e,f,a,o){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,f,a,o,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,f){return this.flipX=e,this.flipY=f,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(308),a=t(3),o={prepareBoundsOutput:function(s,n){if(n===void 0&&(n=!1),this.rotation!==0&&f(s,this.x,this.y,this.rotation),n&&this.parentContainer){var r=this.parentContainer.getBoundsTransformMatrix();r.transformPoint(s.x,s.y,s)}return s},getCenter:function(s){return s===void 0&&(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,s.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,s},getTopLeft:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX,s.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(s,n)},getTopCenter:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,s.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(s,n)},getTopRight:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth,s.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(s,n)},getLeftCenter:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX,s.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(s,n)},getRightCenter:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth,s.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(s,n)},getBottomLeft:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX,s.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(s,n)},getBottomCenter:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,s.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(s,n)},getBottomRight:function(s,n){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth,s.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(s,n)},getBounds:function(s){s===void 0&&(s=new e);var n,r,u,h,l,d,v,c;if(this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(s),g.transformPoint(s.x,s.y,s),n=s.x,r=s.y,this.getTopRight(s),g.transformPoint(s.x,s.y,s),u=s.x,h=s.y,this.getBottomLeft(s),g.transformPoint(s.x,s.y,s),l=s.x,d=s.y,this.getBottomRight(s),g.transformPoint(s.x,s.y,s),v=s.x,c=s.y}else this.getTopLeft(s),n=s.x,r=s.y,this.getTopRight(s),u=s.x,h=s.y,this.getBottomLeft(s),l=s.x,d=s.y,this.getBottomRight(s),v=s.x,c=s.y;return s.x=Math.min(n,u,l,v),s.y=Math.min(r,h,d,c),s.width=Math.max(n,u,l,v)-s.x,s.height=Math.max(r,h,d,c)-s.y,s}};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="blur"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="contextlost"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="contextrestored"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="focus"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="hidden"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postrender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="poststep"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prestep"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="ready"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="step"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="visible"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postrender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="render"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resize"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,f){return e===void 0&&(e=.5),f===void 0&&(f=e),this.originX=e,this.originY=f,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,f){return e===void 0&&(e=0),f===void 0&&(f=e),this.displayOriginX=e,this.displayOriginY=f,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),f=t(99),a=t(6),o=t(100),s=t(3),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(r,u){u===void 0&&(u=this.pathConfig);var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this.path=r,u&&this.startFollow(u),this},setRotateToPath:function(r,u){return u===void 0&&(u=0),this.rotateToPath=r,this.pathRotationOffset=u,this},isFollowing:function(){var r=this.pathTween;return r&&r.isPlaying()},startFollow:function(r,u){r===void 0&&(r={}),u===void 0&&(u=0);var h=this.pathTween;h&&h.isPlaying()&&h.stop(),typeof r=="number"&&(r={duration:r}),r.from=a(r,"from",0),r.to=a(r,"to",1);var l=f(r,"positionOnPath",!1);this.rotateToPath=f(r,"rotateToPath",!1),this.pathRotationOffset=a(r,"rotationOffset",0);var d=a(r,"startAt",u);if(d&&(r.onStart=function(c){var g=c.data[0];g.progress=d,g.elapsed=g.duration*d;var x=g.ease(g.progress);g.current=g.start+(g.end-g.start)*x,g.target[g.key]=g.current}),this.pathOffset||(this.pathOffset=new s(this.x,this.y)),this.pathVector||(this.pathVector=new s),this.pathDelta||(this.pathDelta=new s),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(r),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+e(this.pathRotationOffset)}return this.pathConfig=r,this},pauseFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.pause(),this},resumeFollow:function(){var r=this.pathTween;return r&&r.isPaused()&&r.resume(),this},stopFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this},pathUpdate:function(){var r=this.pathTween;if(r){var u=r.data[0],h=this.pathDelta,l=this.pathVector;if(h.copy(l).negate(),u.state===o.COMPLETE){this.path.getPoint(1,l),h.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(u.state!==o.PLAYING_FORWARD&&u.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(r.getValue(),l),h.add(l),l.add(this.pathOffset);var d=this.x,v=this.y;this.setPosition(l.x,l.y);var c=this.x-d,g=this.y-v;if(c===0&&g===0)return;if(u.state!==this._prevDirection){this._prevDirection=u.state;return}this.rotateToPath&&(this.rotation=Math.atan2(g,c)+e(this.pathRotationOffset))}}};i.exports=n},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,f){return this.width=e,this.height=f,this},setDisplaySize:function(e,f){return this.displayWidth=e,this.displayHeight=f,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setTexture:function(f,a){return this.texture=this.scene.sys.textures.get(f),this.setFrame(a)},setFrame:function(f,a,o){return a===void 0&&(a=!0),o===void 0&&(o=!0),this.frame=this.texture.get(f),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setCrop:function(f,a,o,s){if(f===void 0)this.isCropped=!1;else if(this.frame){if(typeof f=="number")this.frame.setCropUVs(this._crop,f,a,o,s,this.flipX,this.flipY);else{var n=f;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(f,a){return this.texture=this.scene.sys.textures.get(f),this.setFrame(a)},setFrame:function(f,a,o){return a===void 0&&(a=!0),o===void 0&&(o=!0),this.frame=this.texture.get(f),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,f,a,o){return e===void 0&&(e=16777215),f===void 0&&(f=e,a=e,o=e),this.tintTopLeft=e,this.tintTopRight=f,this.tintBottomLeft=a,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(e,f,a,o){return this.setTint(e,f,a,o),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="changedata"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="changedata-"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removedata"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="setdata"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addedtoscene"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removedfromscene"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="created"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="error"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="play"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="seeked"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="seeking"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="timeout"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="unlocked"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addedtoscene"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="create"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postupdate"},function(i,m){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="preupdate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="ready"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removedfromscene"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="render"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="shutdown"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="sleep"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitioncomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitioninit"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitionout"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitionstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitionwake"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="wake"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"alpha",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"x",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r,u,h){return s==null&&(s=o),e(a,"x",o,n,u,h),e(a,"y",s,r,u,h)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"y",o,s,n,r)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a===void 0&&(a=0),o===void 0&&(o=6.28);for(var s=a,n=(o-a)/e.length,r=0;r<e.length;r++)e[r].x=f.x+f.radius*Math.cos(s),e[r].y=f.y+f.radius*Math.sin(s),s+=n;return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a===void 0&&(a=0),o===void 0&&(o=6.28);for(var s=a,n=(o-a)/e.length,r=f.width/2,u=f.height/2,h=0;h<e.length;h++)e[h].x=f.x+r*Math.cos(s),e[h].y=f.y+u*Math.sin(s),s+=n;return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(172),f=function(a,o){for(var s=e(o,a.length),n=0;n<a.length;n++){var r=a[n],u=s[n];r.x=u.x,r.y=u.y}return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(316),f=t(178),a=t(179),o=function(s,n,r){r===void 0&&(r=0);var u=e(n,!1,s.length);r>0?f(u,r):r<0&&a(u,Math.abs(r));for(var h=0;h<s.length;h++)s[h].x=u[h].x,s[h].y=u[h].y;return s};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(317),f=function(a,o,s){var n=e({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},s),r=e({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},s),u=e({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},s);n.pop(),r.pop(),u.pop(),n=n.concat(r,u);for(var h=n.length/a.length,l=0,d=0;d<a.length;d++){var v=a[d],c=n[Math.floor(l)];v.x=c.x,v.y=c.y,l+=h}return a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){for(var o=0;o<e.length;o++){var s=e[o];s.anims&&s.anims.play(f,a)}return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(170),f=function(a,o){for(var s=0;s<a.length;s++)e(o,a[s]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(180),f=function(a,o){for(var s=0;s<a.length;s++)e(o,a[s]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(173),f=function(a,o){for(var s=0;s<a.length;s++)e(o,a[s]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(174),f=function(a,o){for(var s=0;s<a.length;s++)e(o,a[s]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(181),f=function(a,o){for(var s=0;s<a.length;s++)e(o,a[s]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"rotation",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),f=t(50),a=function(o,s,n){for(var r=s.x,u=s.y,h=0;h<o.length;h++){var l=o[h];e(l,r,u,n,Math.max(1,f(l.x,l.y,r,u)))}return o};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),f=function(a,o,s,n){var r=o.x,u=o.y;if(n===0)return a;for(var h=0;h<a.length;h++)e(a[h],r,u,s,n);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"scaleX",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r,u,h){return s==null&&(s=o),e(a,"scaleX",o,n,u,h),e(a,"scaleY",s,r,u,h)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(a,o,s,n,r){return e(a,"scaleY",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"alpha",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n){return e(a,"blendMode",o,0,s,n)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"depth",o,s,n,r)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){for(var o=0;o<e.length;o++)e[o].setInteractive(f,a);return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r,u,h){return s==null&&(s=o),e(a,"originX",o,n,u,h),e(a,"originY",s,r,u,h),a.forEach(function(l){l.updateDisplayOrigin()}),a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"rotation",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r,u,h){return s==null&&(s=o),e(a,"scaleX",o,n,u,h),e(a,"scaleY",s,r,u,h)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"scaleX",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"scaleY",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r,u,h){return s==null&&(s=o),e(a,"scrollFactorX",o,n,u,h),e(a,"scrollFactorY",s,r,u,h)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"scrollFactorX",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"scrollFactorY",o,s,n,r)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){for(var n=0;n<e.length;n++)e[n].setTint(f,a,o,s);return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n){return e(a,"visible",o,0,s,n)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"x",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r,u,h){return s==null&&(s=o),e(a,"x",o,n,u,h),e(a,"y",s,r,u,h)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(a,o,s,n,r){return e(a,"y",o,s,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n,r){n===void 0&&(n=0),r===void 0&&(r=new e);var u,h;if(a.length>1){var l,d,v,c;if(n===0){var g=a.length-1;for(u=a[g].x,h=a[g].y,l=g-1;l>=0;l--)c=a[l],d=c.x,v=c.y,c.x=u,c.y=h,u=d,h=v;a[g].x=o,a[g].y=s}else{for(u=a[0].x,h=a[0].y,l=1;l<a.length;l++)c=a[l],d=c.x,v=c.y,c.x=u,c.y=h,u=d,h=v;a[0].x=o,a[0].y=s}}else u=a[0].x,h=a[0].y,a[0].x=o,a[0].y=s;return r.x=u,r.y=h,r};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(131),f=function(a){return e(a)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),f=function(a,o,s,n,r){r===void 0&&(r=!1);var u=Math.abs(n-s)/a.length,h;if(r)for(h=0;h<a.length;h++)a[h][o]+=e(h*u,s,n);else for(h=0;h<a.length;h++)a[h][o]=e(h*u,s,n);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),f=function(a,o,s,n,r){r===void 0&&(r=!1);var u=Math.abs(n-s)/a.length,h;if(r)for(h=0;h<a.length;h++)a[h][o]+=e(h*u,s,n);else for(h=0;h<a.length;h++)a[h][o]=e(h*u,s,n);return a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){s===void 0&&(s=!1);var n=Math.abs(o-a)/e.length,r;if(s)for(r=0;r<e.length;r++)e[r][f]+=r*n+a;else for(r=0;r<e.length;r++)e[r][f]=r*n+a;return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=0;f<e.length;f++)e[f].visible=!e[f].visible;return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),f=function(a,o,s){s===void 0&&(s=0);for(var n=0;n<a.length;n++){var r=a[n];r.x=e(r.x,o.left-s,o.right+s),r.y=e(r.y,o.top-s,o.bottom+s)}return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="add"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationcomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationcomplete-"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationrepeat"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationrestart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationstop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationupdate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pauseall"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="remove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resumeall"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="add"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="remove"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Controls:t(739),Scene2D:t(742)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(6),a=new e({initialize:function(s){this.camera=f(s,"camera",null),this.left=f(s,"left",null),this.right=f(s,"right",null),this.up=f(s,"up",null),this.down=f(s,"down",null),this.zoomIn=f(s,"zoomIn",null),this.zoomOut=f(s,"zoomOut",null),this.zoomSpeed=f(s,"zoomSpeed",.01),this.minZoom=f(s,"minZoom",.001),this.maxZoom=f(s,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=f(s,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=f(s,"speed.x",0),this.speedY=f(s,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var s=this.camera;this.up&&this.up.isDown?s.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(s.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?s.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(s.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(s.zoom-=this.zoomSpeed,s.zoom<this.minZoom&&(s.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(s.zoom+=this.zoomSpeed,s.zoom>this.maxZoom&&(s.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(6),a=new e({initialize:function(s){this.camera=f(s,"camera",null),this.left=f(s,"left",null),this.right=f(s,"right",null),this.up=f(s,"up",null),this.down=f(s,"down",null),this.zoomIn=f(s,"zoomIn",null),this.zoomOut=f(s,"zoomOut",null),this.zoomSpeed=f(s,"zoomSpeed",.01),this.minZoom=f(s,"minZoom",.001),this.maxZoom=f(s,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=f(s,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=f(s,"acceleration.x",0),this.accelY=f(s,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=f(s,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=f(s,"drag.x",0),this.dragY=f(s,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var u=f(s,"maxSpeed",null);typeof u=="number"?(this.maxSpeedX=u,this.maxSpeedY=u):(this.maxSpeedX=f(s,"maxSpeed.x",0),this.maxSpeedY=f(s,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var s=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(s.scrollX-=this._speedX*o|0),this._speedY!==0&&(s.scrollY-=this._speedY*o|0),this._zoom!==0&&(s.zoom+=this._zoom,s.zoom<this.minZoom?s.zoom=this.minZoom:s.zoom>this.maxZoom&&(s.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="cameradestroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeincomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeinstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeoutcomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeoutstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="cameraflashcomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="cameraflashstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="followupdate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerapancomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerapanstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postrender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerarotatecomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerarotatestart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerashakecomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerashakestart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerazoomcomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerazoomstart"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(37),o=new f({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,n,r,u,h,l,d,v){if(s===void 0&&(s=!0),n===void 0&&(n=1e3),r===void 0&&(r=0),u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=s,this.progress=0,this.red=r,this.green=u,this.blue=h,this.alpha=s?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=v;var c=s?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(c,this.camera,this,n,r,u,h),this.camera},update:function(s,n){!this.isRunning||(this._elapsed+=n,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(s){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return s.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",s.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(s,n){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,u=this.red/255,h=this.green/255,l=this.blue/255;return s.drawFillRect(r.x,r.y,r.width,r.height,n(l,h,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var s=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(s,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(37),o=new f({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,n,r,u,h,l,d){return s===void 0&&(s=250),n===void 0&&(n=255),r===void 0&&(r=255),u===void 0&&(u=255),h===void 0&&(h=!1),l===void 0&&(l=null),d===void 0&&(d=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=s,this.progress=0,this.red=n,this.green=r,this.blue=u,this.alpha=1,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=d,this.camera.emit(a.FLASH_START,this.camera,this,s,n,r,u),this.camera)},update:function(s,n){!this.isRunning||(this._elapsed+=n,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(s){if(!this.isRunning)return!1;var n=this.camera;return s.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",s.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(s,n){if(!this.isRunning)return!1;var r=this.camera,u=this.red/255,h=this.green/255,l=this.blue/255;return s.drawFillRect(r.x,r.y,r.width,r.height,n(l,h,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(134),o=t(37),s=t(3),n=new f({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=new s,this.current=new s,this.destination=new s,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,u,h,l,d,v,c){h===void 0&&(h=1e3),l===void 0&&(l=a.Linear),d===void 0&&(d=!1),v===void 0&&(v=null),c===void 0&&(c=this.camera.scene);var g=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source.set(g.scrollX,g.scrollY),this.destination.set(r,u),g.getScroll(r,u,this.current),typeof l=="string"&&a.hasOwnProperty(l)?this.ease=a[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=c,this.camera.emit(o.PAN_START,this.camera,this,h,r,u)),g},update:function(r,u){if(!!this.isRunning){this._elapsed+=u;var h=e(this._elapsed/this.duration,0,1);this.progress=h;var l=this.camera;if(this._elapsed<this.duration){var d=this.ease(h);l.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*d,c=this.source.y+(this.current.y-this.source.y)*d;l.setScroll(v,c),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,h,v,c)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,h,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});i.exports=n},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1.70158),e*e*((f+1)*e-f)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1.70158),--e*e*((f+1)*e+f)+1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1.70158);var a=f*1.525;return(e*=2)<1?.5*(e*e*((a+1)*e-a)):.5*((e-=2)*e*((a+1)*e+a)+2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=!1;return e<.5?(e=1-e*2,f=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,f?(1-e)*.5:e*.5+.5};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.sqrt(1-e*e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(1- --e*e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e+1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f===void 0&&(f=.1),a===void 0&&(a=.1),e===0)return 0;if(e===1)return 1;var o=a/4;return f<1?f=1:o=a*Math.asin(1/f)/(2*Math.PI),-(f*Math.pow(2,10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/a))};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f===void 0&&(f=.1),a===void 0&&(a=.1),e===0)return 0;if(e===1)return 1;var o=a/4;return f<1?f=1:o=a*Math.asin(1/f)/(2*Math.PI),f*Math.pow(2,-10*e)*Math.sin((e-o)*(2*Math.PI)/a)+1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f===void 0&&(f=.1),a===void 0&&(a=.1),e===0)return 0;if(e===1)return 1;var o=a/4;return f<1?f=1:o=a*Math.asin(1/f)/(2*Math.PI),(e*=2)<1?-.5*(f*Math.pow(2,10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/a)):f*Math.pow(2,-10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/a)*.5+1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.pow(2,10*(e-1))-.001};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.pow(2,-10*e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*(2-e)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1- --e*e*e*e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e*e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e*e*e+1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1),e<=0?0:e>=1?1:((f*e|0)+1)*(1/f)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(37),o=t(3),s=new f({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,r,u,h,l){return n===void 0&&(n=100),r===void 0&&(r=.05),u===void 0&&(u=!1),h===void 0&&(h=null),l===void 0&&(l=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof r=="number"?this.intensity.set(r):this.intensity.set(r.x,r.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=h,this._onUpdateScope=l,this.camera.emit(a.SHAKE_START,this.camera,this,n,r),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,r){if(!!this.isRunning)if(this._elapsed+=r,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,h=this.camera.width,l=this.camera.height,d=this.camera.zoom;this._offsetX=(Math.random()*u.x*h*2-u.x*h)*d,this._offsetY=(Math.random()*u.y*l*2-u.y*l)*d,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});i.exports=s},function(i,m,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var e=t(18),f=t(0),a=t(37),o=t(134),s=new f({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,r,u,h,l,d,v){u===void 0&&(u=1e3),h===void 0&&(h=o.Linear),l===void 0&&(l=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene),r===void 0&&(r=!1),this.shortestPath=r;var c=n;n<0?(c=-1*n,this.clockwise=!1):this.clockwise=!0;var g=360*Math.PI/180;c=c-Math.floor(c/g)*g;var x=this.camera;if(!l&&this.isRunning)return x;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=x.rotation,this.destination=c,typeof h=="string"&&o.hasOwnProperty(h)?this.ease=o[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=v,this.shortestPath){var A=0,T=0;this.destination>this.source?A=Math.abs(this.destination-this.source):A=Math.abs(this.destination+g)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+g)-this.destination,A<T?this.clockwise=!0:A>T&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,u,c),x},update:function(n,r){if(!!this.isRunning){this._elapsed+=r;var u=e(this._elapsed/this.duration,0,1);this.progress=u;var h=this.camera;if(this._elapsed<this.duration){var l=this.ease(u);this.current=h.rotation;var d=0,v=360*Math.PI/180,c=this.destination,g=this.current;this.clockwise===!1&&(c=this.current,g=this.destination),c>=g?d=Math.abs(c-g):d=Math.abs(c+v)-g;var x=0;this.clockwise?x=h.rotation+d*l:x=h.rotation-d*l,h.rotation=x,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,u,x)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(134),o=t(37),s=new f({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,r,u,h,l,d){r===void 0&&(r=1e3),u===void 0&&(u=a.Linear),h===void 0&&(h=!1),l===void 0&&(l=null),d===void 0&&(d=this.camera.scene);var v=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source=v.zoom,this.destination=n,typeof u=="string"&&a.hasOwnProperty(u)?this.ease=a[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=d,this.camera.emit(o.ZOOM_START,this.camera,this,r,n)),v},update:function(n,r){!this.isRunning||(this._elapsed+=r,this.progress=e(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(326),f=t(0),a=t(2),o=t(24),s=t(57),n=t(104),r=t(20),u=new f({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(r.BOOT,this.boot,this),l.sys.events.on(r.START,this.start,this)},boot:function(){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new e(0,0,h.scale.width,h.scale.height).setScene(this.scene),h.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){if(!this.main){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(r.UPDATE,this.update,this),l.once(r.SHUTDOWN,this.shutdown,this)},add:function(h,l,d,v,c,g){h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),c===void 0&&(c=!1),g===void 0&&(g="");var x=new e(h,l,d,v);return x.setName(g),x.setScene(this.scene),x.setRoundPixels(this.roundPixels),x.id=this.getNextID(),this.cameras.push(x),c&&(this.main=x),x},addExisting:function(h,l){l===void 0&&(l=!1);var d=this.cameras.indexOf(h);return d===-1?(h.id=this.getNextID(),h.setRoundPixels(this.roundPixels),this.cameras.push(h),l&&(this.main=h),h):null},getNextID:function(){for(var h=this.cameras,l=1,d=0;d<32;d++){for(var v=!1,c=0;c<h.length;c++){var g=h[c];if(g&&g.id===l){v=!0;continue}}if(v)l=l<<1;else return l}return 0},getTotal:function(h){h===void 0&&(h=!1);for(var l=0,d=this.cameras,v=0;v<d.length;v++){var c=d[v];(!h||h&&c.visible)&&l++}return l},fromJSON:function(h){Array.isArray(h)||(h=[h]);for(var l=this.scene.sys.scale.width,d=this.scene.sys.scale.height,v=0;v<h.length;v++){var c=h[v],g=a(c,"x",0),x=a(c,"y",0),A=a(c,"width",l),T=a(c,"height",d),E=this.add(g,x,A,T);E.name=a(c,"name",""),E.zoom=a(c,"zoom",1),E.rotation=a(c,"rotation",0),E.scrollX=a(c,"scrollX",0),E.scrollY=a(c,"scrollY",0),E.roundPixels=a(c,"roundPixels",!1),E.visible=a(c,"visible",!0);var S=a(c,"backgroundColor",!1);S&&E.setBackgroundColor(S);var C=a(c,"bounds",null);if(C){var P=a(C,"x",0),R=a(C,"y",0),M=a(C,"width",l),L=a(C,"height",d);E.setBounds(P,R,M,L)}}return this},getCamera:function(h){for(var l=this.cameras,d=0;d<l.length;d++)if(l[d].name===h)return l[d];return null},getCamerasBelowPointer:function(h){for(var l=this.cameras,d=h.x,v=h.y,c=[],g=0;g<l.length;g++){var x=l[g];x.visible&&x.inputEnabled&&s(x,d,v)&&c.unshift(x)}return c},remove:function(h,l){l===void 0&&(l=!0),Array.isArray(h)||(h=[h]);for(var d=0,v=this.cameras,c=0;c<h.length;c++){var g=v.indexOf(h[c]);g!==-1&&(l?v[g].destroy():v[g].renderList=[],v.splice(g,1),d++)}return!this.main&&v[0]&&(this.main=v[0]),d},render:function(h,l){for(var d=this.scene,v=this.cameras,c=0;c<this.cameras.length;c++){var g=v[c];if(g.visible&&g.alpha>0){g.preRender();var x=this.getVisibleChildren(l.getChildren(),g);h.render(d,x,g)}}},getVisibleChildren:function(h,l){for(var d=[],v=0;v<h.length;v++){var c=h[v];c.willRender(l)&&d.push(c)}return d},resetAll:function(){for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(h,l){for(var d=0;d<this.cameras.length;d++)this.cameras[d].update(h,l)},onResize:function(h,l,d,v,c){for(var g=0;g<this.cameras.length;g++){var x=this.cameras[g];x._x===0&&x._y===0&&x._width===v&&x._height===c&&x.setSize(l.width,l.height)}},resize:function(h,l){for(var d=0;d<this.cameras.length;d++)this.cameras[d].setSize(h,l)},shutdown:function(){this.main=void 0;for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();this.cameras=[];var l=this.systems.events;l.off(r.UPDATE,this.update,this),l.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",u,"cameras"),i.exports=u},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="enterfullscreen"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="fullscreenfailed"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="fullscreenunsupported"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="leavefullscreen"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="orientationchange"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resize"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(i,m){var t=i.exports={},e,f;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=a}catch{e=a}try{typeof clearTimeout=="function"?f=clearTimeout:f=o}catch{f=o}})();function s(x){if(e===setTimeout)return setTimeout(x,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(x,0);try{return e(x,0)}catch{try{return e.call(null,x,0)}catch{return e.call(this,x,0)}}}function n(x){if(f===clearTimeout)return clearTimeout(x);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(x);try{return f(x)}catch{try{return f.call(null,x)}catch{return f.call(this,x)}}}var r=[],u=!1,h,l=-1;function d(){!u||!h||(u=!1,h.length?r=h.concat(r):l=-1,r.length&&v())}function v(){if(!u){var x=s(d);u=!0;for(var A=r.length;A;){for(h=r,r=[];++l<A;)h&&h[l].run();l=-1,A=r.length}h=null,u=!1,n(x)}}t.nextTick=function(x){var A=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)A[T-1]=arguments[T];r.push(new c(x,A)),r.length===1&&!u&&s(v)};function c(x,A){this.fun=x,this.array=A}c.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function g(){}t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(x){return[]},t.binding=function(x){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(x){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),f={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(f.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(f.mspointer=!0),navigator.getGamepads&&(f.gamepads=!0),"onwheel"in window||e.ie&&"WheelEvent"in window?f.wheelEvent="wheel":"onmousewheel"in window?f.wheelEvent="mousewheel":e.firefox&&"MouseScrollEvent"in window&&(f.wheelEvent="DOMMouseScroll")),f}i.exports=a()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),f={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function a(){if(typeof importScripts=="function")return f;f.audioData=!!window.Audio,f.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),s=!!o.canPlayType;try{if(s&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(f.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(f.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(f.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(f.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(f.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(f.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(e.edge)f.dolby=!0;else if(e.safari&&e.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);(n===10&&r>=11||n>10)&&(f.dolby=!0)}}}catch{}return f}i.exports=a()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function e(){if(typeof importScripts=="function")return t;var f=document.createElement("video"),a=!!f.canPlayType;try{a&&(f.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),f.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),f.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),f.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),f.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}i.exports=e()},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return t;var f,a="Fullscreen",o="FullScreen",s=["request"+a,"request"+o,"webkitRequest"+a,"webkitRequest"+o,"msRequest"+a,"msRequest"+o,"mozRequest"+o,"mozRequest"+a];for(f=0;f<s.length;f++)if(document.documentElement[s[f]]){t.available=!0,t.request=s[f];break}var n=["cancel"+o,"exit"+a,"webkitCancel"+o,"webkitExit"+a,"msCancel"+o,"msExit"+a,"mozCancel"+o,"mozExit"+a];if(t.available){for(f=0;f<n.length;f++)if(document[n[f]]){t.cancel=n[f];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}i.exports=e()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.atan2(f.x-e.x,f.y-e.y)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return Math.atan2(a-e,o-f)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(a){return a>Math.PI&&(a-=e.PI2),Math.abs(((a+e.TAU)%e.PI2-e.PI2)%e.PI2)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),f=function(){return e(-Math.PI,Math.PI)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),f=function(){return e(-180,180)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(351),f=function(a){return e(a+Math.PI)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(a,o,s){return s===void 0&&(s=.05),a===o||(Math.abs(o-a)<=s||Math.abs(o-a)>=e.PI2-s?a=o:(Math.abs(o-a)>Math.PI&&(o<a?o+=e.PI2:o-=e.PI2),o>a?a+=s:o<a&&(a-=s))),a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=f-e;if(a===0)return 0;var o=Math.floor((a- -180)/360);return a-o*360};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(i,m){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.x-f.x,o=e.y-f.y;return a*a+o*o};i.exports=t},function(i,m){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return Math.max(Math.abs(e-a),Math.abs(f-o))};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){return s===void 0&&(s=2),Math.sqrt(Math.pow(a-e,s)+Math.pow(o-f,s))};i.exports=t},function(i,m){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return Math.abs(e-a)+Math.abs(f-o)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1e-4),Math.ceil(e-f)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1e-4),Math.floor(e+f)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(356),f=function(a,o){for(var s=0,n=a.length-1,r=0;r<=n;r++)s+=Math.pow(1-o,n-r)*Math.pow(o,r)*a[r]*e(n,r);return s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),f=function(a,o){var s=a.length-1,n=s*o,r=Math.floor(n);return a[0]===a[s]?(o<0&&(r=Math.floor(n=s*(1+o))),e(n-r,a[(r-1+s)%s],a[r],a[(r+1)%s],a[(r+2)%s])):o<0?a[0]-(e(-n,a[0],a[0],a[1],a[1])-a[0]):o>1?a[s]-(e(n-s,a[s],a[s],a[s-1],a[s-1])-a[s]):e(n-r,a[r?r-1:0],a[r],a[s<r+1?s:r+1],a[s<r+2?s:r+2])};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),f=function(a,o){var s=a.length-1,n=s*o,r=Math.floor(n);return o<0?e(a[0],a[1],n):o>1?e(a[s],a[s-1],s-n):e(a[r],a[r+1>s?s:r+1],n-r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),f=function(a,o,s){return o+(s-o)*e(a,0,1)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0&&(e&e-1)===0};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){return a===void 0&&(a=0),f===0?e:(e-=a,e=f*Math.round(e/f),o?(a+e)/f:a+e)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var a=2091639*this.s0+this.c*23283064365386963e-26;return this.c=a|0,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},hash:function(a){var o,s=this.n;a=a.toString();for(var n=0;n<a.length;n++)s+=a.charCodeAt(n),o=.02519603282416938*s,s=o>>>0,o-=s,o*=s,s=o>>>0,o-=s,s+=o*4294967296;return this.n=s,(s>>>0)*23283064365386963e-26},init:function(a){typeof a=="string"?this.state(a):this.sow(a)},sow:function(a){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!a)for(var o=0;o<a.length&&a[o]!=null;o++){var s=a[o];this.s0-=this.hash(s),this.s0+=~~(this.s0<0),this.s1-=this.hash(s),this.s1+=~~(this.s1<0),this.s2-=this.hash(s),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(a,o){return Math.floor(this.realInRange(0,o-a+1)+a)},between:function(a,o){return Math.floor(this.realInRange(0,o-a+1)+a)},realInRange:function(a,o){return this.frac()*(o-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",o="";for(o=a="";a++<36;o+=~a%5|a*3&4?(a^15?8^this.frac()*(a^20?16:4):4).toString(16):"-");return o},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*(a.length-1)+.5)]},timestamp:function(a,o){return this.realInRange(a||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(a){return typeof a=="string"&&a.match(/^!rnd/)&&(a=a.split(","),this.c=parseFloat(a[1]),this.s0=parseFloat(a[2]),this.s1=parseFloat(a[3]),this.s2=parseFloat(a[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(a){for(var o=a.length-1,s=o;s>0;s--){var n=Math.floor(this.frac()*(s+1)),r=a[n];a[n]=a[s],a[s]=r}return a}});i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=0,a=0;a<e.length;a++)f+=+e[a];return f/e.length};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){f===void 0&&(f=0),a===void 0&&(a=10);var o=Math.pow(a,-f);return Math.ceil(e*o)/o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.abs(e-f)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(69),o=t(1),s=new a,n=new f({initialize:function r(u,h,l,d){u===void 0&&(u=0),h===void 0&&(h=0),l===void 0&&(l=0),d===void 0&&(d=r.DefaultOrder),this._x=u,this._y=h,this._z=l,this._order=d,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback(this)}},set:function(r,u,h,l){return l===void 0&&(l=this._order),this._x=r,this._y=u,this._z=h,this._order=l,this.onChangeCallback(this),this},copy:function(r){return this.set(r.x,r.y,r.z,r.order)},setFromQuaternion:function(r,u,h){return u===void 0&&(u=this._order),h===void 0&&(h=!1),s.fromQuat(r),this.setFromRotationMatrix(s,u,h)},setFromRotationMatrix:function(r,u,h){u===void 0&&(u=this._order),h===void 0&&(h=!1);var l=r.val,d=l[0],v=l[4],c=l[8],g=l[1],x=l[5],A=l[9],T=l[2],E=l[6],S=l[10],C=0,P=0,R=0,M=.99999;switch(u){case"XYZ":{P=Math.asin(e(c,-1,1)),Math.abs(c)<M?(C=Math.atan2(-A,S),R=Math.atan2(-v,d)):C=Math.atan2(E,x);break}case"YXZ":{C=Math.asin(-e(A,-1,1)),Math.abs(A)<M?(P=Math.atan2(c,S),R=Math.atan2(g,x)):P=Math.atan2(-T,d);break}case"ZXY":{C=Math.asin(e(E,-1,1)),Math.abs(E)<M?(P=Math.atan2(-T,S),R=Math.atan2(-v,x)):R=Math.atan2(g,d);break}case"ZYX":{P=Math.asin(-e(T,-1,1)),Math.abs(T)<M?(C=Math.atan2(E,S),R=Math.atan2(g,d)):R=Math.atan2(-v,x);break}case"YZX":{R=Math.asin(e(g,-1,1)),Math.abs(g)<M?(C=Math.atan2(-A,x),P=Math.atan2(-T,d)):P=Math.atan2(c,S);break}case"XZY":{R=Math.asin(-e(v,-1,1)),Math.abs(v)<M?(C=Math.atan2(E,x),P=Math.atan2(c,d)):C=Math.atan2(-A,S);break}}return this._x=C,this._y=P,this._z=R,this._order=u,h&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",i.exports=n},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){f===void 0&&(f=0),a===void 0&&(a=10);var o=Math.pow(a,-f);return Math.floor(e*o)/o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e/f/1e3};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e==parseFloat(e)?!(e%2):void 0};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===parseFloat(e)?!(e%2):void 0};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return Math.min(e+f,a)};i.exports=t},function(i,m){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.length;if(f===0)return 0;e.sort(function(o,s){return o-s});var a=Math.floor(f/2);return f%2===0?(e[a]+e[a-1])/2:e[a]};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return Math.max(e-f,a)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a===void 0&&(a=f+1);var s=(e-f)/(a-f);return s>1?o!==void 0?(s=(o-e)/(o-a),s<0&&(s=0)):s=1:s<0&&(s=0),s};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);var a=Math.random()*2*Math.PI;return e.x=Math.cos(a)*f,e.y=Math.sin(a)*f,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);var a=Math.random()*2*Math.PI,o=Math.random()*2-1,s=Math.sqrt(1-o*o)*f;return e.x=Math.cos(a)*s,e.y=Math.sin(a)*s,e.z=o*f,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1),e.x=(Math.random()*2-1)*f,e.y=(Math.random()*2-1)*f,e.z=(Math.random()*2-1)*f,e.w=(Math.random()*2-1)*f,e};i.exports=t},function(i,m){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){return e.x=f+s*Math.cos(o),e.y=a+s*Math.sin(o),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){f===void 0&&(f=0),a===void 0&&(a=10);var o=Math.pow(a,-f);return Math.round(e*o)/o};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f===void 0&&(f=1),a===void 0&&(a=1),o===void 0&&(o=1),o*=Math.PI/e;for(var s=[],n=[],r=0;r<e;r++)a-=f*o,f+=a*o,s[r]=a,n[r]=f;return{sin:n,cos:s,length:e}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(a,o,s,n){n===void 0&&(n=new e);var r=0,u=0,h=o*s;return a>0&&a<=h&&(a>o-1?(u=Math.floor(a/o),r=a-u*o):r=a),n.set(r,u)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return Math.abs(e-f)<=a};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=t(69),a=t(365),o=new f,s=new a,n=new e,r=function(u,h,l){return s.setAxisAngle(h,l),o.fromRotationTranslation(s,n.set(0,0,0)),u.transformMat4(o)};i.exports=r},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addtexture"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="onerror"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="onload"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="ready"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removetexture"},function(i,m){i.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelineafterflush"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinebeforeflush"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinebind"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelineboot"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinedestroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinerebind"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelineresize"},function(i,m){i.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(i,m){i.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={GenerateTexture:t(388),Palettes:t(889)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(390),a=t(391),o=t(5),s=t(392),n=t(393),r=t(394),u=t(10),h=t(395),l=t(3),d=t(14),v=new e({initialize:function(g,x){g===void 0&&(g=0),x===void 0&&(x=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof g=="object"?this.fromJSON(g):this.startPoint.set(g,x)},add:function(c){return this.curves.push(c),this},circleTo:function(c,g,x){return g===void 0&&(g=!1),this.ellipseTo(c,c,0,360,g,x)},closePath:function(){var c=this.curves[0].getPoint(0),g=this.curves[this.curves.length-1].getPoint(1);return c.equals(g)||this.curves.push(new s(g,c)),this},cubicBezierTo:function(c,g,x,A,T,E){var S=this.getEndPoint(),C,P,R;return c instanceof l?(C=c,P=g,R=x):(C=new l(x,A),P=new l(T,E),R=new l(c,g)),this.add(new f(S,C,P,R))},quadraticBezierTo:function(c,g,x,A){var T=this.getEndPoint(),E,S;return c instanceof l?(E=c,S=g):(E=new l(x,A),S=new l(c,g)),this.add(new r(T,E,S))},draw:function(c,g){for(var x=0;x<this.curves.length;x++){var A=this.curves[x];!A.active||A.draw(c,g)}return c},ellipseTo:function(c,g,x,A,T,E){var S=new a(0,0,c,g,x,A,T,E),C=this.getEndPoint(this._tmpVec2A),P=S.getStartPoint(this._tmpVec2B);return C.subtract(P),S.x=C.x,S.y=C.y,this.add(S)},fromJSON:function(c){this.curves=[],this.cacheLengths=[],this.startPoint.set(c.x,c.y),this.autoClose=c.autoClose;for(var g=0;g<c.curves.length;g++){var x=c.curves[g];switch(x.type){case"LineCurve":this.add(s.fromJSON(x));break;case"EllipseCurve":this.add(a.fromJSON(x));break;case"SplineCurve":this.add(h.fromJSON(x));break;case"CubicBezierCurve":this.add(f.fromJSON(x));break;case"QuadraticBezierCurve":this.add(r.fromJSON(x));break}}return this},getBounds:function(c,g){c===void 0&&(c=new u),g===void 0&&(g=16),c.x=Number.MAX_VALUE,c.y=Number.MAX_VALUE;for(var x=new u,A=d.MIN_SAFE_INTEGER,T=d.MIN_SAFE_INTEGER,E=0;E<this.curves.length;E++){var S=this.curves[E];!S.active||(S.getBounds(x,g),c.x=Math.min(c.x,x.x),c.y=Math.min(c.y,x.y),A=Math.max(A,x.right),T=Math.max(T,x.bottom))}return c.right=A,c.bottom=T,c},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var c=[],g=0,x=0;x<this.curves.length;x++)g+=this.curves[x].getLength(),c.push(g);return this.cacheLengths=c,c},getEndPoint:function(c){return c===void 0&&(c=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,c):c.copy(this.startPoint),c},getLength:function(){var c=this.getCurveLengths();return c[c.length-1]},getPoint:function(c,g){g===void 0&&(g=new l);for(var x=c*this.getLength(),A=this.getCurveLengths(),T=0;T<A.length;){if(A[T]>=x){var E=A[T]-x,S=this.curves[T],C=S.getLength(),P=C===0?0:1-E/C;return S.getPointAt(P,g)}T++}return null},getPoints:function(c){c===void 0&&(c=12);for(var g=[],x,A=0;A<this.curves.length;A++){var T=this.curves[A];if(!!T.active)for(var E=T.getResolution(c),S=T.getPoints(E),C=0;C<S.length;C++){var P=S[C];x&&x.equals(P)||(g.push(P),x=P)}}return this.autoClose&&g.length>1&&!g[g.length-1].equals(g[0])&&g.push(g[0]),g},getRandomPoint:function(c){return c===void 0&&(c=new l),this.getPoint(Math.random(),c)},getSpacedPoints:function(c){c===void 0&&(c=40);for(var g=[],x=0;x<=c;x++)g.push(this.getPoint(x/c));return this.autoClose&&g.push(g[0]),g},getStartPoint:function(c){return c===void 0&&(c=new l),c.copy(this.startPoint)},getTangent:function(c,g){g===void 0&&(g=new l);for(var x=c*this.getLength(),A=this.getCurveLengths(),T=0;T<A.length;){if(A[T]>=x){var E=A[T]-x,S=this.curves[T],C=S.getLength(),P=C===0?0:1-E/C;return S.getTangentAt(P,g)}T++}return null},lineTo:function(c,g){c instanceof l?this._tmpVec2B.copy(c):this._tmpVec2B.set(c,g);var x=this.getEndPoint(this._tmpVec2A);return this.add(new s([x.x,x.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(c){return c.unshift(this.getEndPoint()),this.add(new h(c))},moveTo:function(c,g){return c instanceof l?this.add(new n(c.x,c.y)):this.add(new n(c,g))},toJSON:function(){for(var c=[],g=0;g<this.curves.length;g++)c.push(this.curves[g].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:c}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(c,g){return new v(c,g)}),i.exports=v},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(101),a=t(24),o=t(20),s=new e({Extends:f,initialize:function(r){f.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(o.BOOT,this.boot,this),r.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){f.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",s,"data"),i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=t(17),a={In:t(900),To:t(901)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(i,m,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),a=t(44),o=t(45),s=function(n,r){r===void 0&&(r={});var u=f(n),h=o(n);return r.x=u,r.y=h,r.width=a(n)-u,r.height=e(n)-h,r};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.originX};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height*e.originY};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f="none"),e.style.msTouchAction=f,e.style["ms-touch-action"]=f,e.style["touch-action"]=f,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f="none");var a=["-webkit-","-khtml-","-moz-","-ms-",""];return a.forEach(function(o){e.style[o+"user-select"]=f}),e.style["-webkit-touch-callout"]=f,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),f=function(a){a===void 0&&(a=1024);var o=[],s=255,n,r=255,u=0,h=0;for(n=0;n<=s;n++)o.push({r,g:n,b:h,color:e(r,n,h)});for(u=255,n=s;n>=0;n--)o.push({r:n,g:u,b:h,color:e(n,u,h)});for(r=0,n=0;n<=s;n++,u--)o.push({r,g:u,b:n,color:e(r,u,n)});for(u=0,h=255,n=0;n<=s;n++,h--,r++)o.push({r,g:u,b:h,color:e(r,u,h)});if(a===1024)return o;var l=[],d=0,v=1024/a;for(n=0;n<a;n++)l.push(o[Math.floor(d)]),d+=v;return l};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(f.a=e>>>24),f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=t(399),a=function(o,s,n){var r=n,u=n,h=n;if(s!==0){var l=n<.5?n*(1+s):n+s-n*s,d=2*n-l;r=f(d,l,o+1/3),u=f(d,l,o),h=f(d,l,o-1/3)}var v=new e;return v.setGLTo(r,u,h,1)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(188),f=function(a,o){a===void 0&&(a=1),o===void 0&&(o=1);for(var s=[],n=0;n<=359;n++)s.push(e(n/359,a,o));return s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),f=function(s,n,r,u,h,l,d,v){d===void 0&&(d=100),v===void 0&&(v=0);var c=v/d;return{r:e(s,u,c),g:e(n,h,c),b:e(r,l,c)}},a=function(s,n,r,u){return r===void 0&&(r=100),u===void 0&&(u=0),f(s.r,s.g,s.b,n.r,n.g,n.b,r,u)},o=function(s,n,r,u,h,l){return h===void 0&&(h=100),l===void 0&&(l=0),f(s.r,s.g,s.b,n,r,u,h,l)};i.exports={RGBWithRGB:f,ColorWithRGB:o,ColorWithColor:a}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),f=t(38),a=function(o,s){return o===void 0&&(o=0),s===void 0&&(s=255),new f(e(o,s),e(o,s),e(o,s))};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(398),f=function(a,o,s,n,r){return n===void 0&&(n=255),r===void 0&&(r="#"),r==="#"?"#"+((1<<24)+(a<<16)+(o<<8)+s).toString(16).slice(1,7):"0x"+e(n)+e(a)+e(o)+e(s)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={EventEmitter:t(919)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(24),o=new e({Extends:f,initialize:function(){f.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",o,"events"),i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),f=t(321),a=t(325),o=t(31),s=t(0),n=t(346),r=t(921),u=t(366),h=t(101),l=t(384),d=t(347),v=t(400),c=t(9),g=t(22),x=t(409),A=t(24),T=t(414),E=t(415),S=t(417),C=t(106),P=t(422),R=t(385),M=t(387),L=t(426),F=new s({initialize:function(w){this.config=new n(w),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new c,this.anims=new f(this),this.textures=new P(this),this.cache=new a(this),this.registry=new h(this),this.input=new x(this,this.config),this.scene=new S(this,this.config.sceneConfig),this.device=d,this.scale=new E(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new R(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,v(this.boot.bind(this))},boot:function(){if(!A.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),r(this),l(this),e(this.canvas,this.config.parent),this.textures.once(C.READY,this.texturesReady,this),this.events.emit(g.BOOT)},texturesReady:function(){this.events.emit(g.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),M(this);var I=this.events;I.on(g.HIDDEN,this.onHidden,this),I.on(g.VISIBLE,this.onVisible,this),I.on(g.BLUR,this.onBlur,this),I.on(g.FOCUS,this.onFocus,this)},step:function(I,w){if(this.pendingDestroy)return this.runDestroy();var U=this.events;U.emit(g.PRE_STEP,I,w),U.emit(g.STEP,I,w),this.scene.update(I,w),U.emit(g.POST_STEP,I,w);var z=this.renderer;z.preRender(),U.emit(g.PRE_RENDER,z,I,w),this.scene.render(z),z.postRender(),U.emit(g.POST_RENDER,z,I,w)},headlessStep:function(I,w){if(this.pendingDestroy)return this.runDestroy();var U=this.events;U.emit(g.PRE_STEP,I,w),U.emit(g.STEP,I,w),this.scene.update(I,w),U.emit(g.POST_STEP,I,w),U.emit(g.PRE_RENDER),U.emit(g.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(g.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(g.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,w){w===void 0&&(w=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=w},runDestroy:function(){this.scene.destroy(),this.events.emit(g.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});i.exports=F},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),f=function(a){var o=a.config;if(!(!o.parent||!o.domCreateContainer)){var s=document.createElement("div");s.style.cssText=["display: block;","width: "+a.scale.width+"px;","height: "+a.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),a.domContainer=s,e(s,o.parent)}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragend"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragenter"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drag"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragleave"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragover"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameout"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameover"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectdown"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragend"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragenter"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drag"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragleave"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragover"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectmove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectout"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectover"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerdown"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointermove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerout"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerover"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerup"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="wheel"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectup"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectwheel"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="process"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerdown"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerdownoutside"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointermove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerout"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerover"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerup"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerupoutside"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="wheel"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerlockchange"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="preupdate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="shutdown"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addfile"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="filecomplete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="filecomplete-"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loaderror"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="load"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="fileprogress"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postprocess"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="progress"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(!a.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=e.source[f];e.add("__BASE",f,0,0,o.width,o.height);for(var s=a.getElementsByTagName("SubTexture"),n,r=0;r<s.length;r++){var u=s[r].attributes,h=u.name.value,l=parseInt(u.x.value,10),d=parseInt(u.y.value,10),v=parseInt(u.width.value,10),c=parseInt(u.height.value,10);if(n=e.add(h,f,l,d,v,c),u.frameX){var g=Math.abs(parseInt(u.frameX.value,10)),x=Math.abs(parseInt(u.frameY.value,10)),A=parseInt(u.frameWidth.value,10),T=parseInt(u.frameHeight.value,10);n.setTrim(v,c,g,x,A,T)}}return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.source[f];return e.add("__BASE",f,0,0,a.width,a.height),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.source[f];return e.add("__BASE",f,0,0,a.width,a.height),e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(a,o,s){if(!s.frames&&!s.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=a.source[o];a.add("__BASE",o,0,0,n.width,n.height);for(var r=Array.isArray(s.textures)?s.textures[o].frames:s.frames,u,h=0;h<r.length;h++){var l=r[h];u=a.add(l.filename,o,l.frame.x,l.frame.y,l.frame.w,l.frame.h),l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var d=l.anchor||l.pivot;d&&(u.customPivot=!0,u.pivotX=d.x,u.pivotY=d.y),u.customData=e(l)}for(var v in s)v!=="frames"&&(Array.isArray(s[v])?a.customData[v]=s[v].slice(0):a.customData[v]=s[v]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(a,o,s){if(!s.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=a.source[o];a.add("__BASE",o,0,0,n.width,n.height);var r=s.frames,u;for(var h in r)if(!!r.hasOwnProperty(h)){var l=r[h];u=a.add(h,o,l.frame.x,l.frame.y,l.frame.w,l.frame.h),l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var d=l.anchor||l.pivot;d&&(u.customPivot=!0,u.pivotX=d.x,u.pivotY=d.y),u.customData=e(l)}for(var v in s)v!=="frames"&&(Array.isArray(s[v])?a.customData[v]=s[v].slice(0):a.customData[v]=s[v]);return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(a,o,s,n,r,u,h){var l=e(h,"frameWidth",null),d=e(h,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=a.source[o];a.add("__BASE",o,0,0,v.width,v.height);var c=e(h,"startFrame",0),g=e(h,"endFrame",-1),x=e(h,"margin",0),A=e(h,"spacing",0),T=Math.floor((r-x+A)/(l+A)),E=Math.floor((u-x+A)/(d+A)),S=T*E;S===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",a.key),(c>S||c<-S)&&(c=0),c<0&&(c=S+c),g!==-1&&(S=c+(g+1));for(var C=x,P=x,R=0,M=0,L=0;L<S;L++){R=0,M=0;var F=C+l,I=P+d;F>r&&(R=F-r),I>u&&(M=I-u),a.add(L,o,s+C,n+P,l-R,d-M),C+=l+A,C+l>r&&(C=x,P+=d+A)}return a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(a,o,s){var n=e(s,"frameWidth",null),r=e(s,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=a.source[0];a.add("__BASE",0,0,0,u.width,u.height),e(s,"startFrame",0),e(s,"endFrame",-1);for(var h=e(s,"margin",0),l=e(s,"spacing",0),d=o.cutX,v=o.cutY,c=o.cutWidth,g=o.cutHeight,x=o.realWidth,A=o.realHeight,T=Math.floor((x-h+l)/(n+l)),E=Math.floor((A-h+l)/(r+l)),S=o.x,C=n-S,P=n-(x-c-S),R=o.y,M=r-R,L=r-(A-g-R),F,I=h,w=h,U=0,z=o.sourceIndex,W=0;W<E;W++){for(var H=W===0,D=W===E-1,O=0;O<T;O++){var B=O===0,N=O===T-1;if(F=a.add(U,z,d+I,v+w,n,r),B||H||N||D){var G=B?S:0,V=H?R:0,Y=0,X=0;B&&(Y+=n-C),N&&(Y+=n-P),H&&(X+=r-M),D&&(X+=r-L);var b=n-Y,Q=r-X;F.cutWidth=b,F.cutHeight=Q,F.setTrim(n,r,G,V,b,Q)}I+=l,B?I+=C:N?I+=P:I+=n,U++}I=h,w+=l,H?w+=M:D?w+=L:w+=r}return a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,e=function(a,o,s,n){var r=t-n.y-n.height;a.add(s,o,n.x,r,n.width,n.height)},f=function(a,o,s){var n=a.source[o];a.add("__BASE",o,0,0,n.width,n.height),t=n.height;for(var r=s.split(`
`),u=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",l="",d={x:0,y:0,width:0,height:0},v=0;v<r.length;v++){var c=r[v].match(u);if(!!c){var g=c[1]==="- ",x=c[2],A=c[3];if(g&&(l!==h&&(e(a,o,l,d),h=l),d={x:0,y:0,width:0,height:0}),x==="name"){l=A;continue}switch(x){case"x":case"y":case"width":case"height":d[x]=parseInt(A,10);break}}}return l!==h&&e(a,o,l,d),a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="decoded"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="decodedall"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="detune"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="detune"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="mute"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="rate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="volume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="looped"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="mute"},function(i,m){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pan"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pauseall"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="play"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="rate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resumeall"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="seek"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stopall"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="unlocked"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="volume"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};e.Shader=t(229),e.Mesh=t(230),e.PointLight=t(150),e.Factories.Shader=t(1184),e.Factories.Mesh=t(1185),e.Factories.PointLight=t(1186),e.Creators.Shader=t(1187),e.Creators.Mesh=t(1188),e.Creators.PointLight=t(1189),e.Light=t(481),e.LightsManager=t(482),e.LightsPlugin=t(1190),i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(110),a=t(24),o=t(75),s=t(20),n=t(79),r=new e({Extends:f,initialize:function(h){f.call(this,h),this.sortChildrenFlag=!1,this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.events.once(s.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(o.ADDED_TO_SCENE,u,this.scene),this.events.emit(s.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(o.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(s.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,h){return u._depth-h._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list,h=u.length;h--;)u[h].destroy(!0);u.length=0,this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",r,"displayList"),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(186),f=t(209),a=function(o){var s="";if(!f(o))return s;for(var n=0;n<o.length;n++){for(var r=0;r<o[n].length;r++){var u=o[n][r].toString();u!=="undefined"?s+=e(u,2):s+="?",r<o[n].length-1&&(s+=" |")}if(n<o.length-1){s+=`
`;for(var h=0;h<o[n].length;h++)s+="---",h<o[n].length-1&&(s+="+");s+=`
`}}return s};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.reverse()};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=0;f<e.length;f++)e[f].reverse();return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),f=function(a){return e(a,180)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),f=function(a){return e(a,90)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),f=function(a){return e(a,-90)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(178),f=t(179),a=function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),n!==0&&(n<0?e(o,Math.abs(n)):f(o,n)),s!==0)for(var r=0;r<o.length;r++){var u=o[r];s<0?e(u,Math.abs(s)):f(u,s)}return o};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){if(s===void 0&&(s=e),a>0){var n=a-e.length;if(n<=0)return null}if(!Array.isArray(f))return e.indexOf(f)===-1?(e.push(f),o&&o.call(s,f),f):null;for(var r=f.length-1;r>=0;)e.indexOf(f[r])!==-1&&f.splice(r,1),r--;if(r=f.length,r===0)return null;a>0&&r>n&&(f.splice(n),r=n);for(var u=0;u<r;u++){var h=f[u];e.push(h),o&&o.call(s,h)}return f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n){if(a===void 0&&(a=0),n===void 0&&(n=e),o>0){var r=o-e.length;if(r<=0)return null}if(!Array.isArray(f))return e.indexOf(f)===-1?(e.splice(a,0,f),s&&s.call(n,f),f):null;for(var u=f.length-1;u>=0;)e.indexOf(f[u])!==-1&&f.pop(),u--;if(u=f.length,u===0)return null;o>0&&u>r&&(f.splice(r),u=r);for(var h=u-1;h>=0;h--){var l=f[h];e.splice(a,0,l),s&&s.call(n,l)}return f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.indexOf(f);return a!==-1&&a<e.length&&(e.splice(a,1),e.push(f)),f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(a,o,s,n,r){n===void 0&&(n=0),r===void 0&&(r=a.length);var u=0;if(e(a,n,r))for(var h=n;h<r;h++){var l=a[h];l[o]===s&&u++}return u};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o,s=[null];for(o=3;o<arguments.length;o++)s.push(arguments[o]);for(o=0;o<e.length;o++)s[0]=e[o],f.apply(a,s);return e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(a,o,s,n,r){if(n===void 0&&(n=0),r===void 0&&(r=a.length),e(a,n,r)){var u,h=[null];for(u=5;u<arguments.length;u++)h.push(arguments[u]);for(u=n;u<r;u++)h[0]=a[u],o.apply(s,h)}return a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.indexOf(f);if(a>0){var o=e[a-1],s=e.indexOf(o);e[a]=o,e[s]=f}return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=e.indexOf(f);if(o===-1||a<0||a>=e.length)throw new Error("Supplied index out of bounds");return o!==a&&(e.splice(o,1),e.splice(a,0,f)),f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.indexOf(f);if(a!==-1&&a<e.length-1){var o=e[a+1],s=e.indexOf(o);e[a]=o,e[s]=f}return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f===a)return e;var o=e.indexOf(f),s=e.indexOf(a);if(o<0||s<0)throw new Error("Supplied items must be elements of the same array");return o>s||(e.splice(o,1),s===e.length-1?e.push(f):e.splice(s,0,f)),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f===a)return e;var o=e.indexOf(f),s=e.indexOf(a);if(o<0||s<0)throw new Error("Supplied items must be elements of the same array");return o<s||(e.splice(o,1),s===0?e.unshift(f):e.splice(s,0,f)),e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(363),f=function(a,o,s){a===void 0&&(a=0),o===void 0&&(o=null),s===void 0&&(s=1),o===null&&(o=a,a=0);for(var n=[],r=Math.max(e((o-a)/(s||1)),0),u=0;u<r;u++)n.push(a),a+=s;return n};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),f=function(a,o,s,n){if(n===void 0&&(n=a),o<0||o>a.length-1)throw new Error("Index out of bounds");var r=e(a,o);return s&&s.call(n,r),r};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(a,o,s,n,r){if(o===void 0&&(o=0),s===void 0&&(s=a.length),r===void 0&&(r=a),e(a,o,s)){var u=s-o,h=a.splice(o,u);if(n)for(var l=0;l<h.length;l++){var d=h[l];n.call(r,d)}return h}else return[]};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),f=function(a,o,s){o===void 0&&(o=0),s===void 0&&(s=a.length);var n=o+Math.floor(Math.random()*s);return e(a,n)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=e.indexOf(f),s=e.indexOf(a);return o!==-1&&s===-1?(e[o]=a,!0):!1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.indexOf(f);return a!==-1&&a>0&&(e.splice(a,1),e.unshift(f)),f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(a,o,s,n,r){if(n===void 0&&(n=0),r===void 0&&(r=a.length),e(a,n,r))for(var u=n;u<r;u++){var h=a[u];h.hasOwnProperty(o)&&(h[o]=s)}return a};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){if(f===a)return e;var o=e.indexOf(f),s=e.indexOf(a);if(o<0||s<0)throw new Error("Supplied items must be elements of the same array");return e[o]=a,e[s]=f,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(211),a=t(24),o=t(20),s=new e({Extends:f,initialize:function(r){f.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(o.BOOT,this.boot,this),r.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(o.PRE_UPDATE,this.update,this),n.on(o.UPDATE,this.sceneUpdate,this),n.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,r){for(var u=this._active,h=u.length,l=0;l<h;l++){var d=u[l];d.active&&d.preUpdate.call(d,n,r)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var r=this.systems.events;r.off(o.PRE_UPDATE,this.update,this),r.off(o.UPDATE,this.sceneUpdate,this),r.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",s,"updateList"),i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="add"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="remove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){if(a===void 0&&(a=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var s=e.text,n=s.length,r=e.maxWidth,u=e.wordWrapCharCode,h=Number.MAX_VALUE,l=Number.MAX_VALUE,d=0,v=0,c=e.fontData.chars,g=e.fontData.lineHeight,x=e.letterSpacing,A=0,T=0,E=0,S=null,C=e._align,P=0,R=0,M=e.fontSize/e.fontData.size,L=M*e.scaleX,F=M*e.scaleY,I=null,w=0,U=[],z=Number.MAX_VALUE,W=0,H=0,D=0,O,B=[],N=[],G=null;if(r>0){for(O=0;O<n;O++){if(E=s.charCodeAt(O),E===10){G!==null&&(B.push({word:G.word,i:G.i,x:G.x*L,y:G.y*F,w:G.w*L,h:G.h*F,cr:!0}),G=null),A=0,T+=g,I=null;continue}if(S=c[E],!!S){if(I!==null)var V=S.kerning[w];E===u?G!==null&&(B.push({word:G.word,i:G.i,x:G.x*L,y:G.y*F,w:G.w*L,h:G.h*F,cr:!1}),G=null):(G===null&&(G={word:"",i:O,x:A,y:T,w:0,h:g,cr:!1}),G.word=G.word.concat(s[O]),G.w+=S.xOffset+S.xAdvance+(V!==void 0?V:0)),A+=S.xAdvance+x,I=S,w=E}}G!==null&&B.push({word:G.word,i:G.i,x:G.x*L,y:G.y*F,w:G.w*L,h:G.h*F,cr:!1}),A=0,T=0,I=null,w=0;var Y,X=0,b=[];for(O=0;O<B.length;O++){var Q=B[O],K=Q.x,$=Q.x+Q.w;if(Y){var Z=K-(Y.x+Y.w);X=K-(Z+Y.w),Y=null}var k=K-X,J=$-X;k>r||J>r?(b.push(Q.i-1),Q.cr?(b.push(Q.i+Q.word.length),X=0,Y=null):Y=Q):Q.cr&&(b.push(Q.i+Q.word.length),X=0,Y=null)}var tt=function(Lt,Rt,te){return Lt.substr(0,Rt)+te+Lt.substr(Rt+1)};for(O=b.length-1;O>=0;O--)s=tt(s,b[O],`
`);o.wrappedText=s,n=s.length,B=[],G=null}var ut=0;for(O=0;O<n;O++){if(E=s.charCodeAt(O),E===10){G!==null&&(B.push({word:G.word,i:G.i,x:G.x*L,y:G.y*F,w:G.w*L,h:G.h*F}),G=null),A=0,T+=g,I=null,U[H]=D,D>W&&(W=D),D<z&&(z=D),H++,D=0;continue}if(S=c[E],!!S){if(P=A,R=T,I!==null){var rt=S.kerning[w];P+=rt!==void 0?rt:0}h>P&&(h=P),l>R&&(l=R);var it=P+S.xAdvance,j=R+g;d<it&&(d=it),v<j&&(v=j);var vt=S.xOffset+S.xAdvance+(rt!==void 0?rt:0);E===u?G!==null&&(B.push({word:G.word,i:G.i,x:G.x*L,y:G.y*F,w:G.w*L,h:G.h*F}),G=null):(G===null&&(G={word:"",i:ut,x:A,y:T,w:0,h:g}),G.word=G.word.concat(s[O]),G.w+=vt),N.push({i:ut,char:s[O],code:E,x:(S.xOffset+A)*M,y:(S.yOffset+T)*M,w:S.width*M,h:S.height*M,t:T*M,r:it*M,b:g*M,line:H,glyph:S}),A+=S.xAdvance+x,I=S,w=E,D=it*M,ut++}}if(G!==null&&B.push({word:G.word,i:G.i,x:G.x*L,y:G.y*F,w:G.w*L,h:G.h*F}),U[H]=D,D>W&&(W=D),D<z&&(z=D),C>0)for(var nt=0;nt<N.length;nt++){var ht=N[nt];if(C===1){var qt=(W-U[ht.line])/2;ht.x+=qt,ht.r+=qt}else if(C===2){var _t=W-U[ht.line];ht.x+=_t,ht.r+=_t}}var Ct=o.local,xt=o.global,Ot=o.lines;return Ct.x=h*M,Ct.y=l*M,Ct.width=d*M,Ct.height=v*M,xt.x=e.x-e._displayOriginX+h*L,xt.y=e.y-e._displayOriginY+l*F,xt.width=d*L,xt.height=v*F,Ot.shortest=z,Ot.longest=W,Ot.lengths=U,f&&(Ct.x=Math.ceil(Ct.x),Ct.y=Math.ceil(Ct.y),Ct.width=Math.ceil(Ct.width),Ct.height=Math.ceil(Ct.height),xt.x=Math.ceil(xt.x),xt.y=Math.ceil(xt.y),xt.width=Math.ceil(xt.width),xt.height=Math.ceil(xt.height),Ot.shortest=Math.ceil(z),Ot.longest=Math.ceil(W)),a&&(e._displayOriginX=e.originX*Ct.width,e._displayOriginY=e.originY*Ct.height,xt.x=e.x-e._displayOriginX*e.scaleX,xt.y=e.y-e._displayOriginY*e.scaleY,f&&(xt.x=Math.ceil(xt.x),xt.y=Math.ceil(xt.y))),o.words=B,o.characters=N,o.lines.height=g,o.scale=M,o.scaleX=e.scaleX,o.scaleY=e.scaleY,o};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(212),f=function(a,o,s,n,r,u,h){var l=a.sys.textures.get(s),d=l.get(n),v=a.sys.cache.xml.get(r);if(d&&v){var c=e(v,d,u,h,l);return a.sys.cache.bitmapFont.add(o,{data:c,texture:s,frame:n,fromAtlas:!0}),!0}else return!1};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1046),f=t(1048),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1047),f=t(19),a=t(12),o=function(s,n,r,u){var h=n._text,l=h.length;if(l!==0){r.addToRenderList(n);var d=s.pipelines.set(n.pipeline,n),v=f(n,r,u).calc,c=r.roundPixels,g=r.alpha,x=n.charColors,A=n.tintFill,T=a.getTintAppendFloatAlpha,E=T(n.tintTopLeft,g*n._alphaTL),S=T(n.tintTopRight,g*n._alphaTR),C=T(n.tintBottomLeft,g*n._alphaBL),P=T(n.tintBottomRight,g*n._alphaBR),R=n.frame.glTexture,M=d.setGameObject(n),L=n.getTextBounds(!1),F,I,w,U=L.characters,z=n.dropShadowX,W=n.dropShadowY,H=z!==0||W!==0;if(s.pipelines.preBatch(n),H){var D=n.dropShadowColor,O=n.dropShadowAlpha,B=T(D,g*O*n._alphaTL),N=T(D,g*O*n._alphaTR),G=T(D,g*O*n._alphaBL),V=T(D,g*O*n._alphaBR);for(F=0;F<U.length;F++)I=U[F],w=I.glyph,!(I.code===32||w.width===0||w.height===0)&&e(d,n,I,w,z,W,v,c,B,N,G,V,1,R,M)}for(F=0;F<U.length;F++)if(I=U[F],w=I.glyph,!(I.code===32||w.width===0||w.height===0))if(x[I.i]){var Y=x[I.i],X=Y.tintEffect,b=T(Y.tintTL,g*n._alphaTL),Q=T(Y.tintTR,g*n._alphaTR),K=T(Y.tintBL,g*n._alphaBL),$=T(Y.tintBR,g*n._alphaBR);e(d,n,I,w,0,0,v,c,b,Q,K,$,X,R,M)}else e(d,n,I,w,0,0,v,c,E,S,C,P,A,R,M);s.pipelines.postBatch(n)}};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n,r,u,h,l,d,v,c,g,x){var A=a.x-f.displayOriginX+s,T=a.y-f.displayOriginY+n,E=A+a.w,S=T+a.h,C=r.getXRound(A,T,u),P=r.getYRound(A,T,u),R=r.getXRound(A,S,u),M=r.getYRound(A,S,u),L=r.getXRound(E,S,u),F=r.getYRound(E,S,u),I=r.getXRound(E,T,u),w=r.getYRound(E,T,u);e.batchQuad(f,C,P,R,M,L,F,I,w,o.u0,o.v0,o.u1,o.v1,h,l,d,v,c,g,x)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),f=function(a,o,s,n){var r=o._text,u=r.length,h=a.currentContext;if(!(u===0||!e(a,h,o,s,n))){s.addToRenderList(o);var l=o.fromAtlas?o.frame:o.texture.frames.__BASE,d=o.fontData.chars,v=o.fontData.lineHeight,c=o._letterSpacing,g=0,x=0,A=0,T=null,E=0,S=0,C=0,P=0,R=0,M=0,L=null,F=0,I=l.source.image,w=l.cutX,U=l.cutY,z=o._fontSize/o.fontData.size,W=o._align,H=0,D=0,O=o.getTextBounds(!1);o.maxWidth>0&&(r=O.wrappedText,u=r.length);var B=o._bounds.lines;W===1?D=(B.longest-B.lengths[0])/2:W===2&&(D=B.longest-B.lengths[0]),h.translate(-o.displayOriginX,-o.displayOriginY);for(var N=s.roundPixels,G=0;G<u;G++){if(A=r.charCodeAt(G),A===10){H++,W===1?D=(B.longest-B.lengths[H])/2:W===2&&(D=B.longest-B.lengths[H]),g=0,x+=v,L=null;continue}if(T=d[A],!!T){if(E=w+T.x,S=U+T.y,C=T.width,P=T.height,R=T.xOffset+g,M=T.yOffset+x,L!==null){var V=T.kerning[F];R+=V!==void 0?V:0}R*=z,M*=z,R+=D,g+=T.xAdvance+c,L=T,F=A,!(C===0||P===0||A===32)&&(N&&(R=Math.round(R),M=Math.round(M)),h.save(),h.translate(R,M),h.scale(z,z),h.drawImage(I,E,S,C,P,0,0,C,P),h.restore())}}h.restore()}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1050),f=t(1051),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=t(12),a=new e,o=function(s,n,r,u){var h=n.getRenderList();if(h.length!==0){var l=r.alpha*n.alpha;if(l!==0){r.addToRenderList(n);var d=s.pipelines.set(this.pipeline,n),v=r.scrollX*n.scrollFactorX,c=r.scrollY*n.scrollFactorY,g=a.copyFrom(r.matrix);u&&(g.multiplyWithOffset(u,-v,-c),v=0,c=0);var x=n.x-v,A=n.y-c,T=-1,E=!1,S=r.roundPixels;s.pipelines.preBatch(n);for(var C=0;C<h.length;C++){var P=h[C],R=P.frame,M=P.alpha*l;if(M!==0){var L=R.width,F=R.height,I=x+P.x+R.x,w=A+P.y+R.y;P.flipX&&(L*=-1,I+=R.width),P.flipY&&(F*=-1,w+=R.height);var U=I+L,z=w+F,W=g.getX(I,w),H=g.getY(I,w),D=g.getX(U,z),O=g.getY(U,z),B=f.getTintAppendFloatAlpha(P.tint,M);if(R.sourceIndex!==T){var N=d.setGameObject(n,R);T=R.sourceIndex}S&&(W=Math.round(W),H=Math.round(H),D=Math.round(D),O=Math.round(O)),d.batchQuad(n,W,H,W,O,D,O,D,H,R.u0,R.v0,R.u1,R.v1,B,B,B,B,E,R.glTexture,N)&&(T=-1)}}s.pipelines.postBatch(n)}}};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s=f.getRenderList();if(s.length!==0){var n=e.currentContext,r=a.alpha*f.alpha;if(r!==0){a.addToRenderList(f),n.globalCompositeOperation=e.blendModes[f.blendMode],n.imageSmoothingEnabled=!(!e.antialias||f.frame.source.scaleMode);var u=f.x-a.scrollX*f.scrollFactorX,h=f.y-a.scrollY*f.scrollFactorY;n.save(),o&&o.copyToContext(n);for(var l=a.roundPixels,d=0;d<s.length;d++){var v=s[d],c=v.flipX||v.flipY,g=v.frame,x=g.canvasData,A=g.x,T=g.y,E=1,S=1,C=v.alpha*r;C!==0&&(n.globalAlpha=C,c?(v.flipX&&(E=-1,A-=x.width),v.flipY&&(S=-1,T-=x.height),n.save(),n.translate(v.x+u,v.y+h),n.scale(E,S),n.drawImage(g.source.image,x.x,x.y,x.width,x.height,A,T,x.width,x.height),n.restore()):(l&&(A=Math.round(A),T=Math.round(T)),n.drawImage(g.source.image,x.x,x.y,x.width,x.height,A+v.x+u,T+v.y+h,x.width,x.height)))}n.restore()}}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1053),f=t(1054),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f);var s=f.list,n=s.length;if(n!==0){var r=f.localTransform;o?(r.loadIdentity(),r.multiply(o),r.translate(f.x,f.y),r.rotate(f.rotation),r.scale(f.scaleX,f.scaleY)):r.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),e.pipelines.preBatch(f);var u=f.blendMode!==-1;u||e.setBlendMode(0);for(var h=f.alpha,l=f.scrollFactorX,d=f.scrollFactorY,v=0;v<n;v++){var c=s[v];if(!!c.willRender(a)){var g,x,A,T;if(c.alphaTopLeft!==void 0)g=c.alphaTopLeft,x=c.alphaTopRight,A=c.alphaBottomLeft,T=c.alphaBottomRight;else{var E=c.alpha;g=E,x=E,A=E,T=E}var S=c.scrollFactorX,C=c.scrollFactorY;!u&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var P=c.mask;P&&P.preRenderWebGL(e,c,a);var R=c.type;R!==e.currentType&&(e.newType=!0,e.currentType=R),e.nextTypeMatch=v<n-1?s[v+1].type===e.currentType:!1,c.setScrollFactor(S*l,C*d),c.setAlpha(g*h,x*h,A*h,T*h),c.renderWebGL(e,c,a,r),c.setAlpha(g,x,A,T),c.setScrollFactor(S,C),P&&P.postRenderWebGL(e,a),e.newType=!1}}e.pipelines.postBatch(f)}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f);var s=f.list;if(s.length!==0){var n=f.localTransform;o?(n.loadIdentity(),n.multiply(o),n.translate(f.x,f.y),n.rotate(f.rotation),n.scale(f.scaleX,f.scaleY)):n.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var r=f.blendMode!==-1;r||e.setBlendMode(0);var u=f._alpha,h=f.scrollFactorX,l=f.scrollFactorY;f.mask&&f.mask.preRenderCanvas(e,null,a);for(var d=0;d<s.length;d++){var v=s[d];if(!!v.willRender(a)){var c=v.alpha,g=v.scrollFactorX,x=v.scrollFactorY;!r&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode),v.setScrollFactor(g*h,x*l),v.setAlpha(c*u),v.renderCanvas(e,v,a,n),v.setAlpha(c),v.setScrollFactor(g,x)}}f.mask&&f.mask.postRenderCanvas(e)}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(443),f=t(443),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1058),f=t(1059),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(25),a=t(12),o=new f,s=function(n,r,u,h){var l=r.text,d=l.length;if(d!==0){u.addToRenderList(r);var v=n.pipelines.set(r.pipeline,r),c=e(r,u,h),g=c.sprite,x=c.calc,A=o,T=r.cropWidth>0||r.cropHeight>0;T&&(v.flush(),n.pushScissor(x.tx,x.ty,r.cropWidth*x.scaleX,r.cropHeight*x.scaleY));var E=r.frame,S=E.glTexture,C=r.tintFill,P=a.getTintAppendFloatAlpha(r.tintTopLeft,u.alpha*r._alphaTL),R=a.getTintAppendFloatAlpha(r.tintTopRight,u.alpha*r._alphaTR),M=a.getTintAppendFloatAlpha(r.tintBottomLeft,u.alpha*r._alphaBL),L=a.getTintAppendFloatAlpha(r.tintBottomRight,u.alpha*r._alphaBR),F=v.setGameObject(r),I=0,w=0,U=0,z=0,W=r.letterSpacing,H,D=0,O=0,B,N=r.scrollX,G=r.scrollY,V=r.fontData,Y=V.chars,X=V.lineHeight,b=r.fontSize/V.size,Q=0,K=r._align,$=0,Z=0,k=r.getTextBounds(!1);r.maxWidth>0&&(l=k.wrappedText,d=l.length);var J=r._bounds.lines;K===1?Z=(J.longest-J.lengths[0])/2:K===2&&(Z=J.longest-J.lengths[0]);var tt=u.roundPixels,ut=r.displayCallback,rt=r.callbackData;n.pipelines.preBatch(r);for(var it=0;it<d;it++){if(U=l.charCodeAt(it),U===10){$++,K===1?Z=(J.longest-J.lengths[$])/2:K===2&&(Z=J.longest-J.lengths[$]),I=0,w+=X,B=null;continue}if(H=Y[U],!!H){D=H.width,O=H.height;var j=H.xOffset+I-N,vt=H.yOffset+w-G;if(B!==null){var nt=H.kerning[z];j+=nt!==void 0?nt:0}if(I+=H.xAdvance+W,B=H,z=U,!(D===0||O===0||U===32)){if(b=r.fontSize/r.fontData.size,Q=0,ut){rt.color=0,rt.tint.topLeft=P,rt.tint.topRight=R,rt.tint.bottomLeft=M,rt.tint.bottomRight=L,rt.index=it,rt.charCode=U,rt.x=j,rt.y=vt,rt.scale=b,rt.rotation=Q,rt.data=H.data;var ht=ut(rt);j=ht.x,vt=ht.y,b=ht.scale,Q=ht.rotation,ht.color?(P=ht.color,R=ht.color,M=ht.color,L=ht.color):(P=ht.tint.topLeft,R=ht.tint.topRight,M=ht.tint.bottomLeft,L=ht.tint.bottomRight),P=a.getTintAppendFloatAlpha(P,u.alpha*r._alphaTL),R=a.getTintAppendFloatAlpha(R,u.alpha*r._alphaTR),M=a.getTintAppendFloatAlpha(M,u.alpha*r._alphaBL),L=a.getTintAppendFloatAlpha(L,u.alpha*r._alphaBR)}j*=b,vt*=b,j-=r.displayOriginX,vt-=r.displayOriginY,j+=Z,A.applyITRS(j,vt,Q,b,b),x.multiply(A,g);var qt=H.u0,_t=H.v0,Ct=H.u1,xt=H.v1,Ot=D,Lt=O,Rt=g.e,te=g.f,me=Lt*g.c+g.e,ge=Lt*g.d+g.f,xe=Ot*g.a+Lt*g.c+g.e,ye=Ot*g.b+Lt*g.d+g.f,Ae=Ot*g.a+g.e,Te=Ot*g.b+g.f;tt&&(Rt=Math.round(Rt),te=Math.round(te),me=Math.round(me),ge=Math.round(ge),xe=Math.round(xe),ye=Math.round(ye),Ae=Math.round(Ae),Te=Math.round(Te)),v.batchQuad(r,Rt,te,me,ge,xe,ye,Ae,Te,qt,_t,Ct,xt,P,R,M,L,C,S,F)}}}T&&(v.flush(),n.popScissor()),n.pipelines.postBatch(r)}};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),f=function(a,o,s,n){var r=o._text,u=r.length,h=a.currentContext;if(!(u===0||!e(a,h,o,s,n))){s.addToRenderList(o);var l=o.fromAtlas?o.frame:o.texture.frames.__BASE,d=o.displayCallback,v=o.callbackData,c=o.fontData.chars,g=o.fontData.lineHeight,x=o._letterSpacing,A=0,T=0,E=0,S=null,C=0,P=0,R=0,M=0,L=0,F=0,I=null,w=0,U=o.frame.source.image,z=l.cutX,W=l.cutY,H=0,D=0,O=o._fontSize/o.fontData.size,B=o._align,N=0,G=0;o.getTextBounds(!1);var V=o._bounds.lines;B===1?G=(V.longest-V.lengths[0])/2:B===2&&(G=V.longest-V.lengths[0]),h.translate(-o.displayOriginX,-o.displayOriginY);var Y=s.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(h.beginPath(),h.rect(0,0,o.cropWidth,o.cropHeight),h.clip());for(var X=0;X<u;X++){if(D=O,H=0,E=r.charCodeAt(X),E===10){N++,B===1?G=(V.longest-V.lengths[N])/2:B===2&&(G=V.longest-V.lengths[N]),A=0,T+=g,I=null;continue}if(S=c[E],!!S){if(C=z+S.x,P=W+S.y,R=S.width,M=S.height,L=S.xOffset+A-o.scrollX,F=S.yOffset+T-o.scrollY,I!==null){var b=S.kerning[w];L+=b!==void 0?b:0}if(d){v.index=X,v.charCode=E,v.x=L,v.y=F,v.scale=D,v.rotation=H,v.data=S.data;var Q=d(v);L=Q.x,F=Q.y,D=Q.scale,H=Q.rotation}L*=D,F*=D,L+=G,A+=S.xAdvance+x,I=S,w=E,!(R===0||M===0||E===32)&&(Y&&(L=Math.round(L),F=Math.round(F)),h.save(),h.translate(L,F),h.rotate(H),h.scale(D,D),h.drawImage(U,C,P,R,M,0,0,R,M),h.restore())}}h.restore()}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1061),f=t(1062),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(a,o,s,n){a.pipelines.clear();var r=e(o,s,n).calc;o.render.call(o,a,s,r),a.pipelines.rebind()};i.exports=f},function(i,m){},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1064),f=t(448),f=t(448),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),f=t(19),a=t(25),o=t(12),s=function(l,d,v){this.x=l,this.y=d,this.width=v},n=function(l,d,v){this.points=[],this.pointsLength=1,this.points[0]=new s(l,d,v)},r=[],u=new a,h=function(l,d,v,c){if(d.commandBuffer.length!==0){v.addToRenderList(d);var g=l.pipelines.set(d.pipeline,d);l.pipelines.preBatch(d);for(var x=f(d,v,c).calc,A=u.loadIdentity(),T=d.commandBuffer,E=v.alpha*d.alpha,S=1,C=g.fillTint,P=g.strokeTint,R=0,M=0,L=0,F=.01,I=Math.PI*2,w,U=[],z=0,W=!0,H=null,D=o.getTintAppendFloatAlpha,O=0;O<T.length;O++)switch(w=T[O],w){case e.BEGIN_PATH:{U.length=0,H=null,W=!0;break}case e.CLOSE_PATH:{W=!1,H&&H.points.length&&H.points.push(H.points[0]);break}case e.FILL_PATH:{for(z=0;z<U.length;z++)g.batchFillPath(U[z].points,A,x);break}case e.STROKE_PATH:{for(z=0;z<U.length;z++)g.batchStrokePath(U[z].points,S,W,A,x);break}case e.LINE_STYLE:{S=T[++O];var B=T[++O],N=T[++O]*E,G=D(B,N);P.TL=G,P.TR=G,P.BL=G,P.BR=G;break}case e.FILL_STYLE:{var V=T[++O],Y=T[++O]*E,X=D(V,Y);C.TL=X,C.TR=X,C.BL=X,C.BR=X;break}case e.GRADIENT_FILL_STYLE:{var b=T[++O]*E,Q=T[++O]*E,K=T[++O]*E,$=T[++O]*E;C.TL=D(T[++O],b),C.TR=D(T[++O],Q),C.BL=D(T[++O],K),C.BR=D(T[++O],$);break}case e.GRADIENT_LINE_STYLE:{S=T[++O];var Z=T[++O]*E;P.TL=D(T[++O],Z),P.TR=D(T[++O],Z),P.BL=D(T[++O],Z),P.BR=D(T[++O],Z);break}case e.ARC:{var k=0,J=T[++O],tt=T[++O],ut=T[++O],rt=T[++O],it=T[++O],j=T[++O],vt=T[++O];for(it-=rt,j?it<-I?it=-I:it>0&&(it=-I+it%I):it>I?it=I:it<0&&(it=I+it%I),H===null&&(H=new n(J+Math.cos(rt)*ut,tt+Math.sin(rt)*ut,S),U.push(H),k+=F);k<1+vt;)L=it*k+rt,R=J+Math.cos(L)*ut,M=tt+Math.sin(L)*ut,H.points.push(new s(R,M,S)),k+=F;L=it+rt,R=J+Math.cos(L)*ut,M=tt+Math.sin(L)*ut,H.points.push(new s(R,M,S));break}case e.FILL_RECT:{g.batchFillRect(T[++O],T[++O],T[++O],T[++O],A,x);break}case e.FILL_TRIANGLE:{g.batchFillTriangle(T[++O],T[++O],T[++O],T[++O],T[++O],T[++O],A,x);break}case e.STROKE_TRIANGLE:{g.batchStrokeTriangle(T[++O],T[++O],T[++O],T[++O],T[++O],T[++O],S,A,x);break}case e.LINE_TO:{H!==null?H.points.push(new s(T[++O],T[++O],S)):(H=new n(T[++O],T[++O],S),U.push(H));break}case e.MOVE_TO:{H=new n(T[++O],T[++O],S),U.push(H);break}case e.SAVE:{r.push(A.copyToArray());break}case e.RESTORE:{A.copyFromArray(r.pop());break}case e.TRANSLATE:{J=T[++O],tt=T[++O],A.translate(J,tt);break}case e.SCALE:{J=T[++O],tt=T[++O],A.scale(J,tt);break}case e.ROTATE:{A.rotate(T[++O]);break}}l.pipelines.postBatch(d)}};i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1066),f=t(1067),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f),f.pipeline.batchSprite(f,a,o)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f),e.batchSprite(f,f.frame,a,o)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1069),f=t(1070),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f),this.pipeline.batchSprite(f,a,o)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f),e.batchSprite(f,f.frame,a,o)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1072),f=t(1073),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=f.list,s=o.length;if(s!==0){f.depthSort(),e.pipelines.preBatch(f);var n=f.blendMode!==-1;n||e.setBlendMode(0);for(var r=f.alpha,u=0;u<s;u++){var h=o[u];if(!!h.willRender(a)){var l,d,v,c;if(h.alphaTopLeft!==void 0)l=h.alphaTopLeft,d=h.alphaTopRight,v=h.alphaBottomLeft,c=h.alphaBottomRight;else{var g=h.alpha;l=g,d=g,v=g,c=g}!n&&h.blendMode!==e.currentBlendMode&&e.setBlendMode(h.blendMode);var x=h.mask;x&&x.preRenderWebGL(e,h,a);var A=h.type;A!==e.currentType&&(e.newType=!0,e.currentType=A),e.nextTypeMatch=u<s-1?o[u+1].type===e.currentType:!1,h.setAlpha(l*r,d*r,v*r,c*r),h.renderWebGL(e,h,a),h.setAlpha(l,d,v,c),x&&x.postRenderWebGL(e,a),e.newType=!1}}e.pipelines.postBatch(f)}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=f.list;if(o.length!==0){f.depthSort();var s=f.blendMode!==-1;s||e.setBlendMode(0);var n=f._alpha;f.mask&&f.mask.preRenderCanvas(e,null,a);for(var r=0;r<o.length;r++){var u=o[r];if(!!u.willRender(a)){var h=u.alpha;!s&&u.blendMode!==e.currentBlendMode&&e.setBlendMode(u.blendMode),u.setAlpha(h*n),u.renderCanvas(e,u,a),u.setAlpha(h)}}f.mask&&f.mask.postRenderCanvas(e)}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1076),f=t(1077),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=t(12),a=new e,o=new e,s=new e,n=new e,r=function(u,h,l,d){var v=h.emitters.list,c=v.length;if(c!==0){var g=u.pipelines.set(h.pipeline),x=a,A=o,T=s,E=n;d?(E.loadIdentity(),E.multiply(d),E.translate(h.x,h.y),E.rotate(h.rotation),E.scale(h.scaleX,h.scaleY)):E.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var S=l.roundPixels,C=h.defaultFrame.glTexture,P=f.getTintAppendFloatAlpha,R=g.setGameObject(h,h.defaultFrame);u.pipelines.preBatch(h);for(var M=0;M<c;M++){var L=v[M],F=L.alive,I=F.length;if(!(!L.visible||I===0)){l.addToRenderList(L);var w=L.scrollFactorX,U=L.scrollFactorY;u.setBlendMode(L.blendMode),L.mask&&(L.mask.preRenderWebGL(u,L,l),u.pipelines.set(h.pipeline));for(var z=0,W=0;W<I;W++){var H=F[W],D=H.alpha*l.alpha;if(!(D<=0)){T.applyITRS(H.x,H.y,H.rotation,H.scaleX,H.scaleY),x.copyFrom(l.matrix),x.multiplyWithOffset(E,-l.scrollX*w,-l.scrollY*U),T.e=H.x,T.f=H.y,x.multiply(T,A);var O=H.frame,B=-O.halfWidth,N=-O.halfHeight,G=B+O.width,V=N+O.height,Y=A.getXRound(B,N,S),X=A.getYRound(B,N,S),b=A.getXRound(B,V,S),Q=A.getYRound(B,V,S),K=A.getXRound(G,V,S),$=A.getYRound(G,V,S),Z=A.getXRound(G,N,S),k=A.getYRound(G,N,S),J=P(H.tint,D);g.batchQuad(L,Y,X,b,Q,K,$,Z,k,O.u0,O.v0,O.u1,O.v1,J,J,J,J,z,C,R)}}L.mask&&L.mask.postRenderWebGL(u,l)}}u.pipelines.postBatch(h)}};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=new e,a=new e,o=new e,s=new e,n=function(r,u,h,l){var d=u.emitters.list,v=d.length;if(v!==0){var c=f.copyFrom(h.matrix),g=a,x=o,A=s;l?(A.loadIdentity(),A.multiply(l),A.translate(u.x,u.y),A.rotate(u.rotation),A.scale(u.scaleX,u.scaleY)):A.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);for(var T=r.currentContext,E=h.roundPixels,S=0;S<v;S++){var C=d[S],P=C.alive,R=P.length;if(!(!C.visible||R===0)){h.addToRenderList(C);var M=C.scrollFactorX,L=C.scrollFactorY;T.save(),T.globalCompositeOperation=r.blendModes[C.blendMode];for(var F=0;F<R;F++){var I=P[F],w=I.alpha*h.alpha;if(!(w<=0)){x.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),c.copyFrom(h.matrix),c.multiplyWithOffset(A,-h.scrollX*M,-h.scrollY*L),x.e=I.x,x.f=I.y,c.multiply(x,g);var U=I.frame,z=U.canvasData,W=-U.halfWidth,H=-U.halfHeight;T.globalAlpha=w,T.save(),g.setToContext(T),E&&(W=Math.round(W),H=Math.round(H)),T.imageSmoothingEnabled=!(!r.antialias||U.source.scaleMode),T.drawImage(U.source.image,z.x,z.y,z.width,z.height,W,H,z.width,z.height),T.restore()}}T.restore()}}}};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1080),f=t(1081),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(a,o,s,n){s.addToRenderList(o);var r=s.alpha,u=o.renderTarget,h=u.width,l=u.height,d=e.getTintAppendFloatAlpha,v=a.pipelines.set(o.pipeline),c=v.setTexture2D(u.texture);a.pipelines.preBatch(o),v.batchTexture(o,u.texture,h,l,o.x,o.y,h,l,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,h,l,d(o.tintTopLeft,r*o._alphaTL),d(o.tintTopRight,r*o._alphaTR),d(o.tintBottomLeft,r*o._alphaBL),d(o.tintBottomRight,r*o._alphaBR),o.tintFill,0,0,s,n,!0,c),a.resetTextures(),a.pipelines.postBatch(o)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){a.addToRenderList(f),e.batchSprite(f,f.frame,a,o)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1083),f=t(17),a={Parse:t(1084)};a=f(!1,a,e),i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=function(a,o){var s=o.width,n=o.height,r=Math.floor(s/2),u=Math.floor(n/2),h=e(o,"chars","");if(h!==""){var l=e(o,"image",""),d=a.sys.textures.getFrame(l),v=d.cutX,c=d.cutY,g=d.source.width,x=d.source.height,A=e(o,"offset.x",0),T=e(o,"offset.y",0),E=e(o,"spacing.x",0),S=e(o,"spacing.y",0),C=e(o,"lineSpacing",0),P=e(o,"charsPerRow",null);P===null&&(P=g/s,P>h.length&&(P=h.length));for(var R=A,M=T,L={retroFont:!0,font:l,size:s,lineHeight:n+C,chars:{}},F=0,I=0;I<h.length;I++){var w=h.charCodeAt(I),U=(v+R)/g,z=(c+M)/x,W=(v+R+s)/g,H=(c+M+n)/x;L.chars[w]={x:R,y:M,width:s,height:n,centerX:r,centerY:u,xOffset:0,yOffset:0,xAdvance:s,data:{},kerning:{},u0:U,v0:z,u1:W,v1:H},F++,F===P?(F=0,R=A,M+=n+S):R+=s+E}var D={data:L,frame:null,texture:l};return D}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1086),f=t(1087),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),a=function(o,s,n,r){n.addToRenderList(s);var u=o.pipelines.set(s.pipeline,s),h=e(s,n,r).calc,l=s.vertices,d=s.uv,v=s.colors,c=s.alphas,g=s.alpha,x=f.getTintAppendFloatAlpha,A=n.roundPixels,T=l.length,E=Math.floor(T*.5);u.flush(),o.pipelines.preBatch(s);var S=u.setGameObject(s),C=u.vertexViewF32,P=u.vertexViewU32,R=u.vertexCount*u.currentShader.vertexComponentCount-1,M=0,L=s.tintFill;s.dirty&&s.updateVertices();for(var F=s.debugCallback,I=[],w=0;w<T;w+=2){var U=l[w+0],z=l[w+1],W=U*h.a+z*h.c+h.e,H=U*h.b+z*h.d+h.f;A&&(W=Math.round(W),H=Math.round(H)),C[++R]=W,C[++R]=H,C[++R]=d[w+0],C[++R]=d[w+1],C[++R]=S,C[++R]=L,P[++R]=x(v[M],n.alpha*(c[M]*g)),M++,F&&(I[w+0]=W,I[w+1]=H)}F&&F.call(s,s,T,I),u.vertexCount+=E,o.pipelines.postBatch(s)};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1089),f=t(1090),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(a,o,s,n){if(!(o.width===0||o.height===0)){s.addToRenderList(o);var r=o.frame,u=r.width,h=r.height,l=e.getTintAppendFloatAlpha,d=a.pipelines.set(o.pipeline,o),v=d.setTexture2D(r.glTexture,o);a.pipelines.preBatch(o),d.batchTexture(o,r.glTexture,u,h,o.x,o.y,u/o.style.resolution,h/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,u,h,l(o.tintTopLeft,s.alpha*o._alphaTL),l(o.tintTopRight,s.alpha*o._alphaTR),l(o.tintBottomLeft,s.alpha*o._alphaBL),l(o.tintBottomRight,s.alpha*o._alphaBR),o.tintFill,0,0,s,n,!1,v),a.pipelines.postBatch(o)}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f.width===0||f.height===0||(a.addToRenderList(f),e.batchSprite(f,f.frame,a,o))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1092),f=t(1093),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(a,o,s,n){o.updateCanvas();var r=o.width,u=o.height;if(!(r===0||u===0)){s.addToRenderList(o),a.pipelines.preBatch(o);var h=e.getTintAppendFloatAlpha,l=a.pipelines.set(o.pipeline,o),d=l.setTexture2D(o.fillPattern,o);l.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,r,u,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*r,o.originY*u,0,0,r,u,h(o.tintTopLeft,s.alpha*o._alphaTL),h(o.tintTopRight,s.alpha*o._alphaTR),h(o.tintBottomLeft,s.alpha*o._alphaBL),h(o.tintBottomRight,s.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,s,n,!1,d),a.pipelines.postBatch(o)}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f.updateCanvas(),a.addToRenderList(f),e.batchSprite(f,f.frame,a,o)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1095),f=t(1096),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f.videoTexture&&(a.addToRenderList(f),f.pipeline.batchSprite(f,a,o))};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f.videoTexture&&(a.addToRenderList(f),e.batchSprite(f,f.frame,a,o))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1098),f=t(1099),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(114),a=t(81),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=e(n,r,u),d=h.calcMatrix.copyFrom(l.calc),v=n._displayOriginX,c=n._displayOriginY,g=r.alpha*n.alpha;s.pipelines.preBatch(n),n.isFilled&&f(h,d,n,g,v,c),n.isStroked&&a(h,n,g,v,c),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),f=t(48),a=t(60),o=t(30),s=function(n,r,u,h){u.addToRenderList(r);var l=n.currentContext;if(o(n,l,r,u,h)){var d=r.radius;l.beginPath(),l.arc(d-r.originX*(d*2),d-r.originY*(d*2),d,e(r._startAngle),e(r._endAngle),r.anticlockwise),r.closePath&&l.closePath(),r.isFilled&&(f(l,r),l.fill()),r.isStroked&&(a(l,r),l.stroke()),l.restore()}};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1101),f=t(1102),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),a=t(81),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=f(n,r,u),d=h.calcMatrix.copyFrom(l.calc),v=n._displayOriginX+n._curveBounds.x,c=n._displayOriginY+n._curveBounds.y,g=r.alpha*n.alpha;s.pipelines.preBatch(n),n.isFilled&&e(h,d,n,g,v,c),n.isStroked&&a(h,n,g,v,c),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=n._displayOriginX+n._curveBounds.x,d=n._displayOriginY+n._curveBounds.y,v=n.pathData,c=v.length-1,g=v[0]-l,x=v[1]-d;h.beginPath(),h.moveTo(g,x),n.closePath||(c-=2);for(var A=2;A<c;A+=2){var T=v[A]-l,E=v[A+1]-d;h.lineTo(T,E)}n.closePath&&h.closePath(),n.isFilled&&(e(h,n),h.fill()),n.isStroked&&(f(h,n),h.stroke()),h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1104),f=t(1105),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),a=t(81),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=f(n,r,u),d=h.calcMatrix.copyFrom(l.calc),v=n._displayOriginX,c=n._displayOriginY,g=r.alpha*n.alpha;s.pipelines.preBatch(n),n.isFilled&&e(h,d,n,g,v,c),n.isStroked&&a(h,n,g,v,c),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=n._displayOriginX,d=n._displayOriginY,v=n.pathData,c=v.length-1,g=v[0]-l,x=v[1]-d;h.beginPath(),h.moveTo(g,x),n.closePath||(c-=2);for(var A=2;A<c;A+=2){var T=v[A]-l,E=v[A+1]-d;h.lineTo(T,E)}h.closePath(),n.isFilled&&(e(h,n),h.fill()),n.isStroked&&(f(h,n),h.stroke()),h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1107),f=t(1108),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),a=function(o,s,n,r){n.addToRenderList(s);var u=o.pipelines.set(s.pipeline),h=e(s,n,r),l=u.calcMatrix.copyFrom(h.calc);l.translate(-s._displayOriginX,-s._displayOriginY);var d=n.alpha*s.alpha,v=s.width,c=s.height,g=s.cellWidth,x=s.cellHeight,A=Math.ceil(v/g),T=Math.ceil(c/x),E=g,S=x,C=g-(A*g-v),P=x-(T*x-c),R,M,L=s.showCells,F=s.showAltCells,I=s.showOutline,w=0,U=0,z=0,W=0,H=0;if(I&&(E--,S--,C===g&&C--,P===x&&P--),o.pipelines.preBatch(s),L&&s.fillAlpha>0)for(R=u.fillTint,M=f.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*d),R.TL=M,R.TR=M,R.BL=M,R.BR=M,U=0;U<T;U++)for(F&&(z=U%2),w=0;w<A;w++){if(F&&z){z=0;continue}z++,W=w<A-1?E:C,H=U<T-1?S:P,u.batchFillRect(w*g,U*x,W,H)}if(F&&s.altFillAlpha>0)for(R=u.fillTint,M=f.getTintAppendFloatAlpha(s.altFillColor,s.altFillAlpha*d),R.TL=M,R.TR=M,R.BL=M,R.BR=M,U=0;U<T;U++)for(F&&(z=U%2),w=0;w<A;w++){if(F&&!z){z=1;continue}z=0,W=w<A-1?E:C,H=U<T-1?S:P,u.batchFillRect(w*g,U*x,W,H)}if(I&&s.outlineFillAlpha>0){var D=u.strokeTint,O=f.getTintAppendFloatAlpha(s.outlineFillColor,s.outlineFillAlpha*d);for(D.TL=O,D.TR=O,D.BL=O,D.BR=O,w=1;w<A;w++){var B=w*g;u.batchLine(B,0,B,c,1,1,1,0,!1)}for(U=1;U<T;U++){var N=U*x;u.batchLine(0,N,v,N,1,1,1,0,!1)}}o.pipelines.postBatch(s)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=-n._displayOriginX,d=-n._displayOriginY,v=r.alpha*n.alpha,c=n.width,g=n.height,x=n.cellWidth,A=n.cellHeight,T=Math.ceil(c/x),E=Math.ceil(g/A),S=x,C=A,P=x-(T*x-c),R=A-(E*A-g),M=n.showCells,L=n.showAltCells,F=n.showOutline,I=0,w=0,U=0,z=0,W=0;if(F&&(S--,C--,P===x&&P--,R===A&&R--),M&&n.fillAlpha>0)for(e(h,n),w=0;w<E;w++)for(L&&(U=w%2),I=0;I<T;I++){if(L&&U){U=0;continue}U++,z=I<T-1?S:P,W=w<E-1?C:R,h.fillRect(l+I*x,d+w*A,z,W)}if(L&&n.altFillAlpha>0)for(e(h,n,n.altFillColor,n.altFillAlpha*v),w=0;w<E;w++)for(L&&(U=w%2),I=0;I<T;I++){if(L&&!U){U=1;continue}U=0,z=I<T-1?S:P,W=w<E-1?C:R,h.fillRect(l+I*x,d+w*A,z,W)}if(F&&n.outlineFillAlpha>0){for(f(h,n,n.outlineFillColor,n.outlineFillAlpha*v),I=1;I<T;I++){var H=I*x;h.beginPath(),h.moveTo(H+l,d),h.lineTo(H+l,g+d),h.stroke()}for(w=1;w<E;w++){var D=w*A;h.beginPath(),h.moveTo(l,D+d),h.lineTo(l+c,D+d),h.stroke()}}h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1110),f=t(1111),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),a=function(o,s,n,r){n.addToRenderList(s);var u=o.pipelines.set(s.pipeline),h=e(s,n,r),l=u.calcMatrix.copyFrom(h.calc),d=s.width,v=s.height,c=d/2,g=d/s.projection,x=n.alpha*s.alpha;if(!!s.isFilled){var A,T,E,S,C,P,R,M,L;o.pipelines.preBatch(s),s.showTop&&(A=f.getTintAppendFloatAlpha(s.fillTop,x),T=l.getX(-c,-v),E=l.getY(-c,-v),S=l.getX(0,-g-v),C=l.getY(0,-g-v),P=l.getX(c,-v),R=l.getY(c,-v),M=l.getX(0,g-v),L=l.getY(0,g-v),u.batchQuad(s,T,E,S,C,P,R,M,L,0,0,1,1,A,A,A,A,2)),s.showLeft&&(A=f.getTintAppendFloatAlpha(s.fillLeft,x),T=l.getX(-c,0),E=l.getY(-c,0),S=l.getX(0,g),C=l.getY(0,g),P=l.getX(0,g-v),R=l.getY(0,g-v),M=l.getX(-c,-v),L=l.getY(-c,-v),u.batchQuad(s,T,E,S,C,P,R,M,L,0,0,1,1,A,A,A,A,2)),s.showRight&&(A=f.getTintAppendFloatAlpha(s.fillRight,x),T=l.getX(c,0),E=l.getY(c,0),S=l.getX(0,g),C=l.getY(0,g),P=l.getX(0,g-v),R=l.getY(0,g-v),M=l.getX(c,-v),L=l.getY(c,-v),u.batchQuad(s,T,E,S,C,P,R,M,L,0,0,1,1,A,A,A,A,2)),o.pipelines.postBatch(s)}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(30),a=function(o,s,n,r){n.addToRenderList(s);var u=o.currentContext;if(f(o,u,s,n,r)&&s.isFilled){var h=s.width,l=s.height,d=h/2,v=h/s.projection;s.showTop&&(e(u,s,s.fillTop),u.beginPath(),u.moveTo(-d,-l),u.lineTo(0,-v-l),u.lineTo(d,-l),u.lineTo(d,-1),u.lineTo(0,v-1),u.lineTo(-d,-1),u.lineTo(-d,-l),u.fill()),s.showLeft&&(e(u,s,s.fillLeft),u.beginPath(),u.moveTo(-d,0),u.lineTo(0,v),u.lineTo(0,v-l),u.lineTo(-d,-l),u.lineTo(-d,0),u.fill()),s.showRight&&(e(u,s,s.fillRight),u.beginPath(),u.moveTo(d,0),u.lineTo(0,v),u.lineTo(0,v-l),u.lineTo(d,-l),u.lineTo(d,0),u.fill()),u.restore()}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1113),f=t(1114),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),a=function(o,s,n,r){n.addToRenderList(s);var u=o.pipelines.set(s.pipeline),h=e(s,n,r),l=u.calcMatrix.copyFrom(h.calc),d=s.width,v=s.height,c=d/2,g=d/s.projection,x=s.isReversed,A=n.alpha*s.alpha;if(!!s.isFilled){o.pipelines.preBatch(s);var T,E,S,C,P,R,M;if(s.showTop&&x){T=f.getTintAppendFloatAlpha(s.fillTop,A),E=l.getX(-c,-v),S=l.getY(-c,-v),C=l.getX(0,-g-v),P=l.getY(0,-g-v),R=l.getX(c,-v),M=l.getY(c,-v);var L=l.getX(0,g-v),F=l.getY(0,g-v);u.batchQuad(s,E,S,C,P,R,M,L,F,0,0,1,1,T,T,T,T,2)}s.showLeft&&(T=f.getTintAppendFloatAlpha(s.fillLeft,A),x?(E=l.getX(-c,-v),S=l.getY(-c,-v),C=l.getX(0,g),P=l.getY(0,g),R=l.getX(0,g-v),M=l.getY(0,g-v)):(E=l.getX(-c,0),S=l.getY(-c,0),C=l.getX(0,g),P=l.getY(0,g),R=l.getX(0,g-v),M=l.getY(0,g-v)),u.batchTri(s,E,S,C,P,R,M,0,0,1,1,T,T,T,2)),s.showRight&&(T=f.getTintAppendFloatAlpha(s.fillRight,A),x?(E=l.getX(c,-v),S=l.getY(c,-v),C=l.getX(0,g),P=l.getY(0,g),R=l.getX(0,g-v),M=l.getY(0,g-v)):(E=l.getX(c,0),S=l.getY(c,0),C=l.getX(0,g),P=l.getY(0,g),R=l.getX(0,g-v),M=l.getY(0,g-v)),u.batchTri(s,E,S,C,P,R,M,0,0,1,1,T,T,T,2)),o.pipelines.postBatch(s)}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(30),a=function(o,s,n,r){n.addToRenderList(s);var u=o.currentContext;if(f(o,u,s,n,r)&&s.isFilled){var h=s.width,l=s.height,d=h/2,v=h/s.projection,c=s.isReversed;s.showTop&&c&&(e(u,s,s.fillTop),u.beginPath(),u.moveTo(-d,-l),u.lineTo(0,-v-l),u.lineTo(d,-l),u.lineTo(0,v-l),u.fill()),s.showLeft&&(e(u,s,s.fillLeft),u.beginPath(),c?(u.moveTo(-d,-l),u.lineTo(0,v),u.lineTo(0,v-l)):(u.moveTo(-d,0),u.lineTo(0,v),u.lineTo(0,v-l)),u.fill()),s.showRight&&(e(u,s,s.fillRight),u.beginPath(),c?(u.moveTo(d,-l),u.lineTo(0,v),u.lineTo(0,v-l)):(u.moveTo(d,0),u.lineTo(0,v),u.lineTo(0,v-l)),u.fill()),u.restore()}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1116),f=t(1117),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),a=function(o,s,n,r){n.addToRenderList(s);var u=o.pipelines.set(s.pipeline),h=e(s,n,r);u.calcMatrix.copyFrom(h.calc);var l=s._displayOriginX,d=s._displayOriginY,v=n.alpha*s.alpha;if(o.pipelines.preBatch(s),s.isStroked){var c=u.strokeTint,g=f.getTintAppendFloatAlpha(s.strokeColor,s.strokeAlpha*v);c.TL=g,c.TR=g,c.BL=g,c.BR=g;var x=s._startWidth,A=s._endWidth;u.batchLine(s.geom.x1-l,s.geom.y1-d,s.geom.x2-l,s.geom.y2-d,x,A,1,0,!1,h.sprite,h.camera)}o.pipelines.postBatch(s)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(60),f=t(30),a=function(o,s,n,r){n.addToRenderList(s);var u=o.currentContext;if(f(o,u,s,n,r)){var h=s._displayOriginX,l=s._displayOriginY;s.isStroked&&(e(u,s),u.beginPath(),u.moveTo(s.geom.x1-h,s.geom.y1-l),u.lineTo(s.geom.x2-h,s.geom.y2-l),u.stroke()),u.restore()}};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1119),f=t(1120),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),a=t(81),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=f(n,r,u),d=h.calcMatrix.copyFrom(l.calc),v=n._displayOriginX,c=n._displayOriginY,g=r.alpha*n.alpha;s.pipelines.preBatch(n),n.isFilled&&e(h,d,n,g,v,c),n.isStroked&&a(h,n,g,v,c),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=n._displayOriginX,d=n._displayOriginY,v=n.pathData,c=v.length-1,g=v[0]-l,x=v[1]-d;h.beginPath(),h.moveTo(g,x),n.closePath||(c-=2);for(var A=2;A<c;A+=2){var T=v[A]-l,E=v[A+1]-d;h.lineTo(T,E)}h.closePath(),n.isFilled&&(e(h,n),h.fill()),n.isStroked&&(f(h,n),h.stroke()),h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1122),f=t(1123),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(81),a=t(12),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=e(n,r,u);h.calcMatrix.copyFrom(l.calc);var d=n._displayOriginX,v=n._displayOriginY,c=r.alpha*n.alpha;if(s.pipelines.preBatch(n),n.isFilled){var g=h.fillTint,x=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*c);g.TL=x,g.TR=x,g.BL=x,g.BR=x,h.batchFillRect(-d,-v,n.width,n.height)}n.isStroked&&f(h,n,c,d,v),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=n._displayOriginX,d=n._displayOriginY;n.isFilled&&(e(h,n),h.fillRect(-l,-d,n.width,n.height)),n.isStroked&&(f(h,n),h.beginPath(),h.rect(-l,-d,n.width,n.height),h.stroke()),h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1125),f=t(1126),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),a=t(81),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=f(n,r,u),d=h.calcMatrix.copyFrom(l.calc),v=n._displayOriginX,c=n._displayOriginY,g=r.alpha*n.alpha;s.pipelines.preBatch(n),n.isFilled&&e(h,d,n,g,v,c),n.isStroked&&a(h,n,g,v,c),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=n._displayOriginX,d=n._displayOriginY,v=n.pathData,c=v.length-1,g=v[0]-l,x=v[1]-d;h.beginPath(),h.moveTo(g,x),n.closePath||(c-=2);for(var A=2;A<c;A+=2){var T=v[A]-l,E=v[A+1]-d;h.lineTo(T,E)}h.closePath(),n.isFilled&&(e(h,n),h.fill()),n.isStroked&&(f(h,n),h.stroke()),h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1128),f=t(1129),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(81),a=t(12),o=function(s,n,r,u){r.addToRenderList(n);var h=s.pipelines.set(n.pipeline),l=e(n,r,u);h.calcMatrix.copyFrom(l.calc);var d=n._displayOriginX,v=n._displayOriginY,c=r.alpha*n.alpha;if(s.pipelines.preBatch(n),n.isFilled){var g=h.fillTint,x=a.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*c);g.TL=x,g.TR=x,g.BL=x,g.BR=x;var A=n.geom.x1-d,T=n.geom.y1-v,E=n.geom.x2-d,S=n.geom.y2-v,C=n.geom.x3-d,P=n.geom.y3-v;h.batchFillTriangle(A,T,E,S,C,P,l.sprite,l.camera)}n.isStroked&&f(h,n,c,d,v),s.pipelines.postBatch(n)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),a=t(30),o=function(s,n,r,u){r.addToRenderList(n);var h=s.currentContext;if(a(s,h,n,r,u)){var l=n._displayOriginX,d=n._displayOriginY,v=n.geom.x1-l,c=n.geom.y1-d,g=n.geom.x2-l,x=n.geom.y2-d,A=n.geom.x3-l,T=n.geom.y3-d;h.beginPath(),h.moveTo(v,c),h.lineTo(g,x),h.lineTo(A,T),h.closePath(),n.isFilled&&(e(h,n),h.fill()),n.isStroked&&(f(h,n),h.stroke()),h.restore()}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),f=t(5);f.register("blitter",function(a,o,s,n){return this.displayList.add(new e(this.scene,a,o,s,n))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(214),f=t(5);f.register("container",function(a,o,s){return this.displayList.add(new e(this.scene,a,o,s))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(442),f=t(5);f.register("dom",function(a,o,s,n,r){var u=new e(this.scene,a,o,s,n,r);return this.displayList.add(u),u})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),f=t(5);f.register("dynamicBitmapText",function(a,o,s,n,r){return this.displayList.add(new e(this.scene,a,o,s,n,r))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(444),f=t(5);f.register("extern",function(){var a=new e(this.scene);return this.displayList.add(a),a})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(216),f=t(5);f.register("graphics",function(a){return this.displayList.add(new e(this.scene,a))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(113),f=t(5);f.register("group",function(a,o){return this.updateList.add(new e(this.scene,a,o))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(125),f=t(5);f.register("image",function(a,o,s,n){return this.displayList.add(new e(this.scene,a,o,s,n))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(219),f=t(5);f.register("layer",function(a){return this.displayList.add(new e(this.scene,a))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(220);e.register("particles",function(a,o,s){return this.displayList.add(new f(this.scene,a,o,s))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(457);e.register("follower",function(a,o,s,n,r){var u=new f(this.scene,a,o,s,n,r);return this.displayList.add(u),this.updateList.add(u),u})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(221);e.register("renderTexture",function(a,o,s,n,r,u){return this.displayList.add(new f(this.scene,a,o,s,n,r,u))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(223),f=t(5);f.register("rope",function(a,o,s,n,r,u,h,l){return this.displayList.add(new e(this.scene,a,o,s,n,r,u,h,l))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(73);e.register("sprite",function(a,o,s,n){var r=new f(this.scene,a,o,s,n);return this.displayList.add(r),r})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),f=t(5);f.register("bitmapText",function(a,o,s,n,r,u){return this.displayList.add(new e(this.scene,a,o,s,n,r,u))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(224),f=t(5);f.register("text",function(a,o,s,n){return this.displayList.add(new e(this.scene,a,o,s,n))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(225),f=t(5);f.register("tileSprite",function(a,o,s,n,r,u){return this.displayList.add(new e(this.scene,a,o,s,n,r,u))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(129),f=t(5);f.register("zone",function(a,o,s,n){return this.displayList.add(new e(this.scene,a,o,s,n))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(226),f=t(5);f.register("video",function(a,o,s){return this.displayList.add(new e(this.scene,a,o,s))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(461),f=t(5);f.register("arc",function(a,o,s,n,r,u,h,l){return this.displayList.add(new e(this.scene,a,o,s,n,r,u,h,l))}),f.register("circle",function(a,o,s,n,r){return this.displayList.add(new e(this.scene,a,o,s,0,360,!1,n,r))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(462);e.register("curve",function(a,o,s,n,r){return this.displayList.add(new f(this.scene,a,o,s,n,r))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(463),f=t(5);f.register("ellipse",function(a,o,s,n,r,u){return this.displayList.add(new e(this.scene,a,o,s,n,r,u))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(464);e.register("grid",function(a,o,s,n,r,u,h,l,d,v){return this.displayList.add(new f(this.scene,a,o,s,n,r,u,h,l,d,v))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(465);e.register("isobox",function(a,o,s,n,r,u,h){return this.displayList.add(new f(this.scene,a,o,s,n,r,u,h))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(466);e.register("isotriangle",function(a,o,s,n,r,u,h,l){return this.displayList.add(new f(this.scene,a,o,s,n,r,u,h,l))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(467);e.register("line",function(a,o,s,n,r,u,h,l){return this.displayList.add(new f(this.scene,a,o,s,n,r,u,h,l))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(468);e.register("polygon",function(a,o,s,n,r){return this.displayList.add(new f(this.scene,a,o,s,n,r))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(473);e.register("rectangle",function(a,o,s,n,r,u){return this.displayList.add(new f(this.scene,a,o,s,n,r,u))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(474),f=t(5);f.register("star",function(a,o,s,n,r,u,h){return this.displayList.add(new e(this.scene,a,o,s,n,r,u,h))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(475);e.register("triangle",function(a,o,s,n,r,u,h,l,d,v){return this.displayList.add(new f(this.scene,a,o,s,n,r,u,h,l,d,v))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),f=t(28),a=t(16),o=t(13);a.register("blitter",function(s,n){s===void 0&&(s={});var r=o(s,"key",null),u=o(s,"frame",null),h=new e(this.scene,0,0,r,u);return n!==void 0&&(s.add=n),f(this.scene,h,s),h})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(214),a=t(16),o=t(13);a.register("container",function(s,n){s===void 0&&(s={});var r=o(s,"x",0),u=o(s,"y",0),h=o(s,"children",null),l=new f(this.scene,r,u,h);return n!==void 0&&(s.add=n),e(this.scene,l,s),l})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),f=t(28),a=t(16),o=t(13);a.register("dynamicBitmapText",function(s,n){s===void 0&&(s={});var r=o(s,"font",""),u=o(s,"text",""),h=o(s,"size",!1),l=new e(this.scene,0,0,r,u,h);return n!==void 0&&(s.add=n),f(this.scene,l,s),l})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(216);e.register("graphics",function(a,o){a===void 0&&(a={}),o!==void 0&&(a.add=o);var s=new f(this.scene,a);return a.add&&this.scene.sys.displayList.add(s),s})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(113);e.register("group",function(a){return new f(this.scene,null,a)})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(125);f.register("image",function(s,n){s===void 0&&(s={});var r=a(s,"key",null),u=a(s,"frame",null),h=new o(this.scene,0,0,r,u);return n!==void 0&&(s.add=n),e(this.scene,h,s),h})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(219),a=t(16),o=t(13);a.register("layer",function(s,n){s===void 0&&(s={});var r=o(s,"children",null),u=new f(this.scene,r);return n!==void 0&&(s.add=n),e(this.scene,u,s),u})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(13),a=t(2),o=t(220);e.register("particles",function(s,n){s===void 0&&(s={});var r=f(s,"key",null),u=f(s,"frame",null),h=a(s,"emitters",null),l=new o(this.scene,r,u,h);n!==void 0&&(s.add=n);var d=a(s,"add",!1);return d?this.displayList.add(l):this.updateList.add(l),l})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(221);f.register("renderTexture",function(s,n){s===void 0&&(s={});var r=a(s,"x",0),u=a(s,"y",0),h=a(s,"width",32),l=a(s,"height",32),d=a(s,"key",void 0),v=a(s,"frame",void 0),c=new o(this.scene,r,u,h,l,d,v);return n!==void 0&&(s.add=n),e(this.scene,c,s),c})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(6),s=t(223);f.register("rope",function(n,r){n===void 0&&(n={});var u=a(n,"key",null),h=a(n,"frame",null),l=a(n,"horizontal",!0),d=o(n,"points",void 0),v=o(n,"colors",void 0),c=o(n,"alphas",void 0),g=new s(this.scene,0,0,u,h,d,l,v,c);return r!==void 0&&(n.add=r),e(this.scene,g,n),n.add||this.updateList.add(g),g})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(439),a=t(16),o=t(13),s=t(73);a.register("sprite",function(n,r){n===void 0&&(n={});var u=o(n,"key",null),h=o(n,"frame",null),l=new s(this.scene,0,0,u,h);return r!==void 0&&(n.add=r),e(this.scene,l,n),f(l,n),l})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),f=t(28),a=t(16),o=t(13),s=t(6);a.register("bitmapText",function(n,r){n===void 0&&(n={});var u=s(n,"font",""),h=o(n,"text",""),l=o(n,"size",!1),d=s(n,"align",0),v=new e(this.scene,0,0,u,h,l,d);return r!==void 0&&(n.add=r),f(this.scene,v,n),v})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(224);f.register("text",function(s,n){s===void 0&&(s={});var r=a(s,"text",""),u=a(s,"style",null),h=a(s,"padding",null);h!==null&&(u.padding=h);var l=new o(this.scene,0,0,r,u);return n!==void 0&&(s.add=n),e(this.scene,l,s),l.autoRound=a(s,"autoRound",!0),l.resolution=a(s,"resolution",1),l})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(225);f.register("tileSprite",function(s,n){s===void 0&&(s={});var r=a(s,"x",0),u=a(s,"y",0),h=a(s,"width",512),l=a(s,"height",512),d=a(s,"key",""),v=a(s,"frame",""),c=new o(this.scene,r,u,h,l,d,v);return n!==void 0&&(s.add=n),e(this.scene,c,s),c})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(13),a=t(129);e.register("zone",function(o){var s=f(o,"x",0),n=f(o,"y",0),r=f(o,"width",1),u=f(o,"height",r);return new a(this.scene,s,n,r,u)})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(226);f.register("video",function(s,n){s===void 0&&(s={});var r=a(s,"key",null),u=new o(this.scene,0,0,r);return n!==void 0&&(s.add=n),e(this.scene,u,s),s.add||this.updateList.add(u),u})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1177),f=t(1178),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(a,o,s,n){if(!!o.shader){if(s.addToRenderList(o),a.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var r=e(o,s,n).calc;(a.width!==o._rendererWidth||a.height!==o._rendererHeight)&&o.projOrtho(0,a.width,a.height,0),o.load(r.matrix),o.flush()}a.pipelines.rebind()}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1180),f=t(1181),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(a,o,s,n){var r=o.faces,u=r.length;if(u!==0){s.addToRenderList(o);var h=a.pipelines.set(o.pipeline,o),l=e(o,s,n).calc,d=h.setGameObject(o),v=h.vertexViewF32,c=h.vertexViewU32,g=h.vertexCount*h.currentShader.vertexComponentCount-1,x=o.tintFill,A=[],T=o.debugCallback,E=l.a,S=l.b,C=l.c,P=l.d,R=l.e,M=l.f,L=o.viewPosition.z,F=o.hideCCW,I=s.roundPixels,w=s.alpha*o.alpha,U=0;a.pipelines.preBatch(o);for(var z=0;z<u;z++){var W=r[z];!W.isInView(s,F,L,w,E,S,C,P,R,M,I)||(h.shouldFlush(3)&&(h.flush(),g=0),g=W.load(v,c,g,d,x),U++,h.vertexCount+=3,T&&A.push(W))}o.totalFrame+=U,T&&T.call(o,o,A),a.pipelines.postBatch(o)}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1183),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(a,o,s,n){s.addToRenderList(o);var r=a.pipelines.set(o.pipeline),u=e(o,s,n).calc,h=o.width,l=o.height,d=-o._radius,v=-o._radius,c=d+h,g=v+l,x=u.getX(0,0),A=u.getY(0,0),T=u.getX(d,v),E=u.getY(d,v),S=u.getX(d,g),C=u.getY(d,g),P=u.getX(c,g),R=u.getY(c,g),M=u.getX(c,v),L=u.getY(c,v);a.pipelines.preBatch(o),r.batchPointLight(o,s,T,E,S,C,P,R,M,L,x,A),a.pipelines.postBatch(o)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(229),f=t(5);f.register("shader",function(a,o,s,n,r,u,h){return this.displayList.add(new e(this.scene,a,o,s,n,r,u,h))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(230),f=t(5);f.register("mesh",function(a,o,s,n,r,u,h,l,d,v,c){return this.displayList.add(new e(this.scene,a,o,s,n,r,u,h,l,d,v,c))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(150);e.register("pointlight",function(a,o,s,n,r,u){return this.displayList.add(new f(this.scene,a,o,s,n,r,u))})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(229);f.register("shader",function(s,n){s===void 0&&(s={});var r=a(s,"key",null),u=a(s,"x",0),h=a(s,"y",0),l=a(s,"width",128),d=a(s,"height",128),v=new o(this.scene,r,u,h,l,d);return n!==void 0&&(s.add=n),e(this.scene,v,s),v})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(6),s=t(230);f.register("mesh",function(n,r){n===void 0&&(n={});var u=a(n,"key",null),h=a(n,"frame",null),l=o(n,"vertices",[]),d=o(n,"uvs",[]),v=o(n,"indicies",[]),c=o(n,"containsZ",!1),g=o(n,"normals",[]),x=o(n,"colors",16777215),A=o(n,"alphas",1),T=new s(this.scene,0,0,u,h,l,d,v,c,g,x,A);return r!==void 0&&(n.add=r),e(this.scene,T,n),T})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),a=t(13),o=t(150);f.register("pointlight",function(s,n){s===void 0&&(s={});var r=a(s,"color",16777215),u=a(s,"radius",128),h=a(s,"intensity",1),l=a(s,"attenuation",.1),d=new o(this.scene,0,0,r,u,h,l);return n!==void 0&&(s.add=n),e(this.scene,d,s),d})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(482),a=t(24),o=t(20),s=new e({Extends:f,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(o.BOOT,this.boot,this),f.call(this)},boot:function(){var n=this.systems.events;n.on(o.SHUTDOWN,this.shutdown,this),n.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",s,"lights"),i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65);e.Area=t(1192),e.Circumference=t(302),e.CircumferencePoint=t(169),e.Clone=t(1193),e.Contains=t(66),e.ContainsPoint=t(1194),e.ContainsRect=t(1195),e.CopyFrom=t(1196),e.Equals=t(1197),e.GetBounds=t(1198),e.GetPoint=t(300),e.GetPoints=t(301),e.Offset=t(1199),e.OffsetPoint=t(1200),e.Random=t(170),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=function(a){return new e(a.x,a.y,a.radius)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=function(a,o){return e(a,o.x,o.y)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=function(a,o){return e(a,o.x,o.y)&&e(a,o.right,o.y)&&e(a,o.x,o.bottom)&&e(a,o.right,o.bottom)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y,e.radius)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y&&e.radius===f.radius};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a,o){return o===void 0&&(o=new e),o.x=a.left,o.y=a.top,o.width=a.diameter,o.height=a.diameter,o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.x+=f,e.y+=a,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x+=f.x,e.y+=f.y,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111);e.Area=t(1202),e.Circumference=t(447),e.CircumferencePoint=t(218),e.Clone=t(1203),e.Contains=t(112),e.ContainsPoint=t(1204),e.ContainsRect=t(1205),e.CopyFrom=t(1206),e.Equals=t(1207),e.GetBounds=t(1208),e.GetPoint=t(445),e.GetPoints=t(446),e.Offset=t(1209),e.OffsetPoint=t(1210),e.Random=t(180),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111),f=function(a){return new e(a.x,a.y,a.width,a.height)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),f=function(a,o){return e(a,o.x,o.y)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),f=function(a,o){return e(a,o.x,o.y)&&e(a,o.right,o.y)&&e(a,o.x,o.bottom)&&e(a,o.right,o.bottom)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y,e.width,e.height)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y&&e.width===f.width&&e.height===f.height};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a,o){return o===void 0&&(o=new e),o.x=a.left,o.y=a.top,o.width=a.width,o.height=a.height,o};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.x+=f,e.y+=a,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x+=f.x,e.y+=f.y,e};i.exports=t},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(231),a=function(o,s,n){if(n===void 0&&(n=[]),f(o,s)){var r=o.x,u=o.y,h=o.radius,l=s.x,d=s.y,v=s.radius,c,g,x,A,T;if(u===d)T=(v*v-h*h-l*l+r*r)/(2*(r-l)),c=1,g=-2*d,x=l*l+T*T-2*l*T+d*d-v*v,A=g*g-4*c*x,A===0?n.push(new e(T,-g/(2*c))):A>0&&(n.push(new e(T,(-g+Math.sqrt(A))/(2*c))),n.push(new e(T,(-g-Math.sqrt(A))/(2*c))));else{var E=(r-l)/(u-d),S=(v*v-h*h-l*l+r*r-d*d+u*u)/(2*(u-d));c=E*E+1,g=2*u*E-2*S*E-2*r,x=r*r+u*u+S*S-h*h-2*u*S,A=g*g-4*c*x,A===0?(T=-g/(2*c),n.push(new e(T,S-T*E))):A>0&&(T=(-g+Math.sqrt(A))/(2*c),n.push(new e(T,S-T*E)),T=(-g-Math.sqrt(A))/(2*c),n.push(new e(T,S-T*E)))}}return n};i.exports=a},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),f=t(151),a=function(o,s,n){if(n===void 0&&(n=[]),f(o,s)){var r=s.getLineA(),u=s.getLineB(),h=s.getLineC(),l=s.getLineD();e(r,o,n),e(u,o,n),e(h,o,n),e(l,o,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(140),f=t(487),a=t(47),o=new a;function s(u,h,l,d,v){var c=Math.cos(u),g=Math.sin(u);o.setTo(h,l,h+c,l+g);var x=f(o,d);x&&v.push(new e(x.x,x.y,u,x.w))}function n(u,h){return u.z-h.z}var r=function(u,h,l){Array.isArray(l)||(l=[l]);for(var d=[],v=[],c=0;c<l.length;c++)for(var g=l[c].points,x=0;x<g.length;x++){var A=Math.atan2(g[x].y-h,g[x].x-u);v.indexOf(A)===-1&&(s(A,u,h,l,d),s(A-1e-5,u,h,l,d),s(A+1e-5,u,h,l,d),v.push(A))}return d.sort(n)};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(152),a=function(o,s,n){return n===void 0&&(n=new e),f(o,s)&&(n.x=Math.max(o.x,s.x),n.y=Math.max(o.y,s.y),n.width=Math.min(o.right,s.right)-n.x,n.height=Math.min(o.bottom,s.bottom)-n.y),n};i.exports=a},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(234),f=t(152),a=function(o,s,n){if(n===void 0&&(n=[]),f(o,s)){var r=o.getLineA(),u=o.getLineB(),h=o.getLineC(),l=o.getLineD();e(r,s,n),e(u,s,n),e(h,s,n),e(l,s,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(489),f=t(234),a=function(o,s,n){if(n===void 0&&(n=[]),e(o,s)){var r=s.getLineA(),u=s.getLineB(),h=s.getLineC();f(r,o,n),f(u,o,n),f(h,o,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),f=t(491),a=function(o,s,n){if(n===void 0&&(n=[]),f(o,s)){var r=o.getLineA(),u=o.getLineB(),h=o.getLineC();e(r,s,n),e(u,s,n),e(h,s,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(494),f=t(492),a=function(o,s,n){if(n===void 0&&(n=[]),e(o,s)){var r=s.getLineA(),u=s.getLineB(),h=s.getLineC();f(o,r,n),f(o,u,n),f(o,h,n)}return n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(496),f=function(a,o){if(!e(a,o))return!1;var s=Math.min(o.x1,o.x2),n=Math.max(o.x1,o.x2),r=Math.min(o.y1,o.y2),u=Math.max(o.y1,o.y2);return a.x>=s&&a.x<=n&&a.y>=r&&a.y<=u};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s,n){return n===void 0&&(n=0),!(f>e.right+n||a<e.left-n||o>e.bottom+n||s<e.top-n)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47);e.Angle=t(97),e.BresenhamPoints=t(317),e.CenterOn=t(1222),e.Clone=t(1223),e.CopyFrom=t(1224),e.Equals=t(1225),e.Extend=t(1226),e.GetEasedPoints=t(1227),e.GetMidPoint=t(1228),e.GetNearestPoint=t(1229),e.GetNormal=t(1230),e.GetPoint=t(307),e.GetPoints=t(172),e.GetShortestDistance=t(1231),e.Height=t(1232),e.Length=t(67),e.NormalAngle=t(497),e.NormalX=t(1233),e.NormalY=t(1234),e.Offset=t(1235),e.PerpSlope=t(1236),e.Random=t(173),e.ReflectAngle=t(1237),e.Rotate=t(1238),e.RotateAroundPoint=t(1239),e.RotateAroundXY=t(236),e.SetToAngle=t(1240),e.Slope=t(1241),e.Width=t(1242),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=f-(e.x1+e.x2)/2,s=a-(e.y1+e.y2)/2;return e.x1+=o,e.y1+=s,e.x2+=o,e.y2+=s,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47),f=function(a){return new e(a.x1,a.y1,a.x2,a.y2)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x1,e.y1,e.x2,e.y2)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x1===f.x1&&e.y1===f.y1&&e.x2===f.x2&&e.y2===f.y2};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=function(a,o,s){s===void 0&&(s=o);var n=e(a),r=a.x2-a.x1,u=a.y2-a.y1;return o&&(a.x1=a.x1-r/n*o,a.y1=a.y1-u/n*o),s&&(a.x2=a.x2+r/n*s,a.y2=a.y2+u/n*s),a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(352),f=t(80),a=t(4),o=function(s,n,r,u,h){u===void 0&&(u=0),h===void 0&&(h=[]);var l=[],d=s.x1,v=s.y1,c=s.x2-d,g=s.y2-v,x=f(n,h),A,T,E=r-1;for(A=0;A<E;A++)T=x(A/E),l.push(new a(d+c*T,v+g*T));if(T=x(1),l.push(new a(d+c*T,v+g*T)),u>0){var S=l[0],C=[S];for(A=1;A<l.length-1;A++){var P=l[A];e(S,P)>=u&&(C.push(P),S=P)}var R=l[l.length-1];return e(S,R)<u&&C.pop(),C.push(R),C}else return l};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){return o===void 0&&(o=new e),o.x=(a.x1+a.x2)/2,o.y=(a.y1+a.y2)/2,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s){s===void 0&&(s=new e);var n=a.x1,r=a.y1,u=a.x2,h=a.y2,l=(u-n)*(u-n)+(h-r)*(h-r);if(l===0)return s;var d=((o.x-n)*(u-n)+(o.y-r)*(h-r))/l;return s.x=n+d*(u-n),s.y=r+d*(h-r),s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(97),a=t(4),o=function(s,n){n===void 0&&(n=new a);var r=f(s)-e.TAU;return n.x=Math.cos(r),n.y=Math.sin(r),n};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=e.x1,o=e.y1,s=e.x2,n=e.y2,r=(s-a)*(s-a)+(n-o)*(n-o);if(r===0)return!1;var u=((o-f.y)*(s-a)-(a-f.x)*(n-o))/r;return Math.abs(u)*Math.sqrt(r)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.y1-e.y2)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(97),a=function(o){return Math.cos(f(o)-e.TAU)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(97),a=function(o){return Math.sin(f(o)-e.TAU)};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.x1+=f,e.y1+=a,e.x2+=f,e.y2+=a,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(97),f=t(497),a=function(o,s){return 2*f(s)-Math.PI-e(o)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),f=function(a,o){var s=(a.x1+a.x2)/2,n=(a.y1+a.y2)/2;return e(a,s,n,o)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),f=function(a,o,s){return e(a,o.x,o.y,s)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o,s){return e.x1=f,e.y1=a,e.x2=f+Math.cos(o)*s,e.y2=a+Math.sin(o)*s,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.x1-e.x2)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),f=t(2),a=t(69),o=t(39),s=t(117),n=new o,r=new o,u=new a,h=function(l){var d=f(l,"mesh"),v=f(l,"texture",null),c=f(l,"frame"),g=f(l,"width",1),x=f(l,"height",g),A=f(l,"widthSegments",1),T=f(l,"heightSegments",A),E=f(l,"x",0),S=f(l,"y",0),C=f(l,"z",0),P=f(l,"rotateX",0),R=f(l,"rotateY",0),M=f(l,"rotateZ",0),L=f(l,"zIsUp",!0),F=f(l,"isOrtho",d?d.dirtyCache[11]:!1),I=f(l,"colors",[16777215]),w=f(l,"alphas",[1]),U=f(l,"tile",!1),z=f(l,"flipY",!1),W=f(l,"width",null),H={faces:[],verts:[]};if(n.set(E,S,C),r.set(P,R,M),u.fromRotationXYTranslation(r,n,L),!v&&d)v=d.texture;else if(d&&typeof v=="string")v=d.scene.sys.textures.get(v);else return H;var D=v.get(c);!W&&F&&v&&d&&(g=D.width/d.height,x=D.height/d.height);var O=g/2,B=x/2,N=Math.floor(A),G=Math.floor(T),V=N+1,Y=G+1,X=g/N,b=x/G,Q=[],K=[],$,Z,k=0,J=1,tt=0,ut=1;D&&(k=D.u0,J=D.u1,z?(tt=D.v1,ut=D.v0):(tt=D.v0,ut=D.v1));var rt=J-k,it=ut-tt;for(Z=0;Z<Y;Z++){var j=Z*b-B;for($=0;$<V;$++){var vt=$*X-O;K.push(vt,-j);var nt=k+rt*($/N),ht=tt+it*(Z/G);Q.push(nt,ht)}}Array.isArray(I)||(I=[I]),Array.isArray(w)||(w=[w]);var qt=0,_t=0;for(Z=0;Z<G;Z++)for($=0;$<N;$++){var Ct=($+V*Z)*2,xt=($+V*(Z+1))*2,Ot=($+1+V*(Z+1))*2,Lt=($+1+V*Z)*2,Rt=I[_t],te=w[qt],me=new s(K[Ct],K[Ct+1],0,Q[Ct],Q[Ct+1],Rt,te).transformMat4(u),ge=new s(K[xt],K[xt+1],0,Q[xt],Q[xt+1],Rt,te).transformMat4(u),xe=new s(K[Lt],K[Lt+1],0,Q[Lt],Q[Lt+1],Rt,te).transformMat4(u),ye=new s(K[xt],K[xt+1],0,Q[xt],Q[xt+1],Rt,te).transformMat4(u),Ae=new s(K[Ot],K[Ot+1],0,Q[Ot],Q[Ot+1],Rt,te).transformMat4(u),Te=new s(K[Lt],K[Lt+1],0,Q[Lt],Q[Lt+1],Rt,te).transformMat4(u);U&&(me.setUVs(k,ut),ge.setUVs(k,tt),xe.setUVs(J,ut),ye.setUVs(k,tt),Ae.setUVs(J,tt),Te.setUVs(J,ut)),_t++,_t===I.length&&(_t=0),qt++,qt===w.length&&(qt=0),H.verts.push(me,ge,xe,ye,Ae,Te),H.faces.push(new e(me,ge,xe),new e(ye,Ae,Te))}return d&&(d.faces=d.faces.concat(H.faces),d.vertices=d.vertices.concat(H.verts)),H};i.exports=h},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){var s,n;if(a===void 0&&o===void 0){var r=e.getInCenter();s=r.x,n=r.y}var u=Math.cos(f),h=Math.sin(f),l=e.vertex1,d=e.vertex2,v=e.vertex3,c=l.x-s,g=l.y-n;l.set(c*u-g*h+s,c*h+g*u+n),c=d.x-s,g=d.y-n,d.set(c*u-g*h+s,c*h+g*u+n),c=v.x-s,g=v.y-n,v.set(c*u-g*h+s,c*h+g*u+n)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);e.Ceil=t(1247),e.Clone=t(1248),e.CopyFrom=t(1249),e.Equals=t(1250),e.Floor=t(1251),e.GetCentroid=t(1252),e.GetMagnitude=t(500),e.GetMagnitudeSq=t(501),e.GetRectangleFromPoints=t(1253),e.Interpolate=t(1254),e.Invert=t(1255),e.Negative=t(1256),e.Project=t(1257),e.ProjectUnit=t(1258),e.SetMagnitude=t(1259),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a){return new e(a.x,a.y)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){if(o===void 0&&(o=new e),!Array.isArray(a))throw new Error("GetCentroid points argument must be an array");var s=a.length;if(s<1)throw new Error("GetCentroid points array must not be empty");if(s===1)o.x=a[0].x,o.y=a[0].y;else{for(var n=0;n<s;n++)o.x+=a[n].x,o.y+=a[n].y;o.x/=s,o.y/=s}return o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a,o){o===void 0&&(o=new e);for(var s=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,h=0;h<a.length;h++){var l=a[h];l.x>s&&(s=l.x),l.x<n&&(n=l.x),l.y>r&&(r=l.y),l.y<u&&(u=l.y)}return o.x=n,o.y=u,o.width=s-n,o.height=r-u,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s,n){return s===void 0&&(s=0),n===void 0&&(n=new e),n.x=a.x+(o.x-a.x)*s,n.y=a.y+(o.y-a.y)*s,n};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(e.y,e.x)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){return o===void 0&&(o=new e),o.setTo(-a.x,-a.y)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(501),a=function(o,s,n){n===void 0&&(n=new e);var r=o.x*s.x+o.y*s.y,u=r/f(s);return u!==0&&(n.x=u*s.x,n.y=u*s.y),n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o,s){s===void 0&&(s=new e);var n=a.x*o.x+a.y*o.y;return n!==0&&(s.x=n*o.x,s.y=n*o.y),s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(500),f=function(a,o){if(a.x!==0||a.y!==0){var s=e(a);a.x/=s,a.y/=s}return a.x*=o,a.y*=o,a};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227);e.Clone=t(1261),e.Contains=t(228),e.ContainsPoint=t(1262),e.Earcut=t(59),e.GetAABB=t(469),e.GetNumberArray=t(1263),e.GetPoints=t(470),e.Perimeter=t(471),e.Reverse=t(1264),e.Simplify=t(1265),e.Smooth=t(472),e.Translate=t(1266),i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227),f=function(a){return new e(a.points)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(228),f=function(a,o){return e(a,o.x,o.y)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=[]);for(var a=0;a<e.points.length;a++)f.push(e.points[a].x),f.push(e.points[a].y);return f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.points.reverse(),e};i.exports=t},function(i,m){function t(n,r){var u=n.x-r.x,h=n.y-r.y;return u*u+h*h}function e(n,r,u){var h=r.x,l=r.y,d=u.x-h,v=u.y-l;if(d!==0||v!==0){var c=((n.x-h)*d+(n.y-l)*v)/(d*d+v*v);c>1?(h=u.x,l=u.y):c>0&&(h+=d*c,l+=v*c)}return d=n.x-h,v=n.y-l,d*d+v*v}function f(n,r){for(var u=n[0],h=[u],l,d=1,v=n.length;d<v;d++)l=n[d],t(l,u)>r&&(h.push(l),u=l);return u!==l&&h.push(l),h}function a(n,r,u,h,l){for(var d=h,v,c=r+1;c<u;c++){var g=e(n[c],n[r],n[u]);g>d&&(v=c,d=g)}d>h&&(v-r>1&&a(n,r,v,h,l),l.push(n[v]),u-v>1&&a(n,v,u,h,l))}function o(n,r){var u=n.length-1,h=[n[0]];return a(n,0,u,r,h),h.push(n[u]),h}var s=function(n,r,u){r===void 0&&(r=1),u===void 0&&(u=!1);var h=n.points;if(h.length>2){var l=r*r;u||(h=f(h,l)),n.setTo(o(h,l))}return n};i.exports=s},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){for(var o=e.points,s=0;s<o.length;s++)o[s].x+=f,o[s].y+=a;return e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.height};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a){return new e(a.x,a.y,a.width,a.height)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(57),f=function(a,o){return e(a,o.x,o.y)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y,e.width,e.height)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y&&e.width===f.width&&e.height===f.height};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),f=function(a,o){var s=e(a);return s<e(o)?a.setSize(o.height*s,o.height):a.setSize(o.width,o.width/s),a.setPosition(o.centerX-a.width/2,o.centerY-a.height/2)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),f=function(a,o){var s=e(a);return s>e(o)?a.setSize(o.height*s,o.height):a.setSize(o.width,o.width/s),a.setPosition(o.centerX-a.width/2,o.centerY-a.height/2)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};i.exports=t},function(i,m,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(a,o,s,n,r){return r===void 0&&(r=new e),r.setTo(Math.min(a,s),Math.min(o,n),Math.abs(a-s),Math.abs(o-n))};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){return o===void 0&&(o=new e),o.x=a.centerX,o.y=a.centerY,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(a,o){return o===void 0&&(o=new e),o.x=a.width,o.y=a.height,o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(190),f=function(a,o,s){var n=a.centerX,r=a.centerY;return a.setSize(a.width+o*2,a.height+s*2),e(a,n,r)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(152),a=function(o,s,n){return n===void 0&&(n=new e),f(o,s)?(n.x=Math.max(o.x,s.x),n.y=Math.max(o.y,s.y),n.width=Math.min(o.right,s.right)-n.x,n.height=Math.min(o.bottom,s.bottom)-n.y):n.setEmpty(),n};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var a=e.x,o=e.right,s=e.y,n=e.bottom,r=0;r<f.length;r++)a=Math.min(a,f[r].x),o=Math.max(o,f[r].x),s=Math.min(s,f[r].y),n=Math.max(n,f[r].y);return e.x=a,e.y=s,e.width=o-a,e.height=n-s,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var a=Math.min(e.x,f.x),o=Math.max(e.right,f.right);e.x=a,e.width=o-a;var s=Math.min(e.y,f.y),n=Math.max(e.bottom,f.bottom);return e.y=s,e.height=n-s,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){var o=Math.min(e.x,f),s=Math.max(e.right,f);e.x=o,e.width=s-o;var n=Math.min(e.y,a),r=Math.max(e.bottom,a);return e.y=n,e.height=r-n,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return e.x+=f,e.y+=a,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x+=f.x,e.y+=f.y,e};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x<f.right&&e.right>f.x&&e.y<f.bottom&&e.bottom>f.y};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(36),a=function(o,s,n){n===void 0&&(n=new e),s=f(s);var r=Math.sin(s),u=Math.cos(s),h=u>0?o.width/2:o.width/-2,l=r>0?o.height/2:o.height/-2;return Math.abs(h*r)<Math.abs(l*u)?l=h*r/u:h=l*u/r,n.x=h+o.centerX,n.y=l+o.centerY,n};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),f=t(503),a=t(4),o=function(s,n,r){if(r===void 0&&(r=new a),f(s,n))switch(e(0,3)){case 0:r.x=s.x+Math.random()*(n.right-s.x),r.y=s.y+Math.random()*(n.top-s.y);break;case 1:r.x=n.x+Math.random()*(s.right-n.x),r.y=n.bottom+Math.random()*(s.bottom-n.bottom);break;case 2:r.x=s.x+Math.random()*(n.x-s.x),r.y=n.y+Math.random()*(s.bottom-n.y);break;case 3:r.x=n.right+Math.random()*(s.right-n.right),r.y=s.y+Math.random()*(n.bottom-s.y);break}return r};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.width===f.width&&e.height===f.height};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a){return a===void 0&&(a=f),e.width*=f,e.height*=a,e};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82);e.Area=t(1294),e.BuildEquilateral=t(1295),e.BuildFromPolygon=t(1296),e.BuildRight=t(1297),e.CenterOn=t(1298),e.Centroid=t(504),e.CircumCenter=t(1299),e.CircumCircle=t(1300),e.Clone=t(1301),e.Contains=t(115),e.ContainsArray=t(235),e.ContainsPoint=t(1302),e.CopyFrom=t(1303),e.Decompose=t(495),e.Equals=t(1304),e.GetPoint=t(476),e.GetPoints=t(477),e.InCenter=t(506),e.Perimeter=t(1305),e.Offset=t(505),e.Random=t(181),e.Rotate=t(1306),e.RotateAroundPoint=t(1307),e.RotateAroundXY=t(238),i.exports=e},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.x1,a=e.y1,o=e.x2,s=e.y2,n=e.x3,r=e.y3;return Math.abs(((n-f)*(s-a)-(o-f)*(r-a))/2)};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),f=function(a,o,s){var n=s*(Math.sqrt(3)/2),r=a,u=o,h=a+s/2,l=o+n,d=a-s/2,v=o+n;return new e(r,u,h,l,d,v)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(59),f=t(82),a=function(o,s,n,r,u){s===void 0&&(s=null),n===void 0&&(n=1),r===void 0&&(r=1),u===void 0&&(u=[]);for(var h=e(o,s),l,d,v,c,g,x,A,T,E,S=0;S<h.length;S+=3)l=h[S],d=h[S+1],v=h[S+2],c=o[l*2]*n,g=o[l*2+1]*r,x=o[d*2]*n,A=o[d*2+1]*r,T=o[v*2]*n,E=o[v*2+1]*r,u.push(new f(c,g,x,A,T,E));return u};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),f=function(a,o,s,n){n===void 0&&(n=s);var r=a,u=o,h=a,l=o-n,d=a+s,v=o;return new e(r,u,h,l,d,v)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(504),f=t(505),a=function(o,s,n,r){r===void 0&&(r=e);var u=r(o),h=s-u.x,l=n-u.y;return f(o,h,l)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3);function f(o,s,n,r){return o*r-s*n}var a=function(o,s){s===void 0&&(s=new e);var n=o.x3,r=o.y3,u=o.x1-n,h=o.y1-r,l=o.x2-n,d=o.y2-r,v=2*f(u,h,l,d),c=f(h,u*u+h*h,d,l*l+d*d),g=f(u,u*u+h*h,l,l*l+d*d);return s.x=n-c/v,s.y=r+g/v,s};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=function(a,o){o===void 0&&(o=new e);var s=a.x1,n=a.y1,r=a.x2,u=a.y2,h=a.x3,l=a.y3,d=r-s,v=u-n,c=h-s,g=l-n,x=d*(s+r)+v*(n+u),A=c*(s+h)+g*(n+l),T=2*(d*(l-u)-v*(h-r)),E,S;if(Math.abs(T)<1e-6){var C=Math.min(s,r,h),P=Math.min(n,u,l);E=(Math.max(s,r,h)-C)*.5,S=(Math.max(n,u,l)-P)*.5,o.x=C+E,o.y=P+S,o.radius=Math.sqrt(E*E+S*S)}else o.x=(g*x-v*A)/T,o.y=(d*A-c*x)/T,E=o.x-s,S=o.y-n,o.radius=Math.sqrt(E*E+S*S);return o};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),f=function(a){return new e(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(115),f=function(a,o){return e(a,o.x,o.y)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x1===f.x1&&e.y1===f.y1&&e.x2===f.x2&&e.y2===f.y2&&e.x3===f.x3&&e.y3===f.y3};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=function(a){var o=a.getLineA(),s=a.getLineB(),n=a.getLineC();return e(o)+e(s)+e(n)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),f=t(506),a=function(o,s){var n=f(o);return e(o,n.x,n.y,s)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),f=function(a,o,s){return e(a,o.x,o.y,s)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(203),f=t(17),a={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="down"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="up"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="connected"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="disconnected"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="down"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="up"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(239),o=t(511),s=t(6),n=t(153),r=t(51),u=new e({Extends:f,initialize:function(l){f.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(r.BOOT,this.boot,this),l.pluginEvents.on(r.START,this.start,this)},boot:function(){var h=this.scene.sys.game,l=this.settings.input,d=h.config;this.enabled=s(l,"gamepad",d.inputGamepad)&&h.device.input.gamepads,this.target=s(l,"gamepad.target",d.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var h=this,l=this.target,d=function(v){v.defaultPrevented||!h.isActive()||(h.refreshPads(),h.queue.push(v))};this.onGamepadHandler=d,l.addEventListener("gamepadconnected",d,!1),l.addEventListener("gamepaddisconnected",d,!1),this.sceneInputPlugin.pluginEvents.on(r.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(r.UPDATE,this.update);for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].removeAllListeners()},disconnectAll:function(){for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].pad.connected=!1},refreshPads:function(){var h=navigator.getGamepads();if(!h)this.disconnectAll();else for(var l=this.gamepads,d=0;d<h.length;d++){var v=h[d];if(!!v){var c=v.id,g=v.index,x=l[g];if(x)x.id!==c?(x.destroy(),l[g]=new o(this,v)):x.update(v);else{var A=new o(this,v);l[g]=A,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=A):this._pad3=A:this._pad2=A:this._pad1=A}}}},getAll:function(){for(var h=[],l=this.gamepads,d=0;d<l.length;d++)l[d]&&h.push(l[d]);return h},getPad:function(h){for(var l=this.gamepads,d=0;d<l.length;d++)if(l[d]&&l[d].index===h)return l[d]},update:function(){if(!!this.enabled){this.refreshPads();var h=this.queue.length;if(h!==0)for(var l=this.queue.splice(0,h),d=0;d<h;d++){var v=l[d],c=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(a.CONNECTED,c,v):v.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,c,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var h=0;h<this.gamepads.length;h++)this.gamepads[h]&&this.gamepads[h].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=t(66),a=t(0),o=t(203),s=t(508),n=t(507),r=t(50),u=t(111),h=t(112),l=t(51),d=t(9),v=t(2),c=t(56),g=t(153),x=t(7),A=t(24),T=t(10),E=t(57),S=t(20),C=t(82),P=t(115),R=new a({Extends:d,initialize:function(L){d.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new d,this.enabled=!0,this.displayList,this.cameras,g.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(S.BOOT,this.boot,this),L.sys.events.on(S.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(S.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var M=this.systems.events;M.on(S.TRANSITION_START,this.transitionIn,this),M.on(S.TRANSITION_OUT,this.transitionOut,this),M.on(S.TRANSITION_COMPLETE,this.transitionComplete,this),M.on(S.PRE_UPDATE,this.preUpdate,this),M.once(S.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(M){this.isActive()&&this.emit(l.GAME_OVER,M.timeStamp,M)},onGameOut:function(M){this.isActive()&&this.emit(l.GAME_OUT,M.timeStamp,M)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var M=this._pendingRemoval,L=this._pendingInsertion,F=M.length,I=L.length;if(!(F===0&&I===0)){for(var w=this._list,U=0;U<F;U++){var z=M[U],W=w.indexOf(z);W>-1&&(w.splice(W,1),this.clear(z,!0))}M.length=0,this._pendingRemoval.length=0,this._list=w.concat(L.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(M,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,M,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,w=I.pointers,U=I.pointersTotal;for(F=0;F<U;F++)w[F].updateMotion();if(this._list.length===0)return!1;var z=this.pollRate;if(z===-1)return!1;if(z>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var W=!1;for(F=0;F<U;F++){var H=0,D=w[F];this._tempZones=[],this._temp=this.hitTestPointer(D),this.sortGameObjects(this._temp,D),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),H+=this.processOverOutEvents(D),this.getDragState(D)===2&&this.processDragThresholdEvent(D,M),H>0&&(W=!0)}return W},update:function(M,L){if(!this.isActive())return!1;for(var F=L.length,I=!1,w=0;w<F;w++){var U=0,z=L[w];switch(this._tempZones=[],this._temp=this.hitTestPointer(z),this.sortGameObjects(this._temp,z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),M){case o.MOUSE_DOWN:U+=this.processDragDownEvent(z),U+=this.processDownEvents(z),U+=this.processOverOutEvents(z);break;case o.MOUSE_UP:U+=this.processDragUpEvent(z),U+=this.processUpEvents(z),U+=this.processOverOutEvents(z);break;case o.TOUCH_START:U+=this.processDragDownEvent(z),U+=this.processDownEvents(z),U+=this.processOverEvents(z);break;case o.TOUCH_END:case o.TOUCH_CANCEL:U+=this.processDragUpEvent(z),U+=this.processUpEvents(z),U+=this.processOutEvents(z);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:U+=this.processDragMoveEvent(z),U+=this.processMoveEvents(z),U+=this.processOverOutEvents(z);break;case o.MOUSE_WHEEL:U+=this.processWheelEvent(z);break}U>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(M,L){L===void 0&&(L=!1);var F=M.input;if(!!F){L||this.queueForRemoval(M),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,M.input=null;var I=this._draggable.indexOf(M);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(M),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(M),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),M}},disable:function(M){M.input.enabled=!1},enable:function(M,L,F,I){return I===void 0&&(I=!1),M.input?M.input.enabled=!0:this.setHitArea(M,L,F),M.input&&I&&!M.input.dropZone&&(M.input.dropZone=I),this},hitTestPointer:function(M){for(var L=this.cameras.getCamerasBelowPointer(M),F=0;F<L.length;F++){for(var I=L[F],w=this.manager.hitTest(M,this._list,I),U=0;U<w.length;U++){var z=w[U];z.input.dropZone&&this._tempZones.push(z)}if(w.length>0)return M.camera=I,w}return M.camera=L[0],[]},processDownEvents:function(M){var L=0,F=this._temp,I=this._eventData,w=this._eventContainer;I.cancelled=!1;for(var U=!1,z=0;z<F.length;z++){var W=F[z];if(!!W.input){if(L++,W.emit(l.GAMEOBJECT_POINTER_DOWN,M,W.input.localX,W.input.localY,w),I.cancelled||!W.input){U=!0;break}if(this.emit(l.GAMEOBJECT_DOWN,M,W,w),I.cancelled||!W.input){U=!0;break}}}return!U&&this.manager&&(M.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,M,F):this.emit(l.POINTER_DOWN_OUTSIDE,M)),L},getDragState:function(M){return this._dragState[M.id]},setDragState:function(M,L){this._dragState[M.id]=L},processDragThresholdEvent:function(M,L){var F=!1,I=this.dragTimeThreshold,w=this.dragDistanceThreshold;if((w>0&&r(M.x,M.y,M.downX,M.downY)>=w||I>0&&L>=M.downTime+I)&&(F=!0),F)return this.setDragState(M,3),this.processDragStartList(M)},processDragStartList:function(M){if(this.getDragState(M)!==3)return 0;for(var L=this._drag[M.id],F=0;F<L.length;F++){var I=L[F],w=I.input;w.dragState=2,w.dragStartX=I.x,w.dragStartY=I.y,w.dragStartXGlobal=M.worldX,w.dragStartYGlobal=M.worldY,w.dragX=w.dragStartXGlobal-w.dragStartX,w.dragY=w.dragStartYGlobal-w.dragStartY,I.emit(l.GAMEOBJECT_DRAG_START,M,w.dragX,w.dragY),this.emit(l.DRAG_START,M,I)}return this.setDragState(M,4),L.length},processDragDownEvent:function(M){var L=this._temp;if(this._draggable.length===0||L.length===0||!M.primaryDown||this.getDragState(M)!==0)return 0;this.setDragState(M,1);for(var F=[],I=0;I<L.length;I++){var w=L[I];w.input.draggable&&w.input.dragState===0&&F.push(w)}return F.length===0?(this.setDragState(M,0),0):(F.length>1&&(this.sortGameObjects(F,M),this.topOnly&&F.splice(1)),this._drag[M.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(M,3),this.processDragStartList(M)):(this.setDragState(M,2),0))},processDragMoveEvent:function(M){if(this.getDragState(M)===2&&this.processDragThresholdEvent(M,this.manager.game.loop.now),this.getDragState(M)!==4)return 0;for(var L=this._tempZones,F=this._drag[M.id],I=0;I<F.length;I++){var w=F[I],U=w.input,z=U.target;if(z){var W=L.indexOf(z);W===0?(w.emit(l.GAMEOBJECT_DRAG_OVER,M,z),this.emit(l.DRAG_OVER,M,w,z)):W>0?(w.emit(l.GAMEOBJECT_DRAG_LEAVE,M,z),this.emit(l.DRAG_LEAVE,M,w,z),U.target=L[0],z=U.target,w.emit(l.GAMEOBJECT_DRAG_ENTER,M,z),this.emit(l.DRAG_ENTER,M,w,z)):(w.emit(l.GAMEOBJECT_DRAG_LEAVE,M,z),this.emit(l.DRAG_LEAVE,M,w,z),L[0]?(U.target=L[0],z=U.target,w.emit(l.GAMEOBJECT_DRAG_ENTER,M,z),this.emit(l.DRAG_ENTER,M,w,z)):U.target=null)}else!z&&L[0]&&(U.target=L[0],z=U.target,w.emit(l.GAMEOBJECT_DRAG_ENTER,M,z),this.emit(l.DRAG_ENTER,M,w,z));var H,D;if(!w.parentContainer)H=M.worldX-U.dragX,D=M.worldY-U.dragY;else{var O=M.worldX-U.dragStartXGlobal,B=M.worldY-U.dragStartYGlobal,N=w.getParentRotation(),G=O*Math.cos(N)+B*Math.sin(N),V=B*Math.cos(N)-O*Math.sin(N);G*=1/w.parentContainer.scaleX,V*=1/w.parentContainer.scaleY,H=G+U.dragStartX,D=V+U.dragStartY}w.emit(l.GAMEOBJECT_DRAG,M,H,D),this.emit(l.DRAG,M,w,H,D)}return F.length},processDragUpEvent:function(M){for(var L=this._drag[M.id],F=0;F<L.length;F++){var I=L[F],w=I.input;if(w&&w.dragState===2){w.dragState=0,w.dragX=w.localX-I.displayOriginX,w.dragY=w.localY-I.displayOriginY;var U=!1,z=w.target;z&&(I.emit(l.GAMEOBJECT_DROP,M,z),this.emit(l.DROP,M,I,z),w.target=null,U=!0),I.input&&(I.emit(l.GAMEOBJECT_DRAG_END,M,w.dragX,w.dragY,U),this.emit(l.DRAG_END,M,I,U))}}return this.setDragState(M,0),L.splice(0),0},processMoveEvents:function(M){var L=0,F=this._temp,I=this._eventData,w=this._eventContainer;I.cancelled=!1;for(var U=!1,z=0;z<F.length;z++){var W=F[z];if(!!W.input){if(L++,W.emit(l.GAMEOBJECT_POINTER_MOVE,M,W.input.localX,W.input.localY,w),I.cancelled||!W.input){U=!0;break}if(this.emit(l.GAMEOBJECT_MOVE,M,W,w),I.cancelled||!W.input){U=!0;break}if(this.topOnly)break}}return U||this.emit(l.POINTER_MOVE,M,F),L},processWheelEvent:function(M){var L=0,F=this._temp,I=this._eventData,w=this._eventContainer;I.cancelled=!1;for(var U=!1,z=M.deltaX,W=M.deltaY,H=M.deltaZ,D=0;D<F.length;D++){var O=F[D];if(!!O.input){if(L++,O.emit(l.GAMEOBJECT_POINTER_WHEEL,M,z,W,H,w),I.cancelled||!O.input){U=!0;break}if(this.emit(l.GAMEOBJECT_WHEEL,M,O,z,W,H,w),I.cancelled||!O.input){U=!0;break}}}return U||this.emit(l.POINTER_WHEEL,M,F,z,W,H),L},processOverEvents:function(M){var L=this._temp,F=0,I=L.length,w=[];if(I>0){var U=this.manager,z=this._eventData,W=this._eventContainer;z.cancelled=!1;for(var H=!1,D=0;D<I;D++){var O=L[D];if(!!O.input){if(w.push(O),U.setCursor(O.input),O.emit(l.GAMEOBJECT_POINTER_OVER,M,O.input.localX,O.input.localY,W),F++,z.cancelled||!O.input){H=!0;break}if(this.emit(l.GAMEOBJECT_OVER,M,O,W),z.cancelled||!O.input){H=!0;break}}}H||this.emit(l.POINTER_OVER,M,w)}return this._over[M.id]=w,F},processOutEvents:function(M){var L=this._over[M.id],F=0,I=L.length;if(I>0){var w=this.manager,U=this._eventData,z=this._eventContainer;U.cancelled=!1;var W=!1;this.sortGameObjects(L,M);for(var H=0;H<I;H++){var D=L[H];if(D=L[H],!!D.input){if(w.resetCursor(D.input),D.emit(l.GAMEOBJECT_POINTER_OUT,M,z),F++,U.cancelled||!D.input){W=!0;break}if(this.emit(l.GAMEOBJECT_OUT,M,D,z),U.cancelled||!D.input){W=!0;break}W||this.emit(l.POINTER_OUT,M,L)}}this._over[M.id]=[]}return F},processOverOutEvents:function(M){var L=this._temp,F,I,w=[],U=[],z=[],W=this._over[M.id],H=this._drag[M.id],D=this.manager;for(F=0;F<W.length;F++)I=W[F],L.indexOf(I)===-1&&H.indexOf(I)===-1?w.push(I):z.push(I);for(F=0;F<L.length;F++)I=L[F],W.indexOf(I)===-1&&U.push(I);var O=w.length,B=0,N=this._eventData,G=this._eventContainer;N.cancelled=!1;var V=!1;if(O>0){for(this.sortGameObjects(w,M),F=0;F<O;F++)if(I=w[F],!!I.input){if(D.resetCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OUT,M,G),B++,N.cancelled||!I.input){V=!0;break}if(this.emit(l.GAMEOBJECT_OUT,M,I,G),N.cancelled||!I.input){V=!0;break}}V||this.emit(l.POINTER_OUT,M,w)}if(O=U.length,N.cancelled=!1,V=!1,O>0){for(this.sortGameObjects(U,M),F=0;F<O;F++)if(I=U[F],!!I.input){if(D.setCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OVER,M,I.input.localX,I.input.localY,G),B++,N.cancelled||!I.input){V=!0;break}if(this.emit(l.GAMEOBJECT_OVER,M,I,G),N.cancelled||!I.input){V=!0;break}}V||this.emit(l.POINTER_OVER,M,U)}return W=z.concat(U),this._over[M.id]=this.sortGameObjects(W,M),B},processUpEvents:function(M){var L=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var w=!1,U=0;U<L.length;U++){var z=L[U];if(!!z.input){if(z.emit(l.GAMEOBJECT_POINTER_UP,M,z.input.localX,z.input.localY,I),F.cancelled||!z.input){w=!0;break}if(this.emit(l.GAMEOBJECT_UP,M,z,I),F.cancelled||!z.input){w=!0;break}}}return!w&&this.manager&&(M.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,M,L):this.emit(l.POINTER_UP_OUTSIDE,M)),L.length},queueForInsertion:function(M){return this._pendingInsertion.indexOf(M)===-1&&this._list.indexOf(M)===-1&&this._pendingInsertion.push(M),this},queueForRemoval:function(M){return this._pendingRemoval.push(M),this},setDraggable:function(M,L){L===void 0&&(L=!0),Array.isArray(M)||(M=[M]);for(var F=0;F<M.length;F++){var I=M[F];I.input.draggable=L;var w=this._draggable.indexOf(I);L&&w===-1?this._draggable.push(I):!L&&w>-1&&this._draggable.splice(w,1)}return this},makePixelPerfect:function(M){M===void 0&&(M=1);var L=this.systems.textures;return n(L,M)},setHitArea:function(M,L,F){if(L===void 0)return this.setHitAreaFromTexture(M);Array.isArray(M)||(M=[M]);var I=!1,w=!1,U=!1,z=!1,W=!1,H=!0;if(x(L)){var D=L;L=v(D,"hitArea",null),F=v(D,"hitAreaCallback",null),I=v(D,"draggable",!1),w=v(D,"dropZone",!1),U=v(D,"cursor",!1),z=v(D,"useHandCursor",!1),W=v(D,"pixelPerfect",!1);var O=v(D,"alphaTolerance",1);W&&(L={},F=this.makePixelPerfect(O)),(!L||!F)&&(this.setHitAreaFromTexture(M),H=!1)}else typeof L=="function"&&!F&&(F=L,L={});for(var B=0;B<M.length;B++){var N=M[B];if(W&&N.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var G=N.input?N.input:s(N,L,F);G.customHitArea=H,G.dropZone=w,G.cursor=z?"pointer":U,N.input=G,I&&this.setDraggable(N),this.queueForInsertion(N)}return this},setHitAreaCircle:function(M,L,F,I,w){w===void 0&&(w=f);var U=new e(L,F,I);return this.setHitArea(M,U,w)},setHitAreaEllipse:function(M,L,F,I,w,U){U===void 0&&(U=h);var z=new u(L,F,I,w);return this.setHitArea(M,z,U)},setHitAreaFromTexture:function(M,L){L===void 0&&(L=E),Array.isArray(M)||(M=[M]);for(var F=0;F<M.length;F++){var I=M[F],w=I.frame,U=0,z=0;if(I.width?(U=I.width,z=I.height):w&&(U=w.realWidth,z=w.realHeight),I.type==="Container"&&(U===0||z===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}U!==0&&z!==0&&(I.input=s(I,new T(0,0,U,z),L),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(M,L,F,I,w,U){U===void 0&&(U=E);var z=new T(L,F,I,w);return this.setHitArea(M,z,U)},setHitAreaTriangle:function(M,L,F,I,w,U,z,W){W===void 0&&(W=P);var H=new C(L,F,I,w,U,z);return this.setHitArea(M,H,W)},enableDebug:function(M,L){L===void 0&&(L=65280);var F=M.input;if(!F||!F.hitArea)return this;var I=F.hitArea,w=I.type,U=F.hitAreaDebug,z=this.systems.add,W=this.systems.updateList;U&&(W.remove(U),U.destroy(),U=null);var H=0,D=0;switch(w){case c.CIRCLE:U=z.arc(0,0,I.radius),H=I.x-I.radius,D=I.y-I.radius;break;case c.ELLIPSE:U=z.ellipse(0,0,I.width,I.height),H=I.x-I.width/2,D=I.y-I.height/2;break;case c.LINE:U=z.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case c.POLYGON:U=z.polygon(0,0,I.points);break;case c.RECTANGLE:U=z.rectangle(0,0,I.width,I.height),H=I.x,D=I.y;break;case c.TRIANGLE:U=z.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return U&&(U.isFilled=!1,U.preUpdate=function(){U.setStrokeStyle(1/M.scale,L),U.setDisplayOrigin(M.displayOriginX,M.displayOriginY);var O=M.x,B=M.y,N=M.rotation,G=M.scaleX,V=M.scaleY;if(M.parentContainer){var Y=M.getWorldTransformMatrix();O=Y.tx,B=Y.ty,N=Y.rotation,G=Y.scaleX,V=Y.scaleY}U.setRotation(N),U.setScale(G,V),U.setPosition(O+H,B+D),U.setScrollFactor(M.scrollFactorX,M.scrollFactorY),U.setDepth(M.depth)},W.add(U),F.hitAreaDebug=U),this},removeDebug:function(M){var L=M.input;if(L&&L.hitAreaDebug){var F=L.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(M){return this.pollRate=M,this._pollTimer=0,this},setGlobalTopOnly:function(M){return this.manager.globalTopOnly=M,this},setTopOnly:function(M){return this.topOnly=M,this},sortGameObjects:function(M,L){if(M.length<2)return M;var F=L.camera.renderList;return M.sort(function(I,w){return F.indexOf(w)-F.indexOf(I)})},sortDropZones:function(M){return M.length<2?M:(this.scene.sys.depthSort(),M.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(M,L){if(!M.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(M);if(M.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-M.parentContainer.getIndex(M);if(M.parentContainer===L)return-1;if(L.parentContainer===M)return 1;for(var F=M.getIndexList(),I=L.getIndexList(),w=Math.min(F.length,I.length),U=0;U<w;U++){var z=F[U],W=I[U];if(z!==W)return W-z}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(M){return this.manager.addPointer(M)},setDefaultCursor:function(M){return this.manager.setDefaultCursor(M),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var M=0;M<10;M++)this._drag[M]=[],this._over[M]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var F=this.systems.events;F.off(S.TRANSITION_START,this.transitionIn,this),F.off(S.TRANSITION_OUT,this.transitionOut,this),F.off(S.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(S.PRE_UPDATE,this.preUpdate,this),L.events.off(l.GAME_OUT,this.onGameOut,this),L.events.off(l.GAME_OVER,this.onGameOver,this),F.off(S.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(S.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});A.register("InputPlugin",R,"input"),i.exports=R},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keydown"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keyup"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keycombomatch"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="down"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keydown-"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keyup-"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="up"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),a=t(154),o=t(22),s=t(6),n=t(51),r=t(153),u=t(512),h=t(143),l=t(513),d=t(1331),v=t(20),c=t(76),g=new e({Extends:f,initialize:function(A){f.call(this),this.game=A.systems.game,this.scene=A.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=A,this.manager=A.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,A.pluginEvents.once(n.BOOT,this.boot,this),A.pluginEvents.on(n.START,this.start,this)},boot:function(){var x=this.settings.input;this.enabled=s(x,"keyboard",!0);var A=s(x,"keyboard.capture",null);A&&this.addCaptures(A),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(x){return this.manager.addCapture(x),this},removeCapture:function(x){return this.manager.removeCapture(x),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:h.UP,down:h.DOWN,left:h.LEFT,right:h.RIGHT,space:h.SPACE,shift:h.SHIFT})},addKeys:function(x,A,T){A===void 0&&(A=!0),T===void 0&&(T=!1);var E={};if(typeof x=="string"){x=x.split(",");for(var S=0;S<x.length;S++){var C=x[S].trim();C&&(E[C]=this.addKey(C,A,T))}}else for(var P in x)E[P]=this.addKey(x[P],A,T);return E},addKey:function(x,A,T){A===void 0&&(A=!0),T===void 0&&(T=!1);var E=this.keys;if(x instanceof u){var S=E.indexOf(x);return S>-1?E[S]=x:E[x.keyCode]=x,A&&this.addCapture(x.keyCode),x.setEmitOnRepeat(T),x}return typeof x=="string"&&(x=h[x.toUpperCase()]),E[x]||(E[x]=new u(this,x),A&&this.addCapture(x),E[x].setEmitOnRepeat(T)),E[x]},removeKey:function(x,A){A===void 0&&(A=!1);var T=this.keys,E;if(x instanceof u){var S=T.indexOf(x);S>-1&&(E=this.keys[S],this.keys[S]=void 0)}else typeof x=="string"&&(x=h[x.toUpperCase()]);return T[x]&&(E=T[x],T[x]=void 0),E&&(E.plugin=null,A&&E.destroy()),this},removeAllKeys:function(x){for(var A=this.keys,T=0;T<A.length;T++){var E=A[T];E&&(A[T]=void 0,x&&E.destroy())}return this},createCombo:function(x,A){return new l(this,x,A)},checkDown:function(x,A){if(A===void 0&&(A=0),this.enabled&&x.isDown){var T=c(this.time-x.timeDown,A);if(T>x._tick)return x._tick=T,!0}return!1},update:function(){var x=this.manager.queue,A=x.length;if(!(!this.isActive()||A===0))for(var T=this.keys,E=0;E<A;E++){var S=x[E],C=S.keyCode,P=T[C],R=!1;S.cancelled===void 0&&(S.cancelled=0,S.stopImmediatePropagation=function(){S.cancelled=1},S.stopPropagation=function(){S.cancelled=-1}),S.cancelled!==-1&&(C===this.prevCode&&S.timeStamp===this.prevTime&&S.type===this.prevType||(this.prevCode=C,this.prevTime=S.timeStamp,this.prevType=S.type,S.type==="keydown"?(P&&(R=P.isDown,P.onDown(S)),!S.cancelled&&(!P||!R)&&(d[C]&&this.emit(a.KEY_DOWN+d[C],S),S.cancelled||this.emit(a.ANY_KEY_DOWN,S))):(P&&P.onUp(S),S.cancelled||(d[C]&&this.emit(a.KEY_UP+d[C],S),S.cancelled||this.emit(a.ANY_KEY_UP,S))),S.cancelled===1&&(S.cancelled=0)))}},resetKeys:function(){for(var x=this.keys,A=0;A<x.length;A++)x[A]&&x[A].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var x=this.keys,A=0;A<x.length;A++)x[A]&&x[A].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});r.register("KeyboardPlugin",g,"keyboard","keyboard","inputKeyboard"),i.exports=g},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(143),f={};for(var a in e)f[e[a]]=a;i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justDown?(e._justDown=!1,!0):!1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justUp?(e._justUp=!1,!0):!1};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=50);var a=e.plugin.game.loop.time-e.timeDown;return e.isDown&&a<f};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=50);var a=e.plugin.game.loop.time-e.timeUp;return e.isUp&&a<f};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={MouseManager:t(411)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={TouchManager:t(413)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(21),f=t(17),a={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(61),o=t(95),s=new e({Extends:a,initialize:function(r,u,h,l,d){a.call(this,r,u,h,l,d),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});f.register("animation",function(n,r,u,h){if(Array.isArray(n))for(var l=0;l<n.length;l++)this.addFile(new s(this,n[l]));else this.addFile(new s(this,n,r,h,u));return this}),i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(71),s=t(7),n=t(61),r=t(49),u=new e({Extends:r,initialize:function(l,d,v,c,g,x){var A,T;if(s(d)){var E=d;d=a(E,"key"),A=new o(l,{key:d,url:a(E,"textureURL"),extension:a(E,"textureExtension","png"),normalMap:a(E,"normalMap"),xhrSettings:a(E,"textureXhrSettings")}),T=new n(l,{key:d,url:a(E,"atlasURL"),extension:a(E,"atlasExtension","json"),xhrSettings:a(E,"atlasXhrSettings")})}else A=new o(l,d,v,g),T=new n(l,d,c,x);A.linkFile?r.call(this,l,"atlasjson",d,[A,T,A.linkFile]):r.call(this,l,"atlasjson",d,[A,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,l.data,d),l.addToCache(),this.complete=!0}}});f.register("aseprite",function(h,l,d,v,c){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new u(this,h[x]),this.addFile(g.files);else g=new u(this,h,l,d,v,c),this.addFile(g.files);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(71),s=t(7),n=t(61),r=t(49),u=new e({Extends:r,initialize:function(l,d,v,c,g,x){var A,T;if(s(d)){var E=d;d=a(E,"key"),A=new o(l,{key:d,url:a(E,"textureURL"),extension:a(E,"textureExtension","png"),normalMap:a(E,"normalMap"),xhrSettings:a(E,"textureXhrSettings")}),T=new n(l,{key:d,url:a(E,"atlasURL"),extension:a(E,"atlasExtension","json"),xhrSettings:a(E,"atlasXhrSettings")})}else A=new o(l,d,v,g),T=new n(l,d,c,x);A.linkFile?r.call(this,l,"atlasjson",d,[A,T,A.linkFile]):r.call(this,l,"atlasjson",d,[A,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,l.data,d),l.pendingDestroy(),this.complete=!0}}});f.register("atlas",function(h,l,d,v,c){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new u(this,h[x]),this.addFile(g.files);else g=new u(this,h,l,d,v,c),this.addFile(g.files);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(71),s=t(7),n=t(49),r=t(241),u=new e({Extends:n,initialize:function(l,d,v,c,g,x){var A,T;if(s(d)){var E=d;d=a(E,"key"),A=new o(l,{key:d,url:a(E,"textureURL"),extension:a(E,"textureExtension","png"),normalMap:a(E,"normalMap"),xhrSettings:a(E,"textureXhrSettings")}),T=new r(l,{key:d,url:a(E,"atlasURL"),extension:a(E,"atlasExtension","xml"),xhrSettings:a(E,"atlasXhrSettings")})}else A=new o(l,d,v,g),T=new r(l,d,c,x);A.linkFile?n.call(this,l,"atlasxml",d,[A,T,A.linkFile]):n.call(this,l,"atlasxml",d,[A,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(h.key,h.data,l.data,d),l.pendingDestroy(),this.complete=!0}}});f.register("atlasXML",function(h,l,d,v,c){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new u(this,h[x]),this.addFile(g.files);else g=new u(this,h,l,d,v,c),this.addFile(g.files);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(518),f=t(0),a=t(8),o=t(2),s=t(7),n=t(61),r=t(49),u=new f({Extends:r,initialize:function(l,d,v,c,g,x,A){if(s(d)){var T=d;d=o(T,"key"),v=o(T,"jsonURL"),c=o(T,"audioURL"),g=o(T,"audioConfig"),x=o(T,"audioXhrSettings"),A=o(T,"jsonXhrSettings")}var E;if(!c)E=new n(l,d,v,A),r.call(this,l,"audiosprite",d,[E]),this.config.resourceLoad=!0,this.config.audioConfig=g,this.config.audioXhrSettings=x;else{var S=e.create(l,d,c,g,x);S&&(E=new n(l,d,v,A),r.call(this,l,"audiosprite",d,[S,E]),this.config.resourceLoad=!1)}},onFileComplete:function(h){var l=this.files.indexOf(h);if(l!==-1&&(this.pending--,this.config.resourceLoad&&h.type==="json"&&h.data.hasOwnProperty("resources"))){var d=h.data.resources,v=o(this.config,"audioConfig"),c=o(this.config,"audioXhrSettings"),g=e.create(this.loader,h.key,d,v,c);g&&(this.addToMultiFile(g),this.loader.addFile(g))}},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1];h.addToCache(),l.addToCache(),this.complete=!0}}});a.register("audioSprite",function(h,l,d,v,c,g){var x=this.systems.game,A=x.config.audio,T=x.device.audio;if(A&&A.noAudio||!T.webAudio&&!T.audioData)return this;var E;if(Array.isArray(h))for(var S=0;S<h.length;S++)E=new u(this,h[S]),E.files&&this.addFile(E.files);else E=new u(this,h,l,d,v,c,g),E.files&&this.addFile(E.files);return this})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v,c){var g="bin";if(n(l)){var x=l;l=s(x,"key"),d=s(x,"url"),v=s(x,"xhrSettings"),g=s(x,"extension",g),c=s(x,"dataType",c)}var A={type:"binary",cache:h.cacheManager.binary,extension:g,responseType:"arraybuffer",key:l,url:d,xhrSettings:v,config:{dataType:c}};a.call(this,h,A)},onProcess:function(){this.state=f.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(u,h,l,d){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new r(this,u[v]));else this.addFile(new r(this,u,h,d,l));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(71),s=t(7),n=t(49),r=t(212),u=t(241),h=new e({Extends:n,initialize:function(d,v,c,g,x,A){var T,E;if(s(v)){var S=v;v=a(S,"key"),T=new o(d,{key:v,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),E=new u(d,{key:v,url:a(S,"fontDataURL"),extension:a(S,"fontDataExtension","xml"),xhrSettings:a(S,"fontDataXhrSettings")})}else T=new o(d,v,c,x),E=new u(d,v,g,A);T.linkFile?n.call(this,d,"bitmapfont",v,[T,E,T.linkFile]):n.call(this,d,"bitmapfont",v,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],d=this.files[1];l.addToCache(),d.pendingDestroy();var v=l.cache.get(l.key),c=r(d.data,l.cache.getFrame(l.key),0,0,v);this.loader.cacheManager.bitmapFont.add(l.key,{data:c,texture:l.key,frame:null}),this.complete=!0}}});f.register("bitmapFont",function(l,d,v,c,g){var x;if(Array.isArray(l))for(var A=0;A<l.length;A++)x=new h(this,l[A]),this.addFile(x.files);else x=new h(this,l,d,v,c,g),this.addFile(x.files);return this}),i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v){var c="css";if(n(l)){var g=l;l=s(g,"key"),d=s(g,"url"),v=s(g,"xhrSettings"),c=s(g,"extension",c)}var x={type:"script",cache:!1,extension:c,responseType:"text",key:l,url:d,xhrSettings:v};a.call(this,h,x)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(u,h,l){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,h,l));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=t(396),u=new e({Extends:a,initialize:function(l,d,v,c,g){var x="glsl";if(n(d)){var A=d;d=s(A,"key"),v=s(A,"url"),c=s(A,"shaderType","fragment"),g=s(A,"xhrSettings"),x=s(A,"extension",x)}else c===void 0&&(c="fragment");var T={type:"glsl",cache:l.cacheManager.shader,extension:x,responseType:"text",key:d,url:v,config:{shaderType:c},xhrSettings:g};a.call(this,l,T)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.split(`
`),l=this.extractBlock(h,0);if(l)for(;l;){var d=this.getShaderName(l.header),v=this.getShaderType(l.header),c=this.getShaderUniforms(l.header),g=l.shader;if(this.cache.has(d)){var x=this.cache.get(d);v==="fragment"?x.fragmentSrc=g:x.vertexSrc=g,x.uniforms||(x.uniforms=c)}else v==="fragment"?this.cache.add(d,new r(d,g,"",c)):this.cache.add(d,new r(d,"",g,c));l=this.extractBlock(h,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new r(this.key,this.data)):this.cache.add(this.key,new r(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(h){for(var l=0;l<h.length;l++){var d=h[l].trim();if(d.substring(0,5)==="name:")return d.substring(5).trim()}return this.key},getShaderType:function(h){for(var l=0;l<h.length;l++){var d=h[l].trim();if(d.substring(0,5)==="type:")return d.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(h){for(var l={},d=0;d<h.length;d++){var v=h[d].trim();if(v.substring(0,8)==="uniform."){var c=v.indexOf(":");if(c){var g=v.substring(8,c);try{l[g]=JSON.parse(v.substring(c+1))}catch{console.warn("Invalid uniform JSON: "+g)}}}}return l},extractBlock:function(h,l){for(var d=-1,v=-1,c=-1,g=!1,x=!1,A=[],T=[],E=l;E<h.length;E++){var S=h[E].trim();if(S==="---")if(d===-1)d=E,g=!0;else if(g)v=E,g=!1,x=!0;else{x=!1;break}else g?A.push(S):x&&(T.push(S),c=E)}return!g&&v!==-1?{header:A,shader:T.join(`
`),offset:c}:null}});o.register("glsl",function(h,l,d,v){if(Array.isArray(h))for(var c=0;c<h.length;c++)this.addFile(new u(this,h[c]));else this.addFile(new u(this,h,l,d,v));return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v){var c="html";if(n(l)){var g=l;l=s(g,"key"),d=s(g,"url"),v=s(g,"xhrSettings"),c=s(g,"extension",c)}var x={type:"text",cache:h.cacheManager.html,extension:c,responseType:"text",key:l,url:d,xhrSettings:v};a.call(this,h,x)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(u,h,l){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,h,l));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v,c,g){v===void 0&&(v=512),c===void 0&&(c=512);var x="html";if(n(l)){var A=l;l=s(A,"key"),d=s(A,"url"),g=s(A,"xhrSettings"),x=s(A,"extension",x),v=s(A,"width",v),c=s(A,"height",c)}var T={type:"html",cache:h.textureManager,extension:x,responseType:"text",key:l,url:d,xhrSettings:g,config:{width:v,height:c}};a.call(this,h,T)},onProcess:function(){this.state=f.FILE_PROCESSING;var u=this.config.width,h=this.config.height,l=[];l.push('<svg width="'+u+'px" height="'+h+'px" viewBox="0 0 '+u+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var d=[l.join(`
`)],v=this;try{var c=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=f.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(v.data),v.onProcessError()},a.createObjectURL(this.data,c,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});o.register("htmlTexture",function(u,h,l,d,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new r(this,u[c]));else this.addFile(new r(this,u,h,l,d,v));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(71),s=t(7),n=t(61),r=t(49),u=new e({Extends:r,initialize:function(l,d,v,c,g,x,A){if(s(d)){var T=d;d=a(T,"key"),a(T,"url",!1)?v=a(T,"url"):v=a(T,"atlasURL"),x=a(T,"xhrSettings"),c=a(T,"path"),g=a(T,"baseURL"),A=a(T,"textureXhrSettings")}var E=new n(l,d,v,x);r.call(this,l,"multiatlas",d,[E]),this.config.path=c,this.config.baseURL=g,this.config.textureXhrSettings=A},onFileComplete:function(h){var l=this.files.indexOf(h);if(l!==-1&&(this.pending--,h.type==="json"&&h.data.hasOwnProperty("textures"))){var d=h.data.textures,v=this.config,c=this.loader,g=c.baseURL,x=c.path,A=c.prefix,T=a(v,"baseURL",this.baseURL),E=a(v,"path",this.path),S=a(v,"prefix",this.prefix),C=a(v,"textureXhrSettings");c.setBaseURL(T),c.setPath(E),c.setPrefix(S);for(var P=0;P<d.length;P++){var R=d[P].image,M="MA"+this.multiKeyIndex+"_"+R,L=new o(c,M,R,C);if(this.addToMultiFile(L),c.addFile(L),d[P].normalMap){var F=new o(c,M,d[P].normalMap,C);F.type="normalMap",L.setLink(F),this.addToMultiFile(F),c.addFile(F)}}c.setBaseURL(g),c.setPath(x),c.setPrefix(A)}},addToCache:function(){if(this.isReadyToProcess()){for(var h=this.files[0],l=[],d=[],v=[],c=1;c<this.files.length;c++){var g=this.files[c];if(g.type!=="normalMap")for(var x=g.key.indexOf("_"),A=g.key.substr(x+1),T=g.data,E=0;E<h.data.textures.length;E++){var S=h.data.textures[E];if(S.image===A){d.push(T),l.push(S),g.linkFile&&v.push(g.linkFile.data);break}}}for(v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,d,l,v),this.complete=!0,c=0;c<this.files.length;c++)this.files[c].pendingDestroy()}}});f.register("multiatlas",function(h,l,d,v,c){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new u(this,h[x]),this.addFile(g.files);else g=new u(this,h,l,d,v,c),this.addFile(g.files);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(7),s=t(49),n=t(520),r=new e({Extends:s,initialize:function(h,l,d,v){var c="js",g=[];if(o(l)){var x=l;l=a(x,"key"),d=a(x,"url"),v=a(x,"xhrSettings"),c=a(x,"extension",c)}Array.isArray(d)||(d=[d]);for(var A=0;A<d.length;A++){var T=new n(h,{key:l+"_"+A.toString(),url:d[A],extension:c,xhrSettings:v});T.onProcess=function(){this.onProcessComplete()},g.push(T)}s.call(this,h,"scripts",l,g)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var h=this.files[u];h.data=document.createElement("script"),h.data.language="javascript",h.data.type="text/javascript",h.data.defer=!1,h.data.text=h.xhrLoader.responseText,document.head.appendChild(h.data)}this.complete=!0}}});f.register("scripts",function(u,h,l){var d;if(Array.isArray(u))for(var v=0;v<u.length;v++)d=new r(this,u[v]),this.addFile(d.files);else d=new r(this,u,h,l),this.addFile(d.files);return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(7),s=t(49),n=t(498),r=t(499),u=t(242),h=new e({Extends:s,initialize:function(d,v,c,g,x,A){var T,E,S=d.cacheManager.obj;if(o(v)){var C=v;v=a(C,"key"),T=new u(d,{key:v,type:"obj",cache:S,url:a(C,"url"),extension:a(C,"extension","obj"),xhrSettings:a(C,"xhrSettings"),config:{flipUV:a(C,"flipUV",x)}}),g=a(C,"matURL"),g&&(E=new u(d,{key:v,type:"mat",cache:S,url:g,extension:a(C,"matExtension","mat"),xhrSettings:a(C,"xhrSettings")}))}else T=new u(d,{key:v,url:c,type:"obj",cache:S,extension:"obj",xhrSettings:A,config:{flipUV:x}}),g&&(E=new u(d,{key:v,url:g,type:"mat",cache:S,extension:"mat",xhrSettings:A}));s.call(this,d,"obj",v,[T,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],d=this.files[1],v=n(l.data,l.config.flipUV);d&&(v.materials=r(d.data)),l.cache.add(l.key,v),this.complete=!0}}});f.register("obj",function(l,d,v,c,g){var x;if(Array.isArray(l))for(var A=0;A<l.length;A++)x=new h(this,l[A]),this.addFile(x.files);else x=new h(this,l,d,v,c,g),this.addFile(x.files);return this}),i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(8),o=t(61),s=new e({Extends:o,initialize:function(r,u,h,l,d){o.call(this,r,u,h,l,d),this.type="packfile"},onProcess:function(){this.state!==f.FILE_POPULATED&&(this.state=f.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(n,r,u,h){if(Array.isArray(n))for(var l=0;l<n.length;l++)this.addFile(new s(this,n[l]));else this.addFile(new s(this,n,r,h,u));return this}),i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v,c,g){var x="js";if(n(l)){var A=l;l=s(A,"key"),d=s(A,"url"),g=s(A,"xhrSettings"),x=s(A,"extension",x),v=s(A,"start"),c=s(A,"mapping")}var T={type:"plugin",cache:!1,extension:x,responseType:"text",key:l,url:d,xhrSettings:g,config:{start:v,mapping:c}};a.call(this,h,T),typeof d=="function"&&(this.data=d,this.state=f.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,h=this.config,l=s(h,"start",!1),d=s(h,"mapping",null);if(this.state===f.FILE_POPULATED)u.install(this.key,this.data,l,d);else{this.state=f.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=u.install(this.key,window[this.key],l,d);(l||d)&&(this.loader.systems[d]=v,this.loader.scene[d]=v)}this.onProcessComplete()}});o.register("plugin",function(u,h,l,d,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new r(this,u[c]));else this.addFile(new r(this,u,h,l,d,v));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v){var c="js";if(n(l)){var g=l;l=s(g,"key"),d=s(g,"url"),v=s(g,"xhrSettings"),c=s(g,"extension",c)}var x={type:"text",extension:c,responseType:"text",key:l,url:d,xhrSettings:v};a.call(this,h,x)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),h=eval;this.loader.sceneManager.add(this.key,h(u)),this.complete=!0}});o.register("sceneFile",function(u,h,l){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new r(this,u[d]));else this.addFile(new r(this,u,h,l));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v,c,g){var x="js";if(n(l)){var A=l;l=s(A,"key"),d=s(A,"url"),g=s(A,"xhrSettings"),x=s(A,"extension",x),v=s(A,"systemKey"),c=s(A,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:x,responseType:"text",key:l,url:d,xhrSettings:g,config:{systemKey:v,sceneKey:c}};a.call(this,h,T),typeof d=="function"&&(this.data=d,this.state=f.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,h=this.config,l=this.key,d=s(h,"systemKey",l),v=s(h,"sceneKey",l);this.state===f.FILE_POPULATED?u.installScenePlugin(d,this.data,v,this.loader.scene,!0):(this.state=f.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(d,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(u,h,l,d,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new r(this,u[c]));else this.addFile(new r(this,u,h,l,d,v));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(71),o=new e({Extends:a,initialize:function(n,r,u,h,l){a.call(this,n,r,u,l,h),this.type="spritesheet"},addToCache:function(){var s=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(s)}});f.register("spritesheet",function(s,n,r,u){if(Array.isArray(s))for(var h=0;h<s.length;h++)this.addFile(new o(this,s[h]));else this.addFile(new o(this,s,n,r,u));return this}),i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=new e({Extends:a,initialize:function(h,l,d,v,c){var g="svg";if(n(l)){var x=l;l=s(x,"key"),d=s(x,"url"),v=s(x,"svgConfig",{}),c=s(x,"xhrSettings"),g=s(x,"extension",g)}var A={type:"svg",cache:h.textureManager,extension:g,responseType:"text",key:l,url:d,xhrSettings:c,config:{width:s(v,"width"),height:s(v,"height"),scale:s(v,"scale")}};a.call(this,h,A)},onProcess:function(){this.state=f.FILE_PROCESSING;var u=this.xhrLoader.responseText,h=[u],l=this.config.width,d=this.config.height,v=this.config.scale;t:if(l&&d||v){var c=null,g=new DOMParser;c=g.parseFromString(u,"text/xml");var x=c.getElementsByTagName("svg")[0],A=x.hasAttribute("viewBox"),T=parseFloat(x.getAttribute("width")),E=parseFloat(x.getAttribute("height"));if(!A&&T&&E)x.setAttribute("viewBox","0  0 "+T+" "+E);else if(A&&!T&&!E){var S=x.getAttribute("viewBox").split(/\s+|,/);T=S[2],E=S[3]}if(v)if(T&&E)l=T*v,d=E*v;else break t;x.setAttribute("width",l.toString()+"px"),x.setAttribute("height",d.toString()+"px"),h=[new XMLSerializer().serializeToString(x)]}try{var C=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var P=this,R=!1;this.data.onload=function(){R||a.revokeObjectURL(P.data),P.onProcessComplete()},this.data.onerror=function(){R?P.onProcessError():(R=!0,a.revokeObjectURL(P.data),P.data.src="data:image/svg+xml,"+encodeURIComponent(h.join("")))},a.createObjectURL(this.data,C,"image/svg+xml")},addToCache:function(){var u=this.cache.addImage(this.key,this.data);this.pendingDestroy(u)}});o.register("svg",function(u,h,l,d){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new r(this,u[v]));else this.addFile(new r(this,u,h,l,d));return this}),i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(2),n=t(7),r=t(40),u=new e({Extends:a,initialize:function(l,d,v,c){var g="csv";if(n(d)){var x=d;d=s(x,"key"),v=s(x,"url"),c=s(x,"xhrSettings"),g=s(x,"extension",g)}var A={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:g,responseType:"text",key:d,url:v,xhrSettings:c};a.call(this,l,A),this.tilemapFormat=r.CSV},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,h),this.pendingDestroy(h)}});o.register("tilemapCSV",function(h,l,d){if(Array.isArray(h))for(var v=0;v<h.length;v++)this.addFile(new u(this,h[v]));else this.addFile(new u(this,h,l,d));return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(61),o=t(40),s=new e({Extends:a,initialize:function(r,u,h,l){a.call(this,r,u,h,l),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var n={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,n),this.pendingDestroy(n)}});f.register("tilemapImpact",function(n,r,u){if(Array.isArray(n))for(var h=0;h<n.length;h++)this.addFile(new s(this,n[h]));else this.addFile(new s(this,n,r,u));return this}),i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(61),o=t(40),s=new e({Extends:a,initialize:function(r,u,h,l){a.call(this,r,u,h,l),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var n={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,n),this.pendingDestroy(n)}});f.register("tilemapTiledJSON",function(n,r,u){if(Array.isArray(n))for(var h=0;h<n.length;h++)this.addFile(new s(this,n[h]));else this.addFile(new s(this,n,r,u));return this}),i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),a=t(2),o=t(71),s=t(7),n=t(49),r=t(242),u=new e({Extends:n,initialize:function(l,d,v,c,g,x){var A,T;if(s(d)){var E=d;d=a(E,"key"),A=new o(l,{key:d,url:a(E,"textureURL"),extension:a(E,"textureExtension","png"),normalMap:a(E,"normalMap"),xhrSettings:a(E,"textureXhrSettings")}),T=new r(l,{key:d,url:a(E,"atlasURL"),extension:a(E,"atlasExtension","txt"),xhrSettings:a(E,"atlasXhrSettings")})}else A=new o(l,d,v,g),T=new r(l,d,c,x);A.linkFile?n.call(this,l,"unityatlas",d,[A,T,A.linkFile]):n.call(this,l,"unityatlas",d,[A,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],l=this.files[1],d=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(h.key,h.data,l.data,d),l.pendingDestroy(),this.complete=!0}}});f.register("unityAtlas",function(h,l,d,v,c){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new u(this,h[x]),this.addFile(g.files);else g=new u(this,h,l,d,v,c),this.addFile(g.files);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(23),o=t(8),s=t(155),n=t(2),r=t(7),u=new e({Extends:a,initialize:function(l,d,v,c,g,x,A){c===void 0&&(c="loadeddata"),g===void 0&&(g=!1),x===void 0&&(x=!1),c!=="loadeddata"&&c!=="canplay"&&c!=="canplaythrough"&&(c="loadeddata");var T={type:"video",cache:l.cacheManager.video,extension:v.type,responseType:"blob",key:d,url:v.url,xhrSettings:A,config:{loadEvent:c,asBlob:g,noAudio:x}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),a.call(this,l,T)},onProcess:function(){if(this.state=f.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var h=this.createVideoElement();this.data=h;var l=this;this.data.onloadeddata=function(){l.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(l.data),l.onProcessError()},a.createObjectURL(h,this.xhrLoader.response,""),h.load()},createVideoElement:function(){var h=document.createElement("video");return h.controls=!1,h.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(h.muted=!0,h.defaultMuted=!0,h.setAttribute("autoplay","autoplay")),h.setAttribute("playsinline","playsinline"),h.setAttribute("preload","auto"),h},onVideoLoadHandler:function(h){var l=h.target;l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0),this.data=l,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(h){var l=h.target;l&&(l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var h=this.config.loadEvent;if(this.config.asBlob)a.prototype.load.call(this);else{this.percentComplete=0;var l=this.createVideoElement();l.addEventListener(h,this.onLoadCallback,!0),l.addEventListener("error",this.onErrorCallback,!0),l.src=s(this,this.loader.baseURL),l.load()}}});u.create=function(h,l,d,v,c,g,x){var A=h.systems.game;r(l)&&(d=n(l,"url",[]),v=n(l,"loadEvent","loadeddata"),c=n(l,"asBlob",!1),g=n(l,"noAudio",!1),x=n(l,"xhrSettings"),l=n(l,"key"));var T=u.getVideoURL(A,d);if(T)return new u(h,l,T,v,c,g,x)},u.getVideoURL=function(h,l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++){var v=n(l[d],"url",l[d]);if(v.indexOf("blob:")===0)return{url:v,type:""};var c;if(v.indexOf("data:")===0?c=v.split(",")[0].match(/\/(.*?);/):c=v.match(/\.([a-zA-Z0-9]+)($|\?)/),c=n(l[d],"type",c?c[1]:"").toLowerCase(),h.device.video[c])return{url:v,type:c}}return null},o.register("video",function(h,l,d,v,c,g){var x;if(Array.isArray(h))for(var A=0;A<h.length;A++)x=u.create(this,h[A]),x&&this.addFile(x);else x=u.create(this,h,l,d,v,c,g),x&&this.addFile(x);return this}),i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),a=t(149),o=t(9),s=t(95),n=t(8),r=t(2),u=t(24),h=t(20),l=t(156),d=new e({Extends:o,initialize:function(c){o.call(this);var g=c.sys.game.config,x=c.sys.settings.loader;this.scene=c,this.systems=c.sys,this.cacheManager=c.sys.cache,this.textureManager=c.sys.textures,this.sceneManager=c.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(r(x,"baseURL",g.loaderBaseURL)),this.setPath(r(x,"path",g.loaderPath)),this.setPrefix(r(x,"prefix",g.loaderPrefix)),this.maxParallelDownloads=r(x,"maxParallelDownloads",g.loaderMaxParallelDownloads),this.xhr=l(r(x,"responseType",g.loaderResponseType),r(x,"async",g.loaderAsync),r(x,"user",g.loaderUser),r(x,"password",g.loaderPassword),r(x,"timeout",g.loaderTimeout),r(x,"withCredentials",g.loaderWithCredentials)),this.crossOrigin=r(x,"crossOrigin",g.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=f.LOADER_IDLE,this.multiKeyIndex=0,c.sys.events.once(h.BOOT,this.boot,this),c.sys.events.on(h.START,this.pluginStart,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(h.SHUTDOWN,this.shutdown,this)},setBaseURL:function(v){return v===void 0&&(v=""),v!==""&&v.substr(-1)!=="/"&&(v=v.concat("/")),this.baseURL=v,this},setPath:function(v){return v===void 0&&(v=""),v!==""&&v.substr(-1)!=="/"&&(v=v.concat("/")),this.path=v,this},setPrefix:function(v){return v===void 0&&(v=""),this.prefix=v,this},setCORS:function(v){return this.crossOrigin=v,this},addFile:function(v){Array.isArray(v)||(v=[v]);for(var c=0;c<v.length;c++){var g=v[c];this.keyExists(g)||(this.list.set(g),this.emit(s.ADD,g.key,g.type,this,g),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(v){var c=v.hasCacheConflict();return c||this.list.iterate(function(g){if(g.type===v.type&&g.key===v.key)return c=!0,!1}),!c&&this.isLoading()&&(this.inflight.iterate(function(g){if(g.type===v.type&&g.key===v.key)return c=!0,!1}),this.queue.iterate(function(g){if(g.type===v.type&&g.key===v.key)return c=!0,!1})),c},addPack:function(v,c){c&&v.hasOwnProperty(c)&&(v={packKey:v[c]});var g=0,x=this.baseURL,A=this.path,T=this.prefix;for(var E in v)if(!!Object.prototype.hasOwnProperty.call(v,E)){var S=v[E],C=r(S,"baseURL",x),P=r(S,"path",A),R=r(S,"prefix",T),M=r(S,"files",null),L=r(S,"defaultType","void");if(Array.isArray(M)){this.setBaseURL(C),this.setPath(P),this.setPrefix(R);for(var F=0;F<M.length;F++){var I=M[F],w=I.hasOwnProperty("type")?I.type:L;this[w]&&(this[w](I),g++)}}}return this.setBaseURL(x),this.setPath(A),this.setPrefix(T),g>0},isLoading:function(){return this.state===f.LOADER_LOADING||this.state===f.LOADER_PROCESSING},isReady:function(){return this.state===f.LOADER_IDLE||this.state===f.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(s.START,this),this.list.size===0?this.loadComplete():(this.state=f.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(h.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(s.PROGRESS,this.progress)},update:function(){this.state===f.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(v){if((v.state===f.FILE_POPULATED||v.state===f.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(v),this.list.delete(v),v.crossOrigin||(v.crossOrigin=this.crossOrigin),v.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(v,c){!this.inflight||(this.inflight.delete(v),this.updateProgress(),c?(this.totalComplete++,this.queue.set(v),this.emit(s.FILE_LOAD,v),v.onProcess()):(this.totalFailed++,this._deleteQueue.set(v),this.emit(s.FILE_LOAD_ERROR,v),this.fileProcessComplete(v)))},fileProcessComplete:function(v){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(v.state===f.FILE_ERRORED?v.multiFile&&v.multiFile.onFileFailed(v):v.state===f.FILE_COMPLETE&&(v.multiFile?v.multiFile.isReadyToProcess()&&v.multiFile.addToCache():v.addToCache()),this.queue.delete(v),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(s.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=f.LOADER_COMPLETE,this.systems.events.off(h.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(s.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(v){this._deleteQueue.set(v)},saveJSON:function(v,c){return this.save(JSON.stringify(v),c)},save:function(v,c,g){c===void 0&&(c="file.json"),g===void 0&&(g="application/json");var x=new Blob([v],{type:g}),A=URL.createObjectURL(x),T=document.createElement("a");return T.download=c,T.textContent="Download "+c,T.href=A,T.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var v=this.systems.game.config,c=this.systems.settings.loader;this.setBaseURL(r(c,"baseURL",v.loaderBaseURL)),this.setPath(r(c,"path",v.loaderPath)),this.setPrefix(r(c,"prefix",v.loaderPrefix)),this.state=f.LOADER_IDLE},shutdown:function(){this.reset(),this.state=f.LOADER_SHUTDOWN,this.systems.events.off(h.UPDATE,this.update,this),this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=f.LOADER_DESTROYED,this.systems.events.off(h.UPDATE,this.update,this),this.systems.events.off(h.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",d,"load"),i.exports=d},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),f=t(17),a={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(36),a=t(50),o=t(353),s=t(521),n=t(2),r=t(127),u=t(523),h=t(244),l=t(24),d=t(20),v=t(3),c=t(526),g=new e({initialize:function(A){this.scene=A,this.systems=A.sys,this.config=this.getConfig(),this.world,this.add,A.sys.events.once(d.BOOT,this.boot,this),A.sys.events.on(d.START,this.start,this)},boot:function(){this.world=new c(this.scene,this.config),this.add=new s(this.world),this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new c(this.scene,this.config),this.add=new s(this.world));var x=this.systems.events;n(this.config,"customUpdate",!1)||x.on(d.UPDATE,this.world.update,this.world),x.on(d.POST_UPDATE,this.world.postUpdate,this.world),x.once(d.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(d.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(d.UPDATE,this.world.update,this.world)},getConfig:function(){var x=this.systems.game.config.physics,A=this.systems.settings.physics,T=r(n(A,"arcade",{}),n(x,"arcade",{}));return T},overlap:function(x,A,T,E,S){return T===void 0&&(T=null),E===void 0&&(E=null),S===void 0&&(S=T),this.world.collideObjects(x,A,T,E,S,!0)},collide:function(x,A,T,E,S){return T===void 0&&(T=null),E===void 0&&(E=null),S===void 0&&(S=T),this.world.collideObjects(x,A,T,E,S,!1)},collideTiles:function(x,A,T,E,S){return this.world.collideTiles(x,A,T,E,S)},overlapTiles:function(x,A,T,E,S){return this.world.overlapTiles(x,A,T,E,S)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(x,A,T,E,S,C){E===void 0&&(E=60);var P=Math.atan2(T-x.y,A-x.x);return x.body.acceleration.setToPolar(P,E),S!==void 0&&C!==void 0&&x.body.maxVelocity.set(S,C),P},accelerateToObject:function(x,A,T,E,S){return this.accelerateTo(x,A.x,A.y,T,E,S)},closest:function(x,A){A||(A=this.world.bodies.entries);for(var T=Number.MAX_VALUE,E=null,S=x.x,C=x.y,P=A.length,R=0;R<P;R++){var M=A[R],L=M.body||M;if(!(x===M||x===L||x===L.gameObject||x===L.center)){var F=o(S,C,L.center.x,L.center.y);F<T&&(E=M,T=F)}}return E},furthest:function(x,A){A||(A=this.world.bodies.entries);for(var T=-1,E=null,S=x.x,C=x.y,P=A.length,R=0;R<P;R++){var M=A[R],L=M.body||M;if(!(x===M||x===L||x===L.gameObject||x===L.center)){var F=o(S,C,L.center.x,L.center.y);F>T&&(E=M,T=F)}}return E},moveTo:function(x,A,T,E,S){E===void 0&&(E=60),S===void 0&&(S=0);var C=Math.atan2(T-x.y,A-x.x);return S>0&&(E=a(x.x,x.y,A,T)/(S/1e3)),x.body.velocity.setToPolar(C,E),C},moveToObject:function(x,A,T,E){return this.moveTo(x,A.x,A.y,T,E)},velocityFromAngle:function(x,A,T){return A===void 0&&(A=60),T===void 0&&(T=new v),T.setToPolar(f(x),A)},velocityFromRotation:function(x,A,T){return A===void 0&&(A=60),T===void 0&&(T=new v),T.setToPolar(x,A)},overlapRect:function(x,A,T,E,S,C){return h(this.world,x,A,T,E,S,C)},overlapCirc:function(x,A,T,E,S){return u(this.world,x,A,T,E,S)},shutdown:function(){if(!!this.world){var x=this.systems.events;x.off(d.UPDATE,this.world.update,this.world),x.off(d.POST_UPDATE,this.world.postUpdate,this.world),x.off(d.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",g,"arcadePhysics"),i.exports=g},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(e,f){return this.body.acceleration.set(e,f),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e,f){return this.body.bounce.set(e,f),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,f,a){return this.body.setCollideWorldBounds(e,f,a),this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(e,f,a){return this.debugShowBody=e,this.debugShowVelocity=f,this.debugBodyColor=a,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(e,f){return this.body.drag.set(e,f),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(e,f,a,o,s){return e&&this.body.reset(f,a),o&&(this.body.gameObject.active=!0),s&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,f){return e===void 0&&(e=!1),f===void 0&&(f=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),f&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,f){return this.body.friction.set(e,f),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(e,f){return this.body.gravity.set(e,f),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(e){return this.body.mass=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(e,f){return this.body.setOffset(e,f),this},setSize:function(e,f,a){return this.body.setSize(e,f,a),this},setBodySize:function(e,f,a){return this.body.setSize(e,f,a),this},setCircle:function(e,f,a){return this.body.setCircle(e,f,a),this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(e,f){return this.body.setVelocity(e,f),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,f){return this.body.maxVelocity.set(e,f),this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collide"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="overlap"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="tilecollide"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="tileoverlap"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="worldbounds"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="worldstep"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,f,a,o,s,n,r,u,h,l,d,v,c,g,x,A,T=function(M,L,F){t=M,e=L;var I=t.velocity.x,w=e.velocity.x;return f=t.pushable,u=t._dx<0,h=t._dx>0,l=t._dx===0,g=Math.abs(t.right-e.x)<=Math.abs(e.right-t.x),n=w-I*t.bounce.x,a=e.pushable,d=e._dx<0,v=e._dx>0,c=e._dx===0,x=!g,r=I-w*e.bounce.x,A=Math.abs(F),E()},E=function(){return h&&g&&e.blocked.right?(t.processX(-A,n,!1,!0),1):u&&x&&e.blocked.left?(t.processX(A,n,!0),1):v&&x&&t.blocked.right?(e.processX(-A,r,!1,!0),2):d&&g&&t.blocked.left?(e.processX(A,r,!0),2):0},S=function(){var M=t.velocity.x,L=e.velocity.x,F=Math.sqrt(L*L*e.mass/t.mass)*(L>0?1:-1),I=Math.sqrt(M*M*t.mass/e.mass)*(M>0?1:-1),w=(F+I)*.5;return F-=w,I-=w,o=w+F*t.bounce.x,s=w+I*e.bounce.x,u&&x?C(0):d&&g?C(1):h&&g?C(2):v&&x?C(3):!1},C=function(M){if(f&&a)A*=.5,M===0||M===3?(t.processX(A,o),e.processX(-A,s)):(t.processX(-A,o),e.processX(A,s));else if(f&&!a)M===0||M===3?t.processX(A,n,!0):t.processX(-A,n,!1,!0);else if(!f&&a)M===0||M===3?e.processX(-A,r,!1,!0):e.processX(A,r,!0);else{var L=A*.5;M===0?c?(t.processX(A,0,!0),e.processX(0,null,!1,!0)):v?(t.processX(L,0,!0),e.processX(-L,0,!1,!0)):(t.processX(L,e.velocity.x,!0),e.processX(-L,null,!1,!0)):M===1?l?(t.processX(0,null,!1,!0),e.processX(A,0,!0)):h?(t.processX(-L,0,!1,!0),e.processX(L,0,!0)):(t.processX(-L,null,!1,!0),e.processX(L,t.velocity.x,!0)):M===2?c?(t.processX(-A,0,!1,!0),e.processX(0,null,!0)):d?(t.processX(-L,0,!1,!0),e.processX(L,0,!0)):(t.processX(-L,e.velocity.x,!1,!0),e.processX(L,null,!0)):M===3&&(l?(t.processX(0,null,!0),e.processX(-A,0,!1,!0)):u?(t.processX(L,0,!0),e.processX(-L,0,!1,!0)):(t.processX(L,e.velocity.y,!0),e.processX(-L,null,!1,!0)))}return!0},P=function(M){M===1?e.velocity.x=0:g?e.processX(A,r,!0):e.processX(-A,r,!1,!0),t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y,e._dy=e.y-e.prev.y)},R=function(M){M===2?t.velocity.x=0:x?t.processX(A,n,!0):t.processX(-A,n,!1,!0),e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y,t._dy=t.y-t.prev.y)};i.exports={BlockCheck:E,Check:S,Set:T,Run:C,RunImmovableBody1:P,RunImmovableBody2:R}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,f,a,o,s,n,r,u,h,l,d,v,c,g,x,A,T=function(M,L,F){t=M,e=L;var I=t.velocity.y,w=e.velocity.y;return f=t.pushable,u=t._dy<0,h=t._dy>0,l=t._dy===0,g=Math.abs(t.bottom-e.y)<=Math.abs(e.bottom-t.y),n=w-I*t.bounce.y,a=e.pushable,d=e._dy<0,v=e._dy>0,c=e._dy===0,x=!g,r=I-w*e.bounce.y,A=Math.abs(F),E()},E=function(){return h&&g&&e.blocked.down?(t.processY(-A,n,!1,!0),1):u&&x&&e.blocked.up?(t.processY(A,n,!0),1):v&&x&&t.blocked.down?(e.processY(-A,r,!1,!0),2):d&&g&&t.blocked.up?(e.processY(A,r,!0),2):0},S=function(){var M=t.velocity.y,L=e.velocity.y,F=Math.sqrt(L*L*e.mass/t.mass)*(L>0?1:-1),I=Math.sqrt(M*M*t.mass/e.mass)*(M>0?1:-1),w=(F+I)*.5;return F-=w,I-=w,o=w+F*t.bounce.y,s=w+I*e.bounce.y,u&&x?C(0):d&&g?C(1):h&&g?C(2):v&&x?C(3):!1},C=function(M){if(f&&a)A*=.5,M===0||M===3?(t.processY(A,o),e.processY(-A,s)):(t.processY(-A,o),e.processY(A,s));else if(f&&!a)M===0||M===3?t.processY(A,n,!0):t.processY(-A,n,!1,!0);else if(!f&&a)M===0||M===3?e.processY(-A,r,!1,!0):e.processY(A,r,!0);else{var L=A*.5;M===0?c?(t.processY(A,0,!0),e.processY(0,null,!1,!0)):v?(t.processY(L,0,!0),e.processY(-L,0,!1,!0)):(t.processY(L,e.velocity.y,!0),e.processY(-L,null,!1,!0)):M===1?l?(t.processY(0,null,!1,!0),e.processY(A,0,!0)):h?(t.processY(-L,0,!1,!0),e.processY(L,0,!0)):(t.processY(-L,null,!1,!0),e.processY(L,t.velocity.y,!0)):M===2?c?(t.processY(-A,0,!1,!0),e.processY(0,null,!0)):d?(t.processY(-L,0,!1,!0),e.processY(L,0,!0)):(t.processY(-L,e.velocity.y,!1,!0),e.processY(L,null,!0)):M===3&&(l?(t.processY(0,null,!0),e.processY(-A,0,!1,!0)):u?(t.processY(L,0,!0),e.processY(-L,0,!1,!0)):(t.processY(L,e.velocity.y,!0),e.processY(-L,null,!1,!0)))}return!0},P=function(M){M===1?e.velocity.y=0:g?e.processY(A,r,!0):e.processY(-A,r,!1,!0),t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x,e._dx=e.x-e.prev.x)},R=function(M){M===2?t.velocity.y=0:x?t.processY(A,n,!0):t.processY(-A,n,!1,!0),e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x,t._dx=t.x-t.prev.x)};i.exports={BlockCheck:E,Check:S,Set:T,Run:C,RunImmovableBody1:P,RunImmovableBody2:R}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(3),a=new e({initialize:function(){this.boundsCenter=new f,this.centerDiff=new f},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var s=this.boundsCenter,n=this.centerDiff,r=o.bounds.max.x-o.bounds.min.x,u=o.bounds.max.y-o.bounds.min.y,h=r*o.centerOfMass.x,l=u*o.centerOfMass.y;return s.set(r/2,u/2),n.set(h-s.x,l-s.y),!0},getTopLeft:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s+r.x+u.x,n+r.y+u.y)}return!1},getTopCenter:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s+u.x,n+r.y+u.y)}return!1},getTopRight:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s-(r.x-u.x),n+r.y+u.y)}return!1},getLeftCenter:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s+r.x+u.x,n+u.y)}return!1},getCenter:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.centerDiff;return new f(s+r.x,n+r.y)}return!1},getRightCenter:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s-(r.x-u.x),n+u.y)}return!1},getBottomLeft:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s+r.x+u.x,n-(r.y-u.y))}return!1},getBottomCenter:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s+u.x,n-(r.y-u.y))}return!1},getBottomRight:function(o,s,n){if(s===void 0&&(s=0),n===void 0&&(n=0),this.parseBody(o)){var r=this.boundsCenter,u=this.centerDiff;return new f(s-(r.x-u.x),n-(r.y-u.y))}return!1}});i.exports=a},function(i,m){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={decomp:M,quickDecomp:w,isSimple:F,removeCollinearPoints:U,removeDuplicatePoints:z,makeCCW:g};function t(D,O,B){B=B||0;var N=[0,0],G,V,Y,X,b,Q,K;return G=D[1][1]-D[0][1],V=D[0][0]-D[1][0],Y=G*D[0][0]+V*D[0][1],X=O[1][1]-O[0][1],b=O[0][0]-O[1][0],Q=X*O[0][0]+b*O[0][1],K=G*b-X*V,W(K,0,B)||(N[0]=(b*Y-V*Q)/K,N[1]=(G*Q-X*Y)/K),N}function e(D,O,B,N){var G=O[0]-D[0],V=O[1]-D[1],Y=N[0]-B[0],X=N[1]-B[1];if(Y*V-X*G===0)return!1;var b=(G*(B[1]-D[1])+V*(D[0]-B[0]))/(Y*V-X*G),Q=(Y*(D[1]-B[1])+X*(B[0]-D[0]))/(X*G-Y*V);return b>=0&&b<=1&&Q>=0&&Q<=1}function f(D,O,B){return(O[0]-D[0])*(B[1]-D[1])-(B[0]-D[0])*(O[1]-D[1])}function a(D,O,B){return f(D,O,B)>0}function o(D,O,B){return f(D,O,B)>=0}function s(D,O,B){return f(D,O,B)<0}function n(D,O,B){return f(D,O,B)<=0}var r=[],u=[];function h(D,O,B,N){if(N){var G=r,V=u;G[0]=O[0]-D[0],G[1]=O[1]-D[1],V[0]=B[0]-O[0],V[1]=B[1]-O[1];var Y=G[0]*V[0]+G[1]*V[1],X=Math.sqrt(G[0]*G[0]+G[1]*G[1]),b=Math.sqrt(V[0]*V[0]+V[1]*V[1]),Q=Math.acos(Y/(X*b));return Q<N}else return f(D,O,B)===0}function l(D,O){var B=O[0]-D[0],N=O[1]-D[1];return B*B+N*N}function d(D,O){var B=D.length;return D[O<0?O%B+B:O%B]}function v(D){D.length=0}function c(D,O,B,N){for(var G=B;G<N;G++)D.push(O[G])}function g(D){for(var O=0,B=D,N=1;N<D.length;++N)(B[N][1]<B[O][1]||B[N][1]===B[O][1]&&B[N][0]>B[O][0])&&(O=N);return a(d(D,O-1),d(D,O),d(D,O+1))?!1:(x(D),!0)}function x(D){for(var O=[],B=D.length,N=0;N!==B;N++)O.push(D.pop());for(var N=0;N!==B;N++)D[N]=O[N]}function A(D,O){return s(d(D,O-1),d(D,O),d(D,O+1))}var T=[],E=[];function S(D,O,B){var N,G,V=T,Y=E;if(o(d(D,O+1),d(D,O),d(D,B))&&n(d(D,O-1),d(D,O),d(D,B)))return!1;G=l(d(D,O),d(D,B));for(var X=0;X!==D.length;++X)if(!((X+1)%D.length===O||X===O)&&o(d(D,O),d(D,B),d(D,X+1))&&n(d(D,O),d(D,B),d(D,X))&&(V[0]=d(D,O),V[1]=d(D,B),Y[0]=d(D,X),Y[1]=d(D,X+1),N=t(V,Y),l(d(D,O),N)<G))return!1;return!0}function C(D,O,B){for(var N=0;N!==D.length;++N)if(!(N===O||N===B||(N+1)%D.length===O||(N+1)%D.length===B)&&e(d(D,O),d(D,B),d(D,N),d(D,N+1)))return!1;return!0}function P(D,O,B,N){var G=N||[];if(v(G),O<B)for(var V=O;V<=B;V++)G.push(D[V]);else{for(var V=0;V<=B;V++)G.push(D[V]);for(var V=O;V<D.length;V++)G.push(D[V])}return G}function R(D){for(var O=[],B=[],N=[],G=[],V=Number.MAX_VALUE,Y=0;Y<D.length;++Y)if(A(D,Y)){for(var X=0;X<D.length;++X)if(S(D,Y,X)){B=R(P(D,Y,X,G)),N=R(P(D,X,Y,G));for(var b=0;b<N.length;b++)B.push(N[b]);B.length<V&&(O=B,V=B.length,O.push([d(D,Y),d(D,X)]))}}return O}function M(D){var O=R(D);return O.length>0?L(D,O):[D]}function L(D,O){if(O.length===0)return[D];if(O instanceof Array&&O.length&&O[0]instanceof Array&&O[0].length===2&&O[0][0]instanceof Array){for(var B=[D],N=0;N<O.length;N++)for(var G=O[N],V=0;V<B.length;V++){var Y=B[V],X=L(Y,G);if(X){B.splice(V,1),B.push(X[0],X[1]);break}}return B}else{var G=O,N=D.indexOf(G[0]),V=D.indexOf(G[1]);return N!==-1&&V!==-1?[P(D,N,V),P(D,V,N)]:!1}}function F(D){var O=D,B;for(B=0;B<O.length-1;B++)for(var N=0;N<B-1;N++)if(e(O[B],O[B+1],O[N],O[N+1]))return!1;for(B=1;B<O.length-2;B++)if(e(O[0],O[O.length-1],O[B],O[B+1]))return!1;return!0}function I(D,O,B,N,G){G=G||0;var V=O[1]-D[1],Y=D[0]-O[0],X=V*D[0]+Y*D[1],b=N[1]-B[1],Q=B[0]-N[0],K=b*B[0]+Q*B[1],$=V*Q-b*Y;return W($,0,G)?[0,0]:[(Q*X-Y*K)/$,(V*K-b*X)/$]}function w(D,O,B,N,G,V,Y){V=V||100,Y=Y||0,G=G||25,O=typeof O<"u"?O:[],B=B||[],N=N||[];var X=[0,0],b=[0,0],Q=[0,0],K=0,$=0,Z=0,k=0,J=0,tt=0,ut=0,rt=[],it=[],j=D,vt=D;if(vt.length<3)return O;if(Y++,Y>V)return console.warn("quickDecomp: max level ("+V+") reached."),O;for(var nt=0;nt<D.length;++nt)if(A(j,nt)){B.push(j[nt]),K=$=Number.MAX_VALUE;for(var ht=0;ht<D.length;++ht)a(d(j,nt-1),d(j,nt),d(j,ht))&&n(d(j,nt-1),d(j,nt),d(j,ht-1))&&(Q=I(d(j,nt-1),d(j,nt),d(j,ht),d(j,ht-1)),s(d(j,nt+1),d(j,nt),Q)&&(Z=l(j[nt],Q),Z<$&&($=Z,b=Q,tt=ht))),a(d(j,nt+1),d(j,nt),d(j,ht+1))&&n(d(j,nt+1),d(j,nt),d(j,ht))&&(Q=I(d(j,nt+1),d(j,nt),d(j,ht),d(j,ht+1)),a(d(j,nt-1),d(j,nt),Q)&&(Z=l(j[nt],Q),Z<K&&(K=Z,X=Q,J=ht)));if(tt===(J+1)%D.length)Q[0]=(b[0]+X[0])/2,Q[1]=(b[1]+X[1])/2,N.push(Q),nt<J?(c(rt,j,nt,J+1),rt.push(Q),it.push(Q),tt!==0&&c(it,j,tt,j.length),c(it,j,0,nt+1)):(nt!==0&&c(rt,j,nt,j.length),c(rt,j,0,J+1),rt.push(Q),it.push(Q),c(it,j,tt,nt+1));else{if(tt>J&&(J+=D.length),k=Number.MAX_VALUE,J<tt)return O;for(var ht=tt;ht<=J;++ht)o(d(j,nt-1),d(j,nt),d(j,ht))&&n(d(j,nt+1),d(j,nt),d(j,ht))&&(Z=l(d(j,nt),d(j,ht)),Z<k&&C(j,nt,ht)&&(k=Z,ut=ht%D.length));nt<ut?(c(rt,j,nt,ut+1),ut!==0&&c(it,j,ut,vt.length),c(it,j,0,nt+1)):(nt!==0&&c(rt,j,nt,vt.length),c(rt,j,0,ut+1),c(it,j,ut,nt+1))}return rt.length<it.length?(w(rt,O,B,N,G,V,Y),w(it,O,B,N,G,V,Y)):(w(it,O,B,N,G,V,Y),w(rt,O,B,N,G,V,Y)),O}return O.push(D),O}function U(D,O){for(var B=0,N=D.length-1;D.length>3&&N>=0;--N)h(d(D,N-1),d(D,N),d(D,N+1),O)&&(D.splice(N%D.length,1),B++);return B}function z(D,O){for(var B=D.length-1;B>=1;--B)for(var N=D[B],G=B-1;G>=0;--G)if(H(N,D[G],O)){D.splice(B,1);continue}}function W(D,O,B){return B=B||0,Math.abs(D-O)<=B}function H(D,O,B){return W(D[0],O[0],B)&&W(D[1],O[1],B)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(0),a=t(591),o=t(128),s=t(592),n=t(1395),r=t(1396),u=t(1397),h=t(593),l=t(589),d=t(590),v=t(1398),c=t(64),g=new f({initialize:function(A){this.world=A,this.scene=A.scene,this.sys=A.scene.sys},rectangle:function(x,A,T,E,S){var C=e.rectangle(x,A,T,E,S);return this.world.add(C),C},trapezoid:function(x,A,T,E,S,C){var P=e.trapezoid(x,A,T,E,S,C);return this.world.add(P),P},circle:function(x,A,T,E,S){var C=e.circle(x,A,T,E,S);return this.world.add(C),C},polygon:function(x,A,T,E,S){var C=e.polygon(x,A,T,E,S);return this.world.add(C),C},fromVertices:function(x,A,T,E,S,C,P){typeof T=="string"&&(T=c.fromPath(T));var R=e.fromVertices(x,A,T,E,S,C,P);return this.world.add(R),R},fromPhysicsEditor:function(x,A,T,E,S){S===void 0&&(S=!0);var C=l.parseBody(x,A,T,E);return S&&!this.world.has(C)&&this.world.add(C),C},fromSVG:function(x,A,T,E,S,C){E===void 0&&(E=1),S===void 0&&(S={}),C===void 0&&(C=!0);for(var P=T.getElementsByTagName("path"),R=[],M=0;M<P.length;M++){var L=s.pathToVertices(P[M],30);E!==1&&c.scale(L,E,E),R.push(L)}var F=e.fromVertices(x,A,R,S);return C&&this.world.add(F),F},fromJSON:function(x,A,T,E,S){E===void 0&&(E={}),S===void 0&&(S=!0);var C=d.parseBody(x,A,T,E);return C&&S&&this.world.add(C),C},imageStack:function(x,A,T,E,S,C,P,R,M){P===void 0&&(P=0),R===void 0&&(R=0),M===void 0&&(M={});var L=this.world,F=this.sys.displayList;M.addToWorld=!1;var I=a.stack(T,E,S,C,P,R,function(w,U){var z=new r(L,w,U,x,A,M);return F.add(z),z.body});return L.add(I),I},stack:function(x,A,T,E,S,C,P){var R=a.stack(x,A,T,E,S,C,P);return this.world.add(R),R},pyramid:function(x,A,T,E,S,C,P){var R=a.pyramid(x,A,T,E,S,C,P);return this.world.add(R),R},chain:function(x,A,T,E,S,C){return a.chain(x,A,T,E,S,C)},mesh:function(x,A,T,E,S){return a.mesh(x,A,T,E,S)},newtonsCradle:function(x,A,T,E,S){var C=a.newtonsCradle(x,A,T,E,S);return this.world.add(C),C},car:function(x,A,T,E,S){var C=a.car(x,A,T,E,S);return this.world.add(C),C},softBody:function(x,A,T,E,S,C,P,R,M,L){var F=a.softBody(x,A,T,E,S,C,P,R,M,L);return this.world.add(F),F},joint:function(x,A,T,E,S){return this.constraint(x,A,T,E,S)},spring:function(x,A,T,E,S){return this.constraint(x,A,T,E,S)},constraint:function(x,A,T,E,S){E===void 0&&(E=1),S===void 0&&(S={}),S.bodyA=x.type==="body"?x:x.body,S.bodyB=A.type==="body"?A:A.body,isNaN(T)||(S.length=T),S.stiffness=E;var C=o.create(S);return this.world.add(C),C},worldConstraint:function(x,A,T,E){T===void 0&&(T=1),E===void 0&&(E={}),E.bodyB=x.type==="body"?x:x.body,isNaN(A)||(E.length=A),E.stiffness=T;var S=o.create(E);return this.world.add(S),S},mouseSpring:function(x){return this.pointerConstraint(x)},pointerConstraint:function(x){x===void 0&&(x={}),x.hasOwnProperty("render")||(x.render={visible:!1});var A=new v(this.scene,this.world,x);return this.world.add(A.constraint),A},image:function(x,A,T,E,S){var C=new r(this.world,x,A,T,E,S);return this.sys.displayList.add(C),C},tileBody:function(x,A){return new h(this.world,x,A)},sprite:function(x,A,T,E,S){var C=new u(this.world,x,A,T,E,S);return this.sys.displayList.add(C),this.sys.updateList.add(C),C},gameObject:function(x,A,T){return n(this.world,x,A,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});i.exports=g},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(249),f=t(2),a=t(3);function o(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var s=function(n,r,u,h){u===void 0&&(u={}),h===void 0&&(h=!0);var l=r.x,d=r.y;r.body={temp:!0,position:{x:l,y:d}};var v=[e.Bounce,e.Collision,e.Force,e.Friction,e.Gravity,e.Mass,e.Sensor,e.SetBody,e.Sleep,e.Static,e.Transform,e.Velocity];if(v.forEach(function(g){for(var x in g)o(g[x])?Object.defineProperty(r,x,{get:g[x].get,set:g[x].set}):Object.defineProperty(r,x,{value:g[x]})}),r.world=n,r._tempVec2=new a(l,d),u.hasOwnProperty("type")&&u.type==="body")r.setExistingBody(u,h);else{var c=f(u,"shape",null);c||(c="rectangle"),u.addToWorld=h,r.setBody(c,u)}return r};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(249),a=t(15),o=t(2),s=t(125),n=t(167),r=t(3),u=new e({Extends:s,Mixins:[f.Bounce,f.Collision,f.Force,f.Friction,f.Gravity,f.Mass,f.Sensor,f.SetBody,f.Sleep,f.Static,f.Transform,f.Velocity,n],initialize:function(l,d,v,c,g,x){a.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,g),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new r(d,v);var A=o(x,"shape",null);A?this.setBody(A,x):this.setRectangle(this.width,this.height,x),this.setPosition(d,v),this.initPipeline()}});i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),f=t(0),a=t(249),o=t(15),s=t(2),n=t(167),r=t(73),u=t(3),h=new f({Extends:r,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,n],initialize:function(d,v,c,g,x,A){o.call(this,d.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(g,x),this.setSizeToFrame(),this.setOrigin(),this.world=d,this._tempVec2=new u(v,c);var T=s(A,"shape",null);T?this.setBody(T,A):this.setRectangle(this.width,this.height,A),this.setPosition(v,c),this.initPipeline()}});i.exports=h},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(84),f=t(0),a=t(118),o=t(128),s=t(273),n=t(272),r=t(51),u=t(127),h=t(165),l=t(3),d=t(64),v=new f({initialize:function(g,x,A){A===void 0&&(A={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=g,this.world=x,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=o.create(u(A,T)),this.world.on(n.BEFORE_UPDATE,this.update,this),g.sys.input.on(r.POINTER_DOWN,this.onDown,this),g.sys.input.on(r.POINTER_UP,this.onUp,this)},onDown:function(c){this.pointer||(this.pointer=c,this.camera=c.camera)},onUp:function(c){c===this.pointer&&(this.pointer=null)},getBody:function(c){var g=this.position,x=this.constraint;this.camera.getWorldPoint(c.x,c.y,g);for(var A=a.allBodies(this.world.localWorld),T=0;T<A.length;T++){var E=A[T];if(!E.ignorePointer&&e.contains(E.bounds,g)&&s.canCollide(E.collisionFilter,x.collisionFilter)&&this.hitTestBody(E,g))return this.world.emit(n.DRAG_START,E,this.part,this),!0}return!1},hitTestBody:function(c,g){for(var x=this.constraint,A=c.parts.length,T=A>1?1:0,E=T;E<A;E++){var S=c.parts[E];if(d.contains(S.vertices,g))return x.pointA=g,x.pointB={x:g.x-c.position.x,y:g.y-c.position.y},x.bodyB=c,x.angleB=c.angle,h.set(c,!1),this.part=S,this.body=c,!0}return!1},update:function(){var c=this.pointer,g=this.body;if(!this.active||!c){g&&this.stopDrag();return}if(!c.isDown&&g){this.stopDrag();return}else if(c.isDown){if(!g&&!this.getBody(c))return;g=this.body;var x=this.position,A=this.constraint;this.camera.getWorldPoint(c.x,c.y,x),A.pointA.x=x.x,A.pointA.y=x.y,h.set(g,!1),this.world.emit(n.DRAG,g,this)}},stopDrag:function(){var c=this.body,g=this.constraint;g.bodyB=null,g.pointB=null,this.pointer=null,this.body=null,this.part=null,c&&this.world.emit(n.DRAG_END,c,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(r.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(r.POINTER_UP,this.onUp,this)}});i.exports=v},function(i,m,t){var e={};i.exports=e;var f=t(595),a=t(32);(function(){e.name="matter-js",e.version="0.14.2",e.uses=[],e.used=[],e.use=function(){f.use(e,Array.prototype.slice.call(arguments))},e.before=function(o,s){return o=o.replace(/^Matter./,""),a.chainPathBefore(e,o,s)},e.after=function(o,s){return o=o.replace(/^Matter./,""),a.chainPathAfter(e,o,s)}})()},function(i,m,t){var e={};i.exports=e;var f=t(83),a=t(274),o=t(84),s=t(86),n=t(64);(function(){e.collides=function(r,u){for(var h=[],l=0;l<u.length;l++){var d=u[l];if(r!==d&&o.overlaps(d.bounds,r.bounds))for(var v=d.parts.length===1?0:1;v<d.parts.length;v++){var c=d.parts[v];if(o.overlaps(c.bounds,r.bounds)){var g=a.collides(c,r);if(g.collided){h.push(g);break}}}}return h},e.ray=function(r,u,h,l){l=l||1e-100;for(var d=f.angle(u,h),v=f.magnitude(f.sub(u,h)),c=(h.x+u.x)*.5,g=(h.y+u.y)*.5,x=s.rectangle(c,g,v,l,{angle:d}),A=e.collides(x,r),T=0;T<A.length;T+=1){var E=A[T];E.body=E.bodyB=E.bodyA}return A},e.region=function(r,u,h){for(var l=[],d=0;d<r.length;d++){var v=r[d],c=o.overlaps(v.bounds,u);(c&&!h||!c&&h)&&l.push(v)}return l},e.point=function(r,u){for(var h=[],l=0;l<r.length;l++){var d=r[l];if(o.contains(d.bounds,u))for(var v=d.parts.length===1?0:1;v<d.parts.length;v++){var c=d.parts[v];if(o.contains(c.bounds,u)&&n.contains(c.vertices,u)){h.push(d);break}}}return h}})()},function(i,m,t){var e={};i.exports=e;var f=t(596),a=t(165),o=t(599),s=t(598),n=t(1523),r=t(597),u=t(166),h=t(118),l=t(128),d=t(32),v=t(41);(function(){e.create=function(c,g){g=d.isElement(c)?g:c,c=d.isElement(c)?c:null,g=g||{},(c||g.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:r}},A=d.extend(x,g);return A.world=g.world||f.create(A.world),A.pairs=s.create(),A.broadphase=A.broadphase.controller.create(A.broadphase),A.metrics=A.metrics||{extended:!1},A.metrics=n.create(A.metrics),A},e.update=function(c,g,x){g=g||1e3/60,x=x||1;var A=c.world,T=c.timing,E=c.broadphase,S=[],C;T.timestamp+=g*T.timeScale;var P={timestamp:T.timestamp};u.trigger(c,"beforeUpdate",P);var R=h.allBodies(A),M=h.allConstraints(A);for(n.reset(c.metrics),c.enableSleeping&&a.update(R,T.timeScale),e._bodiesApplyGravity(R,A.gravity),e._bodiesUpdate(R,g,T.timeScale,x,A.bounds),l.preSolveAll(R),C=0;C<c.constraintIterations;C++)l.solveAll(M,T.timeScale);l.postSolveAll(R),E.controller?(A.isModified&&E.controller.clear(E),E.controller.update(E,R,c,A.isModified),S=E.pairsList):S=R,A.isModified&&h.setModified(A,!1,!1,!0);var L=E.detector(S,c),F=c.pairs,I=T.timestamp;for(s.update(F,L,I),s.removeOld(F,I),c.enableSleeping&&a.afterCollisions(F.list,T.timeScale),F.collisionStart.length>0&&u.trigger(c,"collisionStart",{pairs:F.collisionStart}),o.preSolvePosition(F.list),C=0;C<c.positionIterations;C++)o.solvePosition(F.list,R,T.timeScale);for(o.postSolvePosition(R),l.preSolveAll(R),C=0;C<c.constraintIterations;C++)l.solveAll(M,T.timeScale);for(l.postSolveAll(R),o.preSolveVelocity(F.list),C=0;C<c.velocityIterations;C++)o.solveVelocity(F.list,T.timeScale);return F.collisionActive.length>0&&u.trigger(c,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&u.trigger(c,"collisionEnd",{pairs:F.collisionEnd}),n.update(c.metrics,c),e._bodiesClearForces(R),u.trigger(c,"afterUpdate",P),c},e.merge=function(c,g){if(d.extend(c,g),g.world){c.world=g.world,e.clear(c);for(var x=h.allBodies(c.world),A=0;A<x.length;A++){var T=x[A];a.set(T,!1),T.id=d.nextId()}}},e.clear=function(c){var g=c.world;s.clear(c.pairs);var x=c.broadphase;if(x.controller){var A=h.allBodies(g);x.controller.clear(x),x.controller.update(x,A,c,!0)}},e._bodiesClearForces=function(c){for(var g=0;g<c.length;g++){var x=c[g];x.force.x=0,x.force.y=0,x.torque=0}},e._bodiesApplyGravity=function(c,g){var x=typeof g.scale<"u"?g.scale:.001;if(!(g.x===0&&g.y===0||x===0))for(var A=0;A<c.length;A++){var T=c[A];T.ignoreGravity||T.isStatic||T.isSleeping||(T.force.x+=T.mass*g.x*x*T.gravityScale.x,T.force.y+=T.mass*g.y*x*T.gravityScale.y)}},e._bodiesUpdate=function(c,g,x,A,T){for(var E=0;E<c.length;E++){var S=c[E];S.isStatic||S.isSleeping||v.update(S,g,x,A)}}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),a=t(0),o=t(32),s=t(118),n=t(1401),r=t(9),u=t(272),h=t(2),l=t(6),d=t(41),v=t(166),c=t(593),g=t(596),x=t(83),A=new a({Extends:r,initialize:function(E,S){r.call(this),this.scene=E,this.engine=n.create(S),this.localWorld=this.engine.world;var C=l(S,"gravity",null);C?this.setGravity(C.x,C.y,C.scale):C===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(S,"enabled",!0),this.correction=l(S,"correction",1),this.getDelta=l(S,"getDelta",this.update60Hz);var P=h(S,"runner",{}),R=h(P,"fps",!1),M=h(P,"fps",60),L=h(P,"delta",1e3/M),F=h(P,"deltaMin",1e3/M),I=h(P,"deltaMax",1e3/(M*.5));R||(M=1e3/L),this.runner={fps:M,correction:h(P,"correction",1),deltaSampleSize:h(P,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:h(P,"isFixed",!1),delta:L,deltaMin:F,deltaMax:I},this.autoUpdate=l(S,"autoUpdate",!0);var w=l(S,"debug",!1);if(this.drawDebug=typeof w=="object"?!0:w,this.debugGraphic,this.debugConfig={showAxes:h(w,"showAxes",!1),showAngleIndicator:h(w,"showAngleIndicator",!1),angleColor:h(w,"angleColor",15208787),showBroadphase:h(w,"showBroadphase",!1),broadphaseColor:h(w,"broadphaseColor",16757760),showBounds:h(w,"showBounds",!1),boundsColor:h(w,"boundsColor",16777215),showVelocity:h(w,"showVelocity",!1),velocityColor:h(w,"velocityColor",44783),showCollisions:h(w,"showCollisions",!1),collisionColor:h(w,"collisionColor",16094476),showSeparations:h(w,"showSeparations",!1),separationColor:h(w,"separationColor",16753920),showBody:h(w,"showBody",!0),showStaticBody:h(w,"showStaticBody",!0),showInternalEdges:h(w,"showInternalEdges",!1),renderFill:h(w,"renderFill",!1),renderLine:h(w,"renderLine",!0),fillColor:h(w,"fillColor",1075465),fillOpacity:h(w,"fillOpacity",1),lineColor:h(w,"lineColor",2678297),lineOpacity:h(w,"lineOpacity",1),lineThickness:h(w,"lineThickness",1),staticFillColor:h(w,"staticFillColor",857979),staticLineColor:h(w,"staticLineColor",1255396),showSleeping:h(w,"showSleeping",!1),staticBodySleepOpacity:h(w,"staticBodySleepOpacity",.7),sleepFillColor:h(w,"sleepFillColor",4605510),sleepLineColor:h(w,"sleepLineColor",10066585),showSensors:h(w,"showSensors",!0),sensorFillColor:h(w,"sensorFillColor",857979),sensorLineColor:h(w,"sensorLineColor",1255396),showPositions:h(w,"showPositions",!0),positionSize:h(w,"positionSize",4),positionColor:h(w,"positionColor",14697178),showJoint:h(w,"showJoint",!0),jointColor:h(w,"jointColor",14737474),jointLineOpacity:h(w,"jointLineOpacity",1),jointLineThickness:h(w,"jointLineThickness",2),pinSize:h(w,"pinSize",4),pinColor:h(w,"pinColor",4382944),springColor:h(w,"springColor",14697184),anchorColor:h(w,"anchorColor",15724527),anchorSize:h(w,"anchorSize",4),showConvexHulls:h(w,"showConvexHulls",!1),hullColor:h(w,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),h(S,"setBounds",!1)){var U=S.setBounds;if(typeof U=="boolean")this.setBounds();else{var z=h(U,"x",0),W=h(U,"y",0),H=h(U,"width",E.sys.scale.width),D=h(U,"height",E.sys.scale.height),O=h(U,"thickness",64),B=h(U,"left",!0),N=h(U,"right",!0),G=h(U,"top",!0),V=h(U,"bottom",!0);this.setBounds(z,W,H,D,O,B,N,G,V)}}},setCompositeRenderStyle:function(T){var E=T.bodies,S=T.constraints,C=T.composites,P,R,M;for(P=0;P<E.length;P++)R=E[P],M=R.render,this.setBodyRenderStyle(R,M.lineColor,M.lineOpacity,M.lineThickness,M.fillColor,M.fillOpacity);for(P=0;P<S.length;P++)R=S[P],M=R.render,this.setConstraintRenderStyle(R,M.lineColor,M.lineOpacity,M.lineThickness,M.pinSize,M.anchorColor,M.anchorSize);for(P=0;P<C.length;P++)R=C[P],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(T,E,S,C,P,R){var M=T.render,L=this.debugConfig;return M?(E==null&&(E=T.isStatic?L.staticLineColor:L.lineColor),S==null&&(S=L.lineOpacity),C==null&&(C=L.lineThickness),P==null&&(P=T.isStatic?L.staticFillColor:L.fillColor),R==null&&(R=L.fillOpacity),E!==!1&&(M.lineColor=E),S!==!1&&(M.lineOpacity=S),C!==!1&&(M.lineThickness=C),P!==!1&&(M.fillColor=P),R!==!1&&(M.fillOpacity=R),this):this},setConstraintRenderStyle:function(T,E,S,C,P,R,M){var L=T.render,F=this.debugConfig;if(!L)return this;if(E==null){var I=L.type;I==="line"?E=F.jointColor:I==="pin"?E=F.pinColor:I==="spring"&&(E=F.springColor)}return S==null&&(S=F.jointLineOpacity),C==null&&(C=F.jointLineThickness),P==null&&(P=F.pinSize),R==null&&(R=F.anchorColor),M==null&&(M=F.anchorSize),E!==!1&&(L.lineColor=E),S!==!1&&(L.lineOpacity=S),C!==!1&&(L.lineThickness=C),P!==!1&&(L.pinSize=P),R!==!1&&(L.anchorColor=R),M!==!1&&(L.anchorSize=M),this},setEventsProxy:function(){var T=this,E=this.engine,S=this.localWorld;this.drawDebug&&(v.on(S,"compositeModified",function(C){T.setCompositeRenderStyle(C)}),v.on(S,"beforeAdd",function(C){for(var P=[].concat(C.object),R=0;R<P.length;R++){var M=P[R],L=M.render;M.type==="body"?T.setBodyRenderStyle(M,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity):M.type==="composite"?T.setCompositeRenderStyle(M):M.type==="constraint"&&T.setConstraintRenderStyle(M,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize)}})),v.on(S,"beforeAdd",function(C){T.emit(u.BEFORE_ADD,C)}),v.on(S,"afterAdd",function(C){T.emit(u.AFTER_ADD,C)}),v.on(S,"beforeRemove",function(C){T.emit(u.BEFORE_REMOVE,C)}),v.on(S,"afterRemove",function(C){T.emit(u.AFTER_REMOVE,C)}),v.on(E,"beforeUpdate",function(C){T.emit(u.BEFORE_UPDATE,C)}),v.on(E,"afterUpdate",function(C){T.emit(u.AFTER_UPDATE,C)}),v.on(E,"collisionStart",function(C){var P=C.pairs,R,M;P.length>0&&(R=P[0].bodyA,M=P[0].bodyB),T.emit(u.COLLISION_START,C,R,M)}),v.on(E,"collisionActive",function(C){var P=C.pairs,R,M;P.length>0&&(R=P[0].bodyA,M=P[0].bodyB),T.emit(u.COLLISION_ACTIVE,C,R,M)}),v.on(E,"collisionEnd",function(C){var P=C.pairs,R,M;P.length>0&&(R=P[0].bodyA,M=P[0].bodyB),T.emit(u.COLLISION_END,C,R,M)})},setBounds:function(T,E,S,C,P,R,M,L,F){return T===void 0&&(T=0),E===void 0&&(E=0),S===void 0&&(S=this.scene.sys.scale.width),C===void 0&&(C=this.scene.sys.scale.height),P===void 0&&(P=64),R===void 0&&(R=!0),M===void 0&&(M=!0),L===void 0&&(L=!0),F===void 0&&(F=!0),this.updateWall(R,"left",T-P,E-P,P,C+P*2),this.updateWall(M,"right",T+S,E-P,P,C+P*2),this.updateWall(L,"top",T,E-P,S,P),this.updateWall(F,"bottom",T,E+C,S,P),this},updateWall:function(T,E,S,C,P,R){var M=this.walls[E];T?(M&&g.remove(this.localWorld,M),S+=P/2,C+=R/2,this.walls[E]=this.create(S,C,P,R,{isStatic:!0,friction:0,frictionStatic:0})):(M&&g.remove(this.localWorld,M),this.walls[E]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,E,S){return T===void 0&&(T=0),E===void 0&&(E=1),this.localWorld.gravity.x=T,this.localWorld.gravity.y=E,S!==void 0&&(this.localWorld.gravity.scale=S),this},create:function(T,E,S,C,P){var R=e.rectangle(T,E,S,C,P);return g.add(this.localWorld,R),R},add:function(T){return g.add(this.localWorld,T),this},remove:function(T,E){Array.isArray(T)||(T=[T]);for(var S=0;S<T.length;S++){var C=T[S],P=C.body?C.body:C;s.remove(this.localWorld,P,E)}return this},removeConstraint:function(T,E){return s.remove(this.localWorld,T,E),this},convertTilemapLayer:function(T,E){var S=T.layer,C=T.getTilesWithin(0,0,S.width,S.height,{isColliding:!0});return this.convertTiles(C,E),this},convertTiles:function(T,E){if(T.length===0)return this;for(var S=0;S<T.length;S++)new c(this,T[S],E);return this},nextGroup:function(T){return d.nextGroup(T)},nextCategory:function(){return d.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(u.RESUME),this},update:function(T,E){if(!(!this.enabled||!this.autoUpdate)){var S=this.engine,C=this.runner,P=S.timing,R=this.correction;C.isFixed?E=this.getDelta(T,E):(E=T-C.timePrev||C.delta,C.timePrev=T,C.deltaHistory.push(E),C.deltaHistory=C.deltaHistory.slice(-C.deltaSampleSize),E=Math.min.apply(null,C.deltaHistory),E=E<C.deltaMin?C.deltaMin:E,E=E>C.deltaMax?C.deltaMax:E,R=E/C.delta,C.delta=E),C.timeScalePrev!==0&&(R*=P.timeScale/C.timeScalePrev),P.timeScale===0&&(R=0),C.timeScalePrev=P.timeScale,C.correction=R,C.frameCounter+=1,T-C.counterTimestamp>=1e3&&(C.fps=C.frameCounter*((T-C.counterTimestamp)/1e3),C.counterTimestamp=T,C.frameCounter=0),n.update(S,E,R)}},step:function(T,E){n.update(this.engine,T,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var E=T.hasOwnProperty("body")?T.body:T;return s.get(this.localWorld,E.id,E.type)!==null},getAllBodies:function(){return s.allBodies(this.localWorld)},getAllConstraints:function(){return s.allConstraints(this.localWorld)},getAllComposites:function(){return s.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var T=this.debugConfig,E=this.engine,S=this.debugGraphic,C=s.allBodies(this.localWorld);this.debugGraphic.clear(),T.showBroadphase&&E.broadphase.controller&&this.renderGrid(E.broadphase,S,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(C,S,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(C),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(C,S,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(C,S,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(E.pairs.list,S,T.separationColor),T.showCollisions&&this.renderCollisions(E.pairs.list,S,T.collisionColor)}},renderGrid:function(T,E,S,C){E.lineStyle(1,S,C);for(var P=o.keys(T.buckets),R=0;R<P.length;R++){var M=P[R];if(!(T.buckets[M].length<2)){var L=M.split(/C|R/);E.strokeRect(parseInt(L[1],10)*T.bucketWidth,parseInt(L[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight)}}return this},renderSeparations:function(T,E,S){E.lineStyle(1,S,1);for(var C=0;C<T.length;C++){var P=T[C];if(!!P.isActive){var R=P.collision,M=R.bodyA,L=R.bodyB,F=M.position,I=L.position,w=R.penetration,U=!M.isStatic&&!L.isStatic?4:1;L.isStatic&&(U=0),E.lineBetween(I.x,I.y,I.x-w.x*U,I.y-w.y*U),U=!M.isStatic&&!L.isStatic?4:1,M.isStatic&&(U=0),E.lineBetween(F.x,F.y,F.x-w.x*U,F.y-w.y*U)}}return this},renderCollisions:function(T,E,S){E.lineStyle(1,S,.5),E.fillStyle(S,1);var C,P;for(C=0;C<T.length;C++)if(P=T[C],!!P.isActive)for(var R=0;R<P.activeContacts.length;R++){var M=P.activeContacts[R],L=M.vertex;E.fillRect(L.x-2,L.y-2,5,5)}for(C=0;C<T.length;C++)if(P=T[C],!!P.isActive){var F=P.collision,I=P.activeContacts;if(I.length>0){var w=I[0].vertex.x,U=I[0].vertex.y;I.length===2&&(w=(I[0].vertex.x+I[1].vertex.x)/2,U=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?E.lineBetween(w-F.normal.x*8,U-F.normal.y*8,w,U):E.lineBetween(w+F.normal.x*8,U+F.normal.y*8,w,U)}}return this},renderBodyBounds:function(T,E,S,C){E.lineStyle(1,S,C);for(var P=0;P<T.length;P++){var R=T[P];if(!!R.render.visible){var M=R.bounds;if(M)E.strokeRect(M.min.x,M.min.y,M.max.x-M.min.x,M.max.y-M.min.y);else for(var L=R.parts,F=L.length>1?1:0;F<L.length;F++){var I=L[F];E.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(T,E,S,C,P){E.lineStyle(1,C,P);for(var R=0;R<T.length;R++){var M=T[R],L=M.parts;if(!!M.render.visible){var F,I,w;if(S)for(I=L.length>1?1:0;I<L.length;I++)for(F=L[I],w=0;w<F.axes.length;w++){var U=F.axes[w];E.lineBetween(F.position.x,F.position.y,F.position.x+U.x*20,F.position.y+U.y*20)}else for(I=L.length>1?1:0;I<L.length;I++)for(F=L[I],w=0;w<F.axes.length;w++)E.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(T,E,S,C,P){E.lineStyle(P,S,C);for(var R=0;R<T.length;R++){var M=T[R];!M.render.visible||E.lineBetween(M.position.x,M.position.y,M.position.x+(M.position.x-M.positionPrev.x)*2,M.position.y+(M.position.y-M.positionPrev.y)*2)}return this},renderBodies:function(T){for(var E=this.debugGraphic,S=this.debugConfig,C=S.showBody,P=S.showStaticBody,R=S.showSleeping,M=S.showInternalEdges,L=S.showConvexHulls,F=S.renderFill,I=S.renderLine,w=S.staticBodySleepOpacity,U=S.sleepFillColor,z=S.sleepLineColor,W=S.hullColor,H=0;H<T.length;H++){var D=T[H];if(!!D.render.visible&&!(!P&&D.isStatic||!C&&!D.isStatic)){var O=D.render.lineColor,B=D.render.lineOpacity,N=D.render.lineThickness,G=D.render.fillColor,V=D.render.fillOpacity;R&&D.isSleeping&&(D.isStatic?(B*=w,V*=w):(O=z,G=U)),F||(G=null),I||(O=null),this.renderBody(D,E,M,O,B,N,G,V);var Y=D.parts.length;L&&Y>1&&this.renderConvexHull(D,E,W,N)}}},renderBody:function(T,E,S,C,P,R,M,L){C===void 0&&(C=null),P===void 0&&(P=null),R===void 0&&(R=1),M===void 0&&(M=null),L===void 0&&(L=null);for(var F=this.debugConfig,I=F.sensorFillColor,w=F.sensorLineColor,U=T.parts,z=U.length,W=z>1?1:0;W<z;W++){var H=U[W],D=H.render,O=D.opacity;if(!(!D.visible||O===0||H.isSensor&&!F.showSensors)){var B=H.circleRadius;if(E.beginPath(),H.isSensor?(M!==null&&E.fillStyle(I,L*O),C!==null&&E.lineStyle(R,w,P*O)):(M!==null&&E.fillStyle(M,L*O),C!==null&&E.lineStyle(R,C,P*O)),B)E.arc(H.position.x,H.position.y,B,0,2*Math.PI);else{var N=H.vertices,G=N.length;E.moveTo(N[0].x,N[0].y);for(var V=1;V<G;V++){var Y=N[V];if(!N[V-1].isInternal||S?E.lineTo(Y.x,Y.y):E.moveTo(Y.x,Y.y),V<G&&Y.isInternal&&!S){var X=(V+1)%G;E.moveTo(N[X].x,N[X].y)}}E.closePath()}M!==null&&E.fillPath(),C!==null&&E.strokePath()}}if(F.showPositions&&!T.isStatic){var b=T.position.x,Q=T.position.y,K=Math.ceil(F.positionSize/2);E.fillStyle(F.positionColor,1),E.fillRect(b-K,Q-K,F.positionSize,F.positionSize)}return this},renderConvexHull:function(T,E,S,C){C===void 0&&(C=1);var P=T.parts,R=P.length;if(R>1){var M=T.vertices;E.lineStyle(C,S),E.beginPath(),E.moveTo(M[0].x,M[0].y);for(var L=1;L<M.length;L++)E.lineTo(M[L].x,M[L].y);E.lineTo(M[0].x,M[0].y),E.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,E=s.allConstraints(this.localWorld),S=0;S<E.length;S++){var C=E[S].render,P=C.lineColor,R=C.lineOpacity,M=C.lineThickness,L=C.pinSize,F=C.anchorColor,I=C.anchorSize;this.renderConstraint(E[S],T,P,R,M,L,F,I)}},renderConstraint:function(T,E,S,C,P,R,M,L){var F=T.render;if(!F.visible||!T.pointA||!T.pointB)return this;E.lineStyle(P,S,C);var I=T.bodyA,w=T.bodyB,U,z;if(I?U=x.add(I.position,T.pointA):U=T.pointA,F.type==="pin")E.strokeCircle(U.x,U.y,R);else{if(w?z=x.add(w.position,T.pointB):z=T.pointB,E.beginPath(),E.moveTo(U.x,U.y),F.type==="spring")for(var W=x.sub(z,U),H=x.perp(x.normalise(W)),D=Math.ceil(o.clamp(T.length/5,12,20)),O,B=1;B<D;B+=1)O=B%2===0?1:-1,E.lineTo(U.x+W.x*(B/D)+H.x*O*4,U.y+W.y*(B/D)+H.y*O*4);E.lineTo(z.x,z.y)}return E.strokePath(),F.anchors&&L>0&&(E.fillStyle(M),E.fillCircle(U.x,U.y,L),E.fillCircle(z.x,z.y,L)),this},resetCollisionIDs:function(){return f._nextCollidingGroupId=1,f._nextNonCollidingGroupId=-1,f._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),g.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});i.exports=A},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(i,m,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(540),f=t(0),a=t(20),o=new f({Extends:e,initialize:function(n,r,u){e.call(this,r),this.scene=n,this.systems=n.sys,this.pluginKey=u,n.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Canvas:t(369),WebGL:t(383)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(107),f=t(17),a={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(92),f=t(17),a={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(198),a=t(2),o=t(1411),s=t(382),n=t(58),r=new e({Extends:n,initialize:function(h){h.renderTarget=a(h,"renderTarget",1),h.fragShader=a(h,"fragShader",o),h.vertShader=a(h,"vertShader",s),h.attributes=a(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),h.batchSize=1,h.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,h),this.isPostFX=!0,this.gameObject,this.colorMatrix=new f,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){n.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(u){this.bindAndDraw(u)},copyFrame:function(u,h,l,d,v){this.manager.copyFrame(u,h,l,d,v)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,h,l){this.manager.drawFrame(u,h,l,this.colorMatrix)},blendFrames:function(u,h,l,d,v){this.manager.blendFrames(u,h,l,d,v)},blendFramesAdditive:function(u,h,l,d,v){this.manager.blendFramesAdditive(u,h,l,d,v)},clearFrame:function(u,h){this.manager.clearFrame(u,h)},blitFrame:function(u,h,l,d,v,c){this.manager.blitFrame(u,h,l,d,v,c)},copyFrameRect:function(u,h,l,d,v,c,g,x){this.manager.copyFrameRect(u,h,l,d,v,c,g,x)},bindAndDraw:function(u,h,l,d,v){l===void 0&&(l=!0),d===void 0&&(d=!0);var c=this.gl,g=this.renderer;this.bind(v),this.set1i("uMainSampler",0),h?(c.viewport(0,0,h.width,h.height),c.bindFramebuffer(c.FRAMEBUFFER,h.framebuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,h.texture,0),l&&(d?c.clearColor(0,0,0,0):c.clearColor(0,0,0,1),c.clear(c.COLOR_BUFFER_BIT))):(g.popFramebuffer(!1,!1,!1),g.currentFramebuffer||c.viewport(0,0,g.width,g.height)),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.texture),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),h?(c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null)):g.resetTextures()}});i.exports=r},function(i,m){i.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(201),a={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};a=e(!1,a,f.CENTER),a=e(!1,a,f.ORIENTATION),a=e(!1,a,f.SCALE_MODE),a=e(!1,a,f.ZOOM),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),f=t(17),a={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),a=t(20),o=t(2),s=t(24),n=new f({initialize:function(u){this.scene=u,this.systems=u.sys,this.settings=u.sys.settings,this.key=u.sys.settings.key,this.manager=u.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,u.sys.events.once(a.BOOT,this.boot,this),u.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",r,u),this},restart:function(r){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,r),this},transition:function(r){r===void 0&&(r={});var u=o(r,"target",!1),h=this.manager.getScene(u);if(!u||!this.checkValidTransition(h))return!1;var l=o(r,"duration",1e3);this._elapsed=0,this._target=h,this._duration=l,this._willSleep=o(r,"sleep",!1),this._willRemove=o(r,"remove",!1);var d=o(r,"onUpdate",null);d&&(this._onUpdate=d,this._onUpdateScope=o(r,"onUpdateScope",this.scene));var v=o(r,"allowInput",!1);this.settings.transitionAllowInput=v;var c=h.sys.settings;return c.isTransition=!0,c.transitionFrom=this.scene,c.transitionDuration=l,c.transitionAllowInput=v,o(r,"moveAbove",!1)?this.manager.moveAbove(this.key,u):o(r,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),h.sys.isSleeping()?h.sys.wake(o(r,"data")):this.manager.start(u,o(r,"data")),this.systems.events.emit(a.TRANSITION_OUT,h,l),this.systems.events.on(a.UPDATE,this.step,this),!0},checkValidTransition:function(r){return!(!r||r.sys.isActive()||r.sys.isTransitioning()||r===this.scene||this.systems.isTransitioning())},step:function(r,u){this._elapsed+=u,this.transitionProgress=e(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var r=this._target.sys,u=this._target.sys.settings;this.systems.events.off(a.UPDATE,this.step,this),r.events.emit(a.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(r,u,h,l){return this.manager.add(r,u,h,l)},launch:function(r,u){return r&&r!==this.key&&this.manager.queueOp("start",r,u),this},run:function(r,u){return r&&r!==this.key&&this.manager.queueOp("run",r,u),this},pause:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("pause",r,u),this},resume:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("resume",r,u),this},sleep:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("sleep",r,u),this},wake:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("wake",r,u),this},switch:function(r){return r!==this.key&&this.manager.queueOp("switch",this.key,r),this},stop:function(r,u){return r===void 0&&(r=this.key),this.manager.queueOp("stop",r,u),this},setActive:function(r,u,h){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setActive(r,h),this},setVisible:function(r,u){u===void 0&&(u=this.key);var h=this.manager.getScene(u);return h&&h.sys.setVisible(r),this},isSleeping:function(r){return r===void 0&&(r=this.key),this.manager.isSleeping(r)},isActive:function(r){return r===void 0&&(r=this.key),this.manager.isActive(r)},isPaused:function(r){return r===void 0&&(r=this.key),this.manager.isPaused(r)},isVisible:function(r){return r===void 0&&(r=this.key),this.manager.isVisible(r)},swapPosition:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.swapPosition(r,u),this},moveAbove:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.moveAbove(r,u),this},moveBelow:function(r,u){return u===void 0&&(u=this.key),r!==u&&this.manager.moveBelow(r,u),this},remove:function(r){return r===void 0&&(r=this.key),this.manager.remove(r),this},moveUp:function(r){return r===void 0&&(r=this.key),this.manager.moveUp(r),this},moveDown:function(r){return r===void 0&&(r=this.key),this.manager.moveDown(r),this},bringToTop:function(r){return r===void 0&&(r=this.key),this.manager.bringToTop(r),this},sendToBack:function(r){return r===void 0&&(r=this.key),this.manager.sendToBack(r),this},get:function(r){return this.manager.getScene(r)},getIndex:function(r){return r===void 0&&(r=this.key),this.manager.getIndex(r)},shutdown:function(){var r=this.systems.events;r.off(a.SHUTDOWN,this.shutdown,this),r.off(a.POST_UPDATE,this.step,this),r.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});s.register("ScenePlugin",n,"scenePlugin"),i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(1417),a={CanvasTexture:t(423),Events:t(106),FilterMode:f,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};a=e(!1,a,f),i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(1419),a={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};a=e(!1,a,f.ORIENTATION),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ORIENTATION:t(29)};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(63),a=function(o,s,n,r,u,h,l,d){l===void 0&&(l=!0),o<0&&(o=0),s<0&&(s=0);for(var v=e(o,s,n,r,null,d),c=u-o,g=h-s,x=0;x<v.length;x++){var A=v[x].x+c,T=v[x].y+g;A>=0&&A<d.width&&T>=0&&T<d.height&&d.data[T][A]&&d.data[T][A].copy(v[x])}l&&f(u-1,h-1,n+2,r+2,d)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(542),a=function(o,s,n,r,u,h){n||(n={}),Array.isArray(o)||(o=[o]);var l=h.tilemapLayer;r||(r=l.scene),u||(u=r.cameras.main);var d=e(0,0,h.width,h.height,null,h),v=[],c;for(c=0;c<d.length;c++){var g=d[c];if(o.indexOf(g.index)!==-1){var x=l.tileToWorldXY(g.x,g.y,void 0,u,h);n.x=x.x,n.y=x.y,v.push(r.make.sprite(n))}}if(typeof s=="number")for(c=0;c<o.length;c++)f(o[c],s,0,0,h.width,h.height,h);else if(Array.isArray(s))for(c=0;c<o.length;c++)f(o[c],s[c],0,0,h.width,h.height,h);return v};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(63),a=t(72),o=function(s,n,r,u,h,l,d){for(var v=d.collideIndexes.indexOf(s)!==-1,c=e(n,r,u,h,null,d),g=0;g<c.length;g++)c[g].index=s,a(c[g],v);l&&f(n-1,r-1,u+2,h+2,d)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u,h,l){var d=e(s,n,r,u,h,l);return d.filter(a,o)};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){f===void 0&&(f=0),a===void 0&&(a=!1);var s=0,n,r,u;if(a){for(r=o.height-1;r>=0;r--)for(n=o.width-1;n>=0;n--)if(u=o.data[r][n],u&&u.index===e){if(s===f)return u;s+=1}}else for(r=0;r<o.height;r++)for(n=0;n<o.width;n++)if(u=o.data[r][n],u&&u.index===e){if(s===f)return u;s+=1}return null};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u,h,l){var d=e(s,n,r,u,h,l);return d.find(a,o)||null};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u,h,l){var d=e(s,n,r,u,h,l);d.forEach(a,o)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(544),a=t(545),o=t(547),s=t(1),n=t(548),r=function(u){return u===e.ORTHOGONAL?f:u===e.HEXAGONAL?a:u===e.STAGGERED?n:u===e.ISOMETRIC?o:s};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),f=t(3),a=new f,o=function(s,n,r,u,h){return h.tilemapLayer.worldToTileXY(s,n,!0,a,u),e(a.x,a.y,r,h)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(483),f=t(26),a=t(484),o=t(1),s=t(3),n=function(d,v){return a.RectangleToTriangle(v,d)},r=new s,u=new s,h=new s,l=function(d,v,c,g){if(d===void 0)return[];var x=o;d instanceof e.Circle?x=a.CircleToRectangle:d instanceof e.Rectangle?x=a.RectangleToRectangle:d instanceof e.Triangle?x=n:d instanceof e.Line&&(x=a.LineToRectangle),g.tilemapLayer.worldToTileXY(d.left,d.top,!0,u,c);var A=u.x,T=u.y;g.tilemapLayer.worldToTileXY(d.right,d.bottom,!0,h,c);var E=Math.ceil(h.x),S=Math.ceil(h.y),C=Math.max(E-A,1),P=Math.max(S-T,1),R=f(A,T,C,P,v,g),M=g.tileWidth,L=g.tileHeight;g.tilemapLayer&&(M*=g.tilemapLayer.scaleX,L*=g.tilemapLayer.scaleY);for(var F=[],I=new e.Rectangle(0,0,M,L),w=0;w<R.length;w++){var U=R[w];g.tilemapLayer.tileToWorldXY(U.x,U.y,r,c),I.x=r.x,I.y=r.y,x(d,I)&&F.push(U)}return F};i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(1),a=t(253),o=function(s){return s===e.ORTHOGONAL?a:f};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(550),a=t(551),o=t(1),s=t(552),n=t(553),r=function(u){return u===e.ORTHOGONAL?n:u===e.ISOMETRIC?a:u===e.HEXAGONAL?f:u===e.STAGGERED?s:o};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(554),a=t(1),o=t(555),s=t(254),n=function(r){return r===e.ORTHOGONAL?s:r===e.HEXAGONAL?f:r===e.STAGGERED?o:a};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(1),a=t(255),o=function(s){return s===e.ORTHOGONAL?a:f};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(556),a=t(557),o=t(1),s=t(558),n=t(559),r=function(u){return u===e.ORTHOGONAL?n:u===e.ISOMETRIC?a:u===e.HEXAGONAL?f:u===e.STAGGERED?s:o};i.exports=r},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(560),a=t(1),o=t(561),s=t(256),n=function(r){return r===e.ORTHOGONAL?s:r===e.HEXAGONAL?f:r===e.STAGGERED?o:a};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(562),f=t(3),a=new f,o=function(s,n,r,u){u.tilemapLayer.worldToTileXY(s,n,!0,a,r);var h=a.x,l=a.y;return e(h,l,u)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(257),f=t(3),a=new f,o=function(s,n,r,u,h,l){return l.tilemapLayer.worldToTileXY(n,r,!0,a,h,l),e(s,a.x,a.y,u,l)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(63),f=t(257),a=function(o,s,n,r,u){if(r===void 0&&(r=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var h=o.length,l=o[0].length,d=0;d<h;d++)for(var v=0;v<l;v++){var c=o[d][v];f(c,s+v,n+d,!1,u)}r&&e(s-1,n-1,l+2,h+2,u)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(210),a=function(o,s,n,r,u,h){var l,d=e(o,s,n,r,{},h);if(!u)for(u=[],l=0;l<d.length;l++)u.indexOf(d[l].index)===-1&&u.push(d[l].index);for(l=0;l<d.length;l++)d[l].index=f(u)};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(563),f=t(3),a=new f,o=function(s,n,r,u,h,l){return l.tilemapLayer.worldToTileXY(s,n,!0,a,h,l),e(a.x,a.y,r,u,l)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(397),a=new f(105,210,231,150),o=new f(243,134,48,200),s=new f(40,39,37,150),n=function(r,u,h){u===void 0&&(u={});var l=u.tileColor!==void 0?u.tileColor:a,d=u.collidingTileColor!==void 0?u.collidingTileColor:o,v=u.faceColor!==void 0?u.faceColor:s,c=e(0,0,h.width,h.height,null,h);r.translateCanvas(h.tilemapLayer.x,h.tilemapLayer.y),r.scaleCanvas(h.tilemapLayer.scaleX,h.tilemapLayer.scaleY);for(var g=0;g<c.length;g++){var x=c[g],A=x.width,T=x.height,E=x.pixelX,S=x.pixelY,C=x.collides?d:l;C!==null&&(r.fillStyle(C.color,C.alpha/255),r.fillRect(E,S,A,T)),E+=1,S+=1,A-=2,T-=2,v!==null&&(r.lineStyle(1,v.color,v.alpha/255),x.faceTop&&r.lineBetween(E,S,E+A,S),x.faceRight&&r.lineBetween(E+A,S,E+A,S+T),x.faceBottom&&r.lineBetween(E,S+T,E+A,S+T),x.faceLeft&&r.lineBetween(E,S,E,S+T))}};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),a=t(160),o=function(s,n,r,u,h){n===void 0&&(n=!0),r===void 0&&(r=!0),h===void 0&&(h=!0),Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++)a(s[l],n,u);if(h)for(var d=0;d<u.height;d++)for(var v=0;v<u.width;v++){var c=u.data[d][v];c&&s.indexOf(c.index)!==-1&&e(c,n)}r&&f(0,0,u.width,u.height,u)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),a=t(160),o=function(s,n,r,u,h,l){if(r===void 0&&(r=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),!(s>n)){for(var d=s;d<=n;d++)a(d,r,h);if(l)for(var v=0;v<h.height;v++)for(var c=0;c<h.width;c++){var g=h.data[v][c];g&&g.index>=s&&g.index<=n&&e(g,r)}u&&f(0,0,h.width,h.height,h)}};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),a=t(160),o=function(s,n,r,u){n===void 0&&(n=!0),r===void 0&&(r=!0),Array.isArray(s)||(s=[s]);for(var h=0;h<u.height;h++)for(var l=0;l<u.width;l++){var d=u.data[h][l];d&&s.indexOf(d.index)===-1&&(e(d,n),a(d.index,n,u))}r&&f(0,0,u.width,u.height,u)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),a=t(126),o=function(s,n,r,u){n===void 0&&(n=!0),r===void 0&&(r=!0);for(var h=0;h<u.height;h++)for(var l=0;l<u.width;l++){var d=u.data[h][l];if(!!d){for(var v in s)if(!!a(d.properties,v)){var c=s[v];Array.isArray(c)||(c=[c]);for(var g=0;g<c.length;g++)d.properties[v]===c[g]&&e(d,n)}}}r&&f(0,0,u.width,u.height,u)};i.exports=o},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),a=function(o,s,n){o===void 0&&(o=!0),s===void 0&&(s=!0);for(var r=0;r<n.height;r++)for(var u=0;u<n.width;u++){var h=n.data[r][u];if(!!h){var l=h.getCollisionGroup();l&&l.objects&&l.objects.length>0&&e(h,o)}}s&&f(0,0,n.width,n.height,n)};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,a,o){if(typeof e=="number")o.callbacks[e]=f!==null?{callback:f,callbackContext:a}:void 0;else for(var s=0,n=e.length;s<n;s++)o.callbacks[e[s]]=f!==null?{callback:f,callbackContext:a}:void 0};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u,h){for(var l=e(a,o,s,n,null,h),d=0;d<l.length;d++)l[d].setCollisionCallback(r,u)};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(131),a=function(o,s,n,r,u){var h=e(o,s,n,r,null,u),l=h.map(function(v){return v.index});f(l);for(var d=0;d<h.length;d++)h[d].index=l[d]};i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u,h){for(var l=e(s,n,r,u,null,h),d=0;d<l.length;d++)l[d]&&(l[d].index===a?l[d].index=o:l[d].index===o&&(l[d].index=a))};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(a,o,s,n,r,u){if(!!r){var h,l=e(a,o,s,n,null,u),d=0;for(h=0;h<r.length;h++)d+=r[h].weight;if(!(d<=0))for(h=0;h<l.length;h++){for(var v=Math.random()*d,c=0,g=-1,x=0;x<r.length;x++)if(c+=r[x].weight,v<=c){var A=r[x].index;g=Array.isArray(A)?A[Math.floor(Math.random()*A.length)]:A;break}l[h].index=g}}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var a=0;a<e.length;a++){var o=e[a],s=a;if(o.name&&o.name!==""&&(s=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var n={},r={},u,h,l;if(Array.isArray(o.edgecolors))for(u=0;u<o.edgecolors.length;u++)l=1+u,h=o.edgecolors[u],h.name!==""&&(n[l]=h.name);if(Array.isArray(o.cornercolors))for(u=0;u<o.cornercolors.length;u++)l=1+u,h=o.cornercolors[u],h.name!==""&&(r[l]=h.name);if(Array.isArray(o.colors))for(u=0;u<o.colors.length;u++)h=o.colors[u],l=1+u,h.name!==""&&(n[l]=r[l]=h.name);for(var d=[n,r,n,r,n,r,n,r],v=0;v<o.wangtiles.length;v++){var c=o.wangtiles[v],g=f[c.tileid]||(f[c.tileid]={});g=g.wangid||(g.wangid={});for(var x=[],A=0;A<Math.min(d.length,c.wangid.length);A++){if(h=c.wangid[A],h===0){x.push(void 0);continue}var T=d[A][h];if(T!==void 0){x.push(T);continue}x.push(h)}g[s]=x}}}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1457),f=t(1458),i.exports={renderWebGL:e,renderCanvas:f}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(a,o,s){var n=o.cull(s),r=n.length,u=s.alpha*o.alpha;if(!(r===0||u<=0)){var h=o.gidMap,l=a.pipelines.set(o.pipeline,o),d=e.getTintAppendFloatAlpha,v=o.scrollFactorX,c=o.scrollFactorY,g=o.x,x=o.y,A=o.scaleX,T=o.scaleY;a.pipelines.preBatch(o);for(var E=0;E<r;E++){var S=n[E],C=h[S.index];if(!!C){var P=C.getTileTextureCoordinates(S.index);if(P!==null){var R=C.glTexture,M=l.setTexture2D(R,o),L=C.tileWidth,F=C.tileHeight,I=P.x,w=P.y,U=C.tileWidth*.5,z=C.tileHeight*.5,W=d(S.tint,u*S.alpha);l.batchTexture(o,R,R.width,R.height,g+(U+S.pixelX)*A,x+(z+S.pixelY)*T,S.width,S.height,A,T,S.rotation,S.flipX,S.flipY,v,c,U,z,I,w,L,F,W,W,W,W,!1,0,0,s,null,!0,M)}}}a.pipelines.postBatch(o)}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=new e,a=new e,o=new e,s=function(n,r,u,h){var l=r.cull(u),d=l.length,v=u.alpha*r.alpha;if(!(d===0||v<=0)){var c=f,g=a,x=o;g.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),c.copyFrom(u.matrix);var A=n.currentContext,T=r.gidMap;A.save(),h?(c.multiplyWithOffset(h,-u.scrollX*r.scrollFactorX,-u.scrollY*r.scrollFactorY),g.e=r.x,g.f=r.y,c.multiply(g,x),x.copyToContext(A)):(g.e-=u.scrollX*r.scrollFactorX,g.f-=u.scrollY*r.scrollFactorY,g.copyToContext(A)),(!n.antialias||r.scaleX>1||r.scaleY>1)&&(A.imageSmoothingEnabled=!1);for(var E=0;E<d;E++){var S=l[E],C=T[S.index];if(!!C){var P=C.image.getSourceImage(),R=C.getTileTextureCoordinates(S.index);if(R!==null){var M=C.tileWidth,L=C.tileHeight,F=M*.5,I=L*.5;A.save(),A.translate(S.pixelX+F,S.pixelY+I),S.rotation!==0&&A.rotate(S.rotation),(S.flipX||S.flipY)&&A.scale(S.flipX?-1:1,S.flipY?-1:1),A.globalAlpha=v*S.alpha,A.drawImage(P,R.x,R.y,M,L,-F,-I,M,L),A.restore()}}}A.restore()}};i.exports=s},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(262);e.register("tilemap",function(a){var o=a!==void 0?a:{};return f(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(262);e.register("tilemap",function(a,o,s,n,r,u,h){return a===null&&(a=void 0),o===null&&(o=void 0),s===null&&(s=void 0),n===null&&(n=void 0),r===null&&(r=void 0),f(this.scene,a,o,s,n,r,u,h)})},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Clock:t(1462),TimerEvent:t(582)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(24),a=t(20),o=t(582),s=t(93),n=new e({initialize:function(u){this.scene=u,this.systems=u.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],u.sys.events.once(a.BOOT,this.boot,this),u.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(a.PRE_UPDATE,this.preUpdate,this),r.on(a.UPDATE,this.update,this),r.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(r){var u;return r instanceof o?(u=r,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat):u=new o(r),this._pendingInsertion.push(u),u},delayedCall:function(r,u,h,l){return this.addEvent({delay:r,callback:u,args:h,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(r){Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++){var h=r[u];s(this._pendingRemoval,h),s(this._pendingInsertion,h),s(this._active,h)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var r=this._pendingRemoval.length,u=this._pendingInsertion.length;if(!(r===0&&u===0)){var h,l;for(h=0;h<r;h++){l=this._pendingRemoval[h];var d=this._active.indexOf(l);d>-1&&this._active.splice(d,1),l.destroy()}for(h=0;h<u;h++)l=this._pendingInsertion[h],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(r,u){if(this.now=r,!this.paused){u*=this.timeScale;for(var h=0;h<this._active.length;h++){var l=this._active[h];if(!l.paused&&(l.elapsed+=u*l.timeScale,l.elapsed>=l.delay)){var d=l.elapsed-l.delay;l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0?(l.repeatCount--,l.elapsed=d,l.hasDispatched=!1):this._pendingRemoval.push(l)}}}},shutdown:function(){var r;for(r=0;r<this._pendingInsertion.length;r++)this._pendingInsertion[r].destroy();for(r=0;r<this._active.length;r++)this._active[r].destroy();for(r=0;r<this._pendingRemoval.length;r++)this._pendingRemoval[r].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(a.PRE_UPDATE,this.preUpdate,this),u.off(a.UPDATE,this.update,this),u.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});f.register("Clock",n,"time"),i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(100),f=t(17),a={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};a=f(!1,a,e),i.exports=a},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="active"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="repeat"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},function(i,m){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="yoyo"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),f=t(0),a=t(585),o=t(24),s=t(20),n=t(586),r=t(587),u=t(100),h=t(163),l=new f({initialize:function(v){this.scene=v,this.systems=v.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,v.sys.events.once(s.BOOT,this.boot,this),v.sys.events.on(s.START,this.start,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var d=this.systems.events;d.on(s.PRE_UPDATE,this.preUpdate,this),d.on(s.UPDATE,this.update,this),d.once(s.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(d){return r(this,d)},timeline:function(d){var v=r(this,d);return v.paused||(this._add.push(v),this._toProcess++),v},create:function(d){return h(this,d)},add:function(d){var v=h(this,d);return this._add.push(v),this._toProcess++,v},existing:function(d){return this._add.push(d),this._toProcess++,this},addCounter:function(d){var v=a(this,d);return this._add.push(v),this._toProcess++,v},stagger:function(d,v){return n(d,v)},preUpdate:function(){if(this._toProcess!==0){var d=this._destroy,v=this._active,c=this._pending,g,x;for(g=0;g<d.length;g++){x=d[g];var A=v.indexOf(x);A===-1?(A=c.indexOf(x),A>-1&&(x.state=u.REMOVED,c.splice(A,1))):(x.state=u.REMOVED,v.splice(A,1))}for(d.length=0,d=this._add,g=0;g<d.length;g++)x=d[g],x.state===u.PENDING_ADD&&(x.init()?(x.play(),this._active.push(x)):this._pending.push(x));d.length=0,this._toProcess=0}},update:function(d,v){var c=this._active,g;v*=this.timeScale;for(var x=0;x<c.length;x++)g=c[x],g.update(d,v)&&(this._destroy.push(g),this._toProcess++)},remove:function(d){return e(this._add,d),e(this._pending,d),e(this._active,d),e(this._destroy,d),d.state=u.REMOVED,this},makeActive:function(d){if(this._add.indexOf(d)!==-1||this._active.indexOf(d)!==-1)return this;var v=this._pending.indexOf(d);return v!==-1&&this._pending.splice(v,1),this._add.push(d),d.state=u.PENDING_ADD,this._toProcess++,this},each:function(d,v){for(var c=[null],g=1;g<arguments.length;g++)c.push(arguments[g]);for(var x in this.list)c[0]=this.list[x],d.apply(v,c)},getAllTweens:function(){for(var d=this._active,v=[],c=0;c<d.length;c++)v.push(d[c]);return v},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(d,v){v===void 0&&(v=!1);var c=this._active,g,x=[],A,T;for(Array.isArray(d)||(d=[d]),A=0;A<c.length;A++)for(g=c[A],T=0;T<d.length;T++)g.hasTarget(d[T])&&x.push(g);if(v)for(c=this._pending,A=0;A<c.length;A++)for(g=c[A],T=0;T<d.length;T++)g.hasTarget(d[T])&&x.push(g);return x},isTweening:function(d){for(var v=this._active,c,g=0;g<v.length;g++)if(c=v[g],c.hasTarget(d)&&c.isPlaying())return!0;return!1},killAll:function(){for(var d=this.getAllTweens(),v=0;v<d.length;v++)d[v].stop();return this},killTweensOf:function(d){for(var v=this.getTweensOf(d),c=0;c<v.length;c++)v[c].stop();return this},pauseAll:function(){for(var d=this._active,v=0;v<d.length;v++)d[v].pause();return this},resumeAll:function(){for(var d=this._active,v=0;v<d.length;v++)d[v].resume();return this},setGlobalTimeScale:function(d){return this.timeScale=d,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var d=this.systems.events;d.off(s.PRE_UPDATE,this.preUpdate,this),d.off(s.UPDATE,this.update,this),d.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",l,"tweens"),i.exports=l},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(i,m){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(f,a){for(var o=new Uint8Array(f),s=o.length,n=a?"data:"+a+";base64,":"",r=0;r<s;r+=3)n+=t[o[r]>>2],n+=t[(o[r]&3)<<4|o[r+1]>>4],n+=t[(o[r+1]&15)<<2|o[r+2]>>6],n+=t[o[r+2]&63];return s%3===2?n=n.substring(0,n.length-1)+"=":s%3===1&&(n=n.substring(0,n.length-2)+"=="),n};i.exports=e},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=t(18),a=function(o,s,n,r,u){u===void 0&&(u=n);var h=e(o,s,u);return f(h,n,r)};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var a=0;a<f.length;a++)if(!e.hasOwnProperty(f[a]))return!1;return!0};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(a,o){var s=e(a);for(var n in o)s.hasOwnProperty(n)&&(s[n]=o[n]);return s};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.replace(/%([0-9]+)/g,function(a,o){return f[Number(o)-1]})};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===0?e.slice(1):e.slice(0,f-1)+e.slice(f)};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.split("").reverse().join("")};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Arcade:t(1366),Matter:t(1494)}},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e){return this.body.restitution=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var f=0;if(!Array.isArray(e))f=e;else for(var a=0;a<e.length;a++)f|=e[a];return this.body.collisionFilter.mask=f,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,f){Array.isArray(e)||(e=[e]);for(var a=0;a<e.length;a++){var o=e[a].hasOwnProperty("body")?e[a].body:e[a];this.body.setOnCollideWith(o,f)}return this}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),e.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,o){return e.applyForce(this.body,a,o),this},thrust:function(a){var o=this.body.angle;return this._tempVec2.set(a*Math.cos(o),a*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(o),a*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(o),a*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var o=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(o),a*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};i.exports=f},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,f,a){return this.body.friction=e,f!==void 0&&(this.body.frictionAir=f),a!==void 0&&(this.body.frictionStatic=a),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};i.exports=t},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f=t(3),a={setMass:function(o){return e.setMass(this.body,o),this},setDensity:function(o){return e.setDensity(this.body,o),this},centerOfMass:{get:function(){return new f(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};i.exports=a},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};i.exports=t},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),a=t(124),o=t(2),s=t(589),n=t(590),r=t(64),u={setRectangle:function(h,l,d){return this.setBody({type:"rectangle",width:h,height:l},d)},setCircle:function(h,l){return this.setBody({type:"circle",radius:h},l)},setPolygon:function(h,l,d){return this.setBody({type:"polygon",sides:l,radius:h},d)},setTrapezoid:function(h,l,d,v){return this.setBody({type:"trapezoid",width:h,height:l,slope:d},v)},setExistingBody:function(h,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=h;for(var d=0;d<h.parts.length;d++)h.parts[d].gameObject=this;var v=this;if(h.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},l&&(this.world.has(h)&&this.world.remove(h,!0),this.world.add(h)),this._originComponent){var c=h.render.sprite.xOffset,g=h.render.sprite.yOffset,x=h.centerOfMass.x,A=h.centerOfMass.y;if(a(x,.5)&&a(A,.5))this.setOrigin(c+.5,g+.5);else{var T=h.centerOffset.x,E=h.centerOffset.y;this.setOrigin(c+T/this.displayWidth,g+E/this.displayHeight)}}return this},setBody:function(h,l){if(!h)return this;var d;typeof h=="string"&&(h={type:h});var v=o(h,"type","rectangle"),c=o(h,"x",this._tempVec2.x),g=o(h,"y",this._tempVec2.y),x=o(h,"width",this.width),A=o(h,"height",this.height);switch(v){case"rectangle":d=e.rectangle(c,g,x,A,l);break;case"circle":var T=o(h,"radius",Math.max(x,A)/2),E=o(h,"maxSides",25);d=e.circle(c,g,T,l,E);break;case"trapezoid":var S=o(h,"slope",.5);d=e.trapezoid(c,g,x,A,S,l);break;case"polygon":var C=o(h,"sides",5),P=o(h,"radius",Math.max(x,A)/2);d=e.polygon(c,g,C,P,l);break;case"fromVertices":case"fromVerts":var R=o(h,"verts",null);if(R)if(typeof R=="string"&&(R=r.fromPath(R)),this.body&&!this.body.hasOwnProperty("temp"))f.setVertices(this.body,R),d=this.body;else{var M=o(h,"flagInternal",!1),L=o(h,"removeCollinear",.01),F=o(h,"minimumArea",10);d=e.fromVertices(c,g,R,l,M,L,F)}break;case"fromPhysicsEditor":d=s.parseBody(c,g,h,l);break;case"fromPhysicsTracer":d=n.parseBody(c,g,h,l);break}return d&&this.setExistingBody(d,h.addToWorld),this}};i.exports=u},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(272),f=t(165),a=t(166),o={setToSleep:function(){return f.set(this.body,!0),this},setAwake:function(){return f.set(this.body,!1),this},setSleepThreshold:function(s){return s===void 0&&(s=60),this.body.sleepThreshold=s,this},setSleepEvents:function(s,n){return this.setSleepStartEvent(s),this.setSleepEndEvent(n),this},setSleepStartEvent:function(s){if(s){var n=this.world;a.on(this.body,"sleepStart",function(r){n.emit(e.SLEEP_START,r,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(s){if(s){var n=this.world;a.on(this.body,"sleepEnd",function(r){n.emit(e.SLEEP_END,r,this)})}else a.off(this.body,"sleepEnd");return this}};i.exports=o},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="afteradd"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="afterremove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="afterupdate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="beforeadd"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="beforeremove"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="beforeupdate"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collisionactive"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collisionend"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collisionstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragend"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drag"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragstart"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="sleepend"},function(i,m){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="sleepstart"},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f={setStatic:function(a){return e.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};i.exports=f},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f=t(14),a=t(269),o=t(270),s=4,n={x:{get:function(){return this.body.position.x},set:function(r){this._tempVec2.set(r,this.y),e.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(r){this._tempVec2.set(this.x,r),e.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(r){var u=1/this._scaleX,h=1/this._scaleY;this._scaleX=r,this._scaleX===0?this.renderFlags&=~s:this.renderFlags|=s,e.scale(this.body,u,h),e.scale(this.body,r,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(r){var u=1/this._scaleX,h=1/this._scaleY;this._scaleY=r,this._scaleY===0?this.renderFlags&=~s:this.renderFlags|=s,e.scale(this.body,u,h),e.scale(this.body,this._scaleX,r)}},angle:{get:function(){return o(this.body.angle*f.RAD_TO_DEG)},set:function(r){this.rotation=o(r)*f.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(r){this._rotation=a(r),e.setAngle(this.body,this._rotation)}},setPosition:function(r,u){return r===void 0&&(r=0),u===void 0&&(u=r),this._tempVec2.set(r,u),e.setPosition(this.body,this._tempVec2),this},setRotation:function(r){return r===void 0&&(r=0),this._rotation=a(r),e.setAngle(this.body,r),this},setFixedRotation:function(){return e.setInertia(this.body,1/0),this},setAngle:function(r){return r===void 0&&(r=0),this.angle=r,e.setAngle(this.body,this.rotation),this},setScale:function(r,u,h){r===void 0&&(r=1),u===void 0&&(u=r);var l=1/this._scaleX,d=1/this._scaleY;return this._scaleX=r,this._scaleY=u,e.scale(this.body,l,d,h),e.scale(this.body,r,u,h),this}};i.exports=n},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f={setAngularVelocity:function(a){return e.setAngularVelocity(this.body,a),this},setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),e.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),e.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,o){return this._tempVec2.set(a,o),e.setVelocity(this.body,this._tempVec2),this}};i.exports=f},function(i,m,t){var e={};i.exports=e;var f=t(118),a=t(32);(function(){e.create=function(o){var s={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return a.extend(s,!1,o)},e.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},e.update=function(o,s){if(o.extended){var n=s.world,r=f.allBodies(n);o.collisions=o.narrowDetections,o.pairs=s.pairs.list.length,o.bodies=r.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(r.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(i,m,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=t(271),a=t(86),o=t(41),s=t(1392),n=t(84),r=t(0),u=t(118),h=t(591),l=t(128),d=t(273),v=t(50),c=t(1394),g=t(2),x=t(6),A=t(597),T=t(1525),E=t(1526),S=t(1399),C=t(1527),P=t(127),R=t(250),M=t(598),L=t(595),F=t(24),I=t(1400),w=t(599),U=t(274),z=t(20),W=t(592),H=t(83),D=t(64),O=t(1402),B=new r({initialize:function(G){this.scene=G,this.systems=G.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=u,this.detector=d,this.grid=A,this.pair=R,this.pairs=M,this.query=I,this.resolver=w,this.sat=U,this.constraint=l,this.bodies=a,this.composites=h,this.axes=f,this.bounds=n,this.svg=W,this.vector=H,this.vertices=D,this.verts=D,this._tempVec2=H.create(),x(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),x(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),x(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),w._restingThresh=x(this.config,"restingThresh",4),w._restingThreshTangent=x(this.config,"restingThreshTangent",6),w._positionDampen=x(this.config,"positionDampen",.9),w._positionWarming=x(this.config,"positionWarming",.8),w._frictionNormalMultiplier=x(this.config,"frictionNormalMultiplier",5),G.sys.events.once(z.BOOT,this.boot,this),G.sys.events.on(z.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new c(this.world),this.bodyBounds=new s,this.systems.events.once(z.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new c(this.world));var N=this.systems.events;N.on(z.UPDATE,this.world.update,this.world),N.on(z.POST_UPDATE,this.world.postUpdate,this.world),N.once(z.SHUTDOWN,this.shutdown,this)},getConfig:function(){var N=this.systems.game.config.physics,G=this.systems.settings.physics,V=P(g(G,"matter",{}),g(N,"matter",{}));return V},enableAttractorPlugin:function(){return L.register(T),L.use(S,T),this},enableWrapPlugin:function(){return L.register(C),L.use(S,C),this},enableCollisionEventsPlugin:function(){return L.register(E),L.use(S,E),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(N,G){this.world.step(N,G)},containsPoint:function(N,G,V){N=this.getMatterBodies(N);var Y=H.create(G,V),X=I.point(N,Y);return X.length>0},intersectPoint:function(N,G,V){V=this.getMatterBodies(V);var Y=H.create(N,G),X=[],b=I.point(V,Y);return b.forEach(function(Q){X.indexOf(Q)===-1&&X.push(Q)}),X},intersectRect:function(N,G,V,Y,X,b){X===void 0&&(X=!1),b=this.getMatterBodies(b);var Q={min:{x:N,y:G},max:{x:N+V,y:G+Y}},K=[],$=I.region(b,Q,X);return $.forEach(function(Z){K.indexOf(Z)===-1&&K.push(Z)}),K},intersectRay:function(N,G,V,Y,X,b){X===void 0&&(X=1),b=this.getMatterBodies(b);for(var Q=[],K=I.ray(b,H.create(N,G),H.create(V,Y),X),$=0;$<K.length;$++)Q.push(K[$].body);return Q},intersectBody:function(N,G){G=this.getMatterBodies(G);for(var V=[],Y=I.collides(N,G),X=0;X<Y.length;X++){var b=Y[X];b.bodyA===N?V.push(b.bodyB):V.push(b.bodyA)}return V},overlap:function(N,G,V,Y,X){V===void 0&&(V=null),Y===void 0&&(Y=null),X===void 0&&(X=V),Array.isArray(N)||(N=[N]),N=this.getMatterBodies(N),G=this.getMatterBodies(G);for(var b=!1,Q=0;Q<N.length;Q++)for(var K=N[Q],$=I.collides(K,G),Z=0;Z<$.length;Z++){var k=$[Z],J=k.bodyA.id===K.id?k.bodyB:k.bodyA;if(!Y||Y.call(X,K,J,k)){if(b=!0,V)V.call(X,K,J,k);else if(!Y)return!0}}return b},setCollisionCategory:function(N,G){return N=this.getMatterBodies(N),N.forEach(function(V){V.collisionFilter.category=G}),this},setCollisionGroup:function(N,G){return N=this.getMatterBodies(N),N.forEach(function(V){V.collisionFilter.group=G}),this},setCollidesWith:function(N,G){N=this.getMatterBodies(N);var V=0;if(!Array.isArray(G))V=G;else for(var Y=0;Y<G.length;Y++)V|=G[Y];return N.forEach(function(X){X.collisionFilter.mask=V}),this},getMatterBodies:function(N){if(!N)return this.world.getAllBodies();Array.isArray(N)||(N=[N]);for(var G=[],V=0;V<N.length;V++){var Y=N[V].hasOwnProperty("body")?N[V].body:N[V];G.push(Y)}return G},setVelocity:function(N,G,V){N=this.getMatterBodies(N);var Y=this._tempVec2;return Y.x=G,Y.y=V,N.forEach(function(X){o.setVelocity(X,Y)}),this},setVelocityX:function(N,G){N=this.getMatterBodies(N);var V=this._tempVec2;return V.x=G,N.forEach(function(Y){V.y=Y.velocity.y,o.setVelocity(Y,V)}),this},setVelocityY:function(N,G){N=this.getMatterBodies(N);var V=this._tempVec2;return V.y=G,N.forEach(function(Y){V.x=Y.velocity.x,o.setVelocity(Y,V)}),this},setAngularVelocity:function(N,G){return N=this.getMatterBodies(N),N.forEach(function(V){o.setAngularVelocity(V,G)}),this},applyForce:function(N,G){N=this.getMatterBodies(N);var V=this._tempVec2;return N.forEach(function(Y){V.x=Y.position.x,V.y=Y.position.y,o.applyForce(Y,V,G)}),this},applyForceFromPosition:function(N,G,V,Y){N=this.getMatterBodies(N);var X=this._tempVec2;return N.forEach(function(b){Y===void 0&&(Y=b.angle),X.x=V*Math.cos(Y),X.y=V*Math.sin(Y),o.applyForce(b,G,X)}),this},applyForceFromAngle:function(N,G,V){N=this.getMatterBodies(N);var Y=this._tempVec2;return N.forEach(function(X){V===void 0&&(V=X.angle),Y.x=G*Math.cos(V),Y.y=G*Math.sin(V),o.applyForce(X,{x:X.position.x,y:X.position.y},Y)}),this},getConstraintLength:function(N){var G=N.pointA.x,V=N.pointA.y,Y=N.pointB.x,X=N.pointB.y;return N.bodyA&&(G+=N.bodyA.position.x,V+=N.bodyA.position.y),N.bodyB&&(Y+=N.bodyB.position.x,X+=N.bodyB.position.y),v(G,V,Y,X)},alignBody:function(N,G,V,Y){N=N.hasOwnProperty("body")?N.body:N;var X;switch(Y){case e.TOP_LEFT:case e.LEFT_TOP:X=this.bodyBounds.getTopLeft(N,G,V);break;case e.TOP_CENTER:X=this.bodyBounds.getTopCenter(N,G,V);break;case e.TOP_RIGHT:case e.RIGHT_TOP:X=this.bodyBounds.getTopRight(N,G,V);break;case e.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(N,G,V);break;case e.CENTER:X=this.bodyBounds.getCenter(N,G,V);break;case e.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(N,G,V);break;case e.LEFT_BOTTOM:case e.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(N,G,V);break;case e.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(N,G,V);break;case e.BOTTOM_RIGHT:case e.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(N,G,V);break}return X&&o.setPosition(N,X),this},shutdown:function(){var N=this.systems.events;this.world&&(N.off(z.UPDATE,this.world.update,this.world),N.off(z.POST_UPDATE,this.world.postUpdate,this.world)),N.off(z.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(z.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",B,"matterPhysics"),i.exports=B},function(i,m,t){var e=t(594),f={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(a){a.after("Body.create",function(){f.Body.init(this)}),a.before("Engine.update",function(o){f.Engine.update(o)})},Body:{init:function(a){a.plugin.attractors=a.plugin.attractors||[]}},Engine:{update:function(a){for(var o=e.Composite.allBodies(a.world),s=0;s<o.length;s++){var n=o[s],r=n.plugin.attractors;if(r&&r.length>0)for(var u=0;u<o.length;u++){var h=o[u];if(s!==u)for(var l=0;l<r.length;l++){var d=r[l],v=d;e.Common.isFunction(d)&&(v=d(n,h)),v&&e.Body.applyForce(h,h.position,v)}}}}},Attractors:{gravityConstant:.001,gravity:function(a,o){var s=e.Vector.sub(o.position,a.position),n=e.Vector.magnitudeSquared(s)||1e-4,r=e.Vector.normalise(s),u=-f.Attractors.gravityConstant*(a.mass*o.mass/n),h=e.Vector.mult(r,u);e.Body.applyForce(a,a.position,e.Vector.neg(h)),e.Body.applyForce(o,o.position,h)}}};i.exports=f},function(i,m){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(f){f.pairs.map(function(a){var o=a.bodyA,s=a.bodyB;o.gameObject&&o.gameObject.emit("collide",o,s,a),s.gameObject&&s.gameObject.emit("collide",s,o,a),e.Events.trigger(o,"onCollide",{pair:a}),e.Events.trigger(s,"onCollide",{pair:a}),o.onCollideCallback&&o.onCollideCallback(a),s.onCollideCallback&&s.onCollideCallback(a),o.onCollideWith[s.id]&&o.onCollideWith[s.id](s,a),s.onCollideWith[o.id]&&s.onCollideWith[o.id](o,a)})}),e.Events.on(this,"collisionActive",function(f){f.pairs.map(function(a){var o=a.bodyA,s=a.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,s,a),s.gameObject&&s.gameObject.emit("collideActive",s,o,a),e.Events.trigger(o,"onCollideActive",{pair:a}),e.Events.trigger(s,"onCollideActive",{pair:a}),o.onCollideActiveCallback&&o.onCollideActiveCallback(a),s.onCollideActiveCallback&&s.onCollideActiveCallback(a)})}),e.Events.on(this,"collisionEnd",function(f){f.pairs.map(function(a){var o=a.bodyA,s=a.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,s,a),s.gameObject&&s.gameObject.emit("collideEnd",s,o,a),e.Events.trigger(o,"onCollideEnd",{pair:a}),e.Events.trigger(s,"onCollideEnd",{pair:a}),o.onCollideEndCallback&&o.onCollideEndCallback(a),s.onCollideEndCallback&&s.onCollideEndCallback(a)})})})}};i.exports=t},function(i,m,t){var e=t(594),f={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(a){a.after("Engine.update",function(){f.Engine.update(this)})},Engine:{update:function(a){for(var o=a.world,s=e.Composite.allBodies(o),n=e.Composite.allComposites(o),r=0;r<s.length;r+=1){var u=s[r];u.plugin.wrap&&f.Body.wrap(u,u.plugin.wrap)}for(r=0;r<n.length;r+=1){var h=n[r];h.plugin.wrap&&f.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(a,o){var s=null,n=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(a.min.x>o.max.x?s=o.min.x-a.max.x:a.max.x<o.min.x&&(s=o.max.x-a.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(a.min.y>o.max.y?n=o.min.y-a.max.y:a.max.y<o.min.y&&(n=o.max.y-a.min.y)),s!==null||n!==null)return{x:s||0,y:n||0}}},Body:{wrap:function(a,o){var s=f.Bounds.wrap(a.bounds,o);return s&&e.Body.translate(a,s),s}},Composite:{bounds:function(a){for(var o=e.Composite.allBodies(a),s=[],n=0;n<o.length;n+=1){var r=o[n];s.push(r.bounds.min,r.bounds.max)}return e.Bounds.create(s)},wrap:function(a,o){var s=f.Bounds.wrap(f.Composite.bounds(a),o);return s&&e.Composite.translate(a,s),s}}};i.exports=f},function(i,m,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var f=t(33),a=t(17),o={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};o.Sound=t(1492),o=a(!1,o,f),i.exports=o,e.Phaser=o}).call(this,t(600))}])})})(Tu);const It=Sm(Tu.exports),Cm=300,Pm=16,Mm=3,zo=3,Xo=8,Wo=new It.Math.Vector2(400,650),Ho=new It.Math.Vector2(1500,650);class bo extends It.Physics.Arcade.Sprite{constructor(i,m,t,e,f,a){const o=m?Wo:Ho,s=m?"tanks":"tanks_peer";super(i,o.x,o.y,s,"tank1");Qt(this,"currentSpeed",0);Qt(this,"shadow");Qt(this,"isReverse",!1);Qt(this,"didFire",!1);Qt(this,"health",zo);Qt(this,"isDead",!1);Qt(this,"bulletCount",Xo);Qt(this,"turret");this.scene=i,this.isHostPlayer=m,this.isUserControlled=t,this.cursors=e,this.pointer=f,this.bullets=a,i.add.existing(this),i.physics.add.existing(this),this.setPushable(!1),this.setOrigin(.5,.5);const n={key:"move",frames:this.anims.generateFrameNames(s,{prefix:"tank",start:1,end:6}),frameRate:20,repeat:-1};this.anims.create(n),this.play("move"),this.shadow=this.scene.add.sprite(0,0,s,"shadow"),this.shadow.setOrigin(.5,.5),this.turret=this.scene.add.sprite(0,0,s,"turret"),this.turret.setOrigin(.3,.5),this.shadow.setDepth(1),this.setDepth(2),this.turret.setDepth(3)}reset(){const i=this.isHostPlayer?Wo:Ho;this.setPosition(i.x,i.y),this.isDead=!1,this.health=zo,this.currentSpeed=0,this.shadow.setVisible(!0),this.turret.setVisible(!0),this.setActive(!0),this.setVisible(!0)}takeDamage(){this.health--,this.health<=0&&this.kill()}getIsDead(){return this.isDead}kill(){this.isDead=!0,this.shadow.setVisible(!1),this.turret.setVisible(!1),this.setActive(!1),this.setVisible(!1)}fire(){this.didFire||(this.bulletCount--,this.didFire=!0,this.bullets.fireBullet(this.x,this.y,this.turret.rotation),this.bulletCount<=0?this.scene.time.delayedCall(1200,()=>{this.didFire=!1,this.bulletCount=Xo}):this.scene.time.delayedCall(300,()=>this.didFire=!1))}getCurrentState(){return{position:[this.x,this.y],angle:this.angle,turretRotation:this.turret.rotation,health:0,isDead:this.isDead,attack:this.didFire?Pu.BULLET:void 0}}setTurretRotation(i){this.turret.rotation=i}setAttack(i,m){i&&this.fire()}computePlayerAngle(i,m){let t;return i?t=-1:m?t=1:t=0,this.isReverse&&(t*=-1),this.angle+Mm*t}computePlayerVelocity(i,m){return m||i?(this.currentSpeed=Cm,i?this.isReverse=!0:this.isReverse=!1):this.currentSpeed>0&&(this.currentSpeed-=Pm),this.currentSpeed>0?this.scene.physics.velocityFromRotation(this.rotation,(this.isReverse?-1:1)*this.currentSpeed):(this.isReverse=!1,It.Math.Vector2.ZERO)}computeTurretRotation(i,m){return It.Math.Angle.Between(this.x,this.y,i,m)}preUpdate(i,m){if(super.preUpdate(i,m),this.isUserControlled){this.setAngle(this.computePlayerAngle(this.cursors.LEFT.isDown||this.cursors.A.isDown,this.cursors.RIGHT.isDown||this.cursors.D.isDown));const t=this.computePlayerVelocity(this.cursors.DOWN.isDown||this.cursors.S.isDown,this.cursors.UP.isDown||this.cursors.W.isDown);this.setVelocity(t.x,t.y),this.setAttack(this.pointer.leftButtonDown(),this.pointer.rightButtonDown())}this.shadow.x=this.x,this.shadow.y=this.y,this.shadow.rotation=this.rotation,this.turret.x=this.x,this.turret.y=this.y,this.isUserControlled&&this.setTurretRotation(this.computeTurretRotation(this.scene.input.x,this.scene.input.y))}}let Eu=!1;function hi(){return Eu}function Su(y){Eu=y}class Rm extends It.Physics.Arcade.Group{constructor(p){super(p.physics.world,p),this.createMultiple({classType:Fm,frameQuantity:30,active:!1,visible:!1,key:"bullet"})}setState(p){const i=this.getChildren();for(let m=0;m<p.length;m++){const t=i[m];p[m].visible?(console.log(p[m].rotation),t.setPosition(...p[m].position),t.setRotation(p[m].rotation),t.setActive(!0),t.setVisible(!0)):(t.setActive(!1),t.setVisible(!1))}}getState(){return this.getChildren().map(p=>({rotation:p.rotation,position:[p.x,p.y],visible:p.visible}))}fireBullet(p,i,m){const t=this.getFirstDead(!1);t&&(t.setBounce(1),t.reset(p,i),t.fire(m))}}const Lm=600,Om=2;class Fm extends It.Physics.Arcade.Sprite{constructor(i,m,t){super(i,m,t,"bullet");Qt(this,"userFired",!1);Qt(this,"bounces",0)}onBounceOffWall(){this.bounces===Om?(this.setActive(!1),this.setVisible(!1),this.disableBody(),this.bounces=0,this.userFired=!1):this.bounces++}disable(){this.setActive(!1),this.setVisible(!1),this.disableBody()}reset(i,m){this.enableBody(!0,i,m,!0,!0)}fire(i){this.userFired=!0,this.setRotation(i),this.setActive(!0),this.setVisible(!0),this.scene.physics.velocityFromRotation(this.rotation,Lm,this.body.velocity)}preUpdate(i,m){super.preUpdate(i,m),this.userFired&&this.setRotation(this.body.velocity.angle())}}const Im=""+new URL("grass.3afee45f.png",import.meta.url).href,Dm=-1,Bm=20,Nm=!1,wm=[{compression:"",data:"IQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAAIQAAACEAAAAhAAAA",encoding:"base64",height:20,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:30,x:0,y:0}],Gm=2,Um=1,Vm="orthogonal",Ym="right-down",zm="1.9.1",Xm=32,Wm=[{columns:8,firstgid:1,image:"../tilesets/grass.png",imageheight:256,imagewidth:256,margin:0,name:"grass",spacing:0,tilecount:64,tileheight:32,tiles:[{id:0,properties:[{name:"collides",type:"bool",value:!1}]},{id:1,properties:[{name:"collides",type:"bool",value:!1}]},{id:2,properties:[{name:"collides",type:"bool",value:!1}]},{id:3,properties:[{name:"collides",type:"bool",value:!1}]},{id:4,properties:[{name:"collides",type:"bool",value:!1}]},{id:5,properties:[{name:"collides",type:"bool",value:!1}]},{id:6,properties:[{name:"collides",type:"bool",value:!1}]},{id:7,properties:[{name:"collides",type:"bool",value:!1}]},{id:8,properties:[{name:"collides",type:"bool",value:!1}]},{id:9,properties:[{name:"collides",type:"bool",value:!1}]},{id:10,properties:[{name:"collides",type:"bool",value:!1}]},{id:11,properties:[{name:"collides",type:"bool",value:!1}]},{id:12,properties:[{name:"collides",type:"bool",value:!1}]},{id:13,properties:[{name:"collides",type:"bool",value:!1}]},{id:14,properties:[{name:"collides",type:"bool",value:!1}]},{id:15,properties:[{name:"collides",type:"bool",value:!1}]},{id:16,properties:[{name:"collides",type:"bool",value:!1}]},{id:17,properties:[{name:"collides",type:"bool",value:!1}]},{id:18,properties:[{name:"collides",type:"bool",value:!1}]},{id:19,properties:[{name:"collides",type:"bool",value:!1}]},{id:20,properties:[{name:"collides",type:"bool",value:!1}]},{id:21,properties:[{name:"collides",type:"bool",value:!1}]},{id:22,properties:[{name:"collides",type:"bool",value:!1}]},{id:23,properties:[{name:"collides",type:"bool",value:!1}]},{id:24,properties:[{name:"collides",type:"bool",value:!1}]},{id:25,properties:[{name:"collides",type:"bool",value:!1}]},{id:26,properties:[{name:"collides",type:"bool",value:!1}]},{id:27,properties:[{name:"collides",type:"bool",value:!1}]},{id:28,properties:[{name:"collides",type:"bool",value:!1}]},{id:29,properties:[{name:"collides",type:"bool",value:!1}]},{id:30,properties:[{name:"collides",type:"bool",value:!1}]},{id:31,properties:[{name:"collides",type:"bool",value:!1}]},{id:32,properties:[{name:"collides",type:"bool",value:!0}]},{id:33,properties:[{name:"collides",type:"bool",value:!0}]},{id:34,properties:[{name:"collides",type:"bool",value:!1}]},{id:35,properties:[{name:"collides",type:"bool",value:!1}]},{id:36,properties:[{name:"collides",type:"bool",value:!1}]},{id:37,properties:[{name:"collides",type:"bool",value:!1}]},{id:38,properties:[{name:"collides",type:"bool",value:!1}]},{id:39,properties:[{name:"collides",type:"bool",value:!1}]},{id:40,properties:[{name:"collides",type:"bool",value:!1}]},{id:41,properties:[{name:"collides",type:"bool",value:!1}]},{id:42,properties:[{name:"collides",type:"bool",value:!1}]},{id:43,properties:[{name:"collides",type:"bool",value:!1}]},{id:44,properties:[{name:"collides",type:"bool",value:!1}]},{id:45,properties:[{name:"collides",type:"bool",value:!1}]},{id:46,properties:[{name:"collides",type:"bool",value:!1}]},{id:47,properties:[{name:"collides",type:"bool",value:!1}]},{id:48,properties:[{name:"collides",type:"bool",value:!1}]},{id:49,properties:[{name:"collides",type:"bool",value:!1}]},{id:50,properties:[{name:"collides",type:"bool",value:!1}]},{id:51,properties:[{name:"collides",type:"bool",value:!1}]},{id:52,properties:[{name:"collides",type:"bool",value:!1}]},{id:53,properties:[{name:"collides",type:"bool",value:!1}]},{id:54,properties:[{name:"collides",type:"bool",value:!1}]},{id:55,properties:[{name:"collides",type:"bool",value:!1}]},{id:56,properties:[{name:"collides",type:"bool",value:!1}]},{id:57,properties:[{name:"collides",type:"bool",value:!1}]},{id:58,properties:[{name:"collides",type:"bool",value:!1}]},{id:59,properties:[{name:"collides",type:"bool",value:!1}]},{id:60,properties:[{name:"collides",type:"bool",value:!1}]},{id:61,properties:[{name:"collides",type:"bool",value:!1}]},{id:62,properties:[{name:"collides",type:"bool",value:!1}]},{id:63,properties:[{name:"collides",type:"bool",value:!1}]}],tilewidth:32},{columns:16,firstgid:65,image:"../tilesets/TX Plant.png",imageheight:512,imagewidth:512,margin:0,name:"plant",spacing:0,tilecount:256,tileheight:32,tilewidth:32},{columns:16,firstgid:321,image:"../tilesets/TX Shadow Plant.png",imageheight:512,imagewidth:512,margin:0,name:"shadow plant",spacing:0,tilecount:256,tileheight:32,tilewidth:32},{columns:16,firstgid:577,image:"../tilesets/TX Shadow.png",imageheight:512,imagewidth:512,margin:0,name:"shadow props",spacing:0,tilecount:256,tileheight:32,tilewidth:32}],Hm=32,bm="map",Qm="1.9",Km=30,$m={compressionlevel:Dm,height:Bm,infinite:Nm,layers:wm,nextlayerid:Gm,nextobjectid:Um,orientation:Vm,renderorder:Ym,tiledversion:zm,tileheight:Xm,tilesets:Wm,tilewidth:Hm,type:bm,version:Qm,width:Km},Zm=""+new URL("tanks.f3336ad2.png",import.meta.url).href,Jm=[{filename:"shadow",frame:{x:0,y:0,w:80,h:80},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:80,h:80},sourceSize:{w:80,h:80}},{filename:"tank1",frame:{x:190,y:52,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:5,w:54,h:52},sourceSize:{w:64,h:64}},{filename:"tank2",frame:{x:136,y:52,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:5,w:54,h:52},sourceSize:{w:64,h:64}},{filename:"tank3",frame:{x:80,y:54,w:56,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:4,w:56,h:54},sourceSize:{w:64,h:64}},{filename:"tank4",frame:{x:190,y:0,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:5,w:54,h:52},sourceSize:{w:64,h:64}},{filename:"tank5",frame:{x:136,y:0,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:5,w:54,h:52},sourceSize:{w:64,h:64}},{filename:"tank6",frame:{x:80,y:0,w:56,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:4,w:56,h:54},sourceSize:{w:64,h:64}},{filename:"tracks",frame:{x:48,y:80,w:24,h:12},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:24,h:12},sourceSize:{w:24,h:12}},{filename:"turret",frame:{x:0,y:80,w:48,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:2,w:48,h:28},sourceSize:{w:50,h:32}}],jm={app:"http://www.codeandweb.com/texturepacker ",version:"1.0",image:"tanks.png",format:"RGBA8888",size:{w:244,h:108},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:99b2f74fa157c5b63e72b0d68be078b4:1/1$"},Qo={frames:Jm,meta:jm},km=""+new URL("tanks_peer.dc236668.png",import.meta.url).href,qm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAARCAYAAACW7F9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAytJREFUeNrMV69v20AUfpY8KcCgIMAgYJUCCgMMVlYwMGBSNjA4uP0FI/0TJpUEBAwEBEwa8R9QtoKAgIGAkEkFBgYFByLNlXff+d753SVdsqxT+iTLF/t8et/7vvcjUdM09NztPIqa1K6/NU20zzfRMYBdakcHMRGcTfW9rPWl13N9/y4cZ0BZ3O6DPbb3aMAYzMg6OIg398zX7T0V77KEqJ8nFJ8lVC8VrVeKesPE3FcLokJ/c1dvsvnfgAEIA0iFs+Z3z9+bnBGpZbeG4zCAwTp51Qqxmq7cN7xHFaUDOVYduH8GxnJhBjgXAMQ963VOs1PsdG+QuLPWdy0jvEe+k3sYKKUF1fMLur8pzc/iqqSFZu/6VxPFh4D5+KIFA+fH/c2IY82RlwDYcUgKV6WjbRjJU+MsE4m9MUD132ra3hHVU6oXEwcAWWbA6eewk4vU7H+jzyynygT7YMZkAXD5EEhsOOrAhcZSciBgAFLNqEYA9MWMYU0haM1WizH32Lt5vTCSjHfJLAskxs7nAQgkObMEVsCCieTofRt1GCKsHWerhcPGUcsAvkkGM/c8yey3fI40Gwx3jPYr13KMT22OpEGiD6zMZG5wpOF4uhRn512yt/tb+Zmo00RHeOb5woA8pkx1mHXyS4Ng8B4LfgOkZo6Zhe9GipeWmfxEv7clFyWUWZDSYQBcek1l+kNOGSltKQheDj1mQmZ+ZDr2ID9ZeFAlZ7c7qiKKBPoOADJgUC1Lsle281awJrHhjHYM7HjMSFmysZSYFbxeTHaD1+er29IFT9li9OGL2r/cS8nyJBA2WYDmZor8klWQZYrn20o4s8rMuuDI3JIM8nMbPJwBYFWh6Ko6sI9xRZRFxQMomnEoaek8B8ArMJJlLgyCSS+/bP6hcbftQ1FxT/RJ97EnmzzO7aSRCkAQCeY5OU5liV+QIF8pax6ZZHN2IEWBgVSZpR9flRnHMD8+2eTxN3YqpvTMAsVQG/Y/KWkGCXBcTQGo+rwyYxQAIYCYNo4+3T88/GyG8UsaBaOYHH75edjkITkwNFY8g2yf8qPn+H8slDW3n33/i8F+CzAA9rrASN3GUDAAAAAASUVORK5CYII=";class _m extends It.Scene{constructor(){super("GameScene");Qt(this,"hostPlayer");Qt(this,"peerPlayer");Qt(this,"cursors");Qt(this,"bullets");Qt(this,"worldLayer")}playAgain(){this.hostPlayer.reset(),this.peerPlayer.reset()}syncGameState(i){this.hostPlayer.setAngle(i.hostPlayerState.angle),this.hostPlayer.setPosition(...i.hostPlayerState.position),this.hostPlayer.setTurretRotation(i.hostPlayerState.turretRotation),i.hostPlayerState.isDead&&this.hostPlayer.kill(),this.peerPlayer.setAngle(i.peerPlayerState.angle),this.peerPlayer.setPosition(...i.peerPlayerState.position),this.peerPlayer.setTurretRotation(i.peerPlayerState.turretRotation),i.peerPlayerState.isDead&&this.peerPlayer.kill(),this.bullets.setState(i.bulletState)}syncPeerPlayerState(i){this.peerPlayer.setAngle(this.peerPlayer.computePlayerAngle(i.keys.isLeftPressed,i.keys.isRightPressed));const m=this.peerPlayer.computePlayerVelocity(i.keys.isDownPressed,i.keys.isUpPressed);this.peerPlayer.setVelocity(m.x,m.y),this.peerPlayer.setTurretRotation(this.peerPlayer.computeTurretRotation(...i.mouse.position)),this.peerPlayer.setAttack(i.mouse.leftPressed,i.mouse.rightPressed)}preload(){this.load.image("tiles",Im),this.load.tilemapTiledJSON("map",$m),this.load.atlas("tanks",Zm,Qo),this.load.atlas("tanks_peer",km,Qo),this.load.image("bullet",qm)}create(){const i=this.make.tilemap({key:"map",tileHeight:32,tileWidth:32}),m=i.addTilesetImage("grass","tiles");this.worldLayer=i.createLayer("Tile Layer 1",m,0,0).setScale(2),this.worldLayer.setCollisionByProperty({collides:!0}),this.cursors=this.input.keyboard.addKeys({W:It.Input.Keyboard.KeyCodes.W,S:It.Input.Keyboard.KeyCodes.S,A:It.Input.Keyboard.KeyCodes.A,D:It.Input.Keyboard.KeyCodes.D,UP:It.Input.Keyboard.KeyCodes.UP,DOWN:It.Input.Keyboard.KeyCodes.DOWN,LEFT:It.Input.Keyboard.KeyCodes.LEFT,RIGHT:It.Input.Keyboard.KeyCodes.RIGHT}),this.bullets=new Rm(this),this.initPlayers(),this.initColliders()}initPlayers(){this.hostPlayer=new bo(this,!0,hi(),this.cursors,this.input.activePointer,this.bullets),this.peerPlayer=new bo(this,!1,!1,this.cursors,this.input.activePointer,this.bullets)}initColliders(){this.physics.add.collider(this.peerPlayer,this.worldLayer),this.physics.add.collider(this.hostPlayer,this.worldLayer),hi()&&(this.physics.add.collider(this.bullets,this.peerPlayer,(i,m)=>{m.setVisible(!1),m.setActive(!1),m.disableBody(),this.peerPlayer.takeDamage()}),this.physics.add.collider(this.bullets,this.hostPlayer,(i,m)=>{m.setVisible(!1),m.setActive(!1),m.disableBody(),this.hostPlayer.takeDamage()})),this.physics.add.collider(this.bullets,this.worldLayer,i=>{i.onBounceOffWall()}),this.physics.add.collider(this.hostPlayer,this.peerPlayer)}update(i,m){super.update(i,m),(this.peerPlayer.getIsDead()||this.hostPlayer.getIsDead())&&(Rr.set(!0),hi()?this.peerPlayer.getIsDead()?Ni.set(!0):Ni.set(!1):this.hostPlayer.getIsDead()?Ni.set(!0):Ni.set(!1)),hi()?cg({hostPlayerState:this.hostPlayer.getCurrentState(),peerPlayerState:this.peerPlayer.getCurrentState(),enemyStates:new Map,mapState:{mapGrid:[]},bulletState:this.bullets.getState()}):vg({keys:{isLeftPressed:this.cursors.LEFT.isDown||this.cursors.A.isDown,isUpPressed:this.cursors.UP.isDown||this.cursors.W.isDown,isRightPressed:this.cursors.RIGHT.isDown||this.cursors.D.isDown,isDownPressed:this.cursors.DOWN.isDown||this.cursors.S.isDown},mouse:{position:[this.input.x,this.input.y],leftPressed:this.input.activePointer.leftButtonDown(),rightPressed:this.input.activePointer.rightButtonDown()}})}}const tg=1920,eg=1280,ig={type:It.AUTO,parent:"game",backgroundColor:"#33A5E7",pixelArt:!0,scale:{mode:It.Scale.FIT,autoCenter:It.Scale.CENTER_BOTH,width:tg,height:eg},physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[_m]};let Cu;function ng(){return Cu}function sg(){Cu=new It.Game(ig)}const ri=[];function Da(y,p=oe){let i;const m=new Set;function t(a){if(Ti(y,a)&&(y=a,i)){const o=!ri.length;for(const s of m)s[1](),ri.push(s,y);if(o){for(let s=0;s<ri.length;s+=2)ri[s][0](ri[s+1]);ri.length=0}}}function e(a){t(a(y))}function f(a,o=oe){const s=[a,o];return m.add(s),m.size===1&&(i=p(t)||oe),a(y),()=>{m.delete(s),m.size===0&&(i(),i=null)}}return{set:t,update:e,subscribe:f}}var Pu=(y=>(y[y.BULLET=0]="BULLET",y[y.BOMB=1]="BOMB",y))(Pu||{});let $s;function Ba(){return $s||($s=ng().scene.getScene("GameScene")),$s}function rg(y){Ba().syncGameState(JSON.parse(y))}function ag(y){Ba().syncPeerPlayerState(JSON.parse(y))}function og(){Ba().playAgain()}const Rr=Da(!1),Ni=Da(!1);var Ce=(y=>(y[y.HIDDEN=0]="HIDDEN",y[y.WITH_LOBBY_ID=1]="WITH_LOBBY_ID",y[y.PLAY_AGAIN=2]="PLAY_AGAIN",y))(Ce||{});const es=Da(0),hg={apiKey:"AIzaSyBsCTqTEJxsBYGhShNeOetUxTUTHFF7u0o",authDomain:"svelte-game-43670.firebaseapp.com",projectId:"svelte-game-43670",storageBucket:"svelte-game-43670.appspot.com",messagingSenderId:"409471071554",appId:"1:409471071554:web:b367f616e61129bbcc84db",measurementId:"G-74YW1ZVH2W"};ld().length||od(hg);const lg={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10};let Mu;const Ru=new Promise((y,p)=>{Mu=y}),Lu=rm(),re=ug();function ug(){const y=new RTCPeerConnection(lg);return y.ondatachannel=p=>{p.channel.label===Ou?(Qe=p.channel,hi()||Qe.addEventListener("message",i=>{rg(i.data)})):p.channel.label===Fu&&(Ke=p.channel,hi()&&(Mu(),Ke.addEventListener("message",i=>{ag(i.data)})))},y}const Ou="game_state";let Qe;const Fu="peer_player_state";let Ke;async function fg(){Su(!0),Qe=re.createDataChannel(Ou);const y=Sa(di(Lu,"lobbies")),p=di(y,"offerCandidates"),i=di(y,"answerCandidates"),m=y.id;console.log(m),re.onicecandidate=f=>{f.candidate&&yu(p,f.candidate.toJSON())};const t=await re.createOffer({offerToReceiveAudio:!0});await re.setLocalDescription(t);const e={sdp:t.sdp,type:t.type};return await xm(y,{offer:e}),Mr(y,f=>{const a=f.data();if(!re.currentRemoteDescription&&(a==null?void 0:a.answer)){const o=new RTCSessionDescription(a.answer);re.setRemoteDescription(o)}}),Mr(i,f=>{f.docChanges().forEach(a=>{if(a.type==="added"){const o=new RTCIceCandidate(a.doc.data());re.addIceCandidate(o)}})}),m}async function dg(y){Su(!1),Ke=re.createDataChannel(Fu);const p=Sa(di(Lu,"lobbies"),y),i=di(p,"answerCandidates"),m=di(p,"offerCandidates");re.onicecandidate=o=>{o.candidate&&yu(i,o.candidate.toJSON())};const e=(await gm(p)).data().offer;await re.setRemoteDescription(new RTCSessionDescription(e));const f=await re.createAnswer();await re.setLocalDescription(f);const a={type:f.type,sdp:f.sdp};await ym(p,{answer:a}),Mr(m,o=>{o.docChanges().forEach(s=>{if(console.log(s),s.type==="added"){let n=s.doc.data();re.addIceCandidate(new RTCIceCandidate(n))}})})}function cg(y){(Qe==null?void 0:Qe.readyState)==="open"&&Qe.send(JSON.stringify(y))}function vg(y){(Ke==null?void 0:Ke.readyState)==="open"&&Ke.send(JSON.stringify(y))}function pg(y){let p,i,m,t,e,f,a,o,s,n,r,u,h,l,d;return{c(){p=yt("div"),i=yt("div"),m=yt("div"),t=yt("h2"),t.textContent="Start a new game",e=ue(),f=yt("button"),f.textContent="Create Lobby",a=ue(),o=yt("div"),s=yt("h2"),s.textContent="Join a Lobby",n=ue(),r=yt("input"),u=ue(),h=yt("button"),h.textContent="Join",At(f,"class","btn btn-blue svelte-vqyuew"),At(m,"class","items-center"),At(r,"class","shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),At(r,"type","string"),At(h,"class","btn btn-blue svelte-vqyuew"),At(i,"class","flex-col border-2 p-5 rounded"),At(p,"class","flex items-center justify-center h-screen")},m(v,c){he(v,p,c),ct(p,i),ct(i,m),ct(m,t),ct(m,e),ct(m,f),ct(i,a),ct(i,o),ct(o,s),ct(o,n),ct(o,r),wa(r,y[1]),ct(o,u),ct(o,h),l||(d=[In(f,"click",y[2]),In(r,"input",y[3]),In(h,"click",y[4])],l=!0)},p(v,[c]){c&2&&wa(r,v[1])},i:oe,o:oe,d(v){v&&se(p),l=!1,Ai(d)}}}function mg(y,p,i){let{onLobbyConnected:m}=p,t="";const e=async()=>{i(1,t=await fg()),es.set(Ce.WITH_LOBBY_ID),m(t)};function f(){t=this.value,i(1,t)}const a=()=>{dg(t),es.set(Ce.HIDDEN),m(t,!0)};return y.$$set=o=>{"onLobbyConnected"in o&&i(0,m=o.onLobbyConnected)},[m,t,e,f,a]}class gg extends hn{constructor(p){super(),on(this,p,mg,pg,Ti,{onLobbyConnected:0})}}function xg(y){let p,i;return{c(){p=yt("div"),i=Be(y[0])},m(m,t){he(m,p,t),ct(p,i)},p(m,[t]){t&1&&Lr(i,m[0])},i:oe,o:oe,d(m){m&&se(p)}}}const Ko=5;function yg(y,p,i){let m=Ko;const t=Wu();let e=null;return zu(()=>{const f=Date.now();i(1,e=setInterval(()=>{const o=Date.now()-f,s=Math.floor(o%(1e3*60)/1e3);i(0,m=Ko-s)},100))}),Xu(()=>{e&&clearInterval(e)}),y.$$.update=()=>{y.$$.dirty&3&&m===0&&(clearInterval(e),i(1,e=null),t("completed"))},[m,e]}class Ag extends hn{constructor(p){super(),on(this,p,yg,xg,Ti,{})}}function $o(y){let p,i,m,t,e,f=y[1]?"won!":"lost!",a,o,s,n,r,u;return r=new Ag({}),r.$on("completed",y[2]),{c(){p=yt("div"),i=yt("div"),m=yt("div"),t=yt("h2"),e=Be("You "),a=Be(f),o=ue(),s=yt("h2"),s.textContent="Game restarting in:",n=ue(),is(r.$$.fragment),At(m,"class","items-center"),At(i,"class","flex-col border-2 p-5 rounded"),At(p,"class","flex items-center justify-center h-screen")},m(h,l){he(h,p,l),ct(p,i),ct(i,m),ct(m,t),ct(t,e),ct(t,a),ct(m,o),ct(m,s),ct(m,n),rn(r,m,null),u=!0},p(h,l){(!u||l&2)&&f!==(f=h[1]?"won!":"lost!")&&Lr(a,f)},i(h){u||(ae(r.$$.fragment,h),u=!0)},o(h){ce(r.$$.fragment,h),u=!1},d(h){h&&se(p),an(r)}}}function Tg(y){let p,i,m,t=y[0]&&$o(y);return{c(){t&&t.c(),p=ue(),i=yt("div"),At(i,"id","game")},m(e,f){t&&t.m(e,f),he(e,p,f),he(e,i,f),m=!0},p(e,[f]){e[0]?t?(t.p(e,f),f&1&&ae(t,1)):(t=$o(e),t.c(),ae(t,1),t.m(p.parentNode,p)):t&&(Fr(),ce(t,1,1,()=>{t=null}),Ir())},i(e){m||(ae(t),m=!0)},o(e){ce(t),m=!1},d(e){t&&t.d(e),e&&se(p),e&&se(i)}}}function Eg(y,p,i){let m,t;return Zs(y,Rr,f=>i(0,m=f)),Zs(y,Ni,f=>i(1,t=f)),sg(),[m,t,()=>{Rr.set(!1),og()}]}class Sg extends hn{constructor(p){super(),on(this,p,Eg,Tg,Ti,{})}}function Zo(y){let p,i,m,t,e,f,a,o,s,n,r,u,h,l;function d(x,A){return x[1]===Ce.WITH_LOBBY_ID?Pg:Cg}let v=d(y),c=v(y),g=y[1]===Ce.WITH_LOBBY_ID&&Jo(y);return{c(){p=yt("div"),i=yt("div"),m=ue(),t=yt("div"),e=yt("div"),f=yt("div"),a=yt("div"),o=yt("div"),s=yt("div"),n=yt("h3"),n.textContent="Waiting for other player...",r=ue(),u=yt("div"),h=yt("p"),c.c(),l=ue(),g&&g.c(),At(i,"class","fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"),At(n,"class","text-lg font-medium leading-6 text-gray-900"),At(n,"id","modal-title"),At(h,"class","text-sm text-gray-500"),At(u,"class","mt-2"),At(s,"class","mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"),At(o,"class","sm:flex sm:items-start"),At(a,"class","bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"),At(f,"class","relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"),At(e,"class","flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"),At(t,"class","fixed inset-0 z-10 overflow-y-auto"),At(p,"class","relative z-10"),At(p,"aria-labelledby","modal-title"),At(p,"role","dialog"),At(p,"aria-modal","true")},m(x,A){he(x,p,A),ct(p,i),ct(p,m),ct(p,t),ct(t,e),ct(e,f),ct(f,a),ct(a,o),ct(o,s),ct(s,n),ct(s,r),ct(s,u),ct(u,h),c.m(h,null),ct(f,l),g&&g.m(f,null)},p(x,A){v!==(v=d(x))&&(c.d(1),c=v(x),c&&(c.c(),c.m(h,null))),x[1]===Ce.WITH_LOBBY_ID?g?g.p(x,A):(g=Jo(x),g.c(),g.m(f,null)):g&&(g.d(1),g=null)},d(x){x&&se(p),c.d(),g&&g.d()}}}function Cg(y){let p;return{c(){p=Be("Make sure your friend hits play again!")},m(i,m){he(i,p,m)},d(i){i&&se(p)}}}function Pg(y){let p;return{c(){p=Be("Send your friend the lobby id so the match can begin.")},m(i,m){he(i,p,m)},d(i){i&&se(p)}}}function Jo(y){let p,i,m,t,e,f,a,o;return{c(){p=yt("div"),i=yt("button"),i.innerHTML=`<svg class="fill-white" xmlns="http://www.w3.org/2000/svg" height="48" width="48" style="zoom:0.5;margin-right:10px"><path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"></path></svg>
                Copy`,m=ue(),t=yt("div"),e=yt("div"),f=Be(y[0]),At(i,"type","button"),At(i,"class","inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"),At(e,"class","align-start"),At(p,"class","bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6")},m(s,n){he(s,p,n),ct(p,i),ct(p,m),ct(p,t),ct(t,e),ct(e,f),a||(o=In(i,"click",y[2]),a=!0)},p(s,n){n&1&&Lr(f,s[0])},d(s){s&&se(p),a=!1,o()}}}function Mg(y){let p,i=y[1]!==Ce.HIDDEN&&Zo(y);return{c(){i&&i.c(),p=qo()},m(m,t){i&&i.m(m,t),he(m,p,t)},p(m,[t]){m[1]!==Ce.HIDDEN?i?i.p(m,t):(i=Zo(m),i.c(),i.m(p.parentNode,p)):i&&(i.d(1),i=null)},i:oe,o:oe,d(m){i&&i.d(m),m&&se(p)}}}function Rg(y,p,i){let m;Zs(y,es,f=>i(1,m=f));let{lobbyId:t}=p;function e(){navigator.clipboard.writeText(t)}return Ru.then(()=>{Uu(es,m=Ce.HIDDEN,m)}),y.$$set=f=>{"lobbyId"in f&&i(0,t=f.lobbyId)},[t,m,e]}class Lg extends hn{constructor(p){super(),on(this,p,Rg,Mg,Ti,{lobbyId:0})}}function Og(y){let p,i,m,t;p=new Lg({props:{lobbyId:y[1]}});let e=(y[3]||y[2])&&jo();return{c(){is(p.$$.fragment),i=ue(),e&&e.c(),m=qo()},m(f,a){rn(p,f,a),he(f,i,a),e&&e.m(f,a),he(f,m,a),t=!0},p(f,a){const o={};a&2&&(o.lobbyId=f[1]),p.$set(o),f[3]||f[2]?e?a&12&&ae(e,1):(e=jo(),e.c(),ae(e,1),e.m(m.parentNode,m)):e&&(Fr(),ce(e,1,1,()=>{e=null}),Ir())},i(f){t||(ae(p.$$.fragment,f),ae(e),t=!0)},o(f){ce(p.$$.fragment,f),ce(e),t=!1},d(f){an(p,f),f&&se(i),e&&e.d(f),f&&se(m)}}}function Fg(y){let p,i;return p=new gg({props:{onLobbyConnected:y[4]}}),{c(){is(p.$$.fragment)},m(m,t){rn(p,m,t),i=!0},p:oe,i(m){i||(ae(p.$$.fragment,m),i=!0)},o(m){ce(p.$$.fragment,m),i=!1},d(m){an(p,m)}}}function jo(y){let p,i;return p=new Sg({}),{c(){is(p.$$.fragment)},m(m,t){rn(p,m,t),i=!0},i(m){i||(ae(p.$$.fragment,m),i=!0)},o(m){ce(p.$$.fragment,m),i=!1},d(m){an(p,m)}}}function Ig(y){let p,i,m,t;const e=[Fg,Og],f=[];function a(o,s){return o[0]?1:0}return i=a(y),m=f[i]=e[i](y),{c(){p=yt("main"),m.c()},m(o,s){he(o,p,s),f[i].m(p,null),t=!0},p(o,[s]){let n=i;i=a(o),i===n?f[i].p(o,s):(Fr(),ce(f[n],1,1,()=>{f[n]=null}),Ir(),m=f[i],m?m.p(o,s):(m=f[i]=e[i](o),m.c()),ae(m,1),m.m(p,null))},i(o){t||(ae(m),t=!0)},o(o){ce(m),t=!1},d(o){o&&se(p),f[i].d()}}}function Dg(y,p,i){let m=!1,t="",e=!1,f=!1;function a(o,s=!1){i(0,m=!0),i(1,t=o),i(2,e=s)}return Ru.then(()=>{i(3,f=!0)}),[m,t,e,f,a]}class Bg extends hn{constructor(p){super(),on(this,p,Dg,Ig,Ti,{})}}new Bg({target:document.getElementById("app")});
